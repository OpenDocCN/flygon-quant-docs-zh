- en: Releases
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 发布
- en: 原文：[https://zipline.ml4trading.io/releases.html](https://zipline.ml4trading.io/releases.html)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 原文：[https://zipline.ml4trading.io/releases.html](https://zipline.ml4trading.io/releases.html)
- en: Release 2.0.0rc
  id: totrans-2
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 发布2.0.0rc
- en: 'Release:'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 发布：
- en: 2.0.0rc1
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 2.0.0rc1
- en: 'Date:'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 日期：
- en: April 5, 2021
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 2021年4月5日
- en: Highlights
  id: totrans-7
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 亮点
- en: This release updates Zipline to be compatible with Python >= 3.7 as well as
    the current versions of relevant PyData libraries like Pandas, scikit-learn, and
    others.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 此版本更新了Zipline，使其与Python >= 3.7以及当前版本的Pandas、scikit-learn等相关的PyData库兼容。
- en: '[Conda packages](https://anaconda.org/ml4t/repo) for [Zipline](https://anaconda.org/ml4t/zipline-reloaded)
    and key dependencies [bcolz](https://anaconda.org/ml4t/bcolz-zipline) and [TA-Lib](https://anaconda.org/ml4t/ta-lib)
    are now available for Python 3.7-3.9 on the ‘ml4t’ Anaconda channel. Binary wheels
    are available on [PyPi](https://pypi.org/project/zipline-reloaded/) for Linux
    ( Python 3.7-3.9) and MacOSx (3.7 and 3.8).'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: '[Conda包](https://anaconda.org/ml4t/repo)现在为[Zipline](https://anaconda.org/ml4t/zipline-reloaded)及其关键依赖项[bcolz](https://anaconda.org/ml4t/bcolz-zipline)和[TA-Lib](https://anaconda.org/ml4t/ta-lib)提供Python
    3.7-3.9版本，可在‘ml4t’ Anaconda频道上获取。Linux（Python 3.7-3.9）和MacOSx（3.7和3.8）的二进制轮子可在[PyPi](https://pypi.org/project/zipline-reloaded/)上获取。'
- en: As part of the update, the `BlazeLoader` functionality was removed. It was built
    on the [Blaze Ecosystem](https://blaze.pydata.org/). Unfortunately, the three
    relevant projects ([Blaze](https://blaze.readthedocs.io/en/latest/index.html),
    [Odo](https://odo.readthedocs.io/en/latest/) and [datashape](https://datashape.readthedocs.io/en/latest/)
    have received very limited support over the last several years.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 作为更新的一部分，移除了基于[Blaze生态系统](https://blaze.pydata.org/)的`BlazeLoader`功能。不幸的是，相关的三个项目（[Blaze](https://blaze.readthedocs.io/en/latest/index.html)、[Odo](https://odo.readthedocs.io/en/latest/)和[datashape](https://datashape.readthedocs.io/en/latest/)）在过去几年中得到了非常有限的支持。
- en: 'Other updates include:'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 其他更新包括：
- en: A [new release](https://github.com/stefan-jansen/bcolz-zipline) for [Bcolz](https://github.com/Blosc/bcolz)
    which has been marked unmaintained since September 2020 by the [author](https://github.com/Blosc).
    The new release updates the underlying [c-blosc](https://github.com/Blosc/c-blosc)
    library from version 1.14 to the latest 1.21.0\. There are also conda packages
    for Bcolz (see links above).
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[Bcolz](https://github.com/Blosc/bcolz)自2020年9月以来被标记为不再维护，现在有了一个[新版本](https://github.com/stefan-jansen/bcolz-zipline)，该版本将底层[c-blosc](https://github.com/Blosc/c-blosc)库从1.14版更新到了最新的1.21.0版。此外，还有适用于Bcolz的conda包（见上述链接）。'
- en: '[Networkx](https://networkx.org/) now uses the better performing version 2.0.'
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[Networkx](https://networkx.org/)现在使用性能更好的2.0版。'
- en: Conda packages for TA-Lib 0.4.19.
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Conda包为TA-Lib 0.4.19。
- en: This new release also makes it easier to load custom data sources into a Pipeline
    (such as the predictions of an ML model) when backtesting. See the relevant examples
    in the [Github repo](https://github.com/stefan-jansen/machine-learning-for-trading)
    of the book [Machine Learning for Trading](https://www.amazon.com/Machine-Learning-Algorithmic-Trading-alternative/dp/1839217715/ref=tmm_pap_swatch_0?_encoding=UTF8&qid=1617658040&sr=8-1-spons),
    such as [these ones](https://github.com/stefan-jansen/machine-learning-for-trading/tree/master/08_ml4t_workflow/04_ml4t_workflow_with_zipline).
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 这个新版本还使得在回测时更容易将自定义数据源（如ML模型的预测）加载到Pipeline中。请参阅书籍[Machine Learning for Trading](https://www.amazon.com/Machine-Learning-Algorithmic-Trading-alternative/dp/1839217715/ref=tmm_pap_swatch_0?_encoding=UTF8&qid=1617658040&sr=8-1-spons)的[Github仓库](https://github.com/stefan-jansen/machine-learning-for-trading)中的相关示例，例如[这些](https://github.com/stefan-jansen/machine-learning-for-trading/tree/master/08_ml4t_workflow/04_ml4t_workflow_with_zipline)。
- en: Enhancements
  id: totrans-16
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 增强功能
- en: custom_loader() for custom Pipeline data
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 自定义Pipeline数据的custom_loader()
- en: compatibility with the latest versions of Pandas, scikit-learn, and other relevant
    [PyData](https://pydata.org/) libraries.
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 与最新版本的Pandas、scikit-learn和其他相关[PyData](https://pydata.org/)库的兼容性。
- en: Bug Fixes
  id: totrans-19
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 错误修复
- en: Numerous tests updates to accommodate recent Python and dependency versions.
  id: totrans-20
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 更新了大量测试以适应最近的Python和依赖版本。
- en: Performance
  id: totrans-21
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 性能
- en: Latest blosc library may improve compression and I/O performance
  id: totrans-22
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 最新的blosc库可能会提高压缩和I/O性能
- en: Maintenance and Refactorings
  id: totrans-23
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 维护和重构
- en: Removed Python 2 support
  id: totrans-24
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 移除了对Python 2的支持
- en: Build
  id: totrans-25
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 构建
- en: All builds consolidated on GitHub Actions CI
  id: totrans-26
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 所有构建都整合在GitHub Actions CI上
- en: Documentation
  id: totrans-27
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 文档
- en: Expanded with additional information on Pipeline and related DataLoaders
  id: totrans-28
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 扩展了有关Pipeline和相关DataLoaders的更多信息
- en: Release 1.4.1
  id: totrans-29
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 发布1.4.1
- en: 'Release:'
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 发布：
- en: 1.4.1
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 1.4.1
- en: 'Date:'
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 日期：
- en: October 5, 2020
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 2020年10月5日
- en: This release includes a small number of bug fixes, documentation improvements,
    and build/dependency enhancements.
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 此版本包含少量错误修复、文档改进和构建/依赖项增强。
- en: Conda packages for zipline and its dependencies are now available for python
    3.6 on the ‘conda-forge’ Anaconda channel. They’re also available on the ‘Quantopian’
    channel, but we’ll stop updating those eventually.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: zipline及其依赖项的conda包现在可用于python 3.6的‘conda-forge’Anaconda频道。它们也可以在‘Quantopian’频道上获得，但我们最终会停止更新那些。
- en: Bug Fixes
  id: totrans-36
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 错误修复
- en: Fix for calling `run_algorithm` without `benchmark_returns` ([2762](https://github.com/stefan-jansen/zipline/issues/2762))
  id: totrans-37
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了在没有`benchmark_returns`的情况下调用`run_algorithm`的问题（[2762](https://github.com/stefan-jansen/zipline/issues/2762)）
- en: Maintenance and Refactorings
  id: totrans-38
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 维护和重构
- en: Support for empyrical 0.5.3 ([2526](https://github.com/stefan-jansen/zipline/issues/2526))
  id: totrans-39
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 支持empyrical 0.5.3（[2526](https://github.com/stefan-jansen/zipline/issues/2526)）
- en: Removed dependence on contextlib2 in py3 environments ([2757](https://github.com/stefan-jansen/zipline/issues/2757))
  id: totrans-40
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在py3环境中移除对contextlib2的依赖（[2757](https://github.com/stefan-jansen/zipline/issues/2757)）
- en: Update default bundle to ‘quantopian-quandl’ at more entrypoints ([2763](https://github.com/stefan-jansen/zipline/issues/2763))
  id: totrans-41
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将默认bundle更新为‘quantopian-quandl’，并在更多入口点使用（[2763](https://github.com/stefan-jansen/zipline/issues/2763)）
- en: Build
  id: totrans-42
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 构建
- en: CI with newer statsmodels and scipy ([2739](https://github.com/stefan-jansen/zipline/issues/2739))
  id: totrans-43
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用新的statsmodels和scipy进行CI（[2739](https://github.com/stefan-jansen/zipline/issues/2739)）
- en: GitHub Actions CI on linux and macos ([2743](https://github.com/stefan-jansen/zipline/issues/2743),
    [2767](https://github.com/stefan-jansen/zipline/issues/2767))
  id: totrans-44
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: GitHub Actions CI在linux和macos上（[2743](https://github.com/stefan-jansen/zipline/issues/2743)，[2767](https://github.com/stefan-jansen/zipline/issues/2767)）
- en: Added conda packaging for zipline and its dependencies to conda-forge ([2665](https://github.com/stefan-jansen/zipline/issues/2665))
  id: totrans-45
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为zipline及其依赖项添加了conda-forge的conda打包（[2665](https://github.com/stefan-jansen/zipline/issues/2665)）
- en: Documentation
  id: totrans-46
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 文档
- en: Various documentation improvements ([2763](https://github.com/stefan-jansen/zipline/issues/2763),
    [2771](https://github.com/stefan-jansen/zipline/issues/2771), [2772](https://github.com/stefan-jansen/zipline/issues/2772),
    [2776](https://github.com/stefan-jansen/zipline/issues/2776), [2780](https://github.com/stefan-jansen/zipline/issues/2780))
  id: totrans-47
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 各种文档改进（[2763](https://github.com/stefan-jansen/zipline/issues/2763)，[2771](https://github.com/stefan-jansen/zipline/issues/2771)，[2772](https://github.com/stefan-jansen/zipline/issues/2772)，[2776](https://github.com/stefan-jansen/zipline/issues/2776)，[2780](https://github.com/stefan-jansen/zipline/issues/2780)）
- en: Release 1.4.0
  id: totrans-48
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 发布1.4.0
- en: 'Release:'
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 发布：
- en: 1.4.0
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 1.4.0
- en: 'Date:'
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 日期：
- en: July 22, 2020
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 2020年7月22日
- en: Highlights
  id: totrans-53
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 亮点
- en: Removed Implicit Dependency on Benchmarks and Treasury Returns
  id: totrans-54
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 移除对基准和国债回报的隐式依赖
- en: 'Previously, Zipline implicitly fetched these required inputs from third party
    API sources if they were not provided by users: treasury data from the US Federal
    Reserve’s API, and benchmarks from IEX. This meant that simulations required an
    internet connection and stable APIs for these data sources, neither of which were
    guaranteed for many users.'
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 以前，如果用户没有提供这些必需的输入，Zipline会从第三方API源隐式获取：国债数据来自美国联邦储备银行的API，基准来自IEX。这意味着模拟需要互联网连接和这些数据源的稳定API，这对于许多用户来说都不是保证的。
- en: 'We removed the dependency on treasury curves, since they weren’t actually being
    used anymore. And we replaced the implicit downloading of benchmark returns with
    explicit options:'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 我们移除了对国债曲线的依赖，因为它们实际上不再被使用。并且我们用明确的选项替换了隐式下载基准回报：
- en: '[PRE0]'
  id: totrans-57
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: ([2627](https://github.com/stefan-jansen/zipline/issues/2627), [2642](https://github.com/stefan-jansen/zipline/issues/2642))
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: （[2627](https://github.com/stefan-jansen/zipline/issues/2627)，[2642](https://github.com/stefan-jansen/zipline/issues/2642)）
- en: New Built In Factors
  id: totrans-59
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 新的内置因子
- en: '[`PercentChange`](api-reference.html#zipline.pipeline.factors.PercentChange
    "zipline.pipeline.factors.PercentChange"): Calculates the percent change over
    the given `window_length`. Note: Percent change is calculated as `(new - old)
    / abs(old)`. ([2506](https://github.com/stefan-jansen/zipline/issues/2506))'
  id: totrans-60
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`PercentChange`](api-reference.html#zipline.pipeline.factors.PercentChange
    "zipline.pipeline.factors.PercentChange")：计算给定`window_length`的百分比变化。注意：百分比变化计算公式为`(new
    - old) / abs(old)`。（[2506](https://github.com/stefan-jansen/zipline/issues/2506)）'
- en: '[`PeerCount`](api-reference.html#zipline.pipeline.factors.PeerCount "zipline.pipeline.factors.PeerCount"):
    Gives the number of occurrences of each distinct category in a classifier. ([2509](https://github.com/stefan-jansen/zipline/issues/2509))'
  id: totrans-61
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`PeerCount`](api-reference.html#zipline.pipeline.factors.PeerCount "zipline.pipeline.factors.PeerCount")：给出分类器中每个不同类别的出现次数。（[2509](https://github.com/stefan-jansen/zipline/issues/2509)）'
- en: '`ConstantMixin`: A mixin for creating a Pipeline term with a constant value.
    ([2697](https://github.com/stefan-jansen/zipline/issues/2697))'
  id: totrans-62
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`ConstantMixin`：用于创建具有常数值的Pipeline项的混合类。（[2697](https://github.com/stefan-jansen/zipline/issues/2697)）'
- en: '`if_else()`: Allows users to create expressions that conditionally draw from
    the outputs of one of two terms. ([2697](https://github.com/stefan-jansen/zipline/issues/2697))'
  id: totrans-63
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`if_else()`：允许用户创建条件表达式，根据两个项的输出之一进行选择。([2697](https://github.com/stefan-jansen/zipline/issues/2697))'
- en: '`fillna()`: Allows users to fill missing data with either a constant value,
    or values from another term. ([2697](https://github.com/stefan-jansen/zipline/issues/2697))'
  id: totrans-64
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`fillna()`：允许用户用常量值或其他项的值填充缺失数据。([2697](https://github.com/stefan-jansen/zipline/issues/2697))'
- en: '`clip()`: Allows users to constrain a factor’s values to a given range. ([2708](https://github.com/stefan-jansen/zipline/issues/2708))'
  id: totrans-65
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`clip()`：允许用户将因子值限制在给定范围内。([2708](https://github.com/stefan-jansen/zipline/issues/2708))'
- en: '`mean()`, `stddev()`, `max()`, `min()`, `median()`, `sum()`, `notnull_count()`:
    Summarize data across the entire domain into a scalar factor. ([2697](https://github.com/stefan-jansen/zipline/issues/2697))'
  id: totrans-66
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`mean()`、`stddev()`、`max()`、`min()`、`median()`、`sum()`、`notnull_count()`：将整个域的数据汇总为标量因子。([2697](https://github.com/stefan-jansen/zipline/issues/2697))'
- en: Enhancements
  id: totrans-67
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 增强功能
- en: Added International Pipelines ([2262](https://github.com/stefan-jansen/zipline/issues/2262))
  id: totrans-68
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新增了国际Pipelines。([2262](https://github.com/stefan-jansen/zipline/issues/2262))
- en: Added DataSetFamily (née MultiDimensionalDataSet) - a shorthand for creating
    a collection of regular DataSets that share the same columns. ([2402](https://github.com/stefan-jansen/zipline/issues/2402))
  id: totrans-69
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新增了DataSetFamily（原名MultiDimensionalDataSet），一种创建共享相同列的常规DataSet集合的简写方式。([2402](https://github.com/stefan-jansen/zipline/issues/2402))
- en: Added `get_column()` for looking up columns by name ([2210](https://github.com/stefan-jansen/zipline/issues/2210))
  id: totrans-70
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新增了`get_column()`，用于按名称查找列。([2210](https://github.com/stefan-jansen/zipline/issues/2210))
- en: Added `CheckWindowsClassifier` that allows us to test lookback windows of categorical
    and string columns using Pipeline. ([2458](https://github.com/stefan-jansen/zipline/issues/2458))
  id: totrans-71
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新增了`CheckWindowsClassifier`，允许我们使用Pipeline测试分类和字符串列的回溯窗口。([2458](https://github.com/stefan-jansen/zipline/issues/2458))
- en: Added `PipelineHooks` which is now used to display Pipline progress bars ([2467](https://github.com/stefan-jansen/zipline/issues/2467))
  id: totrans-72
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新增了`PipelineHooks`，现在用于显示Pipline进度条。([2467](https://github.com/stefan-jansen/zipline/issues/2467))
- en: '[`BoundColumn`](api-reference.html#zipline.pipeline.data.BoundColumn "zipline.pipeline.data.dataset.BoundColumn")
    comparisons will now result in an error. This prevents writing `EquityPricing.volume
    > 1000` (silently returning bad data) insteads of `EquityPricing.volume.latest
    > 1000`. ([2537](https://github.com/stefan-jansen/zipline/issues/2537))'
  id: totrans-73
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`BoundColumn`](api-reference.html#zipline.pipeline.data.BoundColumn "zipline.pipeline.data.dataset.BoundColumn")比较现在将导致错误。这防止了编写`EquityPricing.volume
    > 1000`（静默返回错误数据）而不是`EquityPricing.volume.latest > 1000`。([2537](https://github.com/stefan-jansen/zipline/issues/2537))'
- en: Added currency conversion support to Pipeline. ([2586](https://github.com/stefan-jansen/zipline/issues/2586))
  id: totrans-74
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为Pipeline增加了货币转换支持。([2586](https://github.com/stefan-jansen/zipline/issues/2586))
- en: Added `--benchmark-file` and `--benchmark-symbol` command line arguments to
    make it easier to provide benchmark data. ([2642](https://github.com/stefan-jansen/zipline/issues/2642))
  id: totrans-75
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新增了`--benchmark-file`和`--benchmark-symbol`命令行参数，以便更方便地提供基准测试数据。([2642](https://github.com/stefan-jansen/zipline/issues/2642))
- en: Added support for Python 3.6 ([2643](https://github.com/stefan-jansen/zipline/issues/2643))
  id: totrans-76
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增加了对Python 3.6的支持。([2643](https://github.com/stefan-jansen/zipline/issues/2643))
- en: Added `mask` argument to Factor.peer_count. ([2676](https://github.com/stefan-jansen/zipline/issues/2676))
  id: totrans-77
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为Factor.peer_count增加了`mask`参数。([2676](https://github.com/stefan-jansen/zipline/issues/2676))
- en: Added `if_else()` and `fillna()` for allowing conditional logic in Pipelines.
    ([2691](https://github.com/stefan-jansen/zipline/issues/2691))
  id: totrans-78
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新增了`if_else()`和`fillna()`，允许在Pipelines中使用条件逻辑。([2691](https://github.com/stefan-jansen/zipline/issues/2691))
- en: Added daily summary methods to Factor for collecting summary statistics for
    the entire universe. ([2697](https://github.com/stefan-jansen/zipline/issues/2697))
  id: totrans-79
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为Factor增加了每日汇总方法，用于收集整个宇宙的汇总统计数据。([2697](https://github.com/stefan-jansen/zipline/issues/2697))
- en: Added `clip()` method for clipping values to a range. ([2708](https://github.com/stefan-jansen/zipline/issues/2708))
  id: totrans-80
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新增了`clip()`方法，用于将值剪辑到范围内。([2708](https://github.com/stefan-jansen/zipline/issues/2708))
- en: Added support for Pipeline term arithmetic with more than 32 terms. ([2727](https://github.com/stefan-jansen/zipline/issues/2727))
  id: totrans-81
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增加了对Pipeline项算术运算的支持，可处理超过32项。([2727](https://github.com/stefan-jansen/zipline/issues/2727))
- en: Bug Fixes
  id: totrans-82
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 错误修复
- en: Fixed support for non unique sid->exchange mappings. ([2289](https://github.com/stefan-jansen/zipline/issues/2289))
  id: totrans-83
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了对非唯一sid->exchange映射的支持。([2289](https://github.com/stefan-jansen/zipline/issues/2289))
- en: Fixed crash on dividend warning. ([2323](https://github.com/stefan-jansen/zipline/issues/2323))
  id: totrans-84
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了股息警告导致的崩溃。（[2323](https://github.com/stefan-jansen/zipline/issues/2323)）
- en: Fixed `week_start` when Monday precedes the New Year. ([2394](https://github.com/stefan-jansen/zipline/issues/2394))
  id: totrans-85
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了当周一先于新年时`week_start`的问题。（[2394](https://github.com/stefan-jansen/zipline/issues/2394)）
- en: Ensured correct dtypes when unpacking empty dataframes. ([2444](https://github.com/stefan-jansen/zipline/issues/2444))
  id: totrans-86
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 确保在解包空数据框时使用正确的数据类型。（[2444](https://github.com/stefan-jansen/zipline/issues/2444)）
- en: Fixed a bug where a Pipeline term with `window_length=0` would not copy the
    input before calling `compute()` which could cause incorrect results if the input
    was reused in the Pipeline. ([2723](https://github.com/stefan-jansen/zipline/issues/2723))
  id: totrans-87
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了一个错误，即当流水线项的`window_length=0`时，在调用`compute()`之前不会复制输入，这可能导致如果输入在流水线中被重用，则结果不正确。（[2723](https://github.com/stefan-jansen/zipline/issues/2723)）
- en: Performance
  id: totrans-88
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 性能
- en: Added `HDF5DailyBarWriter`, which writes daily pricing in a new format as an
    HDF5 file. Each OHLCV field is stored as a 2D array in a chunked HDF5 dataset,
    with a row per sid and a column per day. The file also supports multiple countries.
    Added `HDF5DailyBarReader`, which implements the BarReader interface and can read
    files written by HDF5DailyBarWriter. ([2295](https://github.com/stefan-jansen/zipline/issues/2295))
  id: totrans-89
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加了`HDF5DailyBarWriter`，它以新的HDF5文件格式写入每日定价。每个OHLCV字段都存储为分块HDF5数据集中的二维数组，每行代表一个sid，每列代表一天。该文件还支持多个国家。添加了`HDF5DailyBarReader`，它实现了BarReader接口，并可以读取由HDF5DailyBarWriter编写的文件。（[2295](https://github.com/stefan-jansen/zipline/issues/2295)）
- en: Vectorized dividend ratio calculation ([2298](https://github.com/stefan-jansen/zipline/issues/2298))
  id: totrans-90
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 向量化股息率计算（[2298](https://github.com/stefan-jansen/zipline/issues/2298)）
- en: Improved performance of the [`RollingPearson`](api-reference.html#zipline.pipeline.factors.RollingPearson
    "zipline.pipeline.factors.RollingPearson") and [`RollingPearsonOfReturns`](api-reference.html#zipline.pipeline.factors.RollingPearsonOfReturns
    "zipline.pipeline.factors.RollingPearsonOfReturns") pipeline factors. ([2071](https://github.com/stefan-jansen/zipline/issues/2071))
  id: totrans-91
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 改进了[`RollingPearson`](api-reference.html#zipline.pipeline.factors.RollingPearson
    "zipline.pipeline.factors.RollingPearson")和[`RollingPearsonOfReturns`](api-reference.html#zipline.pipeline.factors.RollingPearsonOfReturns
    "zipline.pipeline.factors.RollingPearsonOfReturns")流水线因子的性能。（[2071](https://github.com/stefan-jansen/zipline/issues/2071)）
- en: Maintenance and Refactorings
  id: totrans-92
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 维护和重构
- en: Made `parameter_space()` reset instance fixtures between runs ([2433](https://github.com/stefan-jansen/zipline/issues/2433))
  id: totrans-93
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使`parameter_space()`在运行之间重置实例固定装置（[2433](https://github.com/stefan-jansen/zipline/issues/2433)）
- en: Removed unused treasury curves data handling. ([2626](https://github.com/stefan-jansen/zipline/issues/2626))
  id: totrans-94
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 移除了未使用的国债曲线数据处理。（[2626](https://github.com/stefan-jansen/zipline/issues/2626)）
- en: Miscellaneous
  id: totrans-95
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 杂项
- en: International Pipelines
  id: totrans-96
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 国际流水线
- en: Pipeline now supports international data.
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 流水线现在支持国际数据。
- en: Pipeline is a tool that allows you to define computations over a universe of
    assets and a period of time. In the past, you could only run pipelines on the
    US equity market. Now, you can now specify a domain over which a pipeline should
    be computed. The name “domain” refers to the mathematical concept of the “domain
    of a function”, which is the set of potential inputs to a function. In the context
    of Pipeline, the domain specifies the set of assets and a corresponding trading
    calendar over which the expressions of a pipeline should be computed.
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 流水线是一种工具，允许您在资产集合和时间段上定义计算。过去，您只能在美国的股票市场上运行流水线。现在，您可以指定流水线应该计算的域。“域”一词指的是数学概念中的“函数的域”，即函数的可能输入集合。在流水线的上下文中，域指定了流水线表达式应该计算的资产集合和相应的交易日历。
- en: For example, the following pipeline returns the latest close price and volume
    for all Canadian equities, every day.
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，以下流水线每天返回所有加拿大股票的最新收盘价和成交量。
- en: '[PRE1]'
  id: totrans-100
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: Another challenge related to currencies is the fact that some exchanges don’t
    require stocks to be listed in local currency. For example, the London Stock Exchange
    only has about 75% of its listings denominated in GBP*. The other 25% are primarily
    listed in EUR or USD. This can make it hard to make cross sectional comparisons.
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 与货币相关的另一个挑战是，一些交易所不要求股票以当地货币列出。例如，伦敦证券交易所只有大约75%的上市股票以英镑计价。其余25%主要以欧元或美元列出。这使得进行跨部门比较变得困难。
- en: To solve this problem, most people rely on currency conversions to bring price-based
    fields into the same currency. Pipeline columns now support an `fx` method for
    specifying what currency the data should be viewed as. This method is only available
    on terms which are “currency-aware”, for example open or close, but not on terms
    that do not care about currency like volume.
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 为了解决这个问题，大多数人依赖货币转换将基于价格的字段转换为同一货币。管道列现在支持一个 `fx` 方法，用于指定数据应该被视为哪种货币。此方法仅适用于“货币感知”的术语，例如开盘或收盘，但不适用于不关心货币的术语，如成交量。
- en: Currently, there is no way to load international data into a bundle. We are
    working on ways to make it easy to get international data into Zipline.
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 目前，没有方法将国际数据加载到捆绑包中。我们正在寻找方法，使获取国际数据到Zipline变得容易。
- en: ([2265](https://github.com/stefan-jansen/zipline/issues/2265), [2262](https://github.com/stefan-jansen/zipline/issues/2262),
    and many others)
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: ([2265](https://github.com/stefan-jansen/zipline/issues/2265), [2262](https://github.com/stefan-jansen/zipline/issues/2262),
    以及许多其他)
- en: 'The domains that Zipline currently supports for running pipelines (using the
    latest [trading-calendars](https://pypi.org/project/trading-calendars/) package)
    are the following:'
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: Zipline目前支持运行管道的域（使用最新的 [trading-calendars](https://pypi.org/project/trading-calendars/)
    包）如下：
- en: Argentina
  id: totrans-106
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 阿根廷
- en: Australia
  id: totrans-107
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 澳大利亚
- en: Austria
  id: totrans-108
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 奥地利
- en: Belgium
  id: totrans-109
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 比利时
- en: Brazil
  id: totrans-110
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 巴西
- en: Canada
  id: totrans-111
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 加拿大
- en: Chile
  id: totrans-112
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 智利
- en: China
  id: totrans-113
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 中国
- en: Czech Republic
  id: totrans-114
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 捷克共和国
- en: Colombia
  id: totrans-115
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 哥伦比亚
- en: Czechia
  id: totrans-116
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 捷克
- en: Finland
  id: totrans-117
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 芬兰
- en: France
  id: totrans-118
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 法国
- en: Germany
  id: totrans-119
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 德国
- en: Greece
  id: totrans-120
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 希腊
- en: Hong Kong
  id: totrans-121
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 香港
- en: Hungary
  id: totrans-122
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 匈牙利
- en: India
  id: totrans-123
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 印度
- en: Indonesia
  id: totrans-124
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 印度尼西亚
- en: Ireland
  id: totrans-125
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 爱尔兰
- en: Italy
  id: totrans-126
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 意大利
- en: Japan
  id: totrans-127
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 日本
- en: Malaysia
  id: totrans-128
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 马来西亚
- en: Mexico
  id: totrans-129
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 墨西哥
- en: Netherlands
  id: totrans-130
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 荷兰
- en: New Zealand
  id: totrans-131
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新西兰
- en: Norway
  id: totrans-132
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 挪威
- en: Pakistan
  id: totrans-133
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 巴基斯坦
- en: Peru
  id: totrans-134
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 秘鲁
- en: Philippines
  id: totrans-135
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 菲律宾
- en: Poland
  id: totrans-136
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 波兰
- en: Portugal
  id: totrans-137
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 葡萄牙
- en: Russia
  id: totrans-138
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 俄罗斯
- en: Singapore
  id: totrans-139
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新加坡
- en: Spain
  id: totrans-140
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 西班牙
- en: Sweden
  id: totrans-141
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 瑞典
- en: Taiwan
  id: totrans-142
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 台湾
- en: Thailand
  id: totrans-143
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 泰国
- en: Turkey
  id: totrans-144
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 土耳其
- en: United Kingdom
  id: totrans-145
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 英国
- en: United States
  id: totrans-146
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 美国
- en: South Africa
  id: totrans-147
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 南非
- en: South Korea
  id: totrans-148
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 韩国
- en: Switzerland
  id: totrans-149
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 瑞士
- en: ([2301](https://github.com/stefan-jansen/zipline/issues/2301), [2333](https://github.com/stefan-jansen/zipline/issues/2333),
    [2338](https://github.com/stefan-jansen/zipline/issues/2338), [2355](https://github.com/stefan-jansen/zipline/issues/2355),
    [2369](https://github.com/stefan-jansen/zipline/issues/2369), [2550](https://github.com/stefan-jansen/zipline/issues/2550),
    [2552](https://github.com/stefan-jansen/zipline/issues/2552), [2559](https://github.com/stefan-jansen/zipline/issues/2559))
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: ([2301](https://github.com/stefan-jansen/zipline/issues/2301), [2333](https://github.com/stefan-jansen/zipline/issues/2333),
    [2338](https://github.com/stefan-jansen/zipline/issues/2338), [2355](https://github.com/stefan-jansen/zipline/issues/2355),
    [2369](https://github.com/stefan-jansen/zipline/issues/2369), [2550](https://github.com/stefan-jansen/zipline/issues/2550),
    [2552](https://github.com/stefan-jansen/zipline/issues/2552), [2559](https://github.com/stefan-jansen/zipline/issues/2559))
- en: DataSetFamily
  id: totrans-151
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 数据集家族
- en: Dataset families are used to represent data where the unique identifier for
    a row requires more than just asset and date coordinates. A [`DataSetFamily`](api-reference.html#zipline.pipeline.data.DataSetFamily
    "zipline.pipeline.data.DataSetFamily") can also be thought of as a collection
    of [`DataSet`](api-reference.html#zipline.pipeline.data.DataSet "zipline.pipeline.data.DataSet")
    objects, each of which has the same columns, domain, and ndim.
  id: totrans-152
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 数据集家族用于表示数据的唯一标识符需要超过资产和日期坐标。一个 [`数据集家族`](api-reference.html#zipline.pipeline.data.DataSetFamily
    "zipline.pipeline.data.DataSetFamily") 也可以被认为是一组 [`数据集`](api-reference.html#zipline.pipeline.data.DataSet
    "zipline.pipeline.data.DataSet") 对象，每个对象都有相同的列、域和ndim。
- en: ''
  id: totrans-153
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '[`DataSetFamily`](api-reference.html#zipline.pipeline.data.DataSetFamily "zipline.pipeline.data.DataSetFamily")
    objects are defined with one or more [`Column`](api-reference.html#zipline.pipeline.data.Column
    "zipline.pipeline.data.Column") objects, plus one additional field: `extra_dims`.'
  id: totrans-154
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '[`数据集家族`](api-reference.html#zipline.pipeline.data.DataSetFamily "zipline.pipeline.data.DataSetFamily")
    对象是通过一个或多个 [`列`](api-reference.html#zipline.pipeline.data.Column "zipline.pipeline.data.Column")
    对象定义的，再加上一个额外的字段：`extra_dims`。'
- en: ''
  id: totrans-155
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: The `extra_dims` field defines coordinates other than asset and date that must
    be fixed to produce a logical timeseries. The column objects determine columns
    that will be shared by slices of the family.
  id: totrans-156
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '`extra_dims` 字段定义了除资产和日期之外必须固定的坐标，以产生一个逻辑时间序列。列对象决定了家族切片将共享的列。'
- en: ''
  id: totrans-157
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '`extra_dims` are represented as an ordered dictionary where the keys are the
    dimension name, and the values are a set of unique values along that dimension.'
  id: totrans-158
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '`extra_dims` 被表示为一个有序字典，其中键是维度名称，值是该维度上唯一值的集合。'
- en: ''
  id: totrans-159
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'To work with a [`DataSetFamily`](api-reference.html#zipline.pipeline.data.DataSetFamily
    "zipline.pipeline.data.DataSetFamily") in a pipeline expression, one must choose
    a specific value for each of the extra dimensions using the [`slice()`](api-reference.html#zipline.pipeline.data.DataSetFamily.slice
    "zipline.pipeline.data.DataSetFamily.slice") method. For example, given a [`DataSetFamily`](api-reference.html#zipline.pipeline.data.DataSetFamily
    "zipline.pipeline.data.DataSetFamily"):'
  id: totrans-160
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 要在管道表达式中使用[`DataSetFamily`](api-reference.html#zipline.pipeline.data.DataSetFamily
    "zipline.pipeline.data.DataSetFamily")，必须使用[`slice()`](api-reference.html#zipline.pipeline.data.DataSetFamily.slice
    "zipline.pipeline.data.DataSetFamily.slice")方法为每个额外的维度选择一个特定的值。例如，给定一个[`DataSetFamily`](api-reference.html#zipline.pipeline.data.DataSetFamily
    "zipline.pipeline.data.DataSetFamily")：
- en: ''
  id: totrans-161
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '[PRE2]'
  id: totrans-162
  prefs:
  - PREF_BQ
  type: TYPE_PRE
  zh: '[PRE2]'
- en: ''
  id: totrans-163
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'This dataset might represent a table with the following columns:'
  id: totrans-164
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 这个数据集可能代表一个具有以下列的表格：
- en: ''
  id: totrans-165
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '[PRE3]'
  id: totrans-166
  prefs:
  - PREF_BQ
  type: TYPE_PRE
  zh: '[PRE3]'
- en: ''
  id: totrans-167
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Here we see the implicit `sid`, `asof_date` and `timestamp` columns as well
    as the extra dimensions columns.
  id: totrans-168
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 在这里，我们可以看到隐含的`sid`、`asof_date`和`timestamp`列以及额外的维度列。
- en: ''
  id: totrans-169
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'This [`DataSetFamily`](api-reference.html#zipline.pipeline.data.DataSetFamily
    "zipline.pipeline.data.DataSetFamily") can be converted to a regular [`DataSet`](api-reference.html#zipline.pipeline.data.DataSet
    "zipline.pipeline.data.DataSet") with:'
  id: totrans-170
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 这个[`DataSetFamily`](api-reference.html#zipline.pipeline.data.DataSetFamily "zipline.pipeline.data.DataSetFamily")可以通过以下方式转换为常规[`DataSet`](api-reference.html#zipline.pipeline.data.DataSet
    "zipline.pipeline.data.DataSet")：
- en: ''
  id: totrans-171
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '[PRE4]'
  id: totrans-172
  prefs:
  - PREF_BQ
  type: TYPE_PRE
  zh: '[PRE4]'
- en: ''
  id: totrans-173
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: This sliced dataset represents the rows from the higher dimensional dataset
    where `(dimension_0 == 'a') & (dimension_1 == 'e')`.
  id: totrans-174
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 这个切片数据集表示来自更高维度数据集的行，其中`(dimension_0 == 'a') & (dimension_1 == 'e')`。
- en: ([2402](https://github.com/stefan-jansen/zipline/issues/2402), [2452](https://github.com/stefan-jansen/zipline/issues/2452),
    [2456](https://github.com/stefan-jansen/zipline/issues/2456))
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: ([2402](https://github.com/stefan-jansen/zipline/issues/2402), [2452](https://github.com/stefan-jansen/zipline/issues/2452),
    [2456](https://github.com/stefan-jansen/zipline/issues/2456))
- en: Release 1.3.0
  id: totrans-176
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 版本 1.3.0
- en: 'Release:'
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: 发布：
- en: 1.3.0
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: 1.3.0
- en: 'Date:'
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: 日期：
- en: July 16, 2018
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: 2018年7月16日
- en: This release includes several enhancements and performance improvements along
    with a small number of bug fixes. We recommend that all users upgrade to this
    version.
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
  zh: 此版本包括几个增强功能和性能改进，以及少量错误修复。我们建议所有用户升级到此版本。
- en: Note
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: This will likely be the last minor release in the Zipline 1.x series. The release
    next will be Zipline 2.0, which will include a number of small breaking changes
    required to support international equities.
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: 这可能是Zipline 1.x系列的最后一个次要版本。下一个版本将是Zipline 2.0，它将包括一些小的破坏性更改，以支持国际股票。
- en: Highlights
  id: totrans-184
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 亮点
- en: Support for Newer Numpy/Pandas Versions
  id: totrans-185
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 支持更新的Numpy/Pandas版本
- en: Zipline has historically been very conservative when updating versions of numpy,
    pandas, and other “PyData” ecosystem packages. This conservatism is primarily
    due to the fact that Zipline is used as the backtesting engine for [Quantopian](https://www.quantopian.com/),
    which means that updating package versions risks breaking a large installed codebase.
    Of course, many Zipline users don’t have the backwards compatibility requirements
    that Quantopian has, and they’d like to be able to use the latest and greatest
    package versions.
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: Zipline在更新numpy、pandas和其他“PyData”生态系统软件包的版本时一直非常保守。这种保守主义主要是因为Zipline被用作[Quantopian](https://www.quantopian.com/)的回测引擎，这意味着更新软件包版本可能会破坏大量已安装的代码库。当然，许多Zipline用户没有Quantopian那样的向后兼容性要求，他们希望能够使用最新和最棒的软件包版本。
- en: 'As part of this release, we’re now building and testing Zipline with two package
    configurations:'
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: 作为此版本的一部分，我们现在使用两个软件包配置构建和测试Zipline：
- en: “Stable”, using numpy version 1.11 and pandas version 0.18.1.
  id: totrans-188
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: “稳定”，使用numpy版本1.11和pandas版本0.18.1。
- en: “Latest”, using numpy version 1.14 and pandas version 0.22.0.
  id: totrans-189
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: “最新”，使用numpy版本1.14和pandas版本0.22.0。
- en: Other combinations of numpy and pandas **may** work, but these package sets
    will be built and tested during our normal development cycle.
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: 其他组合的numpy和pandas**可能**可以工作，但这些软件包集将在我们的正常开发周期中构建和测试。
- en: Moving forward, our goal is to continue to maintain support for two sets of
    packages at any given time. The “stable” package set will change relatively infrequently,
    and will contain the versions of numpy and pandas supported on Quantopian. The
    “latest” package set will change regularly, and will contain recently-released
    versions of numpy and pandas.
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: 向前推进，我们的目标是继续在任何给定时间维护两套软件包的支持。“稳定”软件包集将相对不频繁地更改，并将包含Quantopian支持的numpy和pandas版本。“最新”软件包集将定期更改，并将包含最近发布的numpy和pandas版本。
- en: Our hope with these changes is to strike a balance between stability and novelty
    without taking on too great a maintenance burden by supporting every possible
    combination of packages. ([2194](https://github.com/stefan-jansen/zipline/issues/2194))
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: 我们希望通过这些更改在稳定性和新颖性之间取得平衡，而不通过支持每种可能的包组合来承担过大的维护负担。([2194](https://github.com/stefan-jansen/zipline/issues/2194))
- en: Standalone `trading_calendars` Module
  id: totrans-193
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 独立的`trading_calendars`模块
- en: One of the most popular features of Zipline is its collection of trading calendars,
    which provide information about holidays and trading hours of various markets.
    As part of this release, Zipline’s calendar-related functionality has been moved
    to a separate [trading-calendars](https://pypi.org/project/trading-calendars/)
    package, allowing users that only needed access to the calendars to use them without
    taking on the rest of Zipline’s dependencies.
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: Zipline最受欢迎的功能之一是其交易日历集合，提供有关各种市场假日和交易时间的信息。作为此版本的一部分，Zipline的日历相关功能已移至单独的[trading-calendars](https://pypi.org/project/trading-calendars/)包，允许只需要访问日历的用户在不承担Zipline其余依赖项的情况下使用它们。
- en: For backwards compability, Zipline will continue to re-export calendar-related
    functions. For example, `zipline.get_calendar()` still exists, but is now an alias
    for `trading_calendars.get_calendar`. Users that depend on this functionality
    are encouraged to update their imports to the new locations in `trading_calendars`.
    ([2219](https://github.com/stefan-jansen/zipline/issues/2219))
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: 为了向后兼容，Zipline将继续重新导出与日历相关的函数。例如，`zipline.get_calendar()`仍然存在，但现在它是`trading_calendars.get_calendar`的别名。依赖此功能的用户应将其导入更新到`trading_calendars`中的新位置。([2219](https://github.com/stefan-jansen/zipline/issues/2219))
- en: Custom Blotters
  id: totrans-196
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 自定义交易记录器
- en: This release adds experimental support for running Zipline with user-defined
    subclasses of [`Blotter`](api-reference.html#zipline.finance.blotter.blotter.Blotter
    "zipline.finance.blotter.blotter.Blotter"). The primary motivation for this change
    is to make it easier to run live algorithms from the Zipline CLI.
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: 此版本增加了实验性支持，允许使用用户定义的[`Blotter`](api-reference.html#zipline.finance.blotter.blotter.Blotter
    "zipline.finance.blotter.blotter.Blotter")子类运行Zipline。这一更改的主要动机是使从Zipline CLI运行实时算法变得更加容易。
- en: 'There are two primary ways to configure a custom blotter:'
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: 配置自定义交易记录器的两种主要方式：
- en: You can pass an instance of [`Blotter`](api-reference.html#zipline.finance.blotter.blotter.Blotter
    "zipline.finance.blotter.blotter.Blotter") as the `blotter` parameter to [`zipline.run_algorithm()`](api-reference.html#zipline.run_algorithm
    "zipline.run_algorithm"). (This functionality had existed previously, but wasn’t
    well-documented.)
  id: totrans-199
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您可以将[`Blotter`](api-reference.html#zipline.finance.blotter.blotter.Blotter "zipline.finance.blotter.blotter.Blotter")的实例作为`blotter`参数传递给[`zipline.run_algorithm()`](api-reference.html#zipline.run_algorithm
    "zipline.run_algorithm")。（此功能之前已经存在，但文档不够完善。）
- en: You can register a named **factory** for a blotter in your `extension.py` and
    pass the name on the command line via the `--blotter` flag.
  id: totrans-200
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您可以在`extension.py`中注册一个名为**工厂**的交易记录器，并通过命令行上的`--blotter`标志传递名称。
- en: 'An example usage of **(2)** might look like this:'
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: 示例**(2)**的使用可能如下所示：
- en: ~/.zipline/extension.py
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
  zh: ~/.zipline/extension.py
- en: '[PRE5]'
  id: totrans-203
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'To use this factory when running zipline from the command line, we would invoke
    zipline like this:'
  id: totrans-204
  prefs: []
  type: TYPE_NORMAL
  zh: 要从命令行使用此工厂运行zipline，我们将这样调用zipline：
- en: '[PRE6]'
  id: totrans-205
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: As part of this change, the [`Blotter`](api-reference.html#zipline.finance.blotter.blotter.Blotter
    "zipline.finance.blotter.blotter.Blotter") class has been converted to an abstract
    base class. The default blotter used in simulations is now named [`zipline.finance.blotter.SimulationBlotter`](api-reference.html#zipline.finance.blotter.SimulationBlotter
    "zipline.finance.blotter.SimulationBlotter").
  id: totrans-206
  prefs: []
  type: TYPE_NORMAL
  zh: 作为此更改的一部分，[`Blotter`](api-reference.html#zipline.finance.blotter.blotter.Blotter
    "zipline.finance.blotter.blotter.Blotter")类已被转换为抽象基类。模拟中使用的默认交易记录器现在名为[`zipline.finance.blotter.SimulationBlotter`](api-reference.html#zipline.finance.blotter.SimulationBlotter
    "zipline.finance.blotter.SimulationBlotter")。
- en: ([2210](https://github.com/stefan-jansen/zipline/issues/2210), [2251](https://github.com/stefan-jansen/zipline/issues/2251))
  id: totrans-207
  prefs: []
  type: TYPE_NORMAL
  zh: ([2210](https://github.com/stefan-jansen/zipline/issues/2210), [2251](https://github.com/stefan-jansen/zipline/issues/2251))
- en: Custom Command-Line Arguments
  id: totrans-208
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 自定义命令行参数
- en: 'This release adds support for passing custom arguments to the `zipline` command-line
    interface. Custom command-line arguments are passed via the `-x` flag followed
    by a `key=value` pair. Arguments passed this way can be accessed from Python code
    (e.g., an algorithm or an extension) via attributes of `zipline.extension_args`.
    For example, if zipline is invoked like this:'
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
  zh: 本次发布增加了对`zipline`命令行界面传递自定义参数的支持。自定义命令行参数通过`-x`标志后跟一个`key=value`对来传递。通过这种方式传递的参数可以从Python代码（例如，算法或扩展）中通过`zipline.extension_args`的属性来访问。例如，如果zipline这样被调用：
- en: '[PRE7]'
  id: totrans-210
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: then the result of `zipline.extension_args.argle` would be the string `"bargle"`.
  id: totrans-211
  prefs: []
  type: TYPE_NORMAL
  zh: 那么`zipline.extension_args.argle`的结果将是字符串`"bargle"`。
- en: 'Custom arguments can be grouped into namespaces by including `.` characters
    in keys. For example, if zipline is invoked like this:'
  id: totrans-212
  prefs: []
  type: TYPE_NORMAL
  zh: 自定义参数可以通过在键中包含`.`字符来分组到命名空间中。例如，如果zipline这样被调用：
- en: '[PRE8]'
  id: totrans-213
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: then `zipline.extension_args.argle` will contain an object with a `bargle` attribute
    containing the string `"foo"`. Keys can contain multiple dots to create nested
    namespaces. ([2210](https://github.com/stefan-jansen/zipline/issues/2210))
  id: totrans-214
  prefs: []
  type: TYPE_NORMAL
  zh: 那么`zipline.extension_args.argle`将包含一个具有`bargle`属性的对象，该属性包含字符串`"foo"`。键可以包含多个点来创建嵌套的命名空间。([2210](https://github.com/stefan-jansen/zipline/issues/2210))
- en: Enhancements
  id: totrans-215
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 功能增强
- en: Added support for pandas 0.22 and numpy 1.14\. See above for details. ([2194](https://github.com/stefan-jansen/zipline/issues/2194))
  id: totrans-216
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增加了对pandas 0.22和numpy 1.14的支持。详情请参见上文。([2194](https://github.com/stefan-jansen/zipline/issues/2194))
- en: Moved `zipline.utils.calendars` into a separately-installable [trading-calendars](https://pypi.org/project/trading-calendars/)
    package. ([2219](https://github.com/stefan-jansen/zipline/issues/2219))
  id: totrans-217
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将`zipline.utils.calendars`移至一个单独可安装的[trading-calendars](https://pypi.org/project/trading-calendars/)包中。([2219](https://github.com/stefan-jansen/zipline/issues/2219))
- en: Added support for specifying custom string arguments with the `-x` flag. See
    above for details. ([2210](https://github.com/stefan-jansen/zipline/issues/2210))
  id: totrans-218
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增加了对使用`-x`标志指定自定义字符串参数的支持。详情请参见上文。([2210](https://github.com/stefan-jansen/zipline/issues/2210))
- en: Experimental Features
  id: totrans-219
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 实验性功能
- en: Warning
  id: totrans-220
  prefs: []
  type: TYPE_NORMAL
  zh: 警告
- en: Experimental features are subject to change.
  id: totrans-221
  prefs: []
  type: TYPE_NORMAL
  zh: 实验性功能可能会发生变化。
- en: Added support for registering custom subclass of `zipline.finance.blotter.Blotter`.
    See above for details. ([2210](https://github.com/stefan-jansen/zipline/issues/2210),
    [2251](https://github.com/stefan-jansen/zipline/issues/2251))
  id: totrans-222
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增加了对注册自定义子类`zipline.finance.blotter.Blotter`的支持。详情请参见上文。([2210](https://github.com/stefan-jansen/zipline/issues/2210),
    [2251](https://github.com/stefan-jansen/zipline/issues/2251))
- en: Bug Fixes
  id: totrans-223
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 错误修复
- en: Fixed a bug in [`zipline.pipeline.Factor.winsorize()`](api-reference.html#zipline.pipeline.Factor.winsorize
    "zipline.pipeline.Factor.winsorize") where NaN values were incorrectly included
    in value counts when determining cutoff thresholds for winsorization. ([2138](https://github.com/stefan-jansen/zipline/issues/2138))
  id: totrans-224
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了在[`zipline.pipeline.Factor.winsorize()`](api-reference.html#zipline.pipeline.Factor.winsorize
    "zipline.pipeline.Factor.winsorize")中，当确定winsorization的截止阈值时，NaN值被错误地包含在值计数中的错误。([2138](https://github.com/stefan-jansen/zipline/issues/2138))
- en: Fixed a crash in [`zipline.pipeline.Factor.top()`](api-reference.html#zipline.pipeline.Factor.top
    "zipline.pipeline.Factor.top") with a count of 1 and no groupby. ([2218](https://github.com/stefan-jansen/zipline/issues/2218))
  id: totrans-225
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了在[`zipline.pipeline.Factor.top()`](api-reference.html#zipline.pipeline.Factor.top
    "zipline.pipeline.Factor.top")中，当计数为1且没有groupby时发生的崩溃。([2218](https://github.com/stefan-jansen/zipline/issues/2218))
- en: Fixed a bug where calling `data.history` with a negative lookback would fetch
    prices from the future. ([2164](https://github.com/stefan-jansen/zipline/issues/2164))
  id: totrans-226
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了一个错误，即当调用`data.history`时，如果回溯期为负数，则会从未来获取价格。([2164](https://github.com/stefan-jansen/zipline/issues/2164))
- en: Fixed a bug where `StopOrder``, [`zipline.finance.execution.LimitOrder`](api-reference.html#zipline.finance.execution.LimitOrder
    "zipline.finance.execution.LimitOrder"), and [`zipline.finance.execution.StopLimitOrder`](api-reference.html#zipline.finance.execution.StopLimitOrder
    "zipline.finance.execution.StopLimitOrder") prices were being rounded to the nearest
    penny regardless of asset tick size. Prices are now rounded based on the `tick_size`
    attribute of the asset being ordered. ([2211](https://github.com/stefan-jansen/zipline/issues/2211))
  id: totrans-227
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了一个错误，即`StopOrder`、[`zipline.finance.execution.LimitOrder`](api-reference.html#zipline.finance.execution.LimitOrder
    "zipline.finance.execution.LimitOrder")和[`zipline.finance.execution.StopLimitOrder`](api-reference.html#zipline.finance.execution.StopLimitOrder
    "zipline.finance.execution.StopLimitOrder")的价格无论资产的tick大小如何，都被四舍五入到最接近的便士。现在，价格根据所订购资产的`tick_size`属性进行四舍五入。([2211](https://github.com/stefan-jansen/zipline/issues/2211))
- en: Performance
  id: totrans-228
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 性能
- en: Improved performance when fetching minutely prices for assets that trade regularly.
    ([2108](https://github.com/stefan-jansen/zipline/issues/2108))
  id: totrans-229
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 改进了定期交易的资产获取每分钟价格的性能。（[2108](https://github.com/stefan-jansen/zipline/issues/2108)）
- en: Improved performance when fetching minutely prices for many assets by tuning
    cache sizes. ([2110](https://github.com/stefan-jansen/zipline/issues/2110))
  id: totrans-230
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通过调整缓存大小，改进了获取许多资产每分钟价格的性能。（[2110](https://github.com/stefan-jansen/zipline/issues/2110)）
- en: Maintenance and Refactorings
  id: totrans-231
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 维护和重构
- en: Refactored large parts of the Zipline test suite to make it easier to change
    the signature of `zipline.algorithm.TradingAlgorithm`. ([2169](https://github.com/stefan-jansen/zipline/issues/2169),
    [2168](https://github.com/stefan-jansen/zipline/issues/2168), [2165](https://github.com/stefan-jansen/zipline/issues/2165),
    [2171](https://github.com/stefan-jansen/zipline/issues/2171))
  id: totrans-232
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 重构了Zipline测试套件的大部分内容，使其更容易更改`zipline.algorithm.TradingAlgorithm`的签名。（[2169](https://github.com/stefan-jansen/zipline/issues/2169)，[2168](https://github.com/stefan-jansen/zipline/issues/2168)，[2165](https://github.com/stefan-jansen/zipline/issues/2165)，[2171](https://github.com/stefan-jansen/zipline/issues/2171)）
- en: Build
  id: totrans-233
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 构建
- en: Added support for running travis builds with pandas 0.18 and 0.22. ([2194](https://github.com/stefan-jansen/zipline/issues/2194))
  id: totrans-234
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增加了对使用pandas 0.18和0.22运行travis构建的支持。（[2194](https://github.com/stefan-jansen/zipline/issues/2194)）
- en: Added OSX builds to the travis build matrix. ([2244](https://github.com/stefan-jansen/zipline/issues/2244))
  id: totrans-235
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在travis构建矩阵中添加了OSX构建。（[2244](https://github.com/stefan-jansen/zipline/issues/2244)）
- en: Release 1.2.0
  id: totrans-236
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 发布1.2.0
- en: 'Release:'
  id: totrans-237
  prefs: []
  type: TYPE_NORMAL
  zh: 发布：
- en: 1.2.0
  id: totrans-238
  prefs: []
  type: TYPE_NORMAL
  zh: 1.2.0
- en: 'Date:'
  id: totrans-239
  prefs: []
  type: TYPE_NORMAL
  zh: 日期：
- en: April 4, 2018
  id: totrans-240
  prefs: []
  type: TYPE_NORMAL
  zh: 2018年4月4日
- en: Highlights
  id: totrans-241
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 亮点
- en: Extensible Risk and Performance Metrics ([2081](https://github.com/stefan-jansen/zipline/issues/2081))
  id: totrans-242
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 可扩展的风险和性能指标（[2081](https://github.com/stefan-jansen/zipline/issues/2081)）
- en: 'The risk and performance metrics are summarizing values calculated by Zipline
    when running a simulation, for example: returns or Sharpe ratio. 1.1.2 introduces
    a new API for registering custom risk and performance metrics defined by the user.
    We have also made it possible to run a backtest without computing any metrics
    to improve the feedback cycle when debugging an algorithm.'
  id: totrans-243
  prefs: []
  type: TYPE_NORMAL
  zh: 风险和性能指标是Zipline在运行模拟时计算的值的汇总，例如：回报率或夏普比率。1.1.2引入了一个新的API，用于注册用户定义的自定义风险和性能指标。我们还使得在不计算任何指标的情况下运行回测成为可能，以改善调试算法时的反馈循环。
- en: For more information, see [Metrics](risk-and-perf-metrics.html#metrics).
  id: totrans-244
  prefs: []
  type: TYPE_NORMAL
  zh: 有关更多信息，请参阅[Metrics](risk-and-perf-metrics.html#metrics)。
- en: Docs, Trading Calendars, and Benchmarks
  id: totrans-245
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 文档、交易日历和基准
- en: Zipline now defaults to using the `quandl` bundle, which you’ll need an API
    Key for, and can find information about in the Data Bundles documentation.
  id: totrans-246
  prefs: []
  type: TYPE_NORMAL
  zh: Zipline现在默认使用`quandl`捆绑包，您需要一个API密钥，可以在数据捆绑包文档中找到相关信息。
- en: We’ve added many Tutorial & Documentations updates, including information on
    how to create your own `TradingCalendar`, pass it to your algorithm via the Zipline
    CLI, and how to use custom csv data using the `csvdir` bundle.
  id: totrans-247
  prefs: []
  type: TYPE_NORMAL
  zh: 我们添加了许多教程和文档更新，包括如何创建自己的`TradingCalendar`，通过Zipline CLI将其传递给您的算法，以及如何使用`csvdir`捆绑包使用自定义csv数据。
- en: Zipline is no longer being tested and packaged for Python 3.4.
  id: totrans-248
  prefs: []
  type: TYPE_NORMAL
  zh: Zipline不再为Python 3.4进行测试和打包。
- en: Zipline now requests data for SPY, the default benchmark used for Zipline backtests,
    using the [IEX Trading](https://iextrading.com) API, and no longer uses `pandas-datareader`.
    You can run a backtest up to 5 years from the current day using this data.
  id: totrans-249
  prefs: []
  type: TYPE_NORMAL
  zh: Zipline现在使用[IEX Trading](https://iextrading.com) API请求SPY的数据，SPY是Zipline回测使用的默认基准，不再使用`pandas-datareader`。您可以使用此数据运行长达5年的回测。
- en: Enhancements
  id: totrans-250
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 增强功能
- en: Grow minute file cache to 1550 by default ([1906](https://github.com/stefan-jansen/zipline/issues/1906))
  id: totrans-251
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将分钟文件缓存默认增长，到1550（[1906](https://github.com/stefan-jansen/zipline/issues/1906)）
- en: Change default commission to .001 ([1946](https://github.com/stefan-jansen/zipline/issues/1946))
  id: totrans-252
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将默认佣金更改为.001（[1946](https://github.com/stefan-jansen/zipline/issues/1946)）
- en: Enable the ability to compute multiple pipelines ([1974](https://github.com/stefan-jansen/zipline/issues/1974))
  id: totrans-253
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 启用计算多个管道的能力（[1974](https://github.com/stefan-jansen/zipline/issues/1974)）
- en: Allow users to switch between calendars ([1800](https://github.com/stefan-jansen/zipline/issues/1800))
  id: totrans-254
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 允许用户在日历之间切换（[1800](https://github.com/stefan-jansen/zipline/issues/1800)）
- en: New filter `NoMissingValues` ([1969](https://github.com/stefan-jansen/zipline/issues/1969))
  id: totrans-255
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新过滤器`NoMissingValues`（[1969](https://github.com/stefan-jansen/zipline/issues/1969)）
- en: Fail better on `AssetFinder(nonexistent_path)` ([2000](https://github.com/stefan-jansen/zipline/issues/2000))
  id: totrans-256
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在`AssetFinder(nonexistent_path)`上失败得更好（[2000](https://github.com/stefan-jansen/zipline/issues/2000)）
- en: Implement csvdir bundle ([1860](https://github.com/stefan-jansen/zipline/issues/1860))
  id: totrans-257
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 实施csvdir捆绑包（[1860](https://github.com/stefan-jansen/zipline/issues/1860)）
- en: Update quandl_bundle to use Quandl API v3 ([1990](https://github.com/stefan-jansen/zipline/issues/1990))
  id: totrans-258
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 更新quandl_bundle以使用Quandl API v3（[1990](https://github.com/stefan-jansen/zipline/issues/1990)）
- en: Add `FixedBasisPointsSlippage` slippage model ([2047](https://github.com/stefan-jansen/zipline/issues/2047))
  id: totrans-259
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加`FixedBasisPointsSlippage`滑点模型（[2047](https://github.com/stefan-jansen/zipline/issues/2047)）
- en: Create MinLeverage control ([2064](https://github.com/stefan-jansen/zipline/issues/2064))
  id: totrans-260
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 创建MinLeverage控制（[2064](https://github.com/stefan-jansen/zipline/issues/2064)）
- en: Experimental Features
  id: totrans-261
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 实验性功能
- en: Warning
  id: totrans-262
  prefs: []
  type: TYPE_NORMAL
  zh: 警告
- en: Experimental features are subject to change.
  id: totrans-263
  prefs: []
  type: TYPE_NORMAL
  zh: 实验性功能可能会更改。
- en: None
  id: totrans-264
  prefs: []
  type: TYPE_NORMAL
  zh: 无
- en: Bug Fixes
  id: totrans-265
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 错误修复
- en: '`history` calls with a frequency of `1d` now work when using a Panel as the
    minute data source. ([1920](https://github.com/stefan-jansen/zipline/issues/1920))'
  id: totrans-266
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`history`调用频率为`1d`时，当使用Panel作为分钟数据源时现在可以工作（[1920](https://github.com/stefan-jansen/zipline/issues/1920)）'
- en: Check contract exists when using futures daily bar reader ([1892](https://github.com/stefan-jansen/zipline/issues/1892))
  id: totrans-267
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在使用期货每日bar阅读器时检查合约是否存在（[1892](https://github.com/stefan-jansen/zipline/issues/1892)）
- en: '`NoDataBeforeDate` edge cases ([1894](https://github.com/stefan-jansen/zipline/issues/1894))'
  id: totrans-268
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`NoDataBeforeDate`的边缘情况（[1894](https://github.com/stefan-jansen/zipline/issues/1894)）'
- en: Fix frame column validation in Python 2.7.5 ([1954](https://github.com/stefan-jansen/zipline/issues/1954))
  id: totrans-269
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在Python 2.7.5中修复frame列验证（[1954](https://github.com/stefan-jansen/zipline/issues/1954)）
- en: Fix daily history for minute panel data backtest ([1920](https://github.com/stefan-jansen/zipline/issues/1920))
  id: totrans-270
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复分钟面板数据回测的每日历史记录（[1920](https://github.com/stefan-jansen/zipline/issues/1920)）
- en: '`get_last_traded_dt` expects a trading day ([2087](https://github.com/stefan-jansen/zipline/issues/2087))'
  id: totrans-271
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`get_last_traded_dt`期望一个交易日（[2087](https://github.com/stefan-jansen/zipline/issues/2087)）'
- en: Daily Adjustment perspective fix ([2089](https://github.com/stefan-jansen/zipline/issues/2089))
  id: totrans-272
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 每日调整视角修复（[2089](https://github.com/stefan-jansen/zipline/issues/2089)）
- en: Performance
  id: totrans-273
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 性能
- en: Change algorithm account validation from happening every minute in `handle_data`
    to only occurring once at the end of each day ([1884](https://github.com/stefan-jansen/zipline/issues/1884))
  id: totrans-274
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将算法账户验证从`handle_data`中每分钟发生一次改为仅在每天结束时发生一次（[1884](https://github.com/stefan-jansen/zipline/issues/1884)）
- en: Blaze core loader performance improvements ([1866](https://github.com/stefan-jansen/zipline/issues/1866))
  id: totrans-275
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Blaze核心加载器性能改进（[1866](https://github.com/stefan-jansen/zipline/issues/1866)）
- en: Add a new factor that just computes beta ([2021](https://github.com/stefan-jansen/zipline/issues/2021))
  id: totrans-276
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加一个仅计算beta的新因子（[2021](https://github.com/stefan-jansen/zipline/issues/2021)）
- en: Reduces memory footprint of Quandl WIKI Prices bundle ([2053](https://github.com/stefan-jansen/zipline/issues/2053))
  id: totrans-277
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 减少Quandl WIKI价格捆绑包的内存占用（[2053](https://github.com/stefan-jansen/zipline/issues/2053)）
- en: Maintenance and Refactorings
  id: totrans-278
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 维护和重构
- en: Add `CachedObject.expired()` ([1881](https://github.com/stefan-jansen/zipline/issues/1881))
  id: totrans-279
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加`CachedObject.expired()`（[1881](https://github.com/stefan-jansen/zipline/issues/1881)）
- en: Set `RollingLinearRegressionOfReturns` factor to be window_safe ([1902](https://github.com/stefan-jansen/zipline/issues/1902))
  id: totrans-280
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将`RollingLinearRegressionOfReturns`因子设置为window_safe（[1902](https://github.com/stefan-jansen/zipline/issues/1902)）
- en: Set `RSI` factor to be window_safe ([1904](https://github.com/stefan-jansen/zipline/issues/1904))
  id: totrans-281
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将`RSI`因子设置为window_safe（[1904](https://github.com/stefan-jansen/zipline/issues/1904)）
- en: Updates for better docs generation ([1890](https://github.com/stefan-jansen/zipline/issues/1890))
  id: totrans-282
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 更新以改善文档生成（[1890](https://github.com/stefan-jansen/zipline/issues/1890)）
- en: Remove and zero out unused treasury curves ([1910](https://github.com/stefan-jansen/zipline/issues/1910))
  id: totrans-283
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 移除并清零未使用的国债曲线（[1910](https://github.com/stefan-jansen/zipline/issues/1910)）
- en: Networkx 2 changes the behavior of out_degree ([1996](https://github.com/stefan-jansen/zipline/issues/1996))
  id: totrans-284
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Networkx 2改变了out_degree的行为（[1996](https://github.com/stefan-jansen/zipline/issues/1996)）
- en: Pass calendars to `DataPortal` ([2026](https://github.com/stefan-jansen/zipline/issues/2026))
  id: totrans-285
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 向`DataPortal`传递日历（[2026](https://github.com/stefan-jansen/zipline/issues/2026)）
- en: Remove old Yahoo code ([2032](https://github.com/stefan-jansen/zipline/issues/2032))
  id: totrans-286
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 移除旧的Yahoo代码（[2032](https://github.com/stefan-jansen/zipline/issues/2032)）
- en: Sync and fill benchmarks through latest trading day ([2044](https://github.com/stefan-jansen/zipline/issues/2044))
  id: totrans-287
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通过最新交易日同步和填充基准（[2044](https://github.com/stefan-jansen/zipline/issues/2044)）
- en: Provides better error message when QUANDL_API_KEY is missing ([2078](https://github.com/stefan-jansen/zipline/issues/2078))
  id: totrans-288
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当QUANDL_API_KEY缺失时提供更好的错误信息（[2078](https://github.com/stefan-jansen/zipline/issues/2078)）
- en: Improve the error message for misaligned dates in Pipeline engine ([2131](https://github.com/stefan-jansen/zipline/issues/2131))
  id: totrans-289
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 改进了管道引擎中日期错位时的错误信息（[2131](https://github.com/stefan-jansen/zipline/issues/2131)）
- en: Build
  id: totrans-290
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 构建
- en: Update the conda tools we’re using to fix our packaging ([1942](https://github.com/stefan-jansen/zipline/issues/1942))
  id: totrans-291
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 更新我们使用的conda工具以修复我们的打包问题（[1942](https://github.com/stefan-jansen/zipline/issues/1942)）
- en: Upgrade empyrical to 0.3.2 ([1983](https://github.com/stefan-jansen/zipline/issues/1983))
  id: totrans-292
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将empyrical升级至0.3.2版本（[1983](https://github.com/stefan-jansen/zipline/issues/1983)）
- en: Update conda tooling and remove Python 3.4 builds ([2009](https://github.com/stefan-jansen/zipline/issues/2009))
  id: totrans-293
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 更新conda工具并移除Python 3.4构建（[2009](https://github.com/stefan-jansen/zipline/issues/2009)）
- en: Upgrade empyrical to 0.3.3 ([2014](https://github.com/stefan-jansen/zipline/issues/2014))
  id: totrans-294
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将empyrical升级至0.3.3版本（[2014](https://github.com/stefan-jansen/zipline/issues/2014)）
- en: Upgrade empyrical to 0.3.4 ([2098](https://github.com/stefan-jansen/zipline/issues/2098))
  id: totrans-295
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将empyrical升级至0.3.4版本（[2098](https://github.com/stefan-jansen/zipline/issues/2098)）
- en: Upgrade empyrical to 0.4.2 ([2125](https://github.com/stefan-jansen/zipline/issues/2125))
  id: totrans-296
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将empyrical升级至0.4.2版本（[2125](https://github.com/stefan-jansen/zipline/issues/2125)）
- en: Documentation
  id: totrans-297
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 文档
- en: Include `MACDSignal` in zipline.io documentation ([1828](https://github.com/stefan-jansen/zipline/issues/1828))
  id: totrans-298
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在zipline.io文档中包含`MACDSignal`（[1828](https://github.com/stefan-jansen/zipline/issues/1828)）
- en: Remove mentions of Yahoo from the Beginner Tutorial ([1845](https://github.com/stefan-jansen/zipline/issues/1845))
  id: totrans-299
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从入门教程中移除所有提及雅虎的内容（[1845](https://github.com/stefan-jansen/zipline/issues/1845)）
- en: Add contributing & questions section to the README ([1889](https://github.com/stefan-jansen/zipline/issues/1889))
  id: totrans-300
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在README中添加贡献和问题部分（[1889](https://github.com/stefan-jansen/zipline/issues/1889)）
- en: Add info about using a conda envs for installs ([1922](https://github.com/stefan-jansen/zipline/issues/1922))
  id: totrans-301
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加关于使用conda环境进行安装的信息（[1922](https://github.com/stefan-jansen/zipline/issues/1922)）
- en: Fix Beginner Tutorial link ([1932](https://github.com/stefan-jansen/zipline/issues/1932))
  id: totrans-302
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复入门教程链接（[1932](https://github.com/stefan-jansen/zipline/issues/1932)）
- en: Add clean docs ([1943](https://github.com/stefan-jansen/zipline/issues/1943))
  id: totrans-303
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加干净的文档（[1943](https://github.com/stefan-jansen/zipline/issues/1943)）
- en: Add distinct warnings for benchmark and treasury fetchers ([1971](https://github.com/stefan-jansen/zipline/issues/1971))
  id: totrans-304
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为基准和财政部提取器添加不同的警告（[1971](https://github.com/stefan-jansen/zipline/issues/1971)）
- en: Add CONTRIBUTING.rst ([2033](https://github.com/stefan-jansen/zipline/issues/2033))
  id: totrans-305
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加CONTRIBUTING.rst文件（[2033](https://github.com/stefan-jansen/zipline/issues/2033)）
- en: Add tutorial on creating a custom `TradingCalendar` ([2035](https://github.com/stefan-jansen/zipline/issues/2035))
  id: totrans-306
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加关于创建自定义`TradingCalendar`的教程（[2035](https://github.com/stefan-jansen/zipline/issues/2035)）
- en: Docs & tutorial updates for ingesting, beginners, and csvdir ([2073](https://github.com/stefan-jansen/zipline/issues/2073))
  id: totrans-307
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 更新文档和教程，包括数据摄取、入门和csvdir（[2073](https://github.com/stefan-jansen/zipline/issues/2073)）
- en: Documented the new risk and performance metrics API ([2081](https://github.com/stefan-jansen/zipline/issues/2081)).
  id: totrans-308
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 记录了新的风险和绩效指标API（[2081](https://github.com/stefan-jansen/zipline/issues/2081)）。
- en: Fixed a typo in the description of `--bundle-timestamp` ([2123](https://github.com/stefan-jansen/zipline/issues/2123))
  id: totrans-309
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修正了`--bundle-timestamp`描述中的一个拼写错误（[2123](https://github.com/stefan-jansen/zipline/issues/2123)）
- en: Miscellaneous
  id: totrans-310
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 杂项
- en: None
  id: totrans-311
  prefs: []
  type: TYPE_NORMAL
  zh: 无
- en: Release 1.1.1
  id: totrans-312
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 发布1.1.1
- en: 'Release:'
  id: totrans-313
  prefs: []
  type: TYPE_NORMAL
  zh: 发布：
- en: 1.1.1
  id: totrans-314
  prefs: []
  type: TYPE_NORMAL
  zh: 1.1.1
- en: 'Date:'
  id: totrans-315
  prefs: []
  type: TYPE_NORMAL
  zh: 日期：
- en: July 5, 2017
  id: totrans-316
  prefs: []
  type: TYPE_NORMAL
  zh: 2017年7月5日
- en: Highlights
  id: totrans-317
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 亮点
- en: Zipline now has broad support for futures, in addition to equities. It’s also
    being tested and packaged for Python 3.5.
  id: totrans-318
  prefs: []
  type: TYPE_NORMAL
  zh: Zipline现在除了股票外，还广泛支持期货。它也正在为Python 3.5进行测试和打包。
- en: We also saw breaking changes occur from Yahoo changing their API endpoint, thus
    preventing users from downloading benchmark data needed for backtests. Since that
    change, we have swapped out Yahoo-related benchmarking code with references to
    Google Finance and have removed all deprecated Yahoo code, including the usage
    of custom Yahoo bundles.
  id: totrans-319
  prefs: []
  type: TYPE_NORMAL
  zh: 由于雅虎更改了其API端点，导致用户无法下载用于回测的基准数据，我们也见证了由此产生的重大变化。自那次变更以来，我们已将所有与雅虎相关的基准代码替换为对谷歌财经的引用，并移除了所有已弃用的雅虎代码，包括自定义雅虎包的使用。
- en: Enhancements
  id: totrans-320
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 增强功能
- en: Adds a property for BarData to know about current session’s minutes ([1713](https://github.com/stefan-jansen/zipline/issues/1713))
  id: totrans-321
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为BarData添加了一个属性，以了解当前会话的分钟数（[1713](https://github.com/stefan-jansen/zipline/issues/1713)）
- en: Adds a better error message for non-existent root symbols ([1715:](https://github.com/stefan-jansen/zipline/issues/1715:))
  id: totrans-322
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为不存在的根符号添加了更好的错误信息（[1715](https://github.com/stefan-jansen/zipline/issues/1715)）
- en: Adds `StaticSids` Pipeline Filter ([1717](https://github.com/stefan-jansen/zipline/issues/1717))
  id: totrans-323
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加`StaticSids`管道过滤器（[1717](https://github.com/stefan-jansen/zipline/issues/1717)）
- en: Allows `zipline.data.data_portal.DataPortal.get_spot_value` to accept multiple
    assets ([1719](https://github.com/stefan-jansen/zipline/issues/1719))
  id: totrans-324
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 允许`zipline.data.data_portal.DataPortal.get_spot_value`接受多个资产 ([1719](https://github.com/stefan-jansen/zipline/issues/1719))
- en: Adds `ContinuousFuture` to `lookup_generic` ([1718](https://github.com/stefan-jansen/zipline/issues/1718))
  id: totrans-325
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在`lookup_generic`中添加了`ContinuousFuture` ([1718](https://github.com/stefan-jansen/zipline/issues/1718))
- en: Adds CFE Adhoc Holidays to `exchange_calendar_cfe` ([1698](https://github.com/stefan-jansen/zipline/issues/1698))
  id: totrans-326
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在`exchange_calendar_cfe`中添加CFE Adhoc假日 ([1698](https://github.com/stefan-jansen/zipline/issues/1698))
- en: Allows overriding of order amount rounding ([1722](https://github.com/stefan-jansen/zipline/issues/1722))
  id: totrans-327
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 允许覆盖订单金额的舍入 ([1722](https://github.com/stefan-jansen/zipline/issues/1722))
- en: Makes continuous future adjustment style an argument ([1726](https://github.com/stefan-jansen/zipline/issues/1726))
  id: totrans-328
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将连续期货调整风格作为参数 ([1726](https://github.com/stefan-jansen/zipline/issues/1726))
- en: Adds preliminary support for Futures slippage and commission models ([1738](https://github.com/stefan-jansen/zipline/issues/1738))
  id: totrans-329
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加了对期货滑点和佣金模型的初步支持 ([1738](https://github.com/stefan-jansen/zipline/issues/1738))
- en: Fix a bug in cost basis calculation and change all mentions of `sid` to `asset`
    ([1757](https://github.com/stefan-jansen/zipline/issues/1757))
  id: totrans-330
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了成本基础计算中的一个bug，并将所有提及的`sid`改为`asset` ([1757](https://github.com/stefan-jansen/zipline/issues/1757))
- en: Add slippage and commission models for futures ([1748](https://github.com/stefan-jansen/zipline/issues/1748))
  id: totrans-331
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为期货添加滑点和佣金模型 ([1748](https://github.com/stefan-jansen/zipline/issues/1748))
- en: Use Python 3.5 in our Dockerfile ([1806](https://github.com/stefan-jansen/zipline/issues/1806))
  id: totrans-332
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在我们的Dockerfile中使用Python 3.5 ([1806](https://github.com/stefan-jansen/zipline/issues/1806))
- en: Allow pipelines to be run in chunks ([1811](https://github.com/stefan-jansen/zipline/issues/1811))
  id: totrans-333
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 允许以块的形式运行管道 ([1811](https://github.com/stefan-jansen/zipline/issues/1811))
- en: Adds get_range to BenchmarkSource ([1815](https://github.com/stefan-jansen/zipline/issues/1815))
  id: totrans-334
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为BenchmarkSource添加了get_range方法 ([1815](https://github.com/stefan-jansen/zipline/issues/1815))
- en: Adds support for relabeling classifiers in Pipeline ([1833](https://github.com/stefan-jansen/zipline/issues/1833))
  id: totrans-335
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加了对Pipeline中重命名分类器的支持 ([1833](https://github.com/stefan-jansen/zipline/issues/1833))
- en: Experimental Features
  id: totrans-336
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 实验性功能
- en: Warning
  id: totrans-337
  prefs: []
  type: TYPE_NORMAL
  zh: 警告
- en: Experimental features are subject to change.
  id: totrans-338
  prefs: []
  type: TYPE_NORMAL
  zh: 实验性功能可能会发生变化。
- en: None
  id: totrans-339
  prefs: []
  type: TYPE_NORMAL
  zh: 无
- en: Bug Fixes
  id: totrans-340
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 错误修复
- en: Fixes a floating point division issue in `zipline.data.minute_bars` by using
    integer divison instead ([1683](https://github.com/stefan-jansen/zipline/issues/1683))
  id: totrans-341
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在`zipline.data.minute_bars`中通过使用整数除法而不是浮点除法来修复浮点除法问题 ([1683](https://github.com/stefan-jansen/zipline/issues/1683))
- en: Sorts data in `zipline.pipeline.loaders.blaze.core` on `asof_date` to resolve
    timestamp conflicts ([1710](https://github.com/stefan-jansen/zipline/issues/1710))
  id: totrans-342
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在`zipline.pipeline.loaders.blaze.core`中按`asof_date`排序数据以解决时间戳冲突 ([1710](https://github.com/stefan-jansen/zipline/issues/1710))
- en: Swapped out Yahoo for Google Finance benchmark data ([1812](https://github.com/stefan-jansen/zipline/issues/1812))
  id: totrans-343
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将Yahoo替换为Google Finance的基准数据 ([1812](https://github.com/stefan-jansen/zipline/issues/1812))
- en: Gold and silver futures contracts only traded during certain months ([1779](https://github.com/stefan-jansen/zipline/issues/1779))
  id: totrans-344
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 黄金和白银期货合约仅在特定月份交易 ([1779](https://github.com/stefan-jansen/zipline/issues/1779))
- en: Fixes bug in TradingCalendar initialization when we use tzaware datetimes ([1802](https://github.com/stefan-jansen/zipline/issues/1802))
  id: totrans-345
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了在交易日历初始化时使用时区感知时间时出现的bug ([1802](https://github.com/stefan-jansen/zipline/issues/1802))
- en: Fixes precision issues on futures prices when rounding ([1788](https://github.com/stefan-jansen/zipline/issues/1788))
  id: totrans-346
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了期货价格四舍五入时的精度问题 ([1788](https://github.com/stefan-jansen/zipline/issues/1788))
- en: Performance
  id: totrans-347
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 性能
- en: Avoid repeated recursive calls when getting forward-filled close price ([1735](https://github.com/stefan-jansen/zipline/issues/1735))
  id: totrans-348
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在获取前向填充的收盘价时避免重复的递归调用 ([1735](https://github.com/stefan-jansen/zipline/issues/1735))
- en: Maintenance and Refactorings
  id: totrans-349
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 维护和重构
- en: Adds linter recommendations to adjustments module ([1712](https://github.com/stefan-jansen/zipline/issues/1712))
  id: totrans-350
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在调整模块中添加了linter建议 ([1712](https://github.com/stefan-jansen/zipline/issues/1712))
- en: Clears up naming and logic in resample close ([1728](https://github.com/stefan-jansen/zipline/issues/1728))
  id: totrans-351
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 清理了重采样收盘价中的命名和逻辑 ([1728](https://github.com/stefan-jansen/zipline/issues/1728))
- en: Use March quarterly cycle for several continuous futures ([1762](https://github.com/stefan-jansen/zipline/issues/1762))
  id: totrans-352
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对多个连续期货使用三月季度周期 ([1762](https://github.com/stefan-jansen/zipline/issues/1762))
- en: Use better repr for Transaction objects ([1746](https://github.com/stefan-jansen/zipline/issues/1746))
  id: totrans-353
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 改进了Transaction对象的repr表示 ([1746](https://github.com/stefan-jansen/zipline/issues/1746))
- en: Shorten repr for Asset objects ([1786](https://github.com/stefan-jansen/zipline/issues/1786))
  id: totrans-354
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 缩短了Asset对象的repr（[1786](https://github.com/stefan-jansen/zipline/issues/1786)）
- en: Removes usage of empyrical’s information ratio ([1854](https://github.com/stefan-jansen/zipline/issues/1854))
  id: totrans-355
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 移除了对empyrical的信息比率的使用（[1854](https://github.com/stefan-jansen/zipline/issues/1854)）
- en: Build
  id: totrans-356
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 构建
- en: Adds Python 3.5 packages ([1701](https://github.com/stefan-jansen/zipline/issues/1701))
  id: totrans-357
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加了Python 3.5包（[1701](https://github.com/stefan-jansen/zipline/issues/1701)）
- en: Swap conda-build arguments so we don’t build packages on every CI build ([1813](https://github.com/stefan-jansen/zipline/issues/1813))
  id: totrans-358
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 交换conda-build参数，这样我们就不在每次CI构建时构建包（[1813](https://github.com/stefan-jansen/zipline/issues/1813)）
- en: Documentation
  id: totrans-359
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 文档
- en: Adds Zipline Development Guidelines, for people to read about how to contribute
    to zipline ([1820](https://github.com/stefan-jansen/zipline/issues/1820))
  id: totrans-360
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加了Zipline开发指南，供人们阅读如何为Zipline做出贡献（[1820](https://github.com/stefan-jansen/zipline/issues/1820)）
- en: Show exchange as required for equities ([1731](https://github.com/stefan-jansen/zipline/issues/1731))
  id: totrans-361
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 显示交易所是股票的必需项（[1731](https://github.com/stefan-jansen/zipline/issues/1731)）
- en: Updates the Zipline Beginner Tutorial notebook ([1707](https://github.com/stefan-jansen/zipline/issues/1707))
  id: totrans-362
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 更新了Zipline初学者教程笔记本（[1707](https://github.com/stefan-jansen/zipline/issues/1707)）
- en: Includes PipelineEngine, pipeline Term, Factors, and other pipeline things to
    docs ([1826](https://github.com/stefan-jansen/zipline/issues/1826))
  id: totrans-363
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将PipelineEngine、pipeline Term、Factors和其他pipeline相关内容添加到文档中（[1826](https://github.com/stefan-jansen/zipline/issues/1826)）
- en: Miscellaneous
  id: totrans-364
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 杂项
- en: Use csv market data with `run_algorithm` so we don’t try to download data for
    tests ([1793](https://github.com/stefan-jansen/zipline/issues/1793))
  id: totrans-365
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用带有`run_algorithm`的csv市场数据，这样我们在测试时就不会尝试下载数据（[1793](https://github.com/stefan-jansen/zipline/issues/1793)）
- en: Updates Dockerfile to use Python 3.5
  id: totrans-366
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 更新Dockerfile以使用Python 3.5
- en: Release 1.1.0
  id: totrans-367
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 发布1.1.0
- en: 'Release:'
  id: totrans-368
  prefs: []
  type: TYPE_NORMAL
  zh: 发布：
- en: 1.1.0
  id: totrans-369
  prefs: []
  type: TYPE_NORMAL
  zh: 1.1.0
- en: 'Date:'
  id: totrans-370
  prefs: []
  type: TYPE_NORMAL
  zh: 日期：
- en: March 10, 2017
  id: totrans-371
  prefs: []
  type: TYPE_NORMAL
  zh: 2017年3月10日
- en: This release is meant to provide zipline support for pandas 0.18, as well as
    several bug fixes, API changes, and many performance changes.
  id: totrans-372
  prefs: []
  type: TYPE_NORMAL
  zh: 此版本旨在为Zipline提供对pandas 0.18的支持，以及多个错误修复、API更改和许多性能更改。
- en: Enhancements
  id: totrans-373
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 增强功能
- en: Makes the minute bar read catch NoDataOnDate exceptions if dates are not in
    the calendar. Before, the minute bar reader was forward filling, but now it returns
    nan for OHLC and 0 for V. ([1488](https://github.com/stefan-jansen/zipline/issues/1488))
  id: totrans-374
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果日期不在日历中，分钟条读取器会捕获NoDataOnDate异常。之前，分钟条读取器是向前填充的，但现在它为OHLC返回nan，为V返回0。（[1488](https://github.com/stefan-jansen/zipline/issues/1488)）
- en: Adds `truncate` method to `BcolzMinuteBarWriter` ([1499](https://github.com/stefan-jansen/zipline/issues/1499))
  id: totrans-375
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为`BcolzMinuteBarWriter`添加了`truncate`方法（[1499](https://github.com/stefan-jansen/zipline/issues/1499)）
- en: Bumps up to pandas 0.18.1 and numpy 1.11.1 ([1339](https://github.com/stefan-jansen/zipline/issues/1339))
  id: totrans-376
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 升级到pandas 0.18.1和numpy 1.11.1（[1339](https://github.com/stefan-jansen/zipline/issues/1339)）
- en: Adds an earnings estimates quarter loader for Pipeline ([1396](https://github.com/stefan-jansen/zipline/issues/1396))
  id: totrans-377
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为Pipeline添加了收益估计季度加载器（[1396](https://github.com/stefan-jansen/zipline/issues/1396)）
- en: Creates a restricted list manager that takes in information about restricted
    sids and stores in memory upon instantiation ([1487](https://github.com/stefan-jansen/zipline/issues/1487))
  id: totrans-378
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 创建了一个受限列表管理器，它在实例化时接收有关受限sid的信息并将其存储在内存中（[1487](https://github.com/stefan-jansen/zipline/issues/1487)）
- en: Adds `last_available{session, minute}` args to `DataPortal` ([1528](https://github.com/stefan-jansen/zipline/issues/1528))
  id: totrans-379
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为`DataPortal`添加了`last_available{session, minute}`参数（[1528](https://github.com/stefan-jansen/zipline/issues/1528)）
- en: Adds `SpecificAssets` filter ([1530](https://github.com/stefan-jansen/zipline/issues/1530))
  id: totrans-380
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加了`SpecificAssets`过滤器（[1530](https://github.com/stefan-jansen/zipline/issues/1530)）
- en: Adds the ability for an algorithm to request the current contract for a future
    chain ([1529](https://github.com/stefan-jansen/zipline/issues/1529))
  id: totrans-381
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加了算法请求未来链的当前合约的能力（[1529](https://github.com/stefan-jansen/zipline/issues/1529)）
- en: Adds `chain` field to current and supporting methods in `DataPortal` and `OrderedContracts`
    ([1538](https://github.com/stefan-jansen/zipline/issues/1538))
  id: totrans-382
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在`DataPortal`和`OrderedContracts`的当前和支持方法中添加了`chain`字段（[1538](https://github.com/stefan-jansen/zipline/issues/1538)）
- en: Adds history for continuous futures ([1539](https://github.com/stefan-jansen/zipline/issues/1539))
  id: totrans-383
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为连续期货添加了历史记录（[1539](https://github.com/stefan-jansen/zipline/issues/1539)）
- en: Adds adjusted history for continuous future ([1548](https://github.com/stefan-jansen/zipline/issues/1548))
  id: totrans-384
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为连续期货添加了调整后的历史记录（[1548](https://github.com/stefan-jansen/zipline/issues/1548)）
- en: Adds roll style which takes the volume of a future contract into account, specifically
    for continuous futures ([1556](https://github.com/stefan-jansen/zipline/issues/1556))
  id: totrans-385
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加考虑期货合约成交量的滚动风格，特别适用于连续期货（[1556](https://github.com/stefan-jansen/zipline/issues/1556)）
- en: Adds better error message when calling Zipline API functions outside of a running
    simulation ([1593](https://github.com/stefan-jansen/zipline/issues/1593))
  id: totrans-386
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在调用Zipline API函数时，当不在运行模拟中时，添加更好的错误消息（[1593](https://github.com/stefan-jansen/zipline/issues/1593)）
- en: Adds `MACDSignal()`, `MovingAverageConvergenceDivergenceSignal()`, and `AnnualizedVolatility()`
    as built-in factors. ([1588](https://github.com/stefan-jansen/zipline/issues/1588))
  id: totrans-387
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加`MACDSignal()`、`MovingAverageConvergenceDivergenceSignal()`和`AnnualizedVolatility()`作为内置因子（[1588](https://github.com/stefan-jansen/zipline/issues/1588)）
- en: Allows running pipelines with custom date chunks in `attach_pipeline` ([1617](https://github.com/stefan-jansen/zipline/issues/1617))
  id: totrans-388
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 允许在`attach_pipeline`中使用自定义日期块运行管道（[1617](https://github.com/stefan-jansen/zipline/issues/1617)）
- en: Adds `order_batch` to the trade blotter ([1596](https://github.com/stefan-jansen/zipline/issues/1596))
  id: totrans-389
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在交易记录中添加`order_batch`（[1596](https://github.com/stefan-jansen/zipline/issues/1596)）
- en: Adds vectorized lookup_symbol ([1627](https://github.com/stefan-jansen/zipline/issues/1627))
  id: totrans-390
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加矢量化lookup_symbol（[1627](https://github.com/stefan-jansen/zipline/issues/1627)）
- en: Solidifies equality comparisons for SlippageModel classes ([1657](https://github.com/stefan-jansen/zipline/issues/1657))
  id: totrans-391
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为SlippageModel类固化相等比较（[1657](https://github.com/stefan-jansen/zipline/issues/1657)）
- en: Adds a factor for winsorized results ([1696](https://github.com/stefan-jansen/zipline/issues/1696))
  id: totrans-392
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为截尾结果添加因子（[1696](https://github.com/stefan-jansen/zipline/issues/1696)）
- en: Bug Fixes
  id: totrans-393
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 错误修复
- en: Changes str to string_types to avoid errors when type checking unicode and not
    str type. ([1315](https://github.com/stefan-jansen/zipline/issues/1315))
  id: totrans-394
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将str更改为string_types，以避免在类型检查unicode而不是str类型时出错（[1315](https://github.com/stefan-jansen/zipline/issues/1315)）
- en: Algorithms default to quantopian-quandl bundle when no data source is specified
    ([1479](https://github.com/stefan-jansen/zipline/issues/1479)) ([1374](https://github.com/stefan-jansen/zipline/issues/1374))
  id: totrans-395
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当未指定数据源时，算法默认使用quantopian-quandl包（[1479](https://github.com/stefan-jansen/zipline/issues/1479)）（[1374](https://github.com/stefan-jansen/zipline/issues/1374)）
- en: Catches all missing data exceptions when computing dividend ratios ([1507](https://github.com/stefan-jansen/zipline/issues/1507))
  id: totrans-396
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在计算股息比率时捕获所有缺失数据异常（[1507](https://github.com/stefan-jansen/zipline/issues/1507)）
- en: Creates adjustments based on ordered assets instead of a set. Before, adjustments
    were created for estimates based on where assets happened to fall in a set rather
    than using ordered assets ([1547](https://github.com/stefan-jansen/zipline/issues/1547))
  id: totrans-397
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 根据有序资产创建调整，而不是根据资产在集合中的位置创建调整（[1547](https://github.com/stefan-jansen/zipline/issues/1547)）
- en: Fixes blaze pipeline queries for when users query for the `asof_date` column
    ([1608](https://github.com/stefan-jansen/zipline/issues/1608))
  id: totrans-398
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复当用户查询`asof_date`列时，blaze管道查询的问题（[1608](https://github.com/stefan-jansen/zipline/issues/1608)）
- en: Datetimes should be converted in utc. DataFrames being returned were creating
    US/Eastern timestamps out of the ints, potentially changing the date returned
    to be the date before ([1635](https://github.com/stefan-jansen/zipline/issues/1635))
  id: totrans-399
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 应将日期时间转换为UTC。返回的DataFrame正在将整数转换为美国/东部时间戳，可能导致返回的日期变为前一天的日期（[1635](https://github.com/stefan-jansen/zipline/issues/1635)）
- en: Fixes default inputs for `IchimokuKinkoHyo` factor ([1638](https://github.com/stefan-jansen/zipline/issues/1638))
  id: totrans-400
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复`IchimokuKinkoHyo`因子的默认输入（[1638](https://github.com/stefan-jansen/zipline/issues/1638)）
- en: Performance
  id: totrans-401
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 性能
- en: Removes invocations of `get_calendar('NYSE')` which cuts down zipline import
    time and makes the CLI more responsive and use less memory. ([1471](https://github.com/stefan-jansen/zipline/issues/1471))
  id: totrans-402
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 移除`get_calendar('NYSE')`的调用，缩短zipline导入时间，使CLI更加响应迅速，占用更少内存（[1471](https://github.com/stefan-jansen/zipline/issues/1471)）
- en: Refcounts and releases pipeline terms when they are no longer needed ([1484](https://github.com/stefan-jansen/zipline/issues/1484))
  id: totrans-403
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在不再需要时，对管道项进行引用计数和释放（[1484](https://github.com/stefan-jansen/zipline/issues/1484)）
- en: Saves up to 75% of calls to minute_to_session_label ([1492](https://github.com/stefan-jansen/zipline/issues/1492))
  id: totrans-404
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将调用minute_to_session_label的次数减少高达75%（[1492](https://github.com/stefan-jansen/zipline/issues/1492)）
- en: Speeds up counting of number of minutes across contiguous session ([1497](https://github.com/stefan-jansen/zipline/issues/1497))
  id: totrans-405
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 加快连续会话中分钟数计数速度（[1497](https://github.com/stefan-jansen/zipline/issues/1497)）
- en: Removes/defers calls to get_loc on large indices ([1504](https://github.com/stefan-jansen/zipline/issues/1504))
    ([1503](https://github.com/stefan-jansen/zipline/issues/1503))
  id: totrans-406
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 移除/推迟了对大型索引的get_loc调用（[1504](https://github.com/stefan-jansen/zipline/issues/1504)）（[1503](https://github.com/stefan-jansen/zipline/issues/1503)）
- en: Replaces `get_loc` calls in `calc_dividend_ratios` with `get_indexer` ([1510](https://github.com/stefan-jansen/zipline/issues/1510))
  id: totrans-407
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在`calc_dividend_ratios`中用`get_indexer`替换了`get_loc`调用（[1510](https://github.com/stefan-jansen/zipline/issues/1510)）
- en: Speeds up minute to session sampling ([1549](https://github.com/stefan-jansen/zipline/issues/1549))
  id: totrans-408
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 加快了分钟到会话的抽样速度（[1549](https://github.com/stefan-jansen/zipline/issues/1549)）
- en: Adds some micro optimizations in `data.current` ([1561](https://github.com/stefan-jansen/zipline/issues/1561))
  id: totrans-409
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在`data.current`中添加了一些微优化（[1561](https://github.com/stefan-jansen/zipline/issues/1561)）
- en: Adds optimization for initial workspace for pipelines ([1521](https://github.com/stefan-jansen/zipline/issues/1521))
  id: totrans-410
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为管道初始工作区添加了优化（[1521](https://github.com/stefan-jansen/zipline/issues/1521)）
- en: More memory savings ([1599](https://github.com/stefan-jansen/zipline/issues/1599))
  id: totrans-411
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 更多的内存节省（[1599](https://github.com/stefan-jansen/zipline/issues/1599)）
- en: Maintenance and Refactorings
  id: totrans-412
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 维护和重构
- en: Updates leveraged ETF list ([747](https://github.com/stefan-jansen/zipline/issues/747))
    ([1434](https://github.com/stefan-jansen/zipline/issues/1434))
  id: totrans-413
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 更新了杠杆ETF列表（[747](https://github.com/stefan-jansen/zipline/issues/747)）（[1434](https://github.com/stefan-jansen/zipline/issues/1434)）
- en: Adds additional fields to `__getitem__` for Order class ([1483](https://github.com/stefan-jansen/zipline/issues/1483))
  id: totrans-414
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为Order类的`__getitem__`添加了额外字段（[1483](https://github.com/stefan-jansen/zipline/issues/1483)）
- en: Adds `BarReader` base class for minute and session readers ([1486](https://github.com/stefan-jansen/zipline/issues/1486))
  id: totrans-415
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为分钟和会话阅读器添加了`BarReader`基类（[1486](https://github.com/stefan-jansen/zipline/issues/1486)）
- en: Removes `future_chain` API method, to be replaced by `data.current_chain` ([1502](https://github.com/stefan-jansen/zipline/issues/1502))
  id: totrans-416
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 移除了`future_chain` API方法，将由`data.current_chain`替换（[1502](https://github.com/stefan-jansen/zipline/issues/1502)）
- en: Puts zipline back on blaze master ([1505](https://github.com/stefan-jansen/zipline/issues/1505))
  id: totrans-417
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将zipline重新放回blaze主分支（[1505](https://github.com/stefan-jansen/zipline/issues/1505)）
- en: Adds Tini and sets version range for numpy, pandas, and scipy in Dockerfile
    ([1514](https://github.com/stefan-jansen/zipline/issues/1514))
  id: totrans-418
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在Dockerfile中添加了Tini，并为numpy、pandas和scipy设置了版本范围（[1514](https://github.com/stefan-jansen/zipline/issues/1514)）
- en: Deprecates `set_do_not_order_list` ([1487](https://github.com/stefan-jansen/zipline/issues/1487))
  id: totrans-419
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 弃用了`set_do_not_order_list`（[1487](https://github.com/stefan-jansen/zipline/issues/1487)）
- en: Uses `Timedelta` instead of `DateOffset` ([1487](https://github.com/stefan-jansen/zipline/issues/1487))
  id: totrans-420
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用`Timedelta`代替`DateOffset`（[1487](https://github.com/stefan-jansen/zipline/issues/1487)）
- en: Update and pin more dev requirements ([1642](https://github.com/stefan-jansen/zipline/issues/1642))
  id: totrans-421
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 更新并固定了更多的开发需求（[1642](https://github.com/stefan-jansen/zipline/issues/1642)）
- en: Build
  id: totrans-422
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 构建
- en: Adds binary dependency on numpy for empyrical
  id: totrans-423
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为empyrical添加了numpy的二进制依赖
- en: Removes old numpy/pandas versions from Travis ([1339](https://github.com/stefan-jansen/zipline/issues/1339))
  id: totrans-424
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从Travis中移除了旧的numpy/pandas版本（[1339](https://github.com/stefan-jansen/zipline/issues/1339)）
- en: Updates appveyor.yml for new numpy and pandas ([1339](https://github.com/stefan-jansen/zipline/issues/1339))
  id: totrans-425
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 更新了appveyor.yml以适应新的numpy和pandas（[1339](https://github.com/stefan-jansen/zipline/issues/1339)）
- en: Downgrades to scipy 0.17 ([1339](https://github.com/stefan-jansen/zipline/issues/1339))
  id: totrans-426
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 降级到scipy 0.17（[1339](https://github.com/stefan-jansen/zipline/issues/1339)）
- en: Bumps empyrical to 0.2.2
  id: totrans-427
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将empyrical升级到0.2.2
- en: Documentation
  id: totrans-428
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 文档
- en: Updated example notebook for latest zipline cell magic
  id: totrans-429
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为最新的zipline单元魔法更新了示例笔记本
- en: Adds ANACONDA_TOKEN directions ([1589](https://github.com/stefan-jansen/zipline/issues/1589))
  id: totrans-430
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加了ANACONDA_TOKEN说明（[1589](https://github.com/stefan-jansen/zipline/issues/1589)）
- en: Miscellaneous
  id: totrans-431
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 杂项
- en: Changed the short-opt for `--before` in the `zipline clean` entrypoint. The
    new argument is `-e`. The old argument, `-b`, conflicted with the `--bundle` short-opt
    ([1625](https://github.com/stefan-jansen/zipline/issues/1625)).
  id: totrans-432
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 更改了`zipline clean`入口点的`--before`短选项。新参数是`-e`。旧参数`-b`与`--bundle`短选项冲突（[1625](https://github.com/stefan-jansen/zipline/issues/1625)）。
- en: Release 1.0.2
  id: totrans-433
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 发布1.0.2
- en: 'Release:'
  id: totrans-434
  prefs: []
  type: TYPE_NORMAL
  zh: 发布：
- en: 1.0.2
  id: totrans-435
  prefs: []
  type: TYPE_NORMAL
  zh: 1.0.2
- en: 'Date:'
  id: totrans-436
  prefs: []
  type: TYPE_NORMAL
  zh: 日期：
- en: September 8, 2016
  id: totrans-437
  prefs: []
  type: TYPE_NORMAL
  zh: 2016年9月8日
- en: Enhancements
  id: totrans-438
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 增强功能
- en: Adds forward fill checkpoint tables for the blaze core loader. This allow the
    loader to more efficiently forward fill the data by capping the lower date it
    must search for when querying data. The checkpoints should have novel deltas applied
    ([1276](https://github.com/stefan-jansen/zipline/issues/1276)).
  id: totrans-439
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为blaze核心加载器添加了前向填充检查点表。这使得加载器在查询数据时能够更高效地进行前向填充，通过限制必须搜索的最低日期。检查点应该应用新的增量（[1276](https://github.com/stefan-jansen/zipline/issues/1276)）。
- en: Updated VagrantFile to include all dev requirements and use a newer image ([1310](https://github.com/stefan-jansen/zipline/issues/1310)).
  id: totrans-440
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 更新VagrantFile以包含所有开发需求并使用更新的镜像（[1310](https://github.com/stefan-jansen/zipline/issues/1310)）。
- en: Allow correlations and regressions to be computed between two 2D factors by
    doing computations asset-wise ([1307](https://github.com/stefan-jansen/zipline/issues/1307)).
  id: totrans-441
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 允许通过资产方式计算两个二维因子之间的相关性和回归（[1307](https://github.com/stefan-jansen/zipline/issues/1307)）。
- en: Filters have been made window_safe by default. Now they can be passed in as
    arguments to other Filters, Factors and Classifiers ([1338](https://github.com/stefan-jansen/zipline/issues/1338)).
  id: totrans-442
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 过滤器默认已设置为窗口安全。现在它们可以作为参数传递给其他过滤器、因子和分类器（[1338](https://github.com/stefan-jansen/zipline/issues/1338)）。
- en: Added an optional `groupby` parameter to `rank()`, `top()`, and `bottom()`.
    ([1349](https://github.com/stefan-jansen/zipline/issues/1349)).
  id: totrans-443
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在`rank()`、`top()`和`bottom()`中添加了一个可选的`groupby`参数。（[1349](https://github.com/stefan-jansen/zipline/issues/1349)）。
- en: Added new pipeline filters, [`All`](api-reference.html#zipline.pipeline.filters.All
    "zipline.pipeline.filters.All") and [`Any`](api-reference.html#zipline.pipeline.filters.Any
    "zipline.pipeline.filters.Any"), which takes another filter and returns True if
    an asset produced a True for any/all days in the previous `window_length` days
    ([1358](https://github.com/stefan-jansen/zipline/issues/1358)).
  id: totrans-444
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加了新的流水线过滤器，[`All`](api-reference.html#zipline.pipeline.filters.All "zipline.pipeline.filters.All")和[`Any`](api-reference.html#zipline.pipeline.filters.Any
    "zipline.pipeline.filters.Any")，它接受另一个过滤器，并在资产在前`window_length`天内产生任何/所有天的True时返回True（[1358](https://github.com/stefan-jansen/zipline/issues/1358)）。
- en: Added new pipeline filter [`AtLeastN`](api-reference.html#zipline.pipeline.filters.AtLeastN
    "zipline.pipeline.filters.AtLeastN"), which takes another filter and an int N
    and returns True if an asset produced a True on N or more days in the previous
    `window_length` days ([1367](https://github.com/stefan-jansen/zipline/issues/1367)).
  id: totrans-445
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加了新的流水线过滤器[`AtLeastN`](api-reference.html#zipline.pipeline.filters.AtLeastN
    "zipline.pipeline.filters.AtLeastN")，它接受另一个过滤器和一个整数N，并在资产在前`window_length`天内产生N天或更多天的True时返回True（[1367](https://github.com/stefan-jansen/zipline/issues/1367)）。
- en: Use external library empyrical for risk calculations. Empyrical unifies risk
    metric calculations between pyfolio and zipline. Empyrical adds custom annualization
    options for returns of custom frequencies. ([855](https://github.com/stefan-jansen/zipline/issues/855))
  id: totrans-446
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用外部库empyrical进行风险计算。Empyrical统一了pyfolio和zipline之间的风险度量计算。Empyrical为自定义频率的回报添加了自定义年化选项。（[855](https://github.com/stefan-jansen/zipline/issues/855)）
- en: Add Aroon factor. ([1258](https://github.com/stefan-jansen/zipline/issues/1258))
  id: totrans-447
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加阿隆因子。（[1258](https://github.com/stefan-jansen/zipline/issues/1258)）
- en: Add fast stochastic oscillator factor. ([1255](https://github.com/stefan-jansen/zipline/issues/1255))
  id: totrans-448
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加快速随机振荡因子。（[1255](https://github.com/stefan-jansen/zipline/issues/1255)）
- en: Add a Dockerfile. ([1254](https://github.com/stefan-jansen/zipline/issues/1254))
  id: totrans-449
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加Dockerfile。（[1254](https://github.com/stefan-jansen/zipline/issues/1254)）
- en: New trading calendar which supports sessions which span across midnights, e.g.
    24 hour 6:01PM-6:00PM sessions for futures trading. zipline.utils.tradingcalendar
    is now deprecated. ([1138](https://github.com/stefan-jansen/zipline/issues/1138))
    ([1312](https://github.com/stefan-jansen/zipline/issues/1312))
  id: totrans-450
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新增交易日历，支持跨午夜的会话，例如期货交易的24小时6:01PM-6:00PM会话。zipline.utils.tradingcalendar现已弃用。（[1138](https://github.com/stefan-jansen/zipline/issues/1138)）（[1312](https://github.com/stefan-jansen/zipline/issues/1312)）
- en: Allow slicing a single column out of a Factor/Filter/Classifier. ([1267](https://github.com/stefan-jansen/zipline/issues/1267))
  id: totrans-451
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 允许从因子/过滤器/分类器中切片单个列。（[1267](https://github.com/stefan-jansen/zipline/issues/1267)）
- en: Provide Ichimoku Cloud factor ([1263](https://github.com/stefan-jansen/zipline/issues/1263))
  id: totrans-452
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 提供一目均衡表因子（[1263](https://github.com/stefan-jansen/zipline/issues/1263)）
- en: Allow default parameters on Pipeline terms. ([1263](https://github.com/stefan-jansen/zipline/issues/1263))
  id: totrans-453
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 允许在流水线项上设置默认参数。（[1263](https://github.com/stefan-jansen/zipline/issues/1263)）
- en: Provide rate of change percentage factor. ([1324](https://github.com/stefan-jansen/zipline/issues/1324))
  id: totrans-454
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 提供变化率百分比因子。（[1324](https://github.com/stefan-jansen/zipline/issues/1324)）
- en: Provide linear weighted moving average factor. ([1325](https://github.com/stefan-jansen/zipline/issues/1325))
  id: totrans-455
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 提供线性加权移动平均因子。（[1325](https://github.com/stefan-jansen/zipline/issues/1325)）
- en: Add `NotNullFilter`. ([1345](https://github.com/stefan-jansen/zipline/issues/1345))
  id: totrans-456
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加`NotNullFilter`。（[1345](https://github.com/stefan-jansen/zipline/issues/1345)）
- en: Allow capital changes to be defined by a target value. ([1337](https://github.com/stefan-jansen/zipline/issues/1337))
  id: totrans-457
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 允许通过目标值定义资本变动。（[1337](https://github.com/stefan-jansen/zipline/issues/1337)）
- en: Add `TrueRange` factor. ([1348](https://github.com/stefan-jansen/zipline/issues/1348))
  id: totrans-458
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加`TrueRange`因子。([1348](https://github.com/stefan-jansen/zipline/issues/1348))
- en: Add point in time lookups to `assets.db`. ([1361](https://github.com/stefan-jansen/zipline/issues/1361))
  id: totrans-459
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 向`assets.db`添加即时查找功能。([1361](https://github.com/stefan-jansen/zipline/issues/1361))
- en: Make `can_trade` aware of the asset’s exchange . ([1346](https://github.com/stefan-jansen/zipline/issues/1346))
  id: totrans-460
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使`can_trade`意识到资产的交易所。([1346](https://github.com/stefan-jansen/zipline/issues/1346))
- en: Add `downsample` method to all computable terms. ([1394](https://github.com/stefan-jansen/zipline/issues/1394))
  id: totrans-461
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 向所有可计算项添加`downsample`方法。([1394](https://github.com/stefan-jansen/zipline/issues/1394))
- en: Add QuantopianUSFuturesCalendar. ([1414](https://github.com/stefan-jansen/zipline/issues/1414))
  id: totrans-462
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加QuantopianUSFuturesCalendar。([1414](https://github.com/stefan-jansen/zipline/issues/1414))
- en: Enable publishing of old `assets.db` versions. ([1430](https://github.com/stefan-jansen/zipline/issues/1430))
  id: totrans-463
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 启用旧版`assets.db`版本的发布。([1430](https://github.com/stefan-jansen/zipline/issues/1430))
- en: Enable `schedule_function` for Futures trading calendar. ([1442](https://github.com/stefan-jansen/zipline/issues/1442))
  id: totrans-464
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为期货交易日历启用`schedule_function`。([1442](https://github.com/stefan-jansen/zipline/issues/1442))
- en: Disallow regressions of length 1\. ([1466](https://github.com/stefan-jansen/zipline/issues/1466))
  id: totrans-465
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 不允许长度为1的回归。([1466](https://github.com/stefan-jansen/zipline/issues/1466))
- en: Experimental
  id: totrans-466
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 实验性
- en: Add support for comingled Future and Equity history windows, and enable other
    Future data access via data portal. ([1435](https://github.com/stefan-jansen/zipline/issues/1435))
    ([1432](https://github.com/stefan-jansen/zipline/issues/1432))
  id: totrans-467
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加对混合期货和股票历史窗口的支持，并通过数据门户启用其他期货数据访问。([1435](https://github.com/stefan-jansen/zipline/issues/1435))
    ([1432](https://github.com/stefan-jansen/zipline/issues/1432))
- en: Bug Fixes
  id: totrans-468
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 错误修复
- en: Changes [`AverageDollarVolume`](api-reference.html#zipline.pipeline.factors.AverageDollarVolume
    "zipline.pipeline.factors.AverageDollarVolume") built-in factor to treat missing
    close or volume values as 0\. Previously, NaNs were simply discarded before averaging,
    giving the remaining values too much weight ([1309](https://github.com/stefan-jansen/zipline/issues/1309)).
  id: totrans-469
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将内置因子[`AverageDollarVolume`](api-reference.html#zipline.pipeline.factors.AverageDollarVolume
    "zipline.pipeline.factors.AverageDollarVolume")的更改，将缺失的收盘价或成交量值视为0。以前，在平均之前简单地丢弃了NaN，给剩余的值赋予了过多的权重([1309](https://github.com/stefan-jansen/zipline/issues/1309))。
- en: Remove risk-free rate from sharpe ratio calculation. The ratio is now the average
    of risk adjusted returns over violatility of adjusted returns. ([853](https://github.com/stefan-jansen/zipline/issues/853))
  id: totrans-470
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从夏普比率计算中移除无风险利率。该比率现在是风险调整后的回报率超过调整后的回报率波动性的平均值。([853](https://github.com/stefan-jansen/zipline/issues/853))
- en: Sortino ratio will return calculation instead of np.nan when required returns
    are equal to zero. The ratio now returns the average of risk adjusted returns
    over downside risk. Fixed mislabeled API by converting mar to downside_risk. ([747](https://github.com/stefan-jansen/zipline/issues/747))
  id: totrans-471
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当所需回报等于零时，索提诺比率将返回计算结果而不是np.nan。该比率现在返回风险调整后的回报率超过下行风险的平均值。通过将mar转换为下行风险来修复错误标记的API。([747](https://github.com/stefan-jansen/zipline/issues/747))
- en: Downside risk now returns the square root of the mean of downside difference
    squares. ([747](https://github.com/stefan-jansen/zipline/issues/747))
  id: totrans-472
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 下行风险现在返回下行差分平方均值的平方根。([747](https://github.com/stefan-jansen/zipline/issues/747))
- en: Information ratio updated to return mean of risk adjusted returns over standard
    deviation of risk adjusted returns. ([1322](https://github.com/stefan-jansen/zipline/issues/1322))
  id: totrans-473
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 信息比率更新为风险调整后的回报率超过风险调整后的回报率标准差的均值。([1322](https://github.com/stefan-jansen/zipline/issues/1322))
- en: Alpha and sharpe ratio are now annualized. ([1322](https://github.com/stefan-jansen/zipline/issues/1322))
  id: totrans-474
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Alpha和夏普比率现已年化。([1322](https://github.com/stefan-jansen/zipline/issues/1322))
- en: Fix units during reading and writing of daily bar `first_trading_day` attribute.
    ([1245](https://github.com/stefan-jansen/zipline/issues/1245))
  id: totrans-475
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复每日条形图`first_trading_day`属性读写时的单位问题。([1245](https://github.com/stefan-jansen/zipline/issues/1245))
- en: Optional dispatch modules, when missing, no longer cause a NameError. ([1246](https://github.com/stefan-jansen/zipline/issues/1246))
  id: totrans-476
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当缺少可选分派模块时，不再导致NameError。([1246](https://github.com/stefan-jansen/zipline/issues/1246))
- en: Treat `schedule_function` argument as a time rule when a time rule, but no date
    rule is supplied. ([1221](https://github.com/stefan-jansen/zipline/issues/1221))
  id: totrans-477
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当只提供时间规则而没有日期规则时，将`schedule_function`参数视为时间规则。([1221](https://github.com/stefan-jansen/zipline/issues/1221))
- en: Protect against boundary conditions at beginning and end trading day in schedule
    function. ([1226](https://github.com/stefan-jansen/zipline/issues/1226))
  id: totrans-478
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在schedule函数中保护交易日的开始和结束边界条件。([1226](https://github.com/stefan-jansen/zipline/issues/1226))
- en: Apply adjustments to previous day when using history with a frequency of 1d.
    ([1256](https://github.com/stefan-jansen/zipline/issues/1256))
  id: totrans-479
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在使用频率为1d的历史记录时，将调整应用于前一天。([1256](https://github.com/stefan-jansen/zipline/issues/1256))
- en: Fail fast on invalid pipeline columns, instead of attempting to access the nonexistent
    column. ([1280](https://github.com/stefan-jansen/zipline/issues/1280))
  id: totrans-480
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在尝试访问不存在的列之前，快速失败于无效的管道列。([1280](https://github.com/stefan-jansen/zipline/issues/1280))
- en: Fix `AverageDollarVolume` NaN handling. ([1309](https://github.com/stefan-jansen/zipline/issues/1309))
  id: totrans-481
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复`AverageDollarVolume`处理NaN的问题。([1309](https://github.com/stefan-jansen/zipline/issues/1309))
- en: Performance
  id: totrans-482
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 性能提升
- en: Performance improvements to blaze core loader. ([1227](https://github.com/stefan-jansen/zipline/issues/1227))
  id: totrans-483
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对blaze核心加载器的性能改进。([1227](https://github.com/stefan-jansen/zipline/issues/1227))
- en: Allow concurrent blaze queries. ([1323](https://github.com/stefan-jansen/zipline/issues/1323))
  id: totrans-484
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 允许并发blaze查询。([1323](https://github.com/stefan-jansen/zipline/issues/1323))
- en: Prevent missing leading bcolz minute data from doing repeated unnecessary lookups.
    ([1451](https://github.com/stefan-jansen/zipline/issues/1451))
  id: totrans-485
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 防止因缺少bcolz分钟数据而导致重复进行不必要的查找。([1451](https://github.com/stefan-jansen/zipline/issues/1451))
- en: Cache future chain lookups. ([1455](https://github.com/stefan-jansen/zipline/issues/1455))
  id: totrans-486
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 缓存未来链查找。([1455](https://github.com/stefan-jansen/zipline/issues/1455))
- en: Maintenance and Refactorings
  id: totrans-487
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 维护和重构
- en: Removed remaining mentions of `add_history`. ([1287](https://github.com/stefan-jansen/zipline/issues/1287))
  id: totrans-488
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 删除了剩余的`add_history`提及。([1287](https://github.com/stefan-jansen/zipline/issues/1287))
- en: Documentation
  id: totrans-489
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 文档
- en: Testing
  id: totrans-490
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 测试
- en: Add test fixture which sources daily pricing data from minute pricing data fixtures.
    ([1243](https://github.com/stefan-jansen/zipline/issues/1243))
  id: totrans-491
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加测试夹具，该夹具从分钟定价数据夹具中获取每日定价数据。([1243](https://github.com/stefan-jansen/zipline/issues/1243))
- en: Data Format Changes
  id: totrans-492
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 数据格式变更
- en: '`BcolzDailyBarReader` and `BcolzDailyBarWriter` use trading calendar instance,
    instead of trading days serialized to `JSON`. ([1330](https://github.com/stefan-jansen/zipline/issues/1330))'
  id: totrans-493
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`BcolzDailyBarReader`和`BcolzDailyBarWriter`使用交易日历实例，而不是序列化为`JSON`的交易日。([1330](https://github.com/stefan-jansen/zipline/issues/1330))'
- en: Change format of `assets.db` to support point in time lookups. ([1361](https://github.com/stefan-jansen/zipline/issues/1361))
  id: totrans-494
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 更改`assets.db`的格式以支持即时查找。([1361](https://github.com/stefan-jansen/zipline/issues/1361))
- en: Change `BcolzMinuteBarReader``and ``BcolzMinuteBarWriter` to support varying
    tick sizes. ([1428](https://github.com/stefan-jansen/zipline/issues/1428))
  id: totrans-495
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 更改`BcolzMinuteBarReader`和`BcolzMinuteBarWriter`以支持不同的最小变动价位。([1428](https://github.com/stefan-jansen/zipline/issues/1428))
- en: Release 1.0.1
  id: totrans-496
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 发布1.0.1
- en: 'Release:'
  id: totrans-497
  prefs: []
  type: TYPE_NORMAL
  zh: 发布：
- en: 1.0.1
  id: totrans-498
  prefs: []
  type: TYPE_NORMAL
  zh: 1.0.1
- en: 'Date:'
  id: totrans-499
  prefs: []
  type: TYPE_NORMAL
  zh: 日期：
- en: May 27, 2016
  id: totrans-500
  prefs: []
  type: TYPE_NORMAL
  zh: 2016年5月27日
- en: This is a minor bug-fix release from 1.0.0 and includes a small number of bug
    fixes and documentation improvements.
  id: totrans-501
  prefs: []
  type: TYPE_NORMAL
  zh: 这是1.0.0版本的一个小bug修复版本，包含少量bug修复和文档改进。
- en: Enhancements
  id: totrans-502
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 增强功能
- en: Added support for user-defined commission models. See the [`zipline.finance.commission.CommissionModel`](api-reference.html#zipline.finance.commission.CommissionModel
    "zipline.finance.commission.CommissionModel") class for more details on implementing
    a commision model. ([1213](https://github.com/stefan-jansen/zipline/issues/1213))
  id: totrans-503
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加了对用户定义的佣金模型的支持。有关实现佣金模型的更多详细信息，请参阅`zipline.finance.commission.CommissionModel`类。([1213](https://github.com/stefan-jansen/zipline/issues/1213))
- en: Added support for non-float columns to Blaze-backed Pipeline datasets ([1201](https://github.com/stefan-jansen/zipline/issues/1201)).
  id: totrans-504
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为Blaze支持的管道数据集添加了对非浮点列的支持([1201](https://github.com/stefan-jansen/zipline/issues/1201))。
- en: Added `zipline.pipeline.slice.Slice`, a new pipeline term designed to extract
    a single column from another term. Slices can be created by indexing into a term,
    keyed by asset. ([1267](https://github.com/stefan-jansen/zipline/issues/1267))
  id: totrans-505
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新增`zipline.pipeline.slice.Slice`，这是一种新的管道术语，用于从另一个术语中提取单个列。切片可以通过对术语进行索引创建，按资产键入。([1267](https://github.com/stefan-jansen/zipline/issues/1267))
- en: Bug Fixes
  id: totrans-506
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 错误修复
- en: Fixed a bug where Pipeline loaders were not properly initialized by [`zipline.run_algorithm()`](api-reference.html#zipline.run_algorithm
    "zipline.run_algorithm"). This also affected invocations of `zipline run` from
    the CLI.
  id: totrans-507
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了一个bug，该bug导致管道加载器未被`zipline.run_algorithm()`正确初始化。这也影响了从CLI调用`zipline run`。
- en: Fixed a bug that caused the `%%zipline` IPython cell magic to fail ([533233fae43c7ff74abfb0044f046978817cb4e4](https://github.com/stefan-jansen/zipline/commit/533233fae43c7ff74abfb0044f046978817cb4e4)).
  id: totrans-508
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了导致`%%zipline` IPython单元魔法失败的bug ([533233fae43c7ff74abfb0044f046978817cb4e4](https://github.com/stefan-jansen/zipline/commit/533233fae43c7ff74abfb0044f046978817cb4e4))。
- en: Fixed a bug in the [`PerTrade`](api-reference.html#zipline.finance.commission.PerTrade
    "zipline.finance.commission.PerTrade") commission model where commissions were
    incorrectly applied to each partial-fill of an order rather than on the order
    itself, resulting in algorithms being charged too much in commissions when placing
    large orders.
  id: totrans-509
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了在[`PerTrade`](api-reference.html#zipline.finance.commission.PerTrade "zipline.finance.commission.PerTrade")佣金模型中的一个错误，该错误导致佣金被错误地应用于订单的每个部分填充，而不是订单本身，导致在提交大订单时算法被收取过多的佣金。
- en: '[`PerTrade`](api-reference.html#zipline.finance.commission.PerTrade "zipline.finance.commission.PerTrade")
    now correctly applies commissions on a per-order basis ([1213](https://github.com/stefan-jansen/zipline/issues/1213)).'
  id: totrans-510
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '[`PerTrade`](api-reference.html#zipline.finance.commission.PerTrade "zipline.finance.commission.PerTrade")现在正确地按订单基础应用佣金（[1213](https://github.com/stefan-jansen/zipline/issues/1213)）。'
- en: Attribute accesses on [`CustomFactors`](api-reference.html#zipline.pipeline.CustomFactor
    "zipline.pipeline.CustomFactor") defining multiple outputs will now correctly
    return an output slice when the output is also the name of a `Factor` method ([1214](https://github.com/stefan-jansen/zipline/issues/1214)).
  id: totrans-511
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在定义多个输出的[`CustomFactors`](api-reference.html#zipline.pipeline.CustomFactor "zipline.pipeline.CustomFactor")上访问属性时，现在将正确返回输出切片，即使输出也是`Factor`方法的名称（[1214](https://github.com/stefan-jansen/zipline/issues/1214)）。
- en: Replaced deprecated usage of `pandas.io.data` with `pandas_datareader` ([1218](https://github.com/stefan-jansen/zipline/issues/1218)).
  id: totrans-512
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 替换了对已弃用的`pandas.io.data`的使用，改为使用`pandas_datareader`（[1218](https://github.com/stefan-jansen/zipline/issues/1218)）。
- en: Fixed an issue where `.pyi` stub files for `zipline.api` were accidentally excluded
    from the PyPI source distribution. Conda users should be unaffected ([1230](https://github.com/stefan-jansen/zipline/issues/1230)).
  id: totrans-513
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了一个问题，即`zipline.api`的`.pyi`存根文件意外地被排除在PyPI源代码分发之外。Conda用户应该不受影响（[1230](https://github.com/stefan-jansen/zipline/issues/1230)）。
- en: Documentation
  id: totrans-514
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 文档
- en: Added a new example, `zipline.examples.momentum_pipeline`, which exercises the
    Pipeline API ([1230](https://github.com/stefan-jansen/zipline/issues/1230)).
  id: totrans-515
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新增了一个示例，`zipline.examples.momentum_pipeline`，它使用了Pipeline API（[1230](https://github.com/stefan-jansen/zipline/issues/1230)）。
- en: Release 1.0.0
  id: totrans-516
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 发布1.0.0
- en: 'Release:'
  id: totrans-517
  prefs: []
  type: TYPE_NORMAL
  zh: 发布：
- en: 1.0.0
  id: totrans-518
  prefs: []
  type: TYPE_NORMAL
  zh: 1.0.0
- en: 'Date:'
  id: totrans-519
  prefs: []
  type: TYPE_NORMAL
  zh: 日期：
- en: May 19, 2016
  id: totrans-520
  prefs: []
  type: TYPE_NORMAL
  zh: 2016年5月19日
- en: Highlights
  id: totrans-521
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 亮点
- en: Zipline 1.0 Rewrite ([1105](https://github.com/stefan-jansen/zipline/issues/1105))
  id: totrans-522
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: Zipline 1.0重写（[1105](https://github.com/stefan-jansen/zipline/issues/1105)）
- en: We have rewritten a lot of Zipline and its basic concepts in order to improve
    runtime performance. At the same time, we’ve introduced several new APIs.
  id: totrans-523
  prefs: []
  type: TYPE_NORMAL
  zh: 我们对Zipline及其基本概念进行了大量重写，以提高运行时性能。同时，我们引入了几个新的API。
- en: At a high level, earlier versions of Zipline simulations pulled from a multiplexed
    stream of data sources, which were merged via heapq. This stream was fed to the
    main simulation loop, driving the clock forward. This strong dependency on reading
    all the data made it difficult to optimize simulation performance because there
    was no connection between the amount of data we fetched and the amount of data
    actually used by the algorithm.
  id: totrans-524
  prefs: []
  type: TYPE_NORMAL
  zh: 从高层次来看，Zipline早期版本的模拟从多个数据源的复用流中提取数据，这些数据源通过heapq合并。这个流被送入主模拟循环，驱动时钟前进。这种对读取所有数据的强烈依赖使得优化模拟性能变得困难，因为我们在获取的数据量和算法实际使用的数据量之间没有联系。
- en: Now, we only fetch data when the algorithm needs it. A new class, [`DataPortal`](api-reference.html#zipline.data.data_portal.DataPortal
    "zipline.data.data_portal.DataPortal"), dispatches data requests to various data
    sources and returns the requested values. This makes the runtime of a simulation
    scale much more closely with the complexity of the algorithm, rather than with
    the number of assets provided by the data sources.
  id: totrans-525
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，我们只在算法需要时才获取数据。一个新类，[`DataPortal`](api-reference.html#zipline.data.data_portal.DataPortal
    "zipline.data.data_portal.DataPortal")，将数据请求分派到各种数据源，并返回请求的值。这使得模拟的运行时间更紧密地与算法的复杂性而不是数据源提供的资产数量成比例。
- en: Instead of the data stream driving the clock, now simulations iterate through
    a pre-calculated set of day or minute timestamps. The timestamps are emitted by
    `MinuteSimulationClock` and `DailySimulationClock`, and consumed by the main loop
    in `transform()`.
  id: totrans-526
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，模拟不再由数据流驱动时钟，而是迭代通过一组预先计算的日或分钟时间戳。这些时间戳由`MinuteSimulationClock`和`DailySimulationClock`发出，并由`transform()`中的主循环消费。
- en: 'We’ve retired the `data[sid(N)]` and `history` APIs, replacing them with several
    methods on the [`BarData`](api-reference.html#zipline.protocol.BarData "zipline.protocol.BarData")
    object: [`current()`](api-reference.html#zipline.protocol.BarData.current "zipline.protocol.BarData.current"),
    [`history()`](api-reference.html#zipline.protocol.BarData.history "zipline.protocol.BarData.history"),
    [`can_trade()`](api-reference.html#zipline.protocol.BarData.can_trade "zipline.protocol.BarData.can_trade"),
    and [`is_stale()`](api-reference.html#zipline.protocol.BarData.is_stale "zipline.protocol.BarData.is_stale").
    Old APIs will continue to work for now, but will issue deprecation warnings.'
  id: totrans-527
  prefs: []
  type: TYPE_NORMAL
  zh: 我们已弃用`data[sid(N)]`和`history` API，用[`BarData`](api-reference.html#zipline.protocol.BarData
    "zipline.protocol.BarData")对象上的几个方法取而代之：[`current()`](api-reference.html#zipline.protocol.BarData.current
    "zipline.protocol.BarData.current")、[`history()`](api-reference.html#zipline.protocol.BarData.history
    "zipline.protocol.BarData.history")、[`can_trade()`](api-reference.html#zipline.protocol.BarData.can_trade
    "zipline.protocol.BarData.can_trade")和[`is_stale()`](api-reference.html#zipline.protocol.BarData.is_stale
    "zipline.protocol.BarData.is_stale")。旧的API目前仍可使用，但会发出弃用警告。
- en: You can now pass in an adjustments source to the [`DataPortal`](api-reference.html#zipline.data.data_portal.DataPortal
    "zipline.data.data_portal.DataPortal"), and we will apply adjustments to the pricing
    data when looking backwards at data. Prices and volumes for execution and presented
    to the algorithm in data.current are the as-traded value of the asset.
  id: totrans-528
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，您可以将调整源传递给[`DataPortal`](api-reference.html#zipline.data.data_portal.DataPortal
    "zipline.data.data_portal.DataPortal")，当我们回顾历史数据时，我们会将调整应用于定价数据。算法在data.current中接收到的执行价格和成交量是资产的实际交易价值。
- en: New Entry Points ([1173](https://github.com/stefan-jansen/zipline/issues/1173)
    and [1178](https://github.com/stefan-jansen/zipline/issues/1178))
  id: totrans-529
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 新入口点（[1173](https://github.com/stefan-jansen/zipline/issues/1173)和[1178](https://github.com/stefan-jansen/zipline/issues/1178)）
- en: 'In order to make it easier to use zipline we have updated the entry points
    for a backtest. The three supported ways to run a backtest are now:'
  id: totrans-530
  prefs: []
  type: TYPE_NORMAL
  zh: 为了更容易使用zipline，我们更新了回测的入口点。现在支持的三种运行回测的方式是：
- en: '`zipline.run_algo()`'
  id: totrans-531
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`zipline.run_algo()`'
- en: '`$ zipline run`'
  id: totrans-532
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`$ zipline run`'
- en: '`%zipline` (IPython magic)'
  id: totrans-533
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`%zipline`（IPython魔法）'
- en: Data Bundles ([1173](https://github.com/stefan-jansen/zipline/issues/1173) and
    [1178](https://github.com/stefan-jansen/zipline/issues/1178))
  id: totrans-534
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 数据包（[1173](https://github.com/stefan-jansen/zipline/issues/1173)和[1178](https://github.com/stefan-jansen/zipline/issues/1178)）
- en: 1.0.0 introduces data bundles. Data bundles are groups of data that should be
    preloaded and used to run backtests later. This allows users to not need to specify
    which tickers they are interested in each time they run an algorithm. This also
    allows us to cache the data between runs.
  id: totrans-535
  prefs: []
  type: TYPE_NORMAL
  zh: 1.0.0引入了数据包。数据包是一组应预先加载并用于稍后运行回测的数据。这允许用户无需每次运行算法时都指定他们感兴趣的符号。这也允许我们在运行之间缓存数据。
- en: 'By default, the `quantopian-quandl` bundle will be used which pulls data from
    Quantopian’s mirror of the quandl [WIKI dataset](https://www.quandl.com/data/WIKI).
    New bundles may be registered with [`zipline.data.bundles.register()`](api-reference.html#zipline.data.bundles.register
    "zipline.data.bundles.register") like:'
  id: totrans-536
  prefs: []
  type: TYPE_NORMAL
  zh: 默认情况下，将使用`quantopian-quandl`包，该包从Quantopian的quandl [WIKI数据集](https://www.quandl.com/data/WIKI)镜像中提取数据。可以使用[`zipline.data.bundles.register()`](api-reference.html#zipline.data.bundles.register
    "zipline.data.bundles.register")注册新包，例如：
- en: '[PRE9]'
  id: totrans-537
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: This function should retrieve the data it needs and then use the writers that
    have been passed to write that data to disc in a location that zipline can find
    later.
  id: totrans-538
  prefs: []
  type: TYPE_NORMAL
  zh: 此函数应检索所需数据，然后使用已传递的写入器将该数据写入磁盘上的位置，以便zipline稍后可以找到。
- en: This data can be used in backtests by passing the name as the `-b / --bundle`
    argument to `$ zipline run` or as the `bundle` argument to [`zipline.run_algorithm()`](api-reference.html#zipline.run_algorithm
    "zipline.run_algorithm").
  id: totrans-539
  prefs: []
  type: TYPE_NORMAL
  zh: 通过将名称作为`$ zipline run`的`-b / --bundle`参数传递，或者作为[`zipline.run_algorithm()`](api-reference.html#zipline.run_algorithm
    "zipline.run_algorithm")的`bundle`参数传递，可以在回测中使用此数据。
- en: For more information see [Data](bundles.html#data-bundles) for more information.
  id: totrans-540
  prefs: []
  type: TYPE_NORMAL
  zh: 更多信息请参见[数据](bundles.html#data-bundles)。
- en: String Support in Pipeline ([1174](https://github.com/stefan-jansen/zipline/issues/1174))
  id: totrans-541
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 管道中的字符串支持（[1174](https://github.com/stefan-jansen/zipline/issues/1174)）
- en: Added support for string data in Pipeline. [`zipline.pipeline.data.Column`](api-reference.html#zipline.pipeline.data.Column
    "zipline.pipeline.data.Column") now accepts `object` as a dtype, which signifies
    that loaders for that column should emit windowed iterators over the experimental
    new `LabelArray` class.
  id: totrans-542
  prefs: []
  type: TYPE_NORMAL
  zh: 增加了对Pipeline中字符串数据的支持。[`zipline.pipeline.data.Column`](api-reference.html#zipline.pipeline.data.Column
    "zipline.pipeline.data.Column")现在接受`object`作为数据类型，这意味着该列的加载器应该发出基于实验性新`LabelArray`类的窗口迭代器。
- en: 'Several new `Classifier` methods have also been added for constructing [`Filter`](api-reference.html#zipline.pipeline.Filter
    "zipline.pipeline.Filter") instances based on string operations. The new methods
    are:'
  id: totrans-543
  prefs: []
  type: TYPE_NORMAL
  zh: 还添加了几个新的`Classifier`方法，用于基于字符串操作构建[`Filter`](api-reference.html#zipline.pipeline.Filter
    "zipline.pipeline.Filter")实例。新方法包括：
- en: '`element_of()`'
  id: totrans-544
  prefs:
  - PREF_BQ
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`element_of()`'
- en: ''
  id: totrans-545
  prefs:
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  id: totrans-546
  prefs:
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: '`startswith()`'
  id: totrans-547
  prefs:
  - PREF_BQ
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`startswith()`'
- en: ''
  id: totrans-548
  prefs:
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  id: totrans-549
  prefs:
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: '`endswith()`'
  id: totrans-550
  prefs:
  - PREF_BQ
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`endswith()`'
- en: ''
  id: totrans-551
  prefs:
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  id: totrans-552
  prefs:
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: '`has_substring()`'
  id: totrans-553
  prefs:
  - PREF_BQ
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`has_substring()`'
- en: ''
  id: totrans-554
  prefs:
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  id: totrans-555
  prefs:
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: '`matches()`'
  id: totrans-556
  prefs:
  - PREF_BQ
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`matches()`'
- en: ''
  id: totrans-557
  prefs:
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  id: totrans-558
  prefs:
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  id: totrans-559
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '`element_of` is defined for all classifiers. The remaining methods are only
    defined for string-dtype classifiers.'
  id: totrans-560
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '`element_of` 为所有分类器定义。剩余的方法仅对字符串数据类型的分类器定义。'
- en: Enhancements
  id: totrans-561
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 增强功能
- en: Made the data loading classes have more consistent interfaces. This includes
    the equity bar writers, adjustment writer, and asset db writer. The new interface
    is that the resource to be written to is passed at construction time and the data
    to write is provided later to the write method as dataframes or some iterator
    of dataframes. This model allows us to pass these writer objects around as a resource
    for other classes and functions to consume ([1109](https://github.com/stefan-jansen/zipline/issues/1109)
    and [1149](https://github.com/stefan-jansen/zipline/issues/1149)).
  id: totrans-562
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使数据加载类的接口更加一致。这包括权益条形图写入器、调整写入器和资产数据库写入器。新的接口是在构造时传递要写入的资源，稍后将数据作为数据帧或数据帧的某些迭代器提供给写入方法。这种模式允许我们将这些写入器对象作为资源传递给其他类和函数以供消费（[1109](https://github.com/stefan-jansen/zipline/issues/1109)
    和 [1149](https://github.com/stefan-jansen/zipline/issues/1149)）。
- en: Added masking to [`zipline.pipeline.CustomFactor`](api-reference.html#zipline.pipeline.CustomFactor
    "zipline.pipeline.CustomFactor"). Custom factors can now be passed a Filter upon
    instantiation. This tells the factor to only compute over stocks for which the
    filter returns True, rather than always computing over the entire universe of
    stocks. ([1095](https://github.com/stefan-jansen/zipline/issues/1095))
  id: totrans-563
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为[`zipline.pipeline.CustomFactor`](api-reference.html#zipline.pipeline.CustomFactor
    "zipline.pipeline.CustomFactor")添加了掩码。现在可以在实例化时将过滤器传递给自定义因子。这告诉因子只在过滤器返回True的股票上计算，而不是总是在整个股票宇宙上计算。（[1095](https://github.com/stefan-jansen/zipline/issues/1095)）
- en: Added [`zipline.utils.cache.ExpiringCache`](api-reference.html#zipline.utils.cache.ExpiringCache
    "zipline.utils.cache.ExpiringCache"). A cache which wraps entries in a [`zipline.utils.cache.CachedObject`](api-reference.html#zipline.utils.cache.CachedObject
    "zipline.utils.cache.CachedObject"), which manages expiration of entries based
    on the dt supplied to the get method. ([1130](https://github.com/stefan-jansen/zipline/issues/1130))
  id: totrans-564
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加了[`zipline.utils.cache.ExpiringCache`](api-reference.html#zipline.utils.cache.ExpiringCache
    "zipline.utils.cache.ExpiringCache")。这是一种缓存，它将条目包装在[`zipline.utils.cache.CachedObject`](api-reference.html#zipline.utils.cache.CachedObject
    "zipline.utils.cache.CachedObject")中，该缓存根据get方法提供的dt管理条目的过期。（[1130](https://github.com/stefan-jansen/zipline/issues/1130)）
- en: Implemented `zipline.pipeline.factors.RecarrayField`, a new pipeline term designed
    to be the output type of a CustomFactor with multiple outputs. ([1119](https://github.com/stefan-jansen/zipline/issues/1119))
  id: totrans-565
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 实现了`zipline.pipeline.factors.RecarrayField`，这是一种新的管道术语，设计为具有多个输出的CustomFactor的输出类型。（[1119](https://github.com/stefan-jansen/zipline/issues/1119)）
- en: Added optional outputs parameter to [`zipline.pipeline.CustomFactor`](api-reference.html#zipline.pipeline.CustomFactor
    "zipline.pipeline.CustomFactor"). Custom factors are now capable of computing
    and returning multiple outputs, each of which are themselves a Factor. ([1119](https://github.com/stefan-jansen/zipline/issues/1119))
  id: totrans-566
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为[`zipline.pipeline.CustomFactor`](api-reference.html#zipline.pipeline.CustomFactor
    "zipline.pipeline.CustomFactor")添加了可选的输出参数。现在，自定义因子能够计算并返回多个输出，每个输出本身都是一个因子。（[1119](https://github.com/stefan-jansen/zipline/issues/1119)）
- en: Added support for string-dtype pipeline columns. Loaders for thse columns should
    produce instances of `zipline.lib.labelarray.LabelArray` when traversed. [`latest()`](api-reference.html#zipline.pipeline.data.BoundColumn.latest
    "zipline.pipeline.data.BoundColumn.latest") on string columns produces a string-dtype
    `zipline.pipeline.Classifier`. ([1174](https://github.com/stefan-jansen/zipline/issues/1174))
  id: totrans-567
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增加了对字符串类型管道列的支持。这些列的加载器在遍历时应该生成`zipline.lib.labelarray.LabelArray`实例。字符串列上的[`latest()`](api-reference.html#zipline.pipeline.data.BoundColumn.latest
    "zipline.pipeline.data.BoundColumn.latest")生成一个字符串类型的`zipline.pipeline.Classifier`。([1174](https://github.com/stefan-jansen/zipline/issues/1174))
- en: Added several methods for converting Classifiers into Filters.
  id: totrans-568
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增加了几种将分类器转换为过滤器的方法。
- en: 'The new methods are: - `element_of()` - `startswith()` - `endswith()` - `has_substring()`
    - `matches()`'
  id: totrans-569
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 新增的方法有：- `element_of()` - `startswith()` - `endswith()` - `has_substring()`
    - `matches()`
- en: '`element_of` is defined for all classifiers. The remaining methods are only
    defined for strings. ([1174](https://github.com/stefan-jansen/zipline/issues/1174))'
  id: totrans-570
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '`element_of` 对所有分类器都定义了。其余方法仅对字符串定义。([1174](https://github.com/stefan-jansen/zipline/issues/1174))'
- en: 'Added [`BollingerBands`](api-reference.html#zipline.pipeline.factors.BollingerBands
    "zipline.pipeline.factors.BollingerBands") factor. This factor implements the
    Bollinger Bands technical indicator: [https://en.wikipedia.org/wiki/Bollinger_Bands](https://en.wikipedia.org/wiki/Bollinger_Bands)
    ([1199](https://github.com/stefan-jansen/zipline/issues/1199)).'
  id: totrans-571
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新增了[`布林带`](api-reference.html#zipline.pipeline.factors.BollingerBands "zipline.pipeline.factors.BollingerBands")因子。该因子实现了布林带技术指标：[https://zh.wikipedia.org/wiki/布林带](https://en.wikipedia.org/wiki/Bollinger_Bands)
    ([1199](https://github.com/stefan-jansen/zipline/issues/1199))。
- en: Fetcher has been moved from Quantopian internal code into Zipline ([1105](https://github.com/stefan-jansen/zipline/issues/1105)).
  id: totrans-572
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将Fetcher从Quantopian内部代码移至Zipline ([1105](https://github.com/stefan-jansen/zipline/issues/1105))。
- en: Added new built-in factors, [`RollingPearsonOfReturns`](api-reference.html#zipline.pipeline.factors.RollingPearsonOfReturns
    "zipline.pipeline.factors.RollingPearsonOfReturns"), [`RollingSpearmanOfReturns`](api-reference.html#zipline.pipeline.factors.RollingSpearmanOfReturns
    "zipline.pipeline.factors.RollingSpearmanOfReturns") and [`RollingLinearRegressionOfReturns`](api-reference.html#zipline.pipeline.factors.RollingLinearRegressionOfReturns
    "zipline.pipeline.factors.RollingLinearRegressionOfReturns") ([1154](https://github.com/stefan-jansen/zipline/issues/1154))
  id: totrans-573
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新增了新的内置因子，[`RollingPearsonOfReturns`](api-reference.html#zipline.pipeline.factors.RollingPearsonOfReturns
    "zipline.pipeline.factors.RollingPearsonOfReturns")，[`RollingSpearmanOfReturns`](api-reference.html#zipline.pipeline.factors.RollingSpearmanOfReturns
    "zipline.pipeline.factors.RollingSpearmanOfReturns") 和 [`RollingLinearRegressionOfReturns`](api-reference.html#zipline.pipeline.factors.RollingLinearRegressionOfReturns
    "zipline.pipeline.factors.RollingLinearRegressionOfReturns") ([1154](https://github.com/stefan-jansen/zipline/issues/1154))
- en: Experimental Features
  id: totrans-574
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 实验性功能
- en: Warning
  id: totrans-575
  prefs: []
  type: TYPE_NORMAL
  zh: 警告
- en: Experimental features are subject to change.
  id: totrans-576
  prefs: []
  type: TYPE_NORMAL
  zh: 实验性功能可能会发生变化。
- en: Added a new `zipline.lib.labelarray.LabelArray` class for efficiently representing
    and computing on string data with numpy. This class is conceptually similar to
    [`pandas.Categorical`](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Categorical.html#pandas.Categorical
    "(in pandas v2.0.3)"), in that it represents string arrays as arrays of indices
    into a (smaller) array of unique string values. ([1174](https://github.com/stefan-jansen/zipline/issues/1174))
  id: totrans-577
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新增了一个用于高效表示和计算numpy中字符串数据的`zipline.lib.labelarray.LabelArray`类。这个类在概念上类似于[`pandas.Categorical`](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Categorical.html#pandas.Categorical
    "(in pandas v2.0.3)")，它将字符串数组表示为索引数组，指向一个（较小的）唯一字符串值数组。([1174](https://github.com/stefan-jansen/zipline/issues/1174))
- en: Bug Fixes
  id: totrans-578
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 错误修复
- en: None
  id: totrans-579
  prefs: []
  type: TYPE_NORMAL
  zh: 无
- en: Performance
  id: totrans-580
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 性能
- en: None
  id: totrans-581
  prefs: []
  type: TYPE_NORMAL
  zh: 无
- en: Maintenance and Refactorings
  id: totrans-582
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 维护和重构
- en: None
  id: totrans-583
  prefs: []
  type: TYPE_NORMAL
  zh: 无
- en: Build
  id: totrans-584
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 构建
- en: None
  id: totrans-585
  prefs: []
  type: TYPE_NORMAL
  zh: 无
- en: Documentation
  id: totrans-586
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 文档
- en: Updated documentation for the API methods ([1188](https://github.com/stefan-jansen/zipline/issues/1188)).
  id: totrans-587
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 更新了API方法的文档 ([1188](https://github.com/stefan-jansen/zipline/issues/1188))。
- en: Updated release process to mention that docs should be built with python 3 ([1188](https://github.com/stefan-jansen/zipline/issues/1188)).
  id: totrans-588
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 更新了发布流程，提到文档应该使用python 3构建 ([1188](https://github.com/stefan-jansen/zipline/issues/1188))。
- en: Miscellaneous
  id: totrans-589
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 杂项
- en: Zipline now provides a [stub file](https://www.python.org/dev/peps/pep-0484/#stub-files)
    for the `zipline.api` module. This module is normally dynamically created so the
    stub file provides some static information for utilities that can consume it,
    for example PyCharm ([1208](https://github.com/stefan-jansen/zipline/issues/1208)).
  id: totrans-590
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Zipline 现在为 `zipline.api` 模块提供了一个 [stub文件](https://www.python.org/dev/peps/pep-0484/#stub-files)。该模块通常是动态创建的，因此
    stub 文件为能够消费它的工具提供了一些静态信息，例如 PyCharm ([1208](https://github.com/stefan-jansen/zipline/issues/1208))。
- en: Release 0.9.0
  id: totrans-591
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 发布 0.9.0
- en: 'Release:'
  id: totrans-592
  prefs: []
  type: TYPE_NORMAL
  zh: 发布：
- en: 0.9.0
  id: totrans-593
  prefs: []
  type: TYPE_NORMAL
  zh: 0.9.0
- en: 'Date:'
  id: totrans-594
  prefs: []
  type: TYPE_NORMAL
  zh: 日期：
- en: March 29, 2016
  id: totrans-595
  prefs: []
  type: TYPE_NORMAL
  zh: 2016年3月29日
- en: Highlights
  id: totrans-596
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 亮点
- en: Added classifiers and normalization methods to pipeline, along with new datasets
    and factors.
  id: totrans-597
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在流水线中增加了分类器和标准化方法，以及新的数据集和因子。
- en: Added support for Windows with continuous integration on AppVeyor.
  id: totrans-598
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增加了对 Windows 系统的支持，并在 AppVeyor 上进行持续集成。
- en: Enhancements
  id: totrans-599
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 增强功能
- en: Added new datasets `CashBuybackAuthorizations` and `ShareBuybackAuthorizations`
    for use in the Pipeline API. These datasets provide an abstract interface for
    adding cash and share buyback authorizations data, respectively, to a new algorithm.
    pandas-based reference implementations for these datasets can be found in `zipline.pipeline.loaders.buyback_auth`,
    and experimental blaze-based implementations can be found in `zipline.pipeline.loaders.blaze.buyback_auth`.
    ([1022](https://github.com/stefan-jansen/zipline/issues/1022)).
  id: totrans-600
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增加了新的数据集 `CashBuybackAuthorizations` 和 `ShareBuybackAuthorizations`，用于流水线 API。这些数据集提供了一个抽象接口，用于分别添加现金和股票回购授权数据到新的算法中。基于
    pandas 的这些数据集的参考实现可以在 `zipline.pipeline.loaders.buyback_auth` 中找到，而基于 blaze 的实验性实现可以在
    `zipline.pipeline.loaders.blaze.buyback_auth` 中找到。([1022](https://github.com/stefan-jansen/zipline/issues/1022))。
- en: Added new datasets `DividendsByExDate`, `DividendsByPayDate`, and `DividendsByAnnouncementDate`
    for use in the Pipeline API. These datasets provide an abstract interface for
    adding dividends data organized by ex date, pay date, and announcement date, respectively,
    to a new algorithm. pandas-based reference implementations for these datasets
    can be found in `zipline.pipeline.loaders.dividends`, and experimental blaze-based
    implementations can be found in `zipline.pipeline.loaders.blaze.dividends`. ([1093](https://github.com/stefan-jansen/zipline/issues/1093)).
  id: totrans-601
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增加了新的数据集 `DividendsByExDate`，`DividendsByPayDate`，和 `DividendsByAnnouncementDate`，用于流水线
    API。这些数据集提供了一个抽象接口，用于按除息日、支付日和公告日分别添加股息数据到新的算法中。基于 pandas 的这些数据集的参考实现可以在 `zipline.pipeline.loaders.dividends`
    中找到，而基于 blaze 的实验性实现可以在 `zipline.pipeline.loaders.blaze.dividends` 中找到。([1093](https://github.com/stefan-jansen/zipline/issues/1093))。
- en: Added new built-in factors, `zipline.pipeline.factors.BusinessDaysSinceCashBuybackAuth`
    and `zipline.pipeline.factors.BusinessDaysSinceShareBuybackAuth`. These factors
    use the new `CashBuybackAuthorizations` and `ShareBuybackAuthorizations` datasets,
    respectively. ([1022](https://github.com/stefan-jansen/zipline/issues/1022)).
  id: totrans-602
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增加了新的内置因子，`zipline.pipeline.factors.BusinessDaysSinceCashBuybackAuth` 和 `zipline.pipeline.factors.BusinessDaysSinceShareBuybackAuth`。这些因子分别使用了新的
    `CashBuybackAuthorizations` 和 `ShareBuybackAuthorizations` 数据集。([1022](https://github.com/stefan-jansen/zipline/issues/1022))。
- en: Added new built-in factors, `zipline.pipeline.factors.BusinessDaysSinceDividendAnnouncement`,
    `zipline.pipeline.factors.BusinessDaysUntilNextExDate`, and `zipline.pipeline.factors.BusinessDaysSincePreviousExDate`.
    These factors use the new `DividendsByAnnouncementDate` and ``DividendsByExDate`
    datasets, respectively. ([1093](https://github.com/stefan-jansen/zipline/issues/1093)).
  id: totrans-603
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增加了新的内置因子，`zipline.pipeline.factors.BusinessDaysSinceDividendAnnouncement`，`zipline.pipeline.factors.BusinessDaysUntilNextExDate`，和
    `zipline.pipeline.factors.BusinessDaysSincePreviousExDate`。这些因子分别使用了新的 `DividendsByAnnouncementDate`
    和 `DividendsByExDate` 数据集。([1093](https://github.com/stefan-jansen/zipline/issues/1093))。
- en: Implemented `zipline.pipeline.Classifier`, a new core pipeline API term representing
    grouping keys. Classifiers are primarily used by passing them as the `groupby`
    parameter to factor normalization methods. ([1046](https://github.com/stefan-jansen/zipline/issues/1046))
  id: totrans-604
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 实现了 `zipline.pipeline.Classifier`，一个新的核心流水线 API 术语，代表分组键。分类器主要用于将它们作为 `groupby`
    参数传递给因子标准化方法。([1046](https://github.com/stefan-jansen/zipline/issues/1046))
- en: 'Added factor normalization methods: [`zipline.pipeline.Factor.demean()`](api-reference.html#zipline.pipeline.Factor.demean
    "zipline.pipeline.Factor.demean") and [`zipline.pipeline.Factor.zscore()`](api-reference.html#zipline.pipeline.Factor.zscore
    "zipline.pipeline.Factor.zscore"). ([1046](https://github.com/stefan-jansen/zipline/issues/1046))'
  id: totrans-605
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增加了因子标准化方法：[`zipline.pipeline.Factor.demean()`](api-reference.html#zipline.pipeline.Factor.demean
    "zipline.pipeline.Factor.demean") 和 [`zipline.pipeline.Factor.zscore()`](api-reference.html#zipline.pipeline.Factor.zscore
    "zipline.pipeline.Factor.zscore")。([1046](https://github.com/stefan-jansen/zipline/issues/1046))
- en: Added [`zipline.pipeline.Factor.quantiles()`](api-reference.html#zipline.pipeline.Factor.quantiles
    "zipline.pipeline.Factor.quantiles"), a method for computing a Classifier from
    a Factor by partitioning into equally-sized buckets. Also added helpers for common
    quantile sizes ([`zipline.pipeline.Factor.quartiles()`](api-reference.html#zipline.pipeline.Factor.quartiles
    "zipline.pipeline.Factor.quartiles"), [`zipline.pipeline.Factor.quartiles()`](api-reference.html#zipline.pipeline.Factor.quartiles
    "zipline.pipeline.Factor.quartiles"), and [`zipline.pipeline.Factor.deciles()`](api-reference.html#zipline.pipeline.Factor.deciles
    "zipline.pipeline.Factor.deciles")) ([1075](https://github.com/stefan-jansen/zipline/issues/1075)).
  id: totrans-606
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新增了[`zipline.pipeline.Factor.quantiles()`](api-reference.html#zipline.pipeline.Factor.quantiles
    "zipline.pipeline.Factor.quantiles")方法，该方法通过将因子划分为等大小的桶来计算分类器。还增加了一些常用分位数的辅助函数（[`zipline.pipeline.Factor.quartiles()`](api-reference.html#zipline.pipeline.Factor.quartiles
    "zipline.pipeline.Factor.quartiles")、[`zipline.pipeline.Factor.quartiles()`](api-reference.html#zipline.pipeline.Factor.quartiles
    "zipline.pipeline.Factor.quartiles")和[`zipline.pipeline.Factor.deciles()`](api-reference.html#zipline.pipeline.Factor.deciles
    "zipline.pipeline.Factor.deciles")）（[1075](https://github.com/stefan-jansen/zipline/issues/1075)）。
- en: Experimental Features
  id: totrans-607
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 实验性功能
- en: Warning
  id: totrans-608
  prefs: []
  type: TYPE_NORMAL
  zh: 警告
- en: Experimental features are subject to change.
  id: totrans-609
  prefs: []
  type: TYPE_NORMAL
  zh: 实验性功能可能会发生变化。
- en: None
  id: totrans-610
  prefs: []
  type: TYPE_NORMAL
  zh: 无
- en: Bug Fixes
  id: totrans-611
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 错误修复
- en: Fixed a bug where merging two numerical expressions failed given too many inputs.
    This caused running a pipeline to fail when combining more than ten factors or
    filters. ([1072](https://github.com/stefan-jansen/zipline/issues/1072))
  id: totrans-612
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了一个错误，该错误导致在合并两个数值表达式时，如果输入过多，会导致运行管道失败，当合并超过十个因子或过滤器时。（[1072](https://github.com/stefan-jansen/zipline/issues/1072)）
- en: Performance
  id: totrans-613
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 性能
- en: None
  id: totrans-614
  prefs: []
  type: TYPE_NORMAL
  zh: 无
- en: Maintenance and Refactorings
  id: totrans-615
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 维护和重构
- en: None
  id: totrans-616
  prefs: []
  type: TYPE_NORMAL
  zh: 无
- en: Build
  id: totrans-617
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 构建
- en: Added AppVeyor for continuous integration on Windows. Added conda build of zipline
    and its dependencies to AppVeyor and Travis builds, which upload their results
    to anaconda.org labeled with “ci”. ([981](https://github.com/stefan-jansen/zipline/issues/981))
  id: totrans-618
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增加了AppVeyor用于Windows上的持续集成。在AppVeyor和Travis构建中增加了zipline及其依赖的conda构建，并将结果上传到anaconda.org，标记为“ci”。（[981](https://github.com/stefan-jansen/zipline/issues/981)）
- en: Documentation
  id: totrans-619
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 文档
- en: None
  id: totrans-620
  prefs: []
  type: TYPE_NORMAL
  zh: 无
- en: Miscellaneous
  id: totrans-621
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 杂项
- en: 'Adds `ZiplineTestCase` which provides hooks to consume test fixtures. Fixtures
    are things like: `WithAssetFinder` which will make `self.asset_finder` available
    to your test with some mock data ([1042](https://github.com/stefan-jansen/zipline/issues/1042)).'
  id: totrans-622
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增加了`ZiplineTestCase`，它提供了消费测试fixture的钩子。fixture是一些东西，比如：`WithAssetFinder`，它会在你的测试中使`self.asset_finder`可用，并附带一些mock数据（[1042](https://github.com/stefan-jansen/zipline/issues/1042)）。
- en: Release 0.8.4
  id: totrans-623
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 发布0.8.4
- en: 'Release:'
  id: totrans-624
  prefs: []
  type: TYPE_NORMAL
  zh: 发布：
- en: 0.8.4
  id: totrans-625
  prefs: []
  type: TYPE_NORMAL
  zh: 0.8.4
- en: 'Date:'
  id: totrans-626
  prefs: []
  type: TYPE_NORMAL
  zh: 日期：
- en: February 24, 2016
  id: totrans-627
  prefs: []
  type: TYPE_NORMAL
  zh: 2016年2月24日
- en: Highlights
  id: totrans-628
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 亮点
- en: Added a new `EarningsCalendar` dataset for use in the Pipeline API. ([905](https://github.com/stefan-jansen/zipline/issues/905)).
  id: totrans-629
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新增了一个新的`EarningsCalendar`数据集，用于管道API的使用。（[905](https://github.com/stefan-jansen/zipline/issues/905)）。
- en: '[`AssetFinder`](api-reference.html#zipline.assets.AssetFinder "zipline.assets.assets.AssetFinder")
    speedups ([830](https://github.com/stefan-jansen/zipline/issues/830) and [817](https://github.com/stefan-jansen/zipline/issues/817)).'
  id: totrans-630
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`AssetFinder`](api-reference.html#zipline.assets.AssetFinder "zipline.assets.AssetFinder")加速（[830](https://github.com/stefan-jansen/zipline/issues/830)和[817](https://github.com/stefan-jansen/zipline/issues/817)）。'
- en: Improved support for non-float dtypes in Pipeline. Most notably, we now support
    `datetime64` and `int64` dtypes for `Factor`, and `BoundColumn.latest` now returns
    a proper `Filter` object when the column is of dtype `bool`.
  id: totrans-631
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 改进了对Pipeline中非浮点数据类型的支持。最值得注意的是，我们现在支持`Factor`的`datetime64`和`int64`数据类型，并且`BoundColumn.latest`现在在列的数据类型为`bool`时返回一个正确的`Filter`对象。
- en: Zipline now supports `numpy` 1.10, `pandas` 0.17, and `scipy` 0.16 ([969](https://github.com/stefan-jansen/zipline/issues/969)).
  id: totrans-632
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Zipline现在支持`numpy` 1.10、`pandas` 0.17和`scipy` 0.16（[969](https://github.com/stefan-jansen/zipline/issues/969)）。
- en: Batch transforms have been deprecated and will be removed in a future release.
    Using `history` is recommended as an alternative.
  id: totrans-633
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 批量转换已被弃用，并将在未来的版本中移除。建议使用`history`作为替代方案。
- en: Enhancements
  id: totrans-634
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 增强功能
- en: Adds a way for users to provide a context manager to use when executing the
    scheduled functions (including `handle_data`). This context manager will be passed
    the [`BarData`](api-reference.html#zipline.protocol.BarData "zipline.protocol.BarData")
    object for the bar and will be used for the duration of all of the functions scheduled
    to run. This can be passed to `TradingAlgorithm` by the keyword argument `create_event_context`
    ([828](https://github.com/stefan-jansen/zipline/issues/828)).
  id: totrans-635
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为用户提供了一种方式，可以在执行预定函数（包括`handle_data`）时使用上下文管理器。该上下文管理器将传递给定柱的[`BarData`](api-reference.html#zipline.protocol.BarData
    "zipline.protocol.BarData")对象，并用于所有预定运行的函数期间。这可以通过关键字参数`create_event_context`传递给`TradingAlgorithm`实现。([828](https://github.com/stefan-jansen/zipline/issues/828))
- en: Added support for `zipline.pipeline.factors.Factor` instances with `datetime64[ns]`
    dtypes. ([905](https://github.com/stefan-jansen/zipline/issues/905))
  id: totrans-636
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增加了对具有`datetime64[ns]`数据类型的`zipline.pipeline.factors.Factor`实例的支持。([905](https://github.com/stefan-jansen/zipline/issues/905))
- en: Added a new `EarningsCalendar` dataset for use in the Pipeline API. This dataset
    provides an abstract interface for adding earnings announcement data to a new
    algorithm. A pandas-based reference implementation for this dataset can be found
    in `zipline.pipeline.loaders.earnings`, and an experimental blaze-based implementation
    can be found in `zipline.pipeline.loaders.blaze.earnings`. ([905](https://github.com/stefan-jansen/zipline/issues/905)).
  id: totrans-637
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在Pipeline API中新增了一个`EarningsCalendar`数据集。该数据集提供了一个抽象接口，用于向新算法添加收益公告数据。基于pandas的该数据集的参考实现可以在`zipline.pipeline.loaders.earnings`中找到，而基于blaze的实验性实现可以在`zipline.pipeline.loaders.blaze.earnings`中找到。([905](https://github.com/stefan-jansen/zipline/issues/905))
- en: Added new built-in factors, `zipline.pipeline.factors.BusinessDaysUntilNextEarnings`
    and `zipline.pipeline.factors.BusinessDaysSincePreviousEarnings`. These factors
    use the new `EarningsCalendar` dataset. ([905](https://github.com/stefan-jansen/zipline/issues/905)).
  id: totrans-638
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新增了两个内置因子：`zipline.pipeline.factors.BusinessDaysUntilNextEarnings`和`zipline.pipeline.factors.BusinessDaysSincePreviousEarnings`。这些因子使用了新的`EarningsCalendar`数据集。([905](https://github.com/stefan-jansen/zipline/issues/905))
- en: Added `isnan()`, `notnan()` and `isfinite()` methods to `zipline.pipeline.factors.Factor`
    ([861](https://github.com/stefan-jansen/zipline/issues/861)).
  id: totrans-639
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为`zipline.pipeline.factors.Factor`添加了`isnan()`、`notnan()`和`isfinite()`方法。([861](https://github.com/stefan-jansen/zipline/issues/861))
- en: Added [`zipline.pipeline.factors.Returns`](api-reference.html#zipline.pipeline.factors.Returns
    "zipline.pipeline.factors.Returns"), a built-in factor which calculates the percent
    change in close price over the given window_length. ([884](https://github.com/stefan-jansen/zipline/issues/884)).
  id: totrans-640
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新增了[`zipline.pipeline.factors.Returns`](api-reference.html#zipline.pipeline.factors.Returns
    "zipline.pipeline.factors.Returns")，这是一个内置因子，用于计算给定`window_length`内收盘价的变化百分比。([884](https://github.com/stefan-jansen/zipline/issues/884))
- en: 'Added a new built-in factor: [`AverageDollarVolume`](api-reference.html#zipline.pipeline.factors.AverageDollarVolume
    "zipline.pipeline.factors.AverageDollarVolume"). ([927](https://github.com/stefan-jansen/zipline/issues/927)).'
  id: totrans-641
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新增了一个内置因子：[`AverageDollarVolume`](api-reference.html#zipline.pipeline.factors.AverageDollarVolume
    "zipline.pipeline.factors.AverageDollarVolume")。([927](https://github.com/stefan-jansen/zipline/issues/927))
- en: Added [`ExponentialWeightedMovingAverage`](api-reference.html#zipline.pipeline.factors.ExponentialWeightedMovingAverage
    "zipline.pipeline.factors.ExponentialWeightedMovingAverage") and [`ExponentialWeightedMovingStdDev`](api-reference.html#zipline.pipeline.factors.ExponentialWeightedMovingStdDev
    "zipline.pipeline.factors.ExponentialWeightedMovingStdDev") factors. ([910](https://github.com/stefan-jansen/zipline/issues/910)).
  id: totrans-642
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新增了[`ExponentialWeightedMovingAverage`](api-reference.html#zipline.pipeline.factors.ExponentialWeightedMovingAverage
    "zipline.pipeline.factors.ExponentialWeightedMovingAverage")和[`ExponentialWeightedMovingStdDev`](api-reference.html#zipline.pipeline.factors.ExponentialWeightedMovingStdDev
    "zipline.pipeline.factors.ExponentialWeightedMovingStdDev")因子。([910](https://github.com/stefan-jansen/zipline/issues/910))
- en: Allow [`DataSet`](api-reference.html#zipline.pipeline.data.DataSet "zipline.pipeline.data.DataSet")
    classes to be subclassed where subclasses inherit all of the columns from the
    parent. These columns will be new sentinels so you can register them a custom
    loader ([924](https://github.com/stefan-jansen/zipline/issues/924)).
  id: totrans-643
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 允许[`DataSet`](api-reference.html#zipline.pipeline.data.DataSet "zipline.pipeline.data.DataSet")类被继承，其中子类继承了父类的所有列。这些列将成为新的哨兵，因此您可以注册一个自定义加载器。([924](https://github.com/stefan-jansen/zipline/issues/924))
- en: Added `coerce()` to coerce inputs from one type into another before passing
    them to the function ([948](https://github.com/stefan-jansen/zipline/issues/948)).
  id: totrans-644
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新增了`coerce()`方法，用于在将输入传递给函数之前将其从一种类型强制转换为另一种类型。([948](https://github.com/stefan-jansen/zipline/issues/948))
- en: Added `optionally()` to wrap other preprocessor functions to explicitly allow
    `None` ([947](https://github.com/stefan-jansen/zipline/issues/947)).
  id: totrans-645
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增加了`optionally()`来包装其他预处理器函数，明确允许`None`([947](https://github.com/stefan-jansen/zipline/issues/947))。
- en: Added `ensure_timezone()` to allow string arguments to get converted into [`datetime.tzinfo`](https://docs.python.org/3/library/datetime.html#datetime.tzinfo
    "(in Python v3.11)") objects. This also allows `tzinfo` objects to be passed directly
    ([947](https://github.com/stefan-jansen/zipline/issues/947)).
  id: totrans-646
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增加了`ensure_timezone()`，允许将字符串参数转换为`datetime.tzinfo`对象。这也允许直接传递`tzinfo`对象([947](https://github.com/stefan-jansen/zipline/issues/947))。
- en: Added two optional arguments, `data_query_time` and `data_query_tz` to `BlazeLoader`
    and `BlazeEarningsCalendarLoader`. These arguments allow the user to specify some
    cutoff time for data when loading from the resource. For example, if I want to
    simulate executing my `before_trading_start` function at `8:45 US/Eastern` then
    I could pass `datetime.time(8, 45)` and `'US/Eastern'` to the loader. This means
    that data that is timestamped on or after `8:45` will not seen on that day in
    the simulation. The data will be made available on the next day ([947](https://github.com/stefan-jansen/zipline/issues/947)).
  id: totrans-647
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为`BlazeLoader`和`BlazeEarningsCalendarLoader`增加了两个可选参数`data_query_time`和`data_query_tz`。这些参数允许用户在从资源加载数据时指定一些截止时间。例如，如果我想模拟在`8:45
    US/Eastern`执行我的`before_trading_start`函数，那么我可以将`datetime.time(8, 45)`和`'US/Eastern'`传递给加载器。这意味着在模拟中，在那天之后时间戳为`8:45`的数据将不会被看到。数据将在下一天提供([947](https://github.com/stefan-jansen/zipline/issues/947))。
- en: '`BoundColumn.latest` now returns a `Filter` for columns of dtype `bool` ([962](https://github.com/stefan-jansen/zipline/issues/962)).'
  id: totrans-648
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`BoundColumn.latest`现在为`bool`类型的列返回一个`Filter`([962](https://github.com/stefan-jansen/zipline/issues/962))。'
- en: Added support for `Factor` instances with `int64` dtype. [`Column`](api-reference.html#zipline.pipeline.data.Column
    "zipline.pipeline.data.dataset.Column") now requires a `missing_value` when dtype
    is integral. ([962](https://github.com/stefan-jansen/zipline/issues/962))
  id: totrans-649
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增加了对具有`int64`数据类型的`Factor`实例的支持。现在，当数据类型为整数时，`Column`需要一个`missing_value`([962](https://github.com/stefan-jansen/zipline/issues/962))。
- en: It is also now possible to specify custom `missing_value` values for `float`,
    `datetime`, and `bool` Pipeline terms. ([962](https://github.com/stefan-jansen/zipline/issues/962))
  id: totrans-650
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 现在还可以为`float`、`datetime`和`bool`管道项指定自定义`missing_value`值([962](https://github.com/stefan-jansen/zipline/issues/962))。
- en: Added auto-close support for equities. Any positions held in an equity that
    reaches its `auto_close_date` will be liquidated for cash according to the equity’s
    last sale price. Furthermore, any open orders for that equity will be canceled.
    Both futures and equities are now auto-closed on the morning of their `auto_close_date`,
    immediately prior to `before_trading_start`. ([982](https://github.com/stefan-jansen/zipline/issues/982))
  id: totrans-651
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增加了对股票的自动关闭支持。任何在股票达到其`auto_close_date`时持有的头寸都将按照股票的最后成交价清算为现金。此外，该股票的任何未结订单都将被取消。期货和股票现在都在其`auto_close_date`的早晨自动关闭，立即在`before_trading_start`之前([982](https://github.com/stefan-jansen/zipline/issues/982))。
- en: Experimental Features
  id: totrans-652
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 实验性功能
- en: Warning
  id: totrans-653
  prefs: []
  type: TYPE_NORMAL
  zh: 警告
- en: Experimental features are subject to change.
  id: totrans-654
  prefs: []
  type: TYPE_NORMAL
  zh: 实验性功能可能会发生变化。
- en: Added support for parameterized `Factor` subclasses. Factors may specify `params`
    as a class-level attribute containing a tuple of parameter names. These values
    are then accepted by the constructor and forwarded by name to the factor’s `compute`
    function. This API is experimental, and may change in future releases.
  id: totrans-655
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增加了对参数化`Factor`子类的支持。因子可以指定`params`作为类级别的属性，其中包含参数名称的元组。这些值随后被构造函数接受，并通过名称转发到因子的`compute`函数。此API是实验性的，可能会在将来的版本中更改。
- en: Bug Fixes
  id: totrans-656
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 错误修复
- en: Fixes an issue that would cause the daily/minutely method caching to change
    the `len` of a `SIDData` object. This would cause us to think that the object
    was not empty even when it was ([826](https://github.com/stefan-jansen/zipline/issues/826)).
  id: totrans-657
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了一个问题，该问题会导致每日/每分钟方法缓存改变`SIDData`对象的`len`。这会导致我们认为即使对象为空，对象也不为空([826](https://github.com/stefan-jansen/zipline/issues/826))。
- en: Fixes an error raised in calculating beta when benchmark data were sparse. Instead
    [`numpy.nan`](https://numpy.org/doc/stable/reference/constants.html#numpy.nan
    "(in NumPy v1.25)") is returned ([859](https://github.com/stefan-jansen/zipline/issues/859)).
  id: totrans-658
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了在基准数据稀疏时计算beta时引发的错误。相反，返回了`numpy.nan`([859](https://github.com/stefan-jansen/zipline/issues/859))。
- en: Fixed an issue pickling `sentinel()` objects ([872](https://github.com/stefan-jansen/zipline/issues/872)).
  id: totrans-659
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了`sentinel()`对象的pickling问题（[872](https://github.com/stefan-jansen/zipline/issues/872)）。
- en: Fixed spurious warnings on first download of treasury data (:issue 922).
  id: totrans-660
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了首次下载国债数据时出现的虚假警告（:issue 922）。
- en: Corrected the error messages for [`set_commission()`](api-reference.html#zipline.api.set_commission
    "zipline.api.set_commission") and [`set_slippage()`](api-reference.html#zipline.api.set_slippage
    "zipline.api.set_slippage") when used outside of the `initialize` function. These
    errors called the functions `override_*` instead of `set_*`. This also renamed
    the exception types raised from `OverrideSlippagePostInit` and `OverrideCommissionPostInit`
    to `SetSlippagePostInit` and `SetCommissionPostInit` ([923](https://github.com/stefan-jansen/zipline/issues/923)).
  id: totrans-661
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修正了在`initialize`函数外部使用[`set_commission()`](api-reference.html#zipline.api.set_commission
    "zipline.api.set_commission")和[`set_slippage()`](api-reference.html#zipline.api.set_slippage
    "zipline.api.set_slippage")时的错误消息。这些错误调用了`override_*`函数而不是`set_*`函数。同时也将引发的异常类型从`OverrideSlippagePostInit`和`OverrideCommissionPostInit`重命名为`SetSlippagePostInit`和`SetCommissionPostInit`（[923](https://github.com/stefan-jansen/zipline/issues/923)）。
- en: Fixed an issue in the CLI that would cause assets to be added twice. This would
    map the same symbol to two different sids ([942](https://github.com/stefan-jansen/zipline/issues/942)).
  id: totrans-662
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了CLI中的一个问题，该问题会导致资产被添加两次，从而将同一符号映射到两个不同的sid（[942](https://github.com/stefan-jansen/zipline/issues/942)）。
- en: Fixed an issue where the `PerformancePeriod` incorrectly reported the total_positions_value
    when creating a [`Account`](api-reference.html#zipline.protocol.Account "zipline.protocol.Account")
    ([950](https://github.com/stefan-jansen/zipline/issues/950)).
  id: totrans-663
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了`PerformancePeriod`在创建[`Account`](api-reference.html#zipline.protocol.Account
    "zipline.protocol.Account")时错误报告总持仓价值的问题（[950](https://github.com/stefan-jansen/zipline/issues/950)）。
- en: Fixed issues around KeyErrors coming from history and BarData on 32-bit python,
    where Assets did not compare properly with int64s ([959](https://github.com/stefan-jansen/zipline/issues/959)).
  id: totrans-664
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了在32位python上，资产与int64比较不正确导致的KeyError问题（[959](https://github.com/stefan-jansen/zipline/issues/959)）。
- en: Fixed a bug where boolean operators were not properly implemented on [`Filter`](api-reference.html#zipline.pipeline.Filter
    "zipline.pipeline.Filter") ([991](https://github.com/stefan-jansen/zipline/issues/991)).
  id: totrans-665
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了[`Filter`](api-reference.html#zipline.pipeline.Filter "zipline.pipeline.Filter")上布尔运算符未正确实现的一个bug（[991](https://github.com/stefan-jansen/zipline/issues/991)）。
- en: Installation of zipline no longer downgrades numpy to 1.9.2 silently and unconditionally
    ([969](https://github.com/stefan-jansen/zipline/issues/969)).
  id: totrans-666
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 安装zipline不再无声且无条件地将numpy降级到1.9.2（[969](https://github.com/stefan-jansen/zipline/issues/969)）。
- en: Performance
  id: totrans-667
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 性能
- en: Speeds up `lookup_symbol()` by adding an extension, `AssetFinderCachedEquities`,
    that loads equities into dictionaries and then directs `lookup_symbol()` to these
    dictionaries to find matching equities ([830](https://github.com/stefan-jansen/zipline/issues/830)).
  id: totrans-668
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通过添加一个扩展`AssetFinderCachedEquities`，将股票加载到字典中，然后指导`lookup_symbol()`使用这些字典来查找匹配的股票，从而加快了`lookup_symbol()`的速度（[830](https://github.com/stefan-jansen/zipline/issues/830)）。
- en: Improved performance of `lookup_symbol()` by performing batched queries. ([817](https://github.com/stefan-jansen/zipline/issues/817)).
  id: totrans-669
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通过执行批量查询，提高了`lookup_symbol()`的性能（[817](https://github.com/stefan-jansen/zipline/issues/817)）。
- en: Maintenance and Refactorings
  id: totrans-670
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 维护和重构
- en: Asset databases now contain version information to ensure compatibility with
    current Zipline version ([815](https://github.com/stefan-jansen/zipline/issues/815)).
  id: totrans-671
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 资产数据库现在包含版本信息，以确保与当前Zipline版本的兼容性（[815](https://github.com/stefan-jansen/zipline/issues/815)）。
- en: Upgrade `requests` version to 2.9.1 ([2ee40db](https://github.com/stefan-jansen/zipline/commit/2ee40db))
  id: totrans-672
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将`requests`版本升级到2.9.1（[2ee40db](https://github.com/stefan-jansen/zipline/commit/2ee40db)）
- en: Upgrade `logbook` version to 0.12.5 ([11465d9](https://github.com/stefan-jansen/zipline/commit/11465d9)).
  id: totrans-673
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将`logbook`版本升级到0.12.5（[11465d9](https://github.com/stefan-jansen/zipline/commit/11465d9)）。
- en: Upgrade `Cython` version to 0.23.4 ([5f49fa2](https://github.com/stefan-jansen/zipline/commit/5f49fa2)).
  id: totrans-674
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将`Cython`版本升级到0.23.4（[5f49fa2](https://github.com/stefan-jansen/zipline/commit/5f49fa2)）。
- en: Build
  id: totrans-675
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 构建
- en: Makes zipline install requirements more flexible ([825](https://github.com/stefan-jansen/zipline/issues/825)).
  id: totrans-676
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使zipline安装要求更加灵活（[825](https://github.com/stefan-jansen/zipline/issues/825)）。
- en: Use `versioneer` to manage the project `__version__` and setup.py version ([829](https://github.com/stefan-jansen/zipline/issues/829)).
  id: totrans-677
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用`versioneer`来管理项目的`__version__`和setup.py版本（[829](https://github.com/stefan-jansen/zipline/issues/829)）。
- en: Fixed coveralls integration on travis build ([840](https://github.com/stefan-jansen/zipline/issues/840)).
  id: totrans-678
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了travis构建上的coveralls集成（[840](https://github.com/stefan-jansen/zipline/issues/840)）。
- en: Fixed conda build, which now uses git source as its source and reads requirements
    using setup.py, instead of copying them and letting them get out of sync ([937](https://github.com/stefan-jansen/zipline/issues/937)).
  id: totrans-679
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了conda构建，现在使用git源作为其源，并使用setup.py读取需求，而不是复制它们并让它们不同步（[937](https://github.com/stefan-jansen/zipline/issues/937)）。
- en: Require `setuptools` > 18.0 ([951](https://github.com/stefan-jansen/zipline/issues/951)).
  id: totrans-680
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 要求`setuptools` > 18.0（[951](https://github.com/stefan-jansen/zipline/issues/951)）。
- en: Documentation
  id: totrans-681
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 文档
- en: Document the release process for developers ([835](https://github.com/stefan-jansen/zipline/issues/835)).
  id: totrans-682
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为开发人员记录发布过程（[835](https://github.com/stefan-jansen/zipline/issues/835)）。
- en: Added reference docs for the Pipeline API. ([864](https://github.com/stefan-jansen/zipline/issues/864)).
  id: totrans-683
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为Pipeline API添加了参考文档（[864](https://github.com/stefan-jansen/zipline/issues/864)）。
- en: Added reference docs for Asset Metadata APIs. ([864](https://github.com/stefan-jansen/zipline/issues/864)).
  id: totrans-684
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为资产元数据API添加了参考文档（[864](https://github.com/stefan-jansen/zipline/issues/864)）。
- en: Generated documentation now includes links to source code for many classes and
    functions. ([864](https://github.com/stefan-jansen/zipline/issues/864)).
  id: totrans-685
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 生成的文档现在包括许多类和函数的源代码链接（[864](https://github.com/stefan-jansen/zipline/issues/864)）。
- en: Added platform-specific documentation describing how to find binary dependencies.
    ([883](https://github.com/stefan-jansen/zipline/issues/883)).
  id: totrans-686
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加了平台特定文档，描述如何找到二进制依赖项（[883](https://github.com/stefan-jansen/zipline/issues/883)）。
- en: Miscellaneous
  id: totrans-687
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 杂项
- en: Added a `show_graph()` method to render a Pipeline as an image ([836](https://github.com/stefan-jansen/zipline/issues/836)).
  id: totrans-688
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加了一个`show_graph()`方法，用于将Pipeline渲染为图像（[836](https://github.com/stefan-jansen/zipline/issues/836)）。
- en: Adds `subtest()` decorator for creating subtests without `nose_parameterized.expand()`
    which bloats the test output ([833](https://github.com/stefan-jansen/zipline/issues/833)).
  id: totrans-689
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加了`subtest()`装饰器，用于创建子测试，而不使用`nose_parameterized.expand()`，这会使测试输出膨胀（[833](https://github.com/stefan-jansen/zipline/issues/833)）。
- en: Limits timer report in test output to 15 longest tests ([838](https://github.com/stefan-jansen/zipline/issues/838)).
  id: totrans-690
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将测试输出中的计时报告限制为最长的15个测试（[838](https://github.com/stefan-jansen/zipline/issues/838)）。
- en: Treasury and benchmark downloads will now wait up to an hour to download again
    if data returned from a remote source does not extend to the date expected. ([841](https://github.com/stefan-jansen/zipline/issues/841)).
  id: totrans-691
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果从远程源返回的数据未延伸到预期日期，国库和基准下载现在将等待长达一小时再次下载（[841](https://github.com/stefan-jansen/zipline/issues/841)）。
- en: Added a tool to downgrade the assets db to previous versions ([941](https://github.com/stefan-jansen/zipline/issues/941)).
  id: totrans-692
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加了一个工具，用于将资产数据库降级到以前的版本（[941](https://github.com/stefan-jansen/zipline/issues/941)）。
- en: Release 0.8.3
  id: totrans-693
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 发布0.8.3
- en: 'Release:'
  id: totrans-694
  prefs: []
  type: TYPE_NORMAL
  zh: 发布：
- en: 0.8.3
  id: totrans-695
  prefs: []
  type: TYPE_NORMAL
  zh: 0.8.3
- en: 'Date:'
  id: totrans-696
  prefs: []
  type: TYPE_NORMAL
  zh: 日期：
- en: November 6, 2015
  id: totrans-697
  prefs: []
  type: TYPE_NORMAL
  zh: 2015年11月6日
- en: Note
  id: totrans-698
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: We advanced the version to `0.8.3` to fix a source distribution issue with pypi.
    There are no code changes in this version.
  id: totrans-699
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将版本推进到`0.8.3`以修复pypi的源分布问题。此版本没有代码更改。
- en: Release 0.8.0
  id: totrans-700
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 发布0.8.0
- en: 'Release:'
  id: totrans-701
  prefs: []
  type: TYPE_NORMAL
  zh: 发布：
- en: 0.8.0
  id: totrans-702
  prefs: []
  type: TYPE_NORMAL
  zh: 0.8.0
- en: 'Date:'
  id: totrans-703
  prefs: []
  type: TYPE_NORMAL
  zh: 日期：
- en: November 6, 2015
  id: totrans-704
  prefs: []
  type: TYPE_NORMAL
  zh: 2015年11月6日
- en: Highlights
  id: totrans-705
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 亮点
- en: New documentation system with a new website at [zipline.io](https://www.zipline.io)
  id: totrans-706
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新的文档系统，新网站位于[zipline.io](https://www.zipline.io)
- en: Major performance enhancements.
  id: totrans-707
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 主要性能改进。
- en: Dynamic history.
  id: totrans-708
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 动态历史。
- en: 'New user defined method: `before_trading_start`.'
  id: totrans-709
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新用户自定义方法：`before_trading_start`。
- en: 'New api function: [`schedule_function()`](api-reference.html#zipline.api.schedule_function
    "zipline.api.schedule_function").'
  id: totrans-710
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新api函数：[`schedule_function()`](api-reference.html#zipline.api.schedule_function
    "zipline.api.schedule_function")。
- en: 'New api function: [`get_environment()`](api-reference.html#zipline.api.get_environment
    "zipline.api.get_environment").'
  id: totrans-711
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新api函数：[`get_environment()`](api-reference.html#zipline.api.get_environment
    "zipline.api.get_environment")。
- en: 'New api function: [`set_max_leverage()`](api-reference.html#zipline.api.set_max_leverage
    "zipline.api.set_max_leverage").'
  id: totrans-712
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新api函数：[`set_max_leverage()`](api-reference.html#zipline.api.set_max_leverage
    "zipline.api.set_max_leverage")。
- en: 'New api function: [`set_do_not_order_list()`](api-reference.html#zipline.api.set_do_not_order_list
    "zipline.api.set_do_not_order_list").'
  id: totrans-713
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新api函数：[`set_do_not_order_list()`](api-reference.html#zipline.api.set_do_not_order_list
    "zipline.api.set_do_not_order_list")。
- en: Pipeline API.
  id: totrans-714
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 管道API。
- en: Support for trading futures.
  id: totrans-715
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 支持交易期货。
- en: Enhancements
  id: totrans-716
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 增强功能
- en: 'Account object: Adds an account object to context to track information about
    the trading account. Example:'
  id: totrans-717
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 账户对象：向上下文添加了一个账户对象，用于跟踪有关交易账户的信息。示例：
- en: '[PRE10]'
  id: totrans-718
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE10]'
- en: Returns the settled cash value that is stored on the account object. This value
    is updated accordingly as the algorithm is run ([396](https://github.com/stefan-jansen/zipline/issues/396)).
  id: totrans-719
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 返回存储在账户对象上的结算现金价值。随着算法的运行，这个值会相应更新（[396](https://github.com/stefan-jansen/zipline/issues/396)）。
- en: '`HistoryContainer` can now grow dynamically. Calls to `history()` will now
    be able to increase the size or change the shape of the history container to be
    able to service the call. `add_history()` now acts as a preformance hint to pre-allocate
    sufficient space in the container. This change is backwards compatible with `history`,
    all existing algorithms should continue to work as intended ([412](https://github.com/stefan-jansen/zipline/issues/412)).'
  id: totrans-720
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`HistoryContainer`现在可以动态增长，对`history()`的调用现在能够增加历史容器的大小或改变其形状，以便能够服务调用。`add_history()`现在作为性能提示，预先分配容器中足够的空间。这一变化与`history`向后兼容，所有现有的算法应该继续按预期工作（[412](https://github.com/stefan-jansen/zipline/issues/412)）。'
- en: 'Simple transforms ported from quantopian and use history. `SIDData` now has
    methods for:'
  id: totrans-721
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从quantopian移植过来的简单转换并使用历史。`SIDData`现在有了以下方法：
- en: '`stddev`'
  id: totrans-722
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`stddev`'
- en: '`mavg`'
  id: totrans-723
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`mavg`'
- en: '`vwap`'
  id: totrans-724
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`vwap`'
- en: '`returns`'
  id: totrans-725
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`returns`'
- en: 'These methods, except for `returns`, accept a number of days. If you are running
    with minute data, then this will calculate the number of minutes in those days,
    accounting for early closes and the current time and apply the transform over
    the set of minutes. `returns` takes no parameters and will return the daily returns
    of the given asset. Example:'
  id: totrans-726
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 这些方法，除了`returns`，接受一个天数参数。如果你使用分钟数据运行，那么这将计算这些天中的分钟数，考虑到提前收盘和当前时间，并在这些分钟集合上应用转换。`returns`不接受任何参数，将返回给定资产的日回报率。例如：
- en: '[PRE11]'
  id: totrans-727
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE11]'
- en: ([429](https://github.com/stefan-jansen/zipline/issues/429)).
  id: totrans-728
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: （[429](https://github.com/stefan-jansen/zipline/issues/429)）。
- en: 'New fields in Performance Period. Performance Period has new fields accessible
    in return value of `to_dict`: - gross leverage - net leverage - short exposure
    - long exposure - shorts count - longs count ([464](https://github.com/stefan-jansen/zipline/issues/464)).'
  id: totrans-729
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 性能周期中的新字段。性能周期在`to_dict`的返回值中有了新字段：- 总杠杆 - 净杠杆 - 空头暴露 - 多头暴露 - 空头数量 - 多头数量（[464](https://github.com/stefan-jansen/zipline/issues/464)）。
- en: Allow [`order_percent()`](api-reference.html#zipline.api.order_percent "zipline.api.order_percent")
    to work with various market values (by Jeremiah Lowin).
  id: totrans-730
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 允许[`order_percent()`](api-reference.html#zipline.api.order_percent "zipline.api.order_percent")与各种市场价值配合使用（由Jeremiah
    Lowin提供）。
- en: 'Currently, [`order_percent()`](api-reference.html#zipline.api.order_percent
    "zipline.api.order_percent") and [`order_target_percent()`](api-reference.html#zipline.api.order_target_percent
    "zipline.api.order_target_percent") both operate as a percentage of `self.portfolio.portfolio_value`.
    This PR lets them operate as percentages of other important MVs. Also adds `context.get_market_value()`,
    which enables this functionality. For example:'
  id: totrans-731
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 目前，[`order_percent()`](api-reference.html#zipline.api.order_percent "zipline.api.order_percent")和[`order_target_percent()`](api-reference.html#zipline.api.order_target_percent
    "zipline.api.order_target_percent")都作为`self.portfolio.portfolio_value`的百分比操作。此PR允许它们作为其他重要市场价值的百分比操作。还添加了`context.get_market_value()`，这使得这种功能成为可能。例如：
- en: '[PRE12]'
  id: totrans-732
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE12]'
- en: ([477](https://github.com/stefan-jansen/zipline/issues/477)).
  id: totrans-733
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: （[477](https://github.com/stefan-jansen/zipline/issues/477)）。
- en: Command line option to for printing algo to stdout (by Andrea D’Amore) ([545](https://github.com/stefan-jansen/zipline/issues/545)).
  id: totrans-734
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 命令行选项，用于将算法打印到标准输出（由Andrea D’Amore提供）（[545](https://github.com/stefan-jansen/zipline/issues/545)）。
- en: New user defined function `before_trading_start`. This function can be overridden
    by the user to be called once before the market opens every day ([389](https://github.com/stefan-jansen/zipline/issues/389)).
  id: totrans-735
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新增用户自定义函数`before_trading_start`。用户可以重写此函数，使其在市场开盘前每天调用一次（[389](https://github.com/stefan-jansen/zipline/issues/389)）。
- en: New api function [`schedule_function()`](api-reference.html#zipline.api.schedule_function
    "zipline.api.schedule_function"). This function allows the user to schedule a
    function to be called based on more complicated rules about the date and time.
    For example, call the function 15 minutes before market close respecting early
    closes ([411](https://github.com/stefan-jansen/zipline/issues/411)).
  id: totrans-736
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新增api函数[`schedule_function()`](api-reference.html#zipline.api.schedule_function
    "zipline.api.schedule_function")。此函数允许用户根据关于日期和时间的更复杂规则来安排函数的调用。例如，在市场收盘前15分钟调用该函数，尊重提前收盘（[411](https://github.com/stefan-jansen/zipline/issues/411)）。
- en: New api function `set_do_not_order_list()`. This function accepts a list of
    assets and adds a trading guard that prevents the algorithm from trading them.
    Adds a list point in time list of leveraged ETFs that people may want to mark
    as ‘do not trade’ ([478](https://github.com/stefan-jansen/zipline/issues/478)).
  id: totrans-737
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新增api函数`set_do_not_order_list()`。该函数接受一个资产列表，并增加了一个交易保护，防止算法交易这些资产。增加了一个即时的杠杆ETF列表，人们可能希望将其标记为“不交易”（[478](https://github.com/stefan-jansen/zipline/issues/478)）。
- en: Adds a class for representing securities. [`order()`](api-reference.html#zipline.api.order
    "zipline.api.order") and other order functions now require an instance of `Security`
    instead of an int or string ([520](https://github.com/stefan-jansen/zipline/issues/520)).
  id: totrans-738
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增加了一个表示证券的类。`[order()`](api-reference.html#zipline.api.order "zipline.api.order")和其他订单函数现在需要一个`Security`实例，而不是一个整数或字符串（[520](https://github.com/stefan-jansen/zipline/issues/520)）。
- en: Generalize the `Security` class to [`Asset`](api-reference.html#zipline.assets.Asset
    "zipline.assets.Asset"). This is in preperation of adding support for other asset
    types ([535](https://github.com/stefan-jansen/zipline/issues/535)).
  id: totrans-739
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将`Security`类泛化为 [`Asset`](api-reference.html#zipline.assets.Asset "zipline.assets.Asset")。这是为了准备增加对其他资产类型的支持（[535](https://github.com/stefan-jansen/zipline/issues/535)）。
- en: New api function [`get_environment()`](api-reference.html#zipline.api.get_environment
    "zipline.api.get_environment"). This function by default returns the string `'zipline'`.
    This is used so that algorithms can have different behavior on Quantopian and
    local zipline ([384](https://github.com/stefan-jansen/zipline/issues/384)).
  id: totrans-740
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新增api函数 [`get_environment()`](api-reference.html#zipline.api.get_environment
    "zipline.api.get_environment")。该函数默认返回字符串`'zipline'`。这样算法就可以根据是在Quantopian还是本地zipline上运行而有不同的行为（[384](https://github.com/stefan-jansen/zipline/issues/384)）。
- en: 'Extends [`get_environment()`](api-reference.html#zipline.api.get_environment
    "zipline.api.get_environment") to expose more of the environment to the algorithm.
    The function now accepts an argument that is the field to return. By default,
    this is `''platform''` which returns the old value of `''zipline''` but the following
    new fields can be requested:'
  id: totrans-741
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 扩展了 [`get_environment()`](api-reference.html#zipline.api.get_environment "zipline.api.get_environment")
    以向算法暴露更多的环境。该函数现在接受一个参数，该参数是要返回的字段。默认情况下，这是`'platform'`，它返回旧的`'zipline'`值，但是可以请求以下新字段：
- en: '`''''arena''`: Is this live trading or backtesting?'
  id: totrans-742
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`''''arena''`：这是实时交易还是回测？'
- en: '`''data_frequency''`: Is this minute mode or daily mode?'
  id: totrans-743
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`''data_frequency''`：这是分钟模式还是日模式？'
- en: '`''start''`: Simulation start date.'
  id: totrans-744
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`''start''`：模拟开始日期。'
- en: '`''end''`: Simulation end date.'
  id: totrans-745
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`''end''`：模拟结束日期。'
- en: '`''capital_base''`: The starting capital for the simulation.'
  id: totrans-746
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`''capital_base''`：模拟的起始资本。'
- en: '`''platform''`: The platform that the algorithm is running on.'
  id: totrans-747
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`''platform''`：算法运行的平台。'
- en: '`''*''`: A dictionary containing all of these fields.'
  id: totrans-748
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`''*''`：包含所有这些字段的字典。'
- en: ([449](https://github.com/stefan-jansen/zipline/issues/449)).
  id: totrans-749
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: （[449](https://github.com/stefan-jansen/zipline/issues/449)）。
- en: New api function `set_max_leveraged()`. This method adds a trading guard that
    prevents your algorithm from over leveraging itself ([552](https://github.com/stefan-jansen/zipline/issues/552)).
  id: totrans-750
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新增api函数`set_max_leveraged()`。该方法增加了一个交易保护，防止算法过度杠杆化（[552](https://github.com/stefan-jansen/zipline/issues/552)）。
- en: Experimental Features
  id: totrans-751
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 实验性功能
- en: Warning
  id: totrans-752
  prefs: []
  type: TYPE_NORMAL
  zh: 警告
- en: Experimental features are subject to change.
  id: totrans-753
  prefs: []
  type: TYPE_NORMAL
  zh: 实验性功能可能会发生变化。
- en: Adds new Pipeline API. The pipeline API is a high-level declarative API for
    representing trailing window computations on large datasets ([630](https://github.com/stefan-jansen/zipline/issues/630)).
  id: totrans-754
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增加了新的Pipeline API。Pipeline API是一个高级的声明性API，用于表示大型数据集上的尾随窗口计算（[630](https://github.com/stefan-jansen/zipline/issues/630)）。
- en: Adds support for futures trading ([637](https://github.com/stefan-jansen/zipline/issues/637)).
  id: totrans-755
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增加了对期货交易的支持（[637](https://github.com/stefan-jansen/zipline/issues/637)）。
- en: Adds Pipeline loader for blaze expressions. This allows users to pull data from
    any format blaze understands and use it in the Pipeline API. ([775](https://github.com/stefan-jansen/zipline/issues/775)).
  id: totrans-756
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增加了用于blaze表达式的Pipeline加载器。这允许用户从任何blaze理解的数据格式中提取数据，并在Pipeline API中使用它（[775](https://github.com/stefan-jansen/zipline/issues/775)）。
- en: Bug Fixes
  id: totrans-757
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 错误修复
- en: Fix a bug where the reported returns could sharply dip for random periods of
    time ([378](https://github.com/stefan-jansen/zipline/issues/378)).
  id: totrans-758
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了一个错误，该错误导致报告的回报率在随机时间段内急剧下降（[378](https://github.com/stefan-jansen/zipline/issues/378)）。
- en: Fix a bug that prevented debuggers from resolving the algorithm file ([431](https://github.com/stefan-jansen/zipline/issues/431)).
  id: totrans-759
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了一个阻止调试器解析算法文件的错误（[431](https://github.com/stefan-jansen/zipline/issues/431)）。
- en: Properly forward arguments to user defined `initialize` function ([687](https://github.com/stefan-jansen/zipline/issues/687)).
  id: totrans-760
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 正确地将参数传递给用户定义的`initialize`函数（[687](https://github.com/stefan-jansen/zipline/issues/687)）。
- en: Fix a bug that would cause treasury data to be redownloaded every backtest between
    midnight EST and the time when the treasury data was available ([793](https://github.com/stefan-jansen/zipline/issues/793)).
  id: totrans-761
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了一个bug，该bug会导致在午夜EST和财政部数据可用时间之间的每次回测都会重新下载财政部数据（[793](https://github.com/stefan-jansen/zipline/issues/793)）。
- en: Fix a bug that would cause the user defined `analyze` function to not be called
    if it was passed as a keyword argument to `TradingAlgorithm` ([819](https://github.com/stefan-jansen/zipline/issues/819)).
  id: totrans-762
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了一个bug，该bug会导致如果将用户定义的`analyze`函数作为关键字参数传递给`TradingAlgorithm`，则不会被调用（[819](https://github.com/stefan-jansen/zipline/issues/819)）。
- en: Performance
  id: totrans-763
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 性能
- en: Major performance enhancements to history (by Dale Jung) ([488](https://github.com/stefan-jansen/zipline/issues/488)).
  id: totrans-764
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对history进行了重大性能改进（由Dale Jung提供）（[488](https://github.com/stefan-jansen/zipline/issues/488)）。
- en: Maintenance and Refactorings
  id: totrans-765
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 维护和重构
- en: Remove simple transform code. These are available as methods of `SIDData` ([550](https://github.com/stefan-jansen/zipline/issues/550)).
  id: totrans-766
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 删除简单的转换代码。这些现在作为`SIDData`的方法可用（[550](https://github.com/stefan-jansen/zipline/issues/550)）。
- en: Build
  id: totrans-767
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 构建
- en: None
  id: totrans-768
  prefs: []
  type: TYPE_NORMAL
  zh: 无
- en: Documentation
  id: totrans-769
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 文档
- en: Switched to sphinx for the documentation ([816](https://github.com/stefan-jansen/zipline/issues/816)).
  id: totrans-770
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 切换到sphinx进行文档编写（[816](https://github.com/stefan-jansen/zipline/issues/816)）。
- en: Release 0.7.0
  id: totrans-771
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 发布0.7.0
- en: 'Release:'
  id: totrans-772
  prefs: []
  type: TYPE_NORMAL
  zh: 发布：
- en: 0.7.0
  id: totrans-773
  prefs: []
  type: TYPE_NORMAL
  zh: 0.7.0
- en: 'Date:'
  id: totrans-774
  prefs: []
  type: TYPE_NORMAL
  zh: 日期：
- en: July 25, 2014
  id: totrans-775
  prefs: []
  type: TYPE_NORMAL
  zh: 2014年7月25日
- en: Highlights
  id: totrans-776
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 亮点
- en: Command line interface to run algorithms directly.
  id: totrans-777
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 直接运行算法的命令行界面。
- en: IPython Magic `%%zipline` that runs algorithm defined in an IPython notebook
    cell.
  id: totrans-778
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: IPython Magic `%%zipline`，它运行在IPython笔记本单元格中定义的算法。
- en: API methods for building safeguards against runaway ordering and undesired short
    positions.
  id: totrans-779
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 用于构建防止失控订单和意外空头仓位的安全措施的API方法。
- en: New history() function to get a moving DataFrame of past market data (replaces
    BatchTransform).
  id: totrans-780
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新增history()函数，用于获取过去市场数据的移动DataFrame（取代BatchTransform）。
- en: A new [beginner tutorial](http://nbviewer.ipython.org/github/quantopian/zipline/blob/master/docs/tutorial.ipynb).
  id: totrans-781
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新增[入门教程](http://nbviewer.ipython.org/github/quantopian/zipline/blob/master/docs/tutorial.ipynb)。
- en: Enhancements
  id: totrans-782
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 增强功能
- en: 'CLI: Adds a CLI and IPython magic for zipline. Example:'
  id: totrans-783
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: CLI：为zipline添加了CLI和IPython魔法。例如：
- en: '[PRE13]'
  id: totrans-784
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE13]'
- en: Grabs the data from yahoo finance, runs the file dual_moving_avg.py (and looks
    for `dual_moving_avg_analyze.py` which, if found, will be executed after the algorithm
    has been run), and outputs the perf `DataFrame` to `dma.pickle` ([325](https://github.com/stefan-jansen/zipline/issues/325)).
  id: totrans-785
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 从雅虎财经获取数据，运行文件dual_moving_avg.py（并查找`dual_moving_avg_analyze.py`，如果找到，将在算法运行后执行），并将perf
    `DataFrame`输出到`dma.pickle`（[325](https://github.com/stefan-jansen/zipline/issues/325)）。
- en: 'IPython magic command (at the top of an IPython notebook cell). Example:'
  id: totrans-786
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: IPython魔法命令（位于IPython笔记本单元格顶部）。例如：
- en: '[PRE14]'
  id: totrans-787
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE14]'
- en: Does the same as above except instead of executing the file looks for the algorithm
    in the cell and instead of outputting the perf df to a file, creates a variable
    in the namespace called perf ([325](https://github.com/stefan-jansen/zipline/issues/325)).
  id: totrans-788
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 与上述相同，只是不是执行文件，而是在单元格中查找算法，并且不是将perf df输出到文件，而是在命名空间中创建一个名为perf的变量（[325](https://github.com/stefan-jansen/zipline/issues/325)）。
- en: Adds Trading Controls to the algorithm API.
  id: totrans-789
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 向算法API添加交易控制。
- en: 'The following functions are now available on `TradingAlgorithm` and for algo
    scripts:'
  id: totrans-790
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 以下函数现在在`TradingAlgorithm`和算法脚本中可用：
- en: '`set_max_order_size(self, sid=None, max_shares=None, max_notional=None)` Set
    a limit on the absolute magnitude, in shares and/or total dollar value, of any
    single order placed by this algorithm for a given sid. If `sid` is None, then
    the rule is applied to any order placed by the algorithm. Example:'
  id: totrans-791
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '`set_max_order_size(self, sid=None, max_shares=None, max_notional=None)` 设置一个限制，限制算法为给定sid下的任何单个订单的绝对大小，无论是以股份还是总美元价值计算。如果`sid`为None，则该规则适用于算法下的任何订单。例如：'
- en: '[PRE15]'
  id: totrans-792
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE15]'
- en: '`set_max_position_size(self, sid=None, max_shares=None, max_notional=None)`
    -Set a limit on the absolute magnitude, in either shares or dollar value, of any
    position held by the algorithm for a given sid. If `sid` is None, then the rule
    is applied to any position held by the algorithm. Example:'
  id: totrans-793
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '`set_max_position_size(self, sid=None, max_shares=None, max_notional=None)`
    - 设置一个限制，限制算法为给定sid持有的任何仓位的绝对大小，无论是以股份还是美元价值计算。如果`sid`为None，则该规则适用于算法持有的任何仓位。例如：'
- en: '[PRE16]'
  id: totrans-794
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE16]'
- en: '[PRE17]'
  id: totrans-795
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE17]'
- en: '`set_long_only(self)` Set a rule specifying that the algorithm may not hold
    short positions. Example:'
  id: totrans-796
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '`set_long_only(self)` 设置一条规则，指定算法不得持有空头仓位。例如：'
- en: '[PRE18]'
  id: totrans-797
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE18]'
- en: ([329](https://github.com/stefan-jansen/zipline/issues/329)).
  id: totrans-798
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: （[329](https://github.com/stefan-jansen/zipline/issues/329)）。
- en: Adds an `all_api_methods` classmethod on `TradingAlgorithm` that returns a list
    of all `TradingAlgorithm` API methods ([333](https://github.com/stefan-jansen/zipline/issues/333)).
  id: totrans-799
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在`TradingAlgorithm`上添加了一个`all_api_methods`类方法，该方法返回所有`TradingAlgorithm` API方法的列表（[333](https://github.com/stefan-jansen/zipline/issues/333)）。
- en: 'Expanded record() functionality for dynamic naming. The record() function can
    now take positional args before the kwargs. All original usage and functionality
    is the same, but now these extra usages will work:'
  id: totrans-800
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 扩展了record()功能以实现动态命名。record()函数现在可以在kwargs之前接受位置参数。所有原始用法和功能保持不变，但现在这些额外用法将起作用：
- en: '[PRE19]'
  id: totrans-801
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE19]'
- en: The requirements are simply that the poritional args occur only before the kwargs
    ([355](https://github.com/stefan-jansen/zipline/issues/355)).
  id: totrans-802
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 要求仅仅是位置参数仅出现在kwargs之前（[355](https://github.com/stefan-jansen/zipline/issues/355)）。
- en: history() has been ported from Quantopian to Zipline and provides moving window
    of market data. history() replaces BatchTransform. It is faster, works for minute
    level data and has a superior interface. To use it, call `add_history()` inside
    of `initialize()` and then receive a pandas `DataFrame` by calling history() from
    inside `handle_data()`. Check out the [tutorial](http://nbviewer.ipython.org/github/quantopian/zipline/blob/master/docs/tutorial.ipynb)
    and an [example](https://github.com/quantopian/zipline/blob/master/zipline/examples/dual_moving_average.py).
    ([345](https://github.com/stefan-jansen/zipline/issues/345) and [357](https://github.com/stefan-jansen/zipline/issues/357)).
  id: totrans-803
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: history()已从Quantopian移植到Zipline，并提供市场数据的移动窗口。history()取代了BatchTransform。它更快，适用于分钟级数据，并且具有更优越的接口。要使用它，请在`initialize()`内部调用`add_history()`，然后在`handle_data()`内部调用history()以接收pandas
    `DataFrame`。查看[教程](http://nbviewer.ipython.org/github/quantopian/zipline/blob/master/docs/tutorial.ipynb)和[示例](https://github.com/quantopian/zipline/blob/master/zipline/examples/dual_moving_average.py)。（[345](https://github.com/stefan-jansen/zipline/issues/345)和[357](https://github.com/stefan-jansen/zipline/issues/357)）。
- en: history() now supports `1m` window lengths ([345](https://github.com/stefan-jansen/zipline/issues/345)).
  id: totrans-804
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: history()现在支持`1m`窗口长度（[345](https://github.com/stefan-jansen/zipline/issues/345)）。
- en: Bug Fixes
  id: totrans-805
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: Bug Fixes
- en: Fix alignment of trading days and open and closes in trading environment ([331](https://github.com/stefan-jansen/zipline/issues/331)).
  id: totrans-806
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复交易环境中的交易日和开盘收盘对齐问题（[331](https://github.com/stefan-jansen/zipline/issues/331)）。
- en: RollingPanel fix when adding/dropping new fields ([349](https://github.com/stefan-jansen/zipline/issues/349)).
  id: totrans-807
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了添加/删除新字段时的RollingPanel问题（[349](https://github.com/stefan-jansen/zipline/issues/349)）。
- en: Performance
  id: totrans-808
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 性能
- en: None
  id: totrans-809
  prefs: []
  type: TYPE_NORMAL
  zh: 无
- en: Maintenance and Refactorings
  id: totrans-810
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 维护和重构
- en: Removed undocumented and untested HDF5 and CSV data sources ([267](https://github.com/stefan-jansen/zipline/issues/267)).
  id: totrans-811
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 移除了未记录且未经测试的HDF5和CSV数据源（[267](https://github.com/stefan-jansen/zipline/issues/267)）。
- en: Refactor sim_params ([352](https://github.com/stefan-jansen/zipline/issues/352)).
  id: totrans-812
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 重构sim_params（[352](https://github.com/stefan-jansen/zipline/issues/352)）。
- en: Refactoring of history ([340](https://github.com/stefan-jansen/zipline/issues/340)).
  id: totrans-813
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 重构history（[340](https://github.com/stefan-jansen/zipline/issues/340)）。
- en: Build
  id: totrans-814
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 构建
- en: 'The following dependencies have been updated (zipline might work with other
    versions too):'
  id: totrans-815
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 以下依赖项已更新（zipline可能也与其他版本兼容）：
- en: '[PRE20]'
  id: totrans-816
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE20]'
- en: Contributors
  id: totrans-817
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 贡献者
- en: 'The following people have contributed to this release, ordered by numbers of
    commit:'
  id: totrans-818
  prefs: []
  type: TYPE_NORMAL
  zh: 以下人员按提交次数为该版本做出了贡献：
- en: '[PRE21]'
  id: totrans-819
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: Release 0.6.1
  id: totrans-820
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 发布0.6.1
- en: 'Release:'
  id: totrans-821
  prefs: []
  type: TYPE_NORMAL
  zh: 发布：
- en: 0.6.1
  id: totrans-822
  prefs: []
  type: TYPE_NORMAL
  zh: 0.6.1
- en: 'Date:'
  id: totrans-823
  prefs: []
  type: TYPE_NORMAL
  zh: 日期：
- en: April 23, 2014
  id: totrans-824
  prefs: []
  type: TYPE_NORMAL
  zh: 2014年4月23日
- en: Highlights
  id: totrans-825
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 亮点
- en: Major fixes to risk calculations, see Bug Fixes section.
  id: totrans-826
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对风险计算进行了重大修复，请参阅Bug Fixes部分。
- en: Port of `history()` function, see Enhancements section
  id: totrans-827
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`history()`函数的移植，请参阅增强功能部分。'
- en: Start of support for Quantopian algorithm script-syntax, see ENH section.
  id: totrans-828
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 开始支持Quantopian算法脚本语法，请参阅ENH部分。
- en: conda package manager support, see Build section.
  id: totrans-829
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: conda包管理器支持，请参阅构建部分。
- en: Enhancements
  id: totrans-830
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 增强功能
- en: Always process new orders i.e. on bars where `handle_data` isn’t called, but
    there is ‘clock’ data e.g. a consistent benchmark, process orders.
  id: totrans-831
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 始终处理新订单，即在`handle_data`未被调用的bar上，但存在‘clock’数据，例如一致的基准，处理订单。
- en: Empty positions are now filtered from the portfolio container. To help prevent
    algorithms from operating on positions that are not in the existing universe of
    stocks. Formerly, iterating over positions would return positions for stocks which
    had zero shares held. (Where an explicit check in algorithm code for `pos.amount
    != 0` could prevent from using a non-existent position.)
  id: totrans-832
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 现在从投资组合容器中过滤掉空仓位。为了帮助防止算法在不在现有股票范围内的仓位上操作。以前，遍历仓位会返回持有零股的股票的仓位。（在算法代码中对`pos.amount
    != 0`进行显式检查可以防止使用不存在的仓位。）
- en: Add trading calendar for BMF&Bovespa.
  id: totrans-833
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加BMF&Bovespa的交易日历。
- en: Add beginning of algo script support.
  id: totrans-834
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加算法脚本支持的开始。
- en: 'Starts on the path of parity with the script syntax in Quantopian’s IDE on
    [https://quantopian.com](https://quantopian.com) Example:'
  id: totrans-835
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 开始与Quantopian的IDE中脚本语法保持一致的路径（[https://quantopian.com](https://quantopian.com)）示例：
- en: '[PRE22]'
  id: totrans-836
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE22]'
- en: Add HDF5 and CSV sources.
  id: totrans-837
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加HDF5和CSV数据源。
- en: Limit `handle_data` to times with market data. To prevent cases where custom
    data types had unaligned timestamps, only call `handle_data` when market data
    passes through. Custom data that comes before market data will still update the
    data bar. But the handling of that data will only be done when there is actionable
    market data.
  id: totrans-838
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 限制`handle_data`在有市场数据的时间调用。为了避免自定义数据类型时间戳不一致的情况，只在市场数据通过时调用`handle_data`。在市场数据之前到达的自定义数据仍会更新数据条，但只有在有可操作的市场数据时才会处理这些数据。
- en: Extended commission PerShare method to allow a minimum cost per trade.
  id: totrans-839
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 扩展每股的佣金方法以允许每笔交易有最低成本。
- en: Add symbol api function A `symbol()` lookup feature was added to Quantopian.
    By adding the same API function to zipline we can make copy&pasting of a Zipline
    algo to Quantopian easier.
  id: totrans-840
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加符号API函数。`symbol()`查找功能已添加到Quantopian。通过在zipline中添加相同的API函数，我们可以使将Zipline算法复制粘贴到Quantopian变得更加容易。
- en: Add simulated random trade source. Added a new data source that emits events
    with certain user-specified frequency (minute or daily). This allows users to
    backtest and debug an algorithm in minute mode to provide a cleaner path towards
    Quantopian.
  id: totrans-841
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加模拟随机交易源。新增了一个数据源，以用户指定的特定频率（分钟或每日）发出事件。这允许用户在分钟模式下进行回测和调试算法，为通往Quantopian提供更清晰的途径。
- en: 'Remove dependency on benchmark for trading day calendar. Instead of the benchmarks’
    index, the trading calendar is now used to populate the environment’s trading
    days. Remove `extra_date` field, since unlike the benchmarks list, the trading
    calendar can generate future dates, so dates for current day trading do not need
    to be appended. Motivations:'
  id: totrans-842
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 去除对交易日的基准依赖。不再使用基准的索引，现在使用交易日历来填充环境中的交易日。移除`extra_date`字段，因为与基准列表不同，交易日历可以生成未来日期，因此不需要为当前交易日的日期添加。动机：
- en: The source for the open and close/early close calendar and the trading day calendar
    is now the same, which should help prevent potential issues due to misalignment.
  id: totrans-843
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 开盘和收盘/提前收盘日历以及交易日历的来源现在是相同的，这应该有助于防止由于错位而可能出现的问题。
- en: Allows configurations where the benchmark is provided as a generator based data
    source to need to supply a second benchmark list just to populate dates.
  id: totrans-844
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 允许配置，其中基准作为基于生成器的数据源提供，无需提供第二个基准列表只是为了填充日期。
- en: Port `history()` API method from Quantopian. Opens the core of the `history()`
    function that was previously only available on the Quantopian platform.
  id: totrans-845
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从Quantopian移植`history()` API方法。打开了之前仅在Quantopian平台上可用的`history()`函数的内核。
- en: 'The history method is analoguous to the `batch_transform` function/decorator,
    but with a hopefully more precise specification of the frequency and period of
    the previous bar data that is captured. Example usage:'
  id: totrans-846
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 历史方法类似于`batch_transform`函数/装饰器，但希望对捕获的前一个条形数据的频率和周期有更精确的规范。示例用法：
- en: '[PRE23]'
  id: totrans-847
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE23]'
- en: N.B. this version of history lacks the backfilling capability that allows the
    return a full DataFrame on the first bar.
  id: totrans-848
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意：此版本的历史记录缺少允许在第一个条上返回完整DataFrame的回填功能。
- en: Bug Fixes
  id: totrans-849
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 错误修复
- en: 'Adjust benchmark events to match market hours ([241](https://github.com/stefan-jansen/zipline/issues/241)).
    Previously benchmark events were emitted at 0:00 on the day the benchmark related
    to: in ‘minute’ emission mode this meant that the benchmarks were emitted before
    any intra-day trades were processed.'
  id: totrans-850
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 调整基准事件以匹配市场交易时间（[241](https://github.com/stefan-jansen/zipline/issues/241)）。之前基准事件在相关基准日的0:00发出：在“分钟”发射模式下，这意味着基准在任何日内交易处理之前就已经发出。
- en: Ensure perf stats are generated for all days When running with minutely emissions
    the simulator would report to the user that it simulated ‘n - 1’ days (where n
    is the number of days specified in the simulation params). Now the correct number
    of trading days are reported as being simulated.
  id: totrans-851
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 确保为所有交易日生成性能统计数据。当使用每分钟数据时，模拟器会向用户报告它模拟了‘n - 1’天（其中n是在模拟参数中指定的天数）。现在报告正确数量的交易日被模拟。
- en: Fix repr for cumulative risk metrics. The `__repr__` for RiskMetricsCumulative
    was referring to an older structure of the class, causing an exception when printed.
    Also, now prints the last values in the metrics DataFrame.
  id: totrans-852
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复累积风险指标的repr。RiskMetricsCumulative的`__repr__`引用了该类的旧结构，导致打印时出现异常。现在还打印了指标DataFrame中的最后值。
- en: Prevent minute emission from crashing at end of available data. The next day
    calculation was causing an error when a minute emission algorithm reached the
    end of available data. Instead of a generic exception when available data is reached,
    raise and catch a named exception so that the tradesimulation loop can skip over,
    since the next market close is not needed at the end.
  id: totrans-853
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 防止分钟级数据在可用数据结束时崩溃。分钟级数据算法在计算次日数据时，当到达可用数据末尾时会引发错误。现在，当到达可用数据末尾时，不再抛出通用异常，而是抛出一个命名异常并捕获它，以便交易模拟循环可以跳过，因为不需要计算下一个市场收盘。
- en: Fix pandas indexing in trading calendar. This could alternatively be filed under
    Performance. Index using loc instead of the inefficient index-ing of day, then
    time.
  id: totrans-854
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在交易日历中修复pandas索引。这也可以归类为性能问题。使用loc索引而不是效率低下的day索引，然后是time索引。
- en: Prevent crash in vwap transform due to non-existent member. The WrongDataForTransform
    was referencing a `self.fields` member, which did not exist. Add a self.fields
    member set to `price` and `volume` and use it to iterate over during the check.
  id: totrans-855
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 防止由于不存在成员导致的vwap转换崩溃。WrongDataForTransform引用了不存在的`self.fields`成员。添加一个self.fields成员，设置为`price`和`volume`，并在检查期间使用它进行迭代。
- en: Fix max drawdown calculation. The input into max drawdown was incorrect, causing
    the bad results. i.e. the `compounded_log_returns` were not values representative
    of the algorithms total return at a given time, though `calculate_max_drawdown`
    was treating the values as if they were. Instead, the `algorithm_period_returns`
    series is now used, which does provide the total return.
  id: totrans-856
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复最大回撤计算。输入到最大回撤的数据不正确，导致结果不佳。即`compounded_log_returns`不是代表算法在给定时间的总回报的值，尽管`calculate_max_drawdown`将其视为如此。现在使用`algorithm_period_returns`序列，它确实提供了总回报。
- en: Fix cost basis calculation. Cost basis calculation now takes direction of txn
    into account. Closing a long position or covering a short shouldn’t affect the
    cost basis.
  id: totrans-857
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复成本基础计算。成本基础计算现在考虑了交易的方向。平仓多头或回补空头不应影响成本基础。
- en: Fix floating point error in `order()`. Where order amounts that were near an
    integer could accidentally be floored or ceilinged (depending on being postive
    or negative) to the wrong integer. e.g. an amount stored internally as -27.99999
    was converted to -27 instead of -28.
  id: totrans-858
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复`order()`中的浮点错误。当订单金额接近整数时，可能会意外地被舍入或向上取整（取决于正负）到错误的整数。例如，内部存储为-27.99999的金额被转换为-27而不是-28。
- en: Update perf period state when positions are changed by splits. Otherwise, `self._position_amounts`
    will be out of sync with position.amount, etc.
  id: totrans-859
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当仓位因拆分而变动时，更新性能周期状态。否则，`self._position_amounts`将与position.amount等不同步。
- en: Fix misalignment of downside series calc when using exact dates. An oddity that
    was exposed while working on making the return series passed to the risk module
    more exact, the series comparison between the returns and mean returns was unbalanced,
    because the mean returns were not masked down to the downside data points; however,
    in most, if not all cases this was papered over by the call to `.valid()` which
    was removed in this change set.
  id: totrans-860
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复使用确切日期时下行系列计算的错位。在使传递给风险模块的回报系列更精确时暴露出的一个奇怪问题，回报与平均回报之间的系列比较不平衡，因为平均回报没有被屏蔽到下行数据点；然而，在大多数情况下，如果不是所有情况下，这都是通过调用`.valid()`来掩盖的，这在此次更改集中被移除了。
- en: Check that self.logger exists before using it. `self.logger` is initialized
    as `None` and there is no guarantee that users have set it, so check that it exists
    before trying to pass messages to it.
  id: totrans-861
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在使用self.logger之前检查它是否存在。`self.logger`被初始化为`None`，不能保证用户已经设置它，所以在尝试向它传递消息之前检查它是否存在。
- en: Prevent out of sync market closes in performance tracker. In situations where
    the performance tracker has been reset or patched to handle state juggling with
    warming up live data, the `market_close` member of the performance tracker could
    end up out of sync with the current algo time as determined by the performance
    tracker. The symptom was dividends never triggering, because the end of day checks
    would not match the current time. Fix by having the tradesimulation loop be responsible,
    in minute/minute mode, for advancing the market close and passing that value to
    the performance tracker, instead of having the market close advanced by the performance
    tracker as well.
  id: totrans-862
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 防止性能跟踪器中的不同步市场收盘。在性能跟踪器重置或修补以处理与预热实时数据的状态切换的情况下，性能跟踪器的`market_close`成员可能会与性能跟踪器确定的当前算法时间不同步。症状是股息从未触发，因为收盘检查与当前时间不匹配。通过让交易模拟循环负责在每分钟模式下推进市场收盘，并将该值传递给性能跟踪器来修复，而不是让性能跟踪器也推进市场收盘。
- en: 'Fix numerous cumulative and period risk calculations. The calculations that
    are expected to change are:'
  id: totrans-863
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修正多个累积和周期风险计算。预期会改变的计算包括：
- en: '`cumulative.beta`'
  id: totrans-864
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`cumulative.beta`'
- en: '`cumulative.alpha`'
  id: totrans-865
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`cumulative.alpha`'
- en: '`cumulative.information`'
  id: totrans-866
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`cumulative.information`'
- en: '`cumulative.sharpe`'
  id: totrans-867
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`cumulative.sharpe`'
- en: '`period.sortino`'
  id: totrans-868
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`period.sortino`'
- en: How Risk Calculations Are Changing Risk Fixes for Both Period and Cumulative
  id: totrans-869
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 风险计算如何改变周期性和累积性的风险修正
- en: Downside Risk
  id: totrans-870
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 下行风险
- en: Use sample instead of population for standard deviation.
  id: totrans-871
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 使用样本而非总体的标准差。
- en: Add a rounding factor, so that if the two values are close for a given dt, that
    they do not count as a downside value, which would throw off the denominator of
    the standard deviation of the downside diffs.
  id: totrans-872
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 添加一个舍入因子，以便在给定dt的情况下，如果两个值接近，则它们不计为下行值，这会影响下行差分标准差的分母。
- en: Standard Deviation Type
  id: totrans-873
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 标准差类型
- en: Across the board the standard deviation has been standardized to using a ‘sample’
    calculation, whereas before cumulative risk was mostly using ‘population’. Using
    `ddof=1` with `np.std` calculates as if the values are a sample.
  id: totrans-874
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 全面来看，标准差已经标准化为使用“样本”计算，而以前累积风险主要使用“总体”。使用`ddof=1`与`np.std`计算时，将值视为样本。
- en: Cumulative Risk Fixes
  id: totrans-875
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 累积风险修正
- en: Beta
  id: totrans-876
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 贝塔
- en: Use the daily algorithm returns and benchmarks instead of annualized mean returns.
  id: totrans-877
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 使用每日算法回报和基准而非年化平均回报。
- en: Volatility
  id: totrans-878
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 波动性
- en: Use sample instead of population with standard deviation.
  id: totrans-879
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 使用样本而非总体的标准差。
- en: The volatility is an input to other calculations so this change affects Sharpe
    and Information ratio calculations.
  id: totrans-880
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 波动性是其他计算的输入，因此这一变化影响夏普和信息比率计算。
- en: Information Ratio
  id: totrans-881
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 信息比率
- en: The benchmark returns input is changed from annualized benchmark returns to
    the annualized mean returns.
  id: totrans-882
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 基准回报输入从年化基准回报更改为年化平均回报。
- en: Alpha
  id: totrans-883
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 阿尔法
- en: The benchmark returns input is changed from annualized benchmark returns to
    the annualized mean returns.
  id: totrans-884
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 基准回报输入从年化基准回报更改为年化平均回报。
- en: Period Risk Fixes
  id: totrans-885
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 周期风险修正
- en: Sortino
  id: totrans-886
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: Sortino
- en: Now uses the downside risk of the daily return vs. the mean algorithm returns
    for the minimum acceptable return instead of the treasury return.
  id: totrans-887
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 现在使用每日回报的下行风险与平均算法回报的最低可接受回报，而不是国债回报。
- en: The above required adding the calculation of the mean algorithm returns for
    period risk.
  id: totrans-888
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 上述更改需要添加周期风险的平均算法回报计算。
- en: Also, uses `algorithm_period_returns` and `tresaury_period_return` as the cumulative
    Sortino does, instead of using algorithm returns for both inputs into the Sortino
    calculation.
  id: totrans-889
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 此外，使用`algorithm_period_returns`和`tresaury_period_return`作为累积Sortino所做的，而不是使用算法回报作为Sortino计算的两个输入。
- en: Performance
  id: totrans-890
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 性能
- en: Removed `alias_dt` transform in favor of property on SIDData. Adding a copy
    of the Event’s dt field as datetime via the `alias_dt` generator, so that the
    API was forgiving and allowed both datetime and dt on a SIDData object, was creating
    noticeable overhead, even on an noop algorithms. Instead of incurring the cost
    of copying the datetime value and assigning it to the Event object on every event
    that is passed through the system, add a property to SIDData which acts as an
    alias `datetime` to `dt`. Eventually support for `data['foo'].datetime` may be
    removed, and could be considered deprecated.
  id: totrans-891
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 移除了`alias_dt`转换，转而在SIDData上添加属性。通过`alias_dt`生成器添加事件的dt字段的副本作为datetime，以便API宽容并允许SIDData对象上同时存在datetime和dt，这会在noop算法上产生明显的开销。不再为每个通过系统传递的事件复制datetime值并将其分配给事件对象，而是在SIDData上添加一个属性，该属性作为`dt`的别名`datetime`。最终可能会移除对`data['foo'].datetime`的支持，并可能被视为已弃用。
- en: Remove the drop of ‘null return’ from cumulative returns. The check of existence
    of the null return key, and the drop of said return on every single bar was adding
    unneeded CPU time when an algorithm was run with minute emissions. Instead, add
    the 0.0 return with an index of the trading day before the start date. The removal
    of the `null return` was mainly in place so that the period calculation was not
    crashing on a non-date index value; with the index as a date, the period return
    can also approximate volatility (even though the that volatility has high noise-to-signal
    strength because it uses only two values as an input.)
  id: totrans-892
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 移除了从累积回报中删除“null return”的操作。在每个分钟排放的算法运行时，检查null return键的存在并在每个单独的条上删除该返回，会增加不必要的CPU时间。相反，在开始日期之前的交易日索引处添加0.0返回。移除`null
    return`主要是为了防止周期计算在非日期索引值上崩溃；由于索引为日期，周期回报也可以近似波动性（尽管该波动性具有高噪声信号强度，因为它仅使用两个值作为输入。）
- en: Maintenance and Refactorings
  id: totrans-893
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 维护和重构
- en: Allow `sim_params` to provide data frequency for the algorithm. In the case
    that `data_frequency` of the algorithm is None, allow the `sim_params` to provide
    the `data_frequency`.
  id: totrans-894
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 允许`sim_params`为算法提供数据频率。如果算法的`data_frequency`为None，则允许`sim_params`提供`data_frequency`。
- en: Also, defer to the algorithms data frequency, if provided.
  id: totrans-895
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 此外，如果提供的话，请遵循算法数据频率。
- en: Build
  id: totrans-896
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 构建
- en: Added support for building and releasing via conda For those who prefer building
    with [https://docs.conda.io/en/latest/](https://docs.conda.io/en/latest/) to compiling
    locally with pip. The following should install Zipline on many systems.
  id: totrans-897
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加了对通过conda构建和发布的支持。对于那些更喜欢使用[https://docs.conda.io/en/latest/](https://docs.conda.io/en/latest/)构建而不是使用pip本地编译的人来说。以下应该可以在许多系统上安装Zipline。
- en: '[PRE24]'
  id: totrans-898
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE24]'
- en: Contributors
  id: totrans-899
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 贡献者
- en: 'The following people have contributed to this release, ordered by numbers of
    commit:'
  id: totrans-900
  prefs: []
  type: TYPE_NORMAL
  zh: 以下人员为此次发布做出了贡献，按提交次数排序：
- en: '[PRE25]'
  id: totrans-901
  prefs: []
  type: TYPE_PRE
  zh: '[PRE25]'
- en: Release 2.0.0rc
  id: totrans-902
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 发布2.0.0rc
- en: 'Release:'
  id: totrans-903
  prefs: []
  type: TYPE_NORMAL
  zh: 发布：
- en: 2.0.0rc1
  id: totrans-904
  prefs: []
  type: TYPE_NORMAL
  zh: 2.0.0rc1
- en: 'Date:'
  id: totrans-905
  prefs: []
  type: TYPE_NORMAL
  zh: 日期：
- en: April 5, 2021
  id: totrans-906
  prefs: []
  type: TYPE_NORMAL
  zh: 2021年4月5日
- en: Highlights
  id: totrans-907
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 亮点
- en: This release updates Zipline to be compatible with Python >= 3.7 as well as
    the current versions of relevant PyData libraries like Pandas, scikit-learn, and
    others.
  id: totrans-908
  prefs: []
  type: TYPE_NORMAL
  zh: 此次发布更新了Zipline，使其与Python >= 3.7以及当前版本的Pandas、scikit-learn等相关的PyData库兼容。
- en: '[Conda packages](https://anaconda.org/ml4t/repo) for [Zipline](https://anaconda.org/ml4t/zipline-reloaded)
    and key dependencies [bcolz](https://anaconda.org/ml4t/bcolz-zipline) and [TA-Lib](https://anaconda.org/ml4t/ta-lib)
    are now available for Python 3.7-3.9 on the ‘ml4t’ Anaconda channel. Binary wheels
    are available on [PyPi](https://pypi.org/project/zipline-reloaded/) for Linux
    ( Python 3.7-3.9) and MacOSx (3.7 and 3.8).'
  id: totrans-909
  prefs: []
  type: TYPE_NORMAL
  zh: '[Conda包](https://anaconda.org/ml4t/repo)现在为[Zipline](https://anaconda.org/ml4t/zipline-reloaded)及其关键依赖[bcolz](https://anaconda.org/ml4t/bcolz-zipline)和[TA-Lib](https://anaconda.org/ml4t/ta-lib)提供Python
    3.7-3.9的版本，可在‘ml4t’ Anaconda频道上获取。Linux（Python 3.7-3.9）和MacOSx（3.7和3.8）的二进制轮子可在[PyPi](https://pypi.org/project/zipline-reloaded/)上获取。'
- en: As part of the update, the `BlazeLoader` functionality was removed. It was built
    on the [Blaze Ecosystem](https://blaze.pydata.org/). Unfortunately, the three
    relevant projects ([Blaze](https://blaze.readthedocs.io/en/latest/index.html),
    [Odo](https://odo.readthedocs.io/en/latest/) and [datashape](https://datashape.readthedocs.io/en/latest/)
    have received very limited support over the last several years.
  id: totrans-910
  prefs: []
  type: TYPE_NORMAL
  zh: 作为更新的一部分，移除了`BlazeLoader`功能。它是基于[Blaze Ecosystem](https://blaze.pydata.org/)构建的。不幸的是，三个相关项目（[Blaze](https://blaze.readthedocs.io/en/latest/index.html)、[Odo](https://odo.readthedocs.io/en/latest/)和[datashape](https://datashape.readthedocs.io/en/latest/)）在过去几年中得到了非常有限的支持。
- en: 'Other updates include:'
  id: totrans-911
  prefs: []
  type: TYPE_NORMAL
  zh: 其他更新包括：
- en: A [new release](https://github.com/stefan-jansen/bcolz-zipline) for [Bcolz](https://github.com/Blosc/bcolz)
    which has been marked unmaintained since September 2020 by the [author](https://github.com/Blosc).
    The new release updates the underlying [c-blosc](https://github.com/Blosc/c-blosc)
    library from version 1.14 to the latest 1.21.0\. There are also conda packages
    for Bcolz (see links above).
  id: totrans-912
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[新版本](https://github.com/stefan-jansen/bcolz-zipline)为[Bcolz](https://github.com/Blosc/bcolz)，自2020年9月起被[作者](https://github.com/Blosc)标记为不再维护。新版本将底层[c-blosc](https://github.com/Blosc/c-blosc)库从1.14版更新到最新的1.21.0版。还有Bcolz的Conda包（见上述链接）。'
- en: '[Networkx](https://networkx.org/) now uses the better performing version 2.0.'
  id: totrans-913
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[Networkx](https://networkx.org/) 现已采用性能更佳的2.0版本。'
- en: Conda packages for TA-Lib 0.4.19.
  id: totrans-914
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Conda包为TA-Lib 0.4.19。
- en: This new release also makes it easier to load custom data sources into a Pipeline
    (such as the predictions of an ML model) when backtesting. See the relevant examples
    in the [Github repo](https://github.com/stefan-jansen/machine-learning-for-trading)
    of the book [Machine Learning for Trading](https://www.amazon.com/Machine-Learning-Algorithmic-Trading-alternative/dp/1839217715/ref=tmm_pap_swatch_0?_encoding=UTF8&qid=1617658040&sr=8-1-spons),
    such as [these ones](https://github.com/stefan-jansen/machine-learning-for-trading/tree/master/08_ml4t_workflow/04_ml4t_workflow_with_zipline).
  id: totrans-915
  prefs: []
  type: TYPE_NORMAL
  zh: 这一新版本还使得在回测时更容易将自定义数据源（如ML模型的预测）加载到流水线中。请参阅书籍[《机器学习在交易中的应用》](https://www.amazon.com/Machine-Learning-Algorithmic-Trading-alternative/dp/1839217715/ref=tmm_pap_swatch_0?_encoding=UTF8&qid=1617658040&sr=8-1-spons)的[Github仓库](https://github.com/stefan-jansen/machine-learning-for-trading)中的相关示例，例如[这些](https://github.com/stefan-jansen/machine-learning-for-trading/tree/master/08_ml4t_workflow/04_ml4t_workflow_with_zipline)。
- en: Enhancements
  id: totrans-916
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 增强功能
- en: custom_loader() for custom Pipeline data
  id: totrans-917
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 自定义加载器（custom_loader()）用于自定义流水线数据
- en: compatibility with the latest versions of Pandas, scikit-learn, and other relevant
    [PyData](https://pydata.org/) libraries.
  id: totrans-918
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 与最新版本的Pandas、scikit-learn和其他相关[PyData](https://pydata.org/)库的兼容性。
- en: Bug Fixes
  id: totrans-919
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 错误修复
- en: Numerous tests updates to accommodate recent Python and dependency versions.
  id: totrans-920
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为适应最近的Python版本和依赖项版本，进行了多项测试更新。
- en: Performance
  id: totrans-921
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 性能
- en: Latest blosc library may improve compression and I/O performance
  id: totrans-922
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 最新的blosc库可能提高压缩和I/O性能
- en: Maintenance and Refactorings
  id: totrans-923
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 维护和重构
- en: Removed Python 2 support
  id: totrans-924
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 移除了Python 2支持
- en: Build
  id: totrans-925
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 构建
- en: All builds consolidated on GitHub Actions CI
  id: totrans-926
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 所有构建已整合到GitHub Actions CI
- en: Documentation
  id: totrans-927
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 文档
- en: Expanded with additional information on Pipeline and related DataLoaders
  id: totrans-928
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 扩展了关于流水线和相关数据加载器的额外信息
- en: Highlights
  id: totrans-929
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 亮点
- en: This release updates Zipline to be compatible with Python >= 3.7 as well as
    the current versions of relevant PyData libraries like Pandas, scikit-learn, and
    others.
  id: totrans-930
  prefs: []
  type: TYPE_NORMAL
  zh: 此版本更新了Zipline，使其与Python >= 3.7以及当前版本的Pandas、scikit-learn等相关的PyData库兼容。
- en: '[Conda packages](https://anaconda.org/ml4t/repo) for [Zipline](https://anaconda.org/ml4t/zipline-reloaded)
    and key dependencies [bcolz](https://anaconda.org/ml4t/bcolz-zipline) and [TA-Lib](https://anaconda.org/ml4t/ta-lib)
    are now available for Python 3.7-3.9 on the ‘ml4t’ Anaconda channel. Binary wheels
    are available on [PyPi](https://pypi.org/project/zipline-reloaded/) for Linux
    ( Python 3.7-3.9) and MacOSx (3.7 and 3.8).'
  id: totrans-931
  prefs: []
  type: TYPE_NORMAL
  zh: '[Conda包](https://anaconda.org/ml4t/repo)为[Zipline](https://anaconda.org/ml4t/zipline-reloaded)及其关键依赖项[bcolz](https://anaconda.org/ml4t/bcolz-zipline)和[TA-Lib](https://anaconda.org/ml4t/ta-lib)，现已在‘ml4t’
    Anaconda频道上为Python 3.7-3.9提供。在[PyPi](https://pypi.org/project/zipline-reloaded/)上提供Linux（Python
    3.7-3.9）和MacOSx（3.7和3.8）的二进制轮。'
- en: As part of the update, the `BlazeLoader` functionality was removed. It was built
    on the [Blaze Ecosystem](https://blaze.pydata.org/). Unfortunately, the three
    relevant projects ([Blaze](https://blaze.readthedocs.io/en/latest/index.html),
    [Odo](https://odo.readthedocs.io/en/latest/) and [datashape](https://datashape.readthedocs.io/en/latest/)
    have received very limited support over the last several years.
  id: totrans-932
  prefs: []
  type: TYPE_NORMAL
  zh: 作为更新的一部分，移除了`BlazeLoader`功能。它原本是基于[Blaze生态系统](https://blaze.pydata.org/)构建的。不幸的是，相关的三个项目（[Blaze](https://blaze.readthedocs.io/en/latest/index.html)、[Odo](https://odo.readthedocs.io/en/latest/)和[datashape](https://datashape.readthedocs.io/en/latest/)）在过去几年中得到的维护非常有限。
- en: 'Other updates include:'
  id: totrans-933
  prefs: []
  type: TYPE_NORMAL
  zh: 其他更新包括：
- en: A [new release](https://github.com/stefan-jansen/bcolz-zipline) for [Bcolz](https://github.com/Blosc/bcolz)
    which has been marked unmaintained since September 2020 by the [author](https://github.com/Blosc).
    The new release updates the underlying [c-blosc](https://github.com/Blosc/c-blosc)
    library from version 1.14 to the latest 1.21.0\. There are also conda packages
    for Bcolz (see links above).
  id: totrans-934
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[新版本](https://github.com/stefan-jansen/bcolz-zipline) 的 [Bcolz](https://github.com/Blosc/bcolz)
    自 2020 年 9 月以来已被标记为不再维护，由 [作者](https://github.com/Blosc) 发布。新版本将底层 [c-blosc](https://github.com/Blosc/c-blosc)
    库从 1.14 版更新到最新的 1.21.0 版。还有 Bcolz 的 conda 包（见上述链接）。'
- en: '[Networkx](https://networkx.org/) now uses the better performing version 2.0.'
  id: totrans-935
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[Networkx](https://networkx.org/) 现在使用性能更好的 2.0 版本。'
- en: Conda packages for TA-Lib 0.4.19.
  id: totrans-936
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: TA-Lib 0.4.19 的 conda 包。
- en: This new release also makes it easier to load custom data sources into a Pipeline
    (such as the predictions of an ML model) when backtesting. See the relevant examples
    in the [Github repo](https://github.com/stefan-jansen/machine-learning-for-trading)
    of the book [Machine Learning for Trading](https://www.amazon.com/Machine-Learning-Algorithmic-Trading-alternative/dp/1839217715/ref=tmm_pap_swatch_0?_encoding=UTF8&qid=1617658040&sr=8-1-spons),
    such as [these ones](https://github.com/stefan-jansen/machine-learning-for-trading/tree/master/08_ml4t_workflow/04_ml4t_workflow_with_zipline).
  id: totrans-937
  prefs: []
  type: TYPE_NORMAL
  zh: 这个新版本还使得在回测时更容易将自定义数据源加载到 Pipeline 中（例如 ML 模型的预测）。请参阅 [Github 仓库](https://github.com/stefan-jansen/machine-learning-for-trading)
    中的 [Machine Learning for Trading](https://www.amazon.com/Machine-Learning-Algorithmic-Trading-alternative/dp/1839217715/ref=tmm_pap_swatch_0?_encoding=UTF8&qid=1617658040&sr=8-1-spons)
    一书的示例，例如 [这些](https://github.com/stefan-jansen/machine-learning-for-trading/tree/master/08_ml4t_workflow/04_ml4t_workflow_with_zipline)。
- en: Enhancements
  id: totrans-938
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 增强功能
- en: custom_loader() for custom Pipeline data
  id: totrans-939
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 自定义 Pipeline 数据的 custom_loader()
- en: compatibility with the latest versions of Pandas, scikit-learn, and other relevant
    [PyData](https://pydata.org/) libraries.
  id: totrans-940
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 与最新版本的 Pandas、scikit-learn 和其他相关的 [PyData](https://pydata.org/) 库的兼容性。
- en: Bug Fixes
  id: totrans-941
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 错误修复
- en: Numerous tests updates to accommodate recent Python and dependency versions.
  id: totrans-942
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为了适应最近的 Python 和依赖版本，进行了大量的测试更新。
- en: Performance
  id: totrans-943
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 性能
- en: Latest blosc library may improve compression and I/O performance
  id: totrans-944
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 最新的 blosc 库可能会提高压缩和 I/O 性能
- en: Maintenance and Refactorings
  id: totrans-945
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 维护和重构
- en: Removed Python 2 support
  id: totrans-946
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 移除了对 Python 2 的支持
- en: Build
  id: totrans-947
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 构建
- en: All builds consolidated on GitHub Actions CI
  id: totrans-948
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 所有构建都整合到了 GitHub Actions CI 上
- en: Documentation
  id: totrans-949
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 文档
- en: Expanded with additional information on Pipeline and related DataLoaders
  id: totrans-950
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 扩展了有关 Pipeline 和相关 DataLoaders 的更多信息
- en: Release 1.4.1
  id: totrans-951
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 发布 1.4.1
- en: 'Release:'
  id: totrans-952
  prefs: []
  type: TYPE_NORMAL
  zh: 发布：
- en: 1.4.1
  id: totrans-953
  prefs: []
  type: TYPE_NORMAL
  zh: 1.4.1
- en: 'Date:'
  id: totrans-954
  prefs: []
  type: TYPE_NORMAL
  zh: 日期：
- en: October 5, 2020
  id: totrans-955
  prefs: []
  type: TYPE_NORMAL
  zh: 2020 年 10 月 5 日
- en: This release includes a small number of bug fixes, documentation improvements,
    and build/dependency enhancements.
  id: totrans-956
  prefs: []
  type: TYPE_NORMAL
  zh: 此版本包括少量的错误修复、文档改进和构建/依赖项增强。
- en: Conda packages for zipline and its dependencies are now available for python
    3.6 on the ‘conda-forge’ Anaconda channel. They’re also available on the ‘Quantopian’
    channel, but we’ll stop updating those eventually.
  id: totrans-957
  prefs: []
  type: TYPE_NORMAL
  zh: zipline 及其依赖项的 conda 包现在可用于 python 3.6 的 ‘conda-forge’ Anaconda 频道。它们也可以在 ‘Quantopian’
    频道上获得，但我们最终将停止更新那些。
- en: Bug Fixes
  id: totrans-958
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 错误修复
- en: Fix for calling `run_algorithm` without `benchmark_returns` ([2762](https://github.com/stefan-jansen/zipline/issues/2762))
  id: totrans-959
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了在没有 `benchmark_returns` 的情况下调用 `run_algorithm` 的问题 ([2762](https://github.com/stefan-jansen/zipline/issues/2762))
- en: Maintenance and Refactorings
  id: totrans-960
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 维护和重构
- en: Support for empyrical 0.5.3 ([2526](https://github.com/stefan-jansen/zipline/issues/2526))
  id: totrans-961
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 支持 empyrical 0.5.3 ([2526](https://github.com/stefan-jansen/zipline/issues/2526))
- en: Removed dependence on contextlib2 in py3 environments ([2757](https://github.com/stefan-jansen/zipline/issues/2757))
  id: totrans-962
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在 py3 环境中移除了对 contextlib2 的依赖 ([2757](https://github.com/stefan-jansen/zipline/issues/2757))
- en: Update default bundle to ‘quantopian-quandl’ at more entrypoints ([2763](https://github.com/stefan-jansen/zipline/issues/2763))
  id: totrans-963
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将默认包更新为 ‘quantopian-quandl’ 并在更多入口点使用 ([2763](https://github.com/stefan-jansen/zipline/issues/2763))
- en: Build
  id: totrans-964
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 构建
- en: CI with newer statsmodels and scipy ([2739](https://github.com/stefan-jansen/zipline/issues/2739))
  id: totrans-965
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用更新的 statsmodels 和 scipy 进行 CI ([2739](https://github.com/stefan-jansen/zipline/issues/2739))
- en: GitHub Actions CI on linux and macos ([2743](https://github.com/stefan-jansen/zipline/issues/2743),
    [2767](https://github.com/stefan-jansen/zipline/issues/2767))
  id: totrans-966
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: GitHub Actions CI 在 linux 和 macos 上的问题 ([2743](https://github.com/stefan-jansen/zipline/issues/2743),
    [2767](https://github.com/stefan-jansen/zipline/issues/2767))
- en: Added conda packaging for zipline and its dependencies to conda-forge ([2665](https://github.com/stefan-jansen/zipline/issues/2665))
  id: totrans-967
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为 zipline 及其依赖项添加了 conda 打包到 conda-forge ([2665](https://github.com/stefan-jansen/zipline/issues/2665))
- en: Documentation
  id: totrans-968
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 文档
- en: Various documentation improvements ([2763](https://github.com/stefan-jansen/zipline/issues/2763),
    [2771](https://github.com/stefan-jansen/zipline/issues/2771), [2772](https://github.com/stefan-jansen/zipline/issues/2772),
    [2776](https://github.com/stefan-jansen/zipline/issues/2776), [2780](https://github.com/stefan-jansen/zipline/issues/2780))
  id: totrans-969
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 各种文档改进（[2763](https://github.com/stefan-jansen/zipline/issues/2763)，[2771](https://github.com/stefan-jansen/zipline/issues/2771)，[2772](https://github.com/stefan-jansen/zipline/issues/2772)，[2776](https://github.com/stefan-jansen/zipline/issues/2776)，[2780](https://github.com/stefan-jansen/zipline/issues/2780)）
- en: Bug Fixes
  id: totrans-970
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 错误修复
- en: Fix for calling `run_algorithm` without `benchmark_returns` ([2762](https://github.com/stefan-jansen/zipline/issues/2762))
  id: totrans-971
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了在没有`benchmark_returns`的情况下调用`run_algorithm`的问题（[2762](https://github.com/stefan-jansen/zipline/issues/2762)）
- en: Maintenance and Refactorings
  id: totrans-972
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 维护和重构
- en: Support for empyrical 0.5.3 ([2526](https://github.com/stefan-jansen/zipline/issues/2526))
  id: totrans-973
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 支持empyrical 0.5.3（[2526](https://github.com/stefan-jansen/zipline/issues/2526)）
- en: Removed dependence on contextlib2 in py3 environments ([2757](https://github.com/stefan-jansen/zipline/issues/2757))
  id: totrans-974
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在py3环境中移除了对contextlib2的依赖（[2757](https://github.com/stefan-jansen/zipline/issues/2757)）
- en: Update default bundle to ‘quantopian-quandl’ at more entrypoints ([2763](https://github.com/stefan-jansen/zipline/issues/2763))
  id: totrans-975
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在更多入口点更新默认bundle为‘quantopian-quandl’（[2763](https://github.com/stefan-jansen/zipline/issues/2763)）
- en: Build
  id: totrans-976
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 构建
- en: CI with newer statsmodels and scipy ([2739](https://github.com/stefan-jansen/zipline/issues/2739))
  id: totrans-977
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用更新的statsmodels和scipy进行CI（[2739](https://github.com/stefan-jansen/zipline/issues/2739)）
- en: GitHub Actions CI on linux and macos ([2743](https://github.com/stefan-jansen/zipline/issues/2743),
    [2767](https://github.com/stefan-jansen/zipline/issues/2767))
  id: totrans-978
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: GitHub Actions CI在linux和macos上（[2743](https://github.com/stefan-jansen/zipline/issues/2743)，[2767](https://github.com/stefan-jansen/zipline/issues/2767)）
- en: Added conda packaging for zipline and its dependencies to conda-forge ([2665](https://github.com/stefan-jansen/zipline/issues/2665))
  id: totrans-979
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为zipline及其依赖项添加了conda打包到conda-forge（[2665](https://github.com/stefan-jansen/zipline/issues/2665)）
- en: Documentation
  id: totrans-980
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 文档
- en: Various documentation improvements ([2763](https://github.com/stefan-jansen/zipline/issues/2763),
    [2771](https://github.com/stefan-jansen/zipline/issues/2771), [2772](https://github.com/stefan-jansen/zipline/issues/2772),
    [2776](https://github.com/stefan-jansen/zipline/issues/2776), [2780](https://github.com/stefan-jansen/zipline/issues/2780))
  id: totrans-981
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 各种文档改进（[2763](https://github.com/stefan-jansen/zipline/issues/2763)，[2771](https://github.com/stefan-jansen/zipline/issues/2771)，[2772](https://github.com/stefan-jansen/zipline/issues/2772)，[2776](https://github.com/stefan-jansen/zipline/issues/2776)，[2780](https://github.com/stefan-jansen/zipline/issues/2780)）
- en: Release 1.4.0
  id: totrans-982
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 发布1.4.0
- en: 'Release:'
  id: totrans-983
  prefs: []
  type: TYPE_NORMAL
  zh: 发布：
- en: 1.4.0
  id: totrans-984
  prefs: []
  type: TYPE_NORMAL
  zh: 1.4.0
- en: 'Date:'
  id: totrans-985
  prefs: []
  type: TYPE_NORMAL
  zh: 日期：
- en: July 22, 2020
  id: totrans-986
  prefs: []
  type: TYPE_NORMAL
  zh: 2020年7月22日
- en: Highlights
  id: totrans-987
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 亮点
- en: Removed Implicit Dependency on Benchmarks and Treasury Returns
  id: totrans-988
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 移除了对基准和债券收益率的隐式依赖
- en: 'Previously, Zipline implicitly fetched these required inputs from third party
    API sources if they were not provided by users: treasury data from the US Federal
    Reserve’s API, and benchmarks from IEX. This meant that simulations required an
    internet connection and stable APIs for these data sources, neither of which were
    guaranteed for many users.'
  id: totrans-989
  prefs: []
  type: TYPE_NORMAL
  zh: 以前，如果用户没有提供，Zipline会隐式地从第三方API源获取这些必需的输入：来自美国联邦储备银行API的债券数据和来自IEX的基准。这意味着模拟需要互联网连接和这些数据源的稳定API，这对许多用户来说都不是保证的。
- en: 'We removed the dependency on treasury curves, since they weren’t actually being
    used anymore. And we replaced the implicit downloading of benchmark returns with
    explicit options:'
  id: totrans-990
  prefs: []
  type: TYPE_NORMAL
  zh: 我们移除了对债券曲线的依赖，因为它们实际上不再被使用。我们用明确的选项替换了基准收益率的隐式下载：
- en: '[PRE26]'
  id: totrans-991
  prefs: []
  type: TYPE_PRE
  zh: '[PRE26]'
- en: ([2627](https://github.com/stefan-jansen/zipline/issues/2627), [2642](https://github.com/stefan-jansen/zipline/issues/2642))
  id: totrans-992
  prefs: []
  type: TYPE_NORMAL
  zh: （[2627](https://github.com/stefan-jansen/zipline/issues/2627)，[2642](https://github.com/stefan-jansen/zipline/issues/2642)）
- en: New Built In Factors
  id: totrans-993
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 新内置因子
- en: '[`PercentChange`](api-reference.html#zipline.pipeline.factors.PercentChange
    "zipline.pipeline.factors.PercentChange"): Calculates the percent change over
    the given `window_length`. Note: Percent change is calculated as `(new - old)
    / abs(old)`. ([2506](https://github.com/stefan-jansen/zipline/issues/2506))'
  id: totrans-994
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`PercentChange`](api-reference.html#zipline.pipeline.factors.PercentChange
    "zipline.pipeline.factors.PercentChange")：计算给定`window_length`下的百分比变化。注意：百分比变化计算公式为`(new
    - old) / abs(old)`。（[2506](https://github.com/stefan-jansen/zipline/issues/2506)）'
- en: '[`PeerCount`](api-reference.html#zipline.pipeline.factors.PeerCount "zipline.pipeline.factors.PeerCount"):
    Gives the number of occurrences of each distinct category in a classifier. ([2509](https://github.com/stefan-jansen/zipline/issues/2509))'
  id: totrans-995
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`PeerCount`](api-reference.html#zipline.pipeline.factors.PeerCount "zipline.pipeline.factors.PeerCount")：给出分类器中每个不同类别的出现次数。（[2509](https://github.com/stefan-jansen/zipline/issues/2509)）'
- en: '`ConstantMixin`: A mixin for creating a Pipeline term with a constant value.
    ([2697](https://github.com/stefan-jansen/zipline/issues/2697))'
  id: totrans-996
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`ConstantMixin`：用于创建具有常量值的流水线项的混合类。([2697](https://github.com/stefan-jansen/zipline/issues/2697))'
- en: '`if_else()`: Allows users to create expressions that conditionally draw from
    the outputs of one of two terms. ([2697](https://github.com/stefan-jansen/zipline/issues/2697))'
  id: totrans-997
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`if_else()`：允许用户创建条件表达式，根据条件从两个项的输出中选择一个。([2697](https://github.com/stefan-jansen/zipline/issues/2697))'
- en: '`fillna()`: Allows users to fill missing data with either a constant value,
    or values from another term. ([2697](https://github.com/stefan-jansen/zipline/issues/2697))'
  id: totrans-998
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`fillna()`：允许用户用常量值或其他项的值填充缺失数据。([2697](https://github.com/stefan-jansen/zipline/issues/2697))'
- en: '`clip()`: Allows users to constrain a factor’s values to a given range. ([2708](https://github.com/stefan-jansen/zipline/issues/2708))'
  id: totrans-999
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`clip()`：允许用户将因子的值限制在给定范围内。([2708](https://github.com/stefan-jansen/zipline/issues/2708))'
- en: '`mean()`, `stddev()`, `max()`, `min()`, `median()`, `sum()`, `notnull_count()`:
    Summarize data across the entire domain into a scalar factor. ([2697](https://github.com/stefan-jansen/zipline/issues/2697))'
  id: totrans-1000
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`mean()`、`stddev()`、`max()`、`min()`、`median()`、`sum()`、`notnull_count()`：将整个域的数据汇总为标量因子。([2697](https://github.com/stefan-jansen/zipline/issues/2697))'
- en: Enhancements
  id: totrans-1001
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 增强功能
- en: Added International Pipelines ([2262](https://github.com/stefan-jansen/zipline/issues/2262))
  id: totrans-1002
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新增了国际流水线。([2262](https://github.com/stefan-jansen/zipline/issues/2262))
- en: Added DataSetFamily (née MultiDimensionalDataSet) - a shorthand for creating
    a collection of regular DataSets that share the same columns. ([2402](https://github.com/stefan-jansen/zipline/issues/2402))
  id: totrans-1003
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新增了DataSetFamily（原名MultiDimensionalDataSet），用于创建共享相同列的常规DataSet集合的简写方式。([2402](https://github.com/stefan-jansen/zipline/issues/2402))
- en: Added `get_column()` for looking up columns by name ([2210](https://github.com/stefan-jansen/zipline/issues/2210))
  id: totrans-1004
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新增了`get_column()`方法，用于按名称查找列。([2210](https://github.com/stefan-jansen/zipline/issues/2210))
- en: Added `CheckWindowsClassifier` that allows us to test lookback windows of categorical
    and string columns using Pipeline. ([2458](https://github.com/stefan-jansen/zipline/issues/2458))
  id: totrans-1005
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新增了`CheckWindowsClassifier`，允许我们使用流水线测试分类和字符串列的回溯窗口。([2458](https://github.com/stefan-jansen/zipline/issues/2458))
- en: Added `PipelineHooks` which is now used to display Pipline progress bars ([2467](https://github.com/stefan-jansen/zipline/issues/2467))
  id: totrans-1006
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新增了`PipelineHooks`，现在用于显示流水线进度条。([2467](https://github.com/stefan-jansen/zipline/issues/2467))
- en: '[`BoundColumn`](api-reference.html#zipline.pipeline.data.BoundColumn "zipline.pipeline.data.dataset.BoundColumn")
    comparisons will now result in an error. This prevents writing `EquityPricing.volume
    > 1000` (silently returning bad data) insteads of `EquityPricing.volume.latest
    > 1000`. ([2537](https://github.com/stefan-jansen/zipline/issues/2537))'
  id: totrans-1007
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`BoundColumn`](api-reference.html#zipline.pipeline.data.BoundColumn "zipline.pipeline.data.dataset.BoundColumn")比较现在会导致错误。这防止了编写`EquityPricing.volume
    > 1000`（静默返回错误数据）而不是`EquityPricing.volume.latest > 1000`。([2537](https://github.com/stefan-jansen/zipline/issues/2537))'
- en: Added currency conversion support to Pipeline. ([2586](https://github.com/stefan-jansen/zipline/issues/2586))
  id: totrans-1008
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新增了对流水线的货币转换支持。([2586](https://github.com/stefan-jansen/zipline/issues/2586))
- en: Added `--benchmark-file` and `--benchmark-symbol` command line arguments to
    make it easier to provide benchmark data. ([2642](https://github.com/stefan-jansen/zipline/issues/2642))
  id: totrans-1009
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新增了`--benchmark-file`和`--benchmark-symbol`命令行参数，以便更容易提供基准数据。([2642](https://github.com/stefan-jansen/zipline/issues/2642))
- en: Added support for Python 3.6 ([2643](https://github.com/stefan-jansen/zipline/issues/2643))
  id: totrans-1010
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新增了对Python 3.6的支持。([2643](https://github.com/stefan-jansen/zipline/issues/2643))
- en: Added `mask` argument to Factor.peer_count. ([2676](https://github.com/stefan-jansen/zipline/issues/2676))
  id: totrans-1011
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为Factor.peer_count新增了`mask`参数。([2676](https://github.com/stefan-jansen/zipline/issues/2676))
- en: Added `if_else()` and `fillna()` for allowing conditional logic in Pipelines.
    ([2691](https://github.com/stefan-jansen/zipline/issues/2691))
  id: totrans-1012
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新增了`if_else()`和`fillna()`，允许在流水线中使用条件逻辑。([2691](https://github.com/stefan-jansen/zipline/issues/2691))
- en: Added daily summary methods to Factor for collecting summary statistics for
    the entire universe. ([2697](https://github.com/stefan-jansen/zipline/issues/2697))
  id: totrans-1013
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为Factor新增了每日汇总方法，用于为整个宇宙收集汇总统计信息。([2697](https://github.com/stefan-jansen/zipline/issues/2697))
- en: Added `clip()` method for clipping values to a range. ([2708](https://github.com/stefan-jansen/zipline/issues/2708))
  id: totrans-1014
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新增了`clip()`方法，用于将值限制在一定范围内。([2708](https://github.com/stefan-jansen/zipline/issues/2708))
- en: Added support for Pipeline term arithmetic with more than 32 terms. ([2727](https://github.com/stefan-jansen/zipline/issues/2727))
  id: totrans-1015
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新增了对超过32个项的流水线项算术运算的支持。([2727](https://github.com/stefan-jansen/zipline/issues/2727))
- en: Bug Fixes
  id: totrans-1016
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 错误修复
- en: Fixed support for non unique sid->exchange mappings. ([2289](https://github.com/stefan-jansen/zipline/issues/2289))
  id: totrans-1017
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了对非唯一sid->交易所映射的支持。([2289](https://github.com/stefan-jansen/zipline/issues/2289))
- en: Fixed crash on dividend warning. ([2323](https://github.com/stefan-jansen/zipline/issues/2323))
  id: totrans-1018
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了在股息警告时的崩溃问题。([2323](https://github.com/stefan-jansen/zipline/issues/2323))
- en: Fixed `week_start` when Monday precedes the New Year. ([2394](https://github.com/stefan-jansen/zipline/issues/2394))
  id: totrans-1019
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了当周一在新年前时`week_start`的问题。([2394](https://github.com/stefan-jansen/zipline/issues/2394))
- en: Ensured correct dtypes when unpacking empty dataframes. ([2444](https://github.com/stefan-jansen/zipline/issues/2444))
  id: totrans-1020
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 确保在解包空数据帧时dtype正确。([2444](https://github.com/stefan-jansen/zipline/issues/2444))
- en: Fixed a bug where a Pipeline term with `window_length=0` would not copy the
    input before calling `compute()` which could cause incorrect results if the input
    was reused in the Pipeline. ([2723](https://github.com/stefan-jansen/zipline/issues/2723))
  id: totrans-1021
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了一个bug，其中具有`window_length=0`的流水线项在调用`compute()`之前不会复制输入，这可能导致如果输入在流水线中被重用，则结果不正确。([2723](https://github.com/stefan-jansen/zipline/issues/2723))
- en: Performance
  id: totrans-1022
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 性能
- en: Added `HDF5DailyBarWriter`, which writes daily pricing in a new format as an
    HDF5 file. Each OHLCV field is stored as a 2D array in a chunked HDF5 dataset,
    with a row per sid and a column per day. The file also supports multiple countries.
    Added `HDF5DailyBarReader`, which implements the BarReader interface and can read
    files written by HDF5DailyBarWriter. ([2295](https://github.com/stefan-jansen/zipline/issues/2295))
  id: totrans-1023
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加了`HDF5DailyBarWriter`，它以新的HDF5文件格式写入每日定价。每个OHLCV字段都存储为分块HDF5数据集中的2D数组，每行代表一个sid，每列代表一天。该文件还支持多个国家。添加了`HDF5DailyBarReader`，它实现了BarReader接口，并可以读取由HDF5DailyBarWriter编写的文件。([2295](https://github.com/stefan-jansen/zipline/issues/2295))
- en: Vectorized dividend ratio calculation ([2298](https://github.com/stefan-jansen/zipline/issues/2298))
  id: totrans-1024
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 矢量化股息比率计算([2298](https://github.com/stefan-jansen/zipline/issues/2298))
- en: Improved performance of the [`RollingPearson`](api-reference.html#zipline.pipeline.factors.RollingPearson
    "zipline.pipeline.factors.RollingPearson") and [`RollingPearsonOfReturns`](api-reference.html#zipline.pipeline.factors.RollingPearsonOfReturns
    "zipline.pipeline.factors.RollingPearsonOfReturns") pipeline factors. ([2071](https://github.com/stefan-jansen/zipline/issues/2071))
  id: totrans-1025
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 改进了[`RollingPearson`](api-reference.html#zipline.pipeline.factors.RollingPearson
    "zipline.pipeline.factors.RollingPearson")和[`RollingPearsonOfReturns`](api-reference.html#zipline.pipeline.factors.RollingPearsonOfReturns
    "zipline.pipeline.factors.RollingPearsonOfReturns")流水线因子的性能。([2071](https://github.com/stefan-jansen/zipline/issues/2071))
- en: Maintenance and Refactorings
  id: totrans-1026
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 维护和重构
- en: Made `parameter_space()` reset instance fixtures between runs ([2433](https://github.com/stefan-jansen/zipline/issues/2433))
  id: totrans-1027
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使`parameter_space()`在运行之间重置实例固定装置([2433](https://github.com/stefan-jansen/zipline/issues/2433))
- en: Removed unused treasury curves data handling. ([2626](https://github.com/stefan-jansen/zipline/issues/2626))
  id: totrans-1028
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 移除了未使用的国债曲线数据处理。([2626](https://github.com/stefan-jansen/zipline/issues/2626))
- en: Miscellaneous
  id: totrans-1029
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 杂项
- en: International Pipelines
  id: totrans-1030
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 国际流水线
- en: Pipeline now supports international data.
  id: totrans-1031
  prefs: []
  type: TYPE_NORMAL
  zh: 流水线现在支持国际数据。
- en: Pipeline is a tool that allows you to define computations over a universe of
    assets and a period of time. In the past, you could only run pipelines on the
    US equity market. Now, you can now specify a domain over which a pipeline should
    be computed. The name “domain” refers to the mathematical concept of the “domain
    of a function”, which is the set of potential inputs to a function. In the context
    of Pipeline, the domain specifies the set of assets and a corresponding trading
    calendar over which the expressions of a pipeline should be computed.
  id: totrans-1032
  prefs: []
  type: TYPE_NORMAL
  zh: 流水线是一种工具，允许您在资产集合和时间段上定义计算。过去，您只能在美股市场上运行流水线。现在，您可以指定流水线应该计算的域。“域”一词指的是数学概念中的“函数的域”，即函数的可能输入集合。在流水线的上下文中，域指定了流水线表达式应该计算的资产集合和相应的交易日历。
- en: For example, the following pipeline returns the latest close price and volume
    for all Canadian equities, every day.
  id: totrans-1033
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，以下流水线返回所有加拿大股票的最新收盘价和成交量，每天。
- en: '[PRE27]'
  id: totrans-1034
  prefs: []
  type: TYPE_PRE
  zh: '[PRE27]'
- en: Another challenge related to currencies is the fact that some exchanges don’t
    require stocks to be listed in local currency. For example, the London Stock Exchange
    only has about 75% of its listings denominated in GBP*. The other 25% are primarily
    listed in EUR or USD. This can make it hard to make cross sectional comparisons.
  id: totrans-1035
  prefs: []
  type: TYPE_NORMAL
  zh: 与货币相关的另一个挑战是，一些交易所不要求股票以当地货币列出。例如，伦敦证券交易所只有大约75%的上市股票以英镑计价。其余25%主要以欧元或美元计价。这可能使得进行横截面比较变得困难。
- en: To solve this problem, most people rely on currency conversions to bring price-based
    fields into the same currency. Pipeline columns now support an `fx` method for
    specifying what currency the data should be viewed as. This method is only available
    on terms which are “currency-aware”, for example open or close, but not on terms
    that do not care about currency like volume.
  id: totrans-1036
  prefs: []
  type: TYPE_NORMAL
  zh: 为了解决这个问题，大多数人依赖货币转换将基于价格的字段转换为同一货币。流水线列现在支持一个`fx`方法，用于指定数据应该以哪种货币查看。此方法仅适用于“货币感知”的术语，例如开盘或收盘，但不适用于不关心货币的术语，如成交量。
- en: Currently, there is no way to load international data into a bundle. We are
    working on ways to make it easy to get international data into Zipline.
  id: totrans-1037
  prefs: []
  type: TYPE_NORMAL
  zh: 目前，没有办法将国际数据加载到包中。我们正在寻找方法，使将国际数据导入 Zipline 变得容易。
- en: ([2265](https://github.com/stefan-jansen/zipline/issues/2265), [2262](https://github.com/stefan-jansen/zipline/issues/2262),
    and many others)
  id: totrans-1038
  prefs: []
  type: TYPE_NORMAL
  zh: ([2265](https://github.com/stefan-jansen/zipline/issues/2265), [2262](https://github.com/stefan-jansen/zipline/issues/2262),
    以及许多其他)
- en: 'The domains that Zipline currently supports for running pipelines (using the
    latest [trading-calendars](https://pypi.org/project/trading-calendars/) package)
    are the following:'
  id: totrans-1039
  prefs: []
  type: TYPE_NORMAL
  zh: Zipline 目前支持运行流水线的域（使用最新的 [trading-calendars](https://pypi.org/project/trading-calendars/)
    包）如下：
- en: Argentina
  id: totrans-1040
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 阿根廷
- en: Australia
  id: totrans-1041
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 澳大利亚
- en: Austria
  id: totrans-1042
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 奥地利
- en: Belgium
  id: totrans-1043
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 比利时
- en: Brazil
  id: totrans-1044
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 巴西
- en: Canada
  id: totrans-1045
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 加拿大
- en: Chile
  id: totrans-1046
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 智利
- en: China
  id: totrans-1047
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 中国
- en: Czech Republic
  id: totrans-1048
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 捷克共和国
- en: Colombia
  id: totrans-1049
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 哥伦比亚
- en: Czechia
  id: totrans-1050
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 捷克
- en: Finland
  id: totrans-1051
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 芬兰
- en: France
  id: totrans-1052
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 法国
- en: Germany
  id: totrans-1053
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 德国
- en: Greece
  id: totrans-1054
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 希腊
- en: Hong Kong
  id: totrans-1055
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 香港
- en: Hungary
  id: totrans-1056
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 匈牙利
- en: India
  id: totrans-1057
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 印度
- en: Indonesia
  id: totrans-1058
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 印度尼西亚
- en: Ireland
  id: totrans-1059
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 爱尔兰
- en: Italy
  id: totrans-1060
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 意大利
- en: Japan
  id: totrans-1061
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 日本
- en: Malaysia
  id: totrans-1062
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 马来西亚
- en: Mexico
  id: totrans-1063
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 墨西哥
- en: Netherlands
  id: totrans-1064
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 荷兰
- en: New Zealand
  id: totrans-1065
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新西兰
- en: Norway
  id: totrans-1066
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 挪威
- en: Pakistan
  id: totrans-1067
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 巴基斯坦
- en: Peru
  id: totrans-1068
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 秘鲁
- en: Philippines
  id: totrans-1069
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 菲律宾
- en: Poland
  id: totrans-1070
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 波兰
- en: Portugal
  id: totrans-1071
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 葡萄牙
- en: Russia
  id: totrans-1072
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 俄罗斯
- en: Singapore
  id: totrans-1073
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新加坡
- en: Spain
  id: totrans-1074
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 西班牙
- en: Sweden
  id: totrans-1075
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 瑞典
- en: Taiwan
  id: totrans-1076
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 台湾
- en: Thailand
  id: totrans-1077
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 泰国
- en: Turkey
  id: totrans-1078
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 土耳其
- en: United Kingdom
  id: totrans-1079
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 英国
- en: United States
  id: totrans-1080
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 美国
- en: South Africa
  id: totrans-1081
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 南非
- en: South Korea
  id: totrans-1082
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 韩国
- en: Switzerland
  id: totrans-1083
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 瑞士
- en: ([2301](https://github.com/stefan-jansen/zipline/issues/2301), [2333](https://github.com/stefan-jansen/zipline/issues/2333),
    [2338](https://github.com/stefan-jansen/zipline/issues/2338), [2355](https://github.com/stefan-jansen/zipline/issues/2355),
    [2369](https://github.com/stefan-jansen/zipline/issues/2369), [2550](https://github.com/stefan-jansen/zipline/issues/2550),
    [2552](https://github.com/stefan-jansen/zipline/issues/2552), [2559](https://github.com/stefan-jansen/zipline/issues/2559))
  id: totrans-1084
  prefs: []
  type: TYPE_NORMAL
  zh: ([2301](https://github.com/stefan-jansen/zipline/issues/2301), [2333](https://github.com/stefan-jansen/zipline/issues/2333),
    [2338](https://github.com/stefan-jansen/zipline/issues/2338), [2355](https://github.com/stefan-jansen/zipline/issues/2355),
    [2369](https://github.com/stefan-jansen/zipline/issues/2369), [2550](https://github.com/stefan-jansen/zipline/issues/2550),
    [2552](https://github.com/stefan-jansen/zipline/issues/2552), [2559](https://github.com/stefan-jansen/zipline/issues/2559))
- en: DataSetFamily
  id: totrans-1085
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 数据集家族
- en: Dataset families are used to represent data where the unique identifier for
    a row requires more than just asset and date coordinates. A [`DataSetFamily`](api-reference.html#zipline.pipeline.data.DataSetFamily
    "zipline.pipeline.data.DataSetFamily") can also be thought of as a collection
    of [`DataSet`](api-reference.html#zipline.pipeline.data.DataSet "zipline.pipeline.data.DataSet")
    objects, each of which has the same columns, domain, and ndim.
  id: totrans-1086
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 数据集家族用于表示行唯一标识符需要不仅仅是资产和日期坐标的数据。一个 [`DataSetFamily`](api-reference.html#zipline.pipeline.data.DataSetFamily
    "zipline.pipeline.data.DataSetFamily") 也可以被认为是一组 [`DataSet`](api-reference.html#zipline.pipeline.data.DataSet
    "zipline.pipeline.data.DataSet") 对象的集合，每个对象都有相同的列、域和 ndim。
- en: ''
  id: totrans-1087
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '[`DataSetFamily`](api-reference.html#zipline.pipeline.data.DataSetFamily "zipline.pipeline.data.DataSetFamily")
    objects are defined with one or more [`Column`](api-reference.html#zipline.pipeline.data.Column
    "zipline.pipeline.data.Column") objects, plus one additional field: `extra_dims`.'
  id: totrans-1088
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '[`DataSetFamily`](api-reference.html#zipline.pipeline.data.DataSetFamily "zipline.pipeline.data.DataSetFamily")
    对象是通过一个或多个 [`Column`](api-reference.html#zipline.pipeline.data.Column "zipline.pipeline.data.Column")
    对象以及一个额外的字段：`extra_dims` 来定义的。'
- en: ''
  id: totrans-1089
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: The `extra_dims` field defines coordinates other than asset and date that must
    be fixed to produce a logical timeseries. The column objects determine columns
    that will be shared by slices of the family.
  id: totrans-1090
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '`extra_dims` 字段定义了除资产和日期之外的坐标，这些坐标必须固定以产生逻辑时间序列。列对象确定将由家族切片共享的列。'
- en: ''
  id: totrans-1091
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '`extra_dims` are represented as an ordered dictionary where the keys are the
    dimension name, and the values are a set of unique values along that dimension.'
  id: totrans-1092
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '`extra_dims` 被表示为一个有序字典，其中键是维度名称，值是该维度上唯一值的集合。'
- en: ''
  id: totrans-1093
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'To work with a [`DataSetFamily`](api-reference.html#zipline.pipeline.data.DataSetFamily
    "zipline.pipeline.data.DataSetFamily") in a pipeline expression, one must choose
    a specific value for each of the extra dimensions using the [`slice()`](api-reference.html#zipline.pipeline.data.DataSetFamily.slice
    "zipline.pipeline.data.DataSetFamily.slice") method. For example, given a [`DataSetFamily`](api-reference.html#zipline.pipeline.data.DataSetFamily
    "zipline.pipeline.data.DataSetFamily"):'
  id: totrans-1094
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 要在管道表达式中使用一个[`DataSetFamily`](api-reference.html#zipline.pipeline.data.DataSetFamily
    "zipline.pipeline.data.DataSetFamily")，必须使用[`slice()`](api-reference.html#zipline.pipeline.data.DataSetFamily.slice
    "zipline.pipeline.data.DataSetFamily.slice")方法为每个额外的维度选择一个特定的值。例如，给定一个[`DataSetFamily`](api-reference.html#zipline.pipeline.data.DataSetFamily
    "zipline.pipeline.data.DataSetFamily")：
- en: ''
  id: totrans-1095
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '[PRE28]'
  id: totrans-1096
  prefs:
  - PREF_BQ
  type: TYPE_PRE
  zh: '[PRE28]'
- en: ''
  id: totrans-1097
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'This dataset might represent a table with the following columns:'
  id: totrans-1098
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 这个数据集可能代表一个具有以下列的表：
- en: ''
  id: totrans-1099
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '[PRE29]'
  id: totrans-1100
  prefs:
  - PREF_BQ
  type: TYPE_PRE
  zh: '[PRE29]'
- en: ''
  id: totrans-1101
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Here we see the implicit `sid`, `asof_date` and `timestamp` columns as well
    as the extra dimensions columns.
  id: totrans-1102
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 这里我们可以看到隐式的`sid`、`asof_date`和`timestamp`列以及额外的维度列。
- en: ''
  id: totrans-1103
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'This [`DataSetFamily`](api-reference.html#zipline.pipeline.data.DataSetFamily
    "zipline.pipeline.data.DataSetFamily") can be converted to a regular [`DataSet`](api-reference.html#zipline.pipeline.data.DataSet
    "zipline.pipeline.data.DataSet") with:'
  id: totrans-1104
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 这个[`DataSetFamily`](api-reference.html#zipline.pipeline.data.DataSetFamily "zipline.pipeline.data.DataSetFamily")可以转换为常规的[`DataSet`](api-reference.html#zipline.pipeline.data.DataSet
    "zipline.pipeline.data.DataSet")：
- en: ''
  id: totrans-1105
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '[PRE30]'
  id: totrans-1106
  prefs:
  - PREF_BQ
  type: TYPE_PRE
  zh: '[PRE30]'
- en: ''
  id: totrans-1107
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: This sliced dataset represents the rows from the higher dimensional dataset
    where `(dimension_0 == 'a') & (dimension_1 == 'e')`.
  id: totrans-1108
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 这个切片数据集代表了在高维数据集中满足`(dimension_0 == 'a') & (dimension_1 == 'e')`条件的行。
- en: ([2402](https://github.com/stefan-jansen/zipline/issues/2402), [2452](https://github.com/stefan-jansen/zipline/issues/2452),
    [2456](https://github.com/stefan-jansen/zipline/issues/2456))
  id: totrans-1109
  prefs: []
  type: TYPE_NORMAL
  zh: ([2402](https://github.com/stefan-jansen/zipline/issues/2402), [2452](https://github.com/stefan-jansen/zipline/issues/2452),
    [2456](https://github.com/stefan-jansen/zipline/issues/2456))
- en: Highlights
  id: totrans-1110
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 亮点
- en: Removed Implicit Dependency on Benchmarks and Treasury Returns
  id: totrans-1111
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 移除了对基准和债券回报的隐式依赖
- en: 'Previously, Zipline implicitly fetched these required inputs from third party
    API sources if they were not provided by users: treasury data from the US Federal
    Reserve’s API, and benchmarks from IEX. This meant that simulations required an
    internet connection and stable APIs for these data sources, neither of which were
    guaranteed for many users.'
  id: totrans-1112
  prefs: []
  type: TYPE_NORMAL
  zh: 以前，Zipline会隐式地从第三方API源获取这些必需的输入，如果用户没有提供的话：从美国联邦储备银行的API获取国债数据，从IEX获取基准数据。这意味着模拟需要互联网连接和这些数据源的稳定API，而这两者对许多用户来说都无法保证。
- en: 'We removed the dependency on treasury curves, since they weren’t actually being
    used anymore. And we replaced the implicit downloading of benchmark returns with
    explicit options:'
  id: totrans-1113
  prefs: []
  type: TYPE_NORMAL
  zh: 我们移除了对国债曲线的依赖，因为它们实际上已经不再被使用。并且我们用明确的选项替换了隐式下载基准回报的做法：
- en: '[PRE31]'
  id: totrans-1114
  prefs: []
  type: TYPE_PRE
  zh: '[PRE31]'
- en: ([2627](https://github.com/stefan-jansen/zipline/issues/2627), [2642](https://github.com/stefan-jansen/zipline/issues/2642))
  id: totrans-1115
  prefs: []
  type: TYPE_NORMAL
  zh: ([2627](https://github.com/stefan-jansen/zipline/issues/2627), [2642](https://github.com/stefan-jansen/zipline/issues/2642))
- en: New Built In Factors
  id: totrans-1116
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 新的内置因子
- en: '[`PercentChange`](api-reference.html#zipline.pipeline.factors.PercentChange
    "zipline.pipeline.factors.PercentChange"): Calculates the percent change over
    the given `window_length`. Note: Percent change is calculated as `(new - old)
    / abs(old)`. ([2506](https://github.com/stefan-jansen/zipline/issues/2506))'
  id: totrans-1117
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`PercentChange`](api-reference.html#zipline.pipeline.factors.PercentChange
    "zipline.pipeline.factors.PercentChange"): 计算给定`window_length`下的百分比变化。注意：百分比变化计算为`(new
    - old) / abs(old)`。([2506](https://github.com/stefan-jansen/zipline/issues/2506))'
- en: '[`PeerCount`](api-reference.html#zipline.pipeline.factors.PeerCount "zipline.pipeline.factors.PeerCount"):
    Gives the number of occurrences of each distinct category in a classifier. ([2509](https://github.com/stefan-jansen/zipline/issues/2509))'
  id: totrans-1118
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`PeerCount`](api-reference.html#zipline.pipeline.factors.PeerCount "zipline.pipeline.factors.PeerCount"):
    给出分类器中每个不同类别的出现次数。([2509](https://github.com/stefan-jansen/zipline/issues/2509))'
- en: '`ConstantMixin`: A mixin for creating a Pipeline term with a constant value.
    ([2697](https://github.com/stefan-jansen/zipline/issues/2697))'
  id: totrans-1119
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`ConstantMixin`: 用于创建具有常量值的管道项的混合类。([2697](https://github.com/stefan-jansen/zipline/issues/2697))'
- en: '`if_else()`: Allows users to create expressions that conditionally draw from
    the outputs of one of two terms. ([2697](https://github.com/stefan-jansen/zipline/issues/2697))'
  id: totrans-1120
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`if_else()`: 允许用户创建根据条件从两个表达式之一中选择输出的表达式。([2697](https://github.com/stefan-jansen/zipline/issues/2697))'
- en: '`fillna()`: Allows users to fill missing data with either a constant value,
    or values from another term. ([2697](https://github.com/stefan-jansen/zipline/issues/2697))'
  id: totrans-1121
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`fillna()`：允许用户用常量值或其他项的值填充缺失数据。([2697](https://github.com/stefan-jansen/zipline/issues/2697))'
- en: '`clip()`: Allows users to constrain a factor’s values to a given range. ([2708](https://github.com/stefan-jansen/zipline/issues/2708))'
  id: totrans-1122
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`clip()`：允许用户将因子值限制在给定范围内。([2708](https://github.com/stefan-jansen/zipline/issues/2708))'
- en: '`mean()`, `stddev()`, `max()`, `min()`, `median()`, `sum()`, `notnull_count()`:
    Summarize data across the entire domain into a scalar factor. ([2697](https://github.com/stefan-jansen/zipline/issues/2697))'
  id: totrans-1123
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`mean()`，`stddev()`，`max()`，`min()`，`median()`，`sum()`，`notnull_count()`：将整个域的数据汇总为标量因子。([2697](https://github.com/stefan-jansen/zipline/issues/2697))'
- en: Removed Implicit Dependency on Benchmarks and Treasury Returns
  id: totrans-1124
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 移除了对基准和国债回报的隐式依赖
- en: 'Previously, Zipline implicitly fetched these required inputs from third party
    API sources if they were not provided by users: treasury data from the US Federal
    Reserve’s API, and benchmarks from IEX. This meant that simulations required an
    internet connection and stable APIs for these data sources, neither of which were
    guaranteed for many users.'
  id: totrans-1125
  prefs: []
  type: TYPE_NORMAL
  zh: 以前，Zipline会隐式地从第三方API源获取这些必需的输入，如果用户没有提供：来自美国联邦储备银行API的国债数据和来自IEX的基准数据。这意味着模拟需要互联网连接和这些数据源的稳定API，这对于许多用户来说都不是保证的。
- en: 'We removed the dependency on treasury curves, since they weren’t actually being
    used anymore. And we replaced the implicit downloading of benchmark returns with
    explicit options:'
  id: totrans-1126
  prefs: []
  type: TYPE_NORMAL
  zh: 我们移除了对国债曲线的依赖，因为它们实际上已经不再被使用。并且我们用明确的选项替换了隐式下载基准回报的做法：
- en: '[PRE32]'
  id: totrans-1127
  prefs: []
  type: TYPE_PRE
  zh: '[PRE32]'
- en: ([2627](https://github.com/stefan-jansen/zipline/issues/2627), [2642](https://github.com/stefan-jansen/zipline/issues/2642))
  id: totrans-1128
  prefs: []
  type: TYPE_NORMAL
  zh: ([2627](https://github.com/stefan-jansen/zipline/issues/2627), [2642](https://github.com/stefan-jansen/zipline/issues/2642))
- en: New Built In Factors
  id: totrans-1129
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 新的内置因子
- en: '[`PercentChange`](api-reference.html#zipline.pipeline.factors.PercentChange
    "zipline.pipeline.factors.PercentChange"): Calculates the percent change over
    the given `window_length`. Note: Percent change is calculated as `(new - old)
    / abs(old)`. ([2506](https://github.com/stefan-jansen/zipline/issues/2506))'
  id: totrans-1130
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`PercentChange`](api-reference.html#zipline.pipeline.factors.PercentChange
    "zipline.pipeline.factors.PercentChange")：计算给定`window_length`期间的百分比变化。注意：百分比变化计算为`(new
    - old) / abs(old)`。([2506](https://github.com/stefan-jansen/zipline/issues/2506))'
- en: '[`PeerCount`](api-reference.html#zipline.pipeline.factors.PeerCount "zipline.pipeline.factors.PeerCount"):
    Gives the number of occurrences of each distinct category in a classifier. ([2509](https://github.com/stefan-jansen/zipline/issues/2509))'
  id: totrans-1131
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`PeerCount`](api-reference.html#zipline.pipeline.factors.PeerCount "zipline.pipeline.factors.PeerCount")：给出分类器中每个不同类别的出现次数。([2509](https://github.com/stefan-jansen/zipline/issues/2509))'
- en: '`ConstantMixin`: A mixin for creating a Pipeline term with a constant value.
    ([2697](https://github.com/stefan-jansen/zipline/issues/2697))'
  id: totrans-1132
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`ConstantMixin`：用于创建具有常量值的管道项的混合类。([2697](https://github.com/stefan-jansen/zipline/issues/2697))'
- en: '`if_else()`: Allows users to create expressions that conditionally draw from
    the outputs of one of two terms. ([2697](https://github.com/stefan-jansen/zipline/issues/2697))'
  id: totrans-1133
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`if_else()`：允许用户创建条件表达式，根据条件从两个项的输出中选择一个。([2697](https://github.com/stefan-jansen/zipline/issues/2697))'
- en: '`fillna()`: Allows users to fill missing data with either a constant value,
    or values from another term. ([2697](https://github.com/stefan-jansen/zipline/issues/2697))'
  id: totrans-1134
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`fillna()`：允许用户用常量值或其他项的值填充缺失数据。([2697](https://github.com/stefan-jansen/zipline/issues/2697))'
- en: '`clip()`: Allows users to constrain a factor’s values to a given range. ([2708](https://github.com/stefan-jansen/zipline/issues/2708))'
  id: totrans-1135
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`clip()`：允许用户将因子值限制在给定范围内。([2708](https://github.com/stefan-jansen/zipline/issues/2708))'
- en: '`mean()`, `stddev()`, `max()`, `min()`, `median()`, `sum()`, `notnull_count()`:
    Summarize data across the entire domain into a scalar factor. ([2697](https://github.com/stefan-jansen/zipline/issues/2697))'
  id: totrans-1136
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`mean()`，`stddev()`，`max()`，`min()`，`median()`，`sum()`，`notnull_count()`：将整个域的数据汇总为标量因子。([2697](https://github.com/stefan-jansen/zipline/issues/2697))'
- en: Enhancements
  id: totrans-1137
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 增强功能
- en: Added International Pipelines ([2262](https://github.com/stefan-jansen/zipline/issues/2262))
  id: totrans-1138
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加了国际管道([2262](https://github.com/stefan-jansen/zipline/issues/2262))
- en: Added DataSetFamily (née MultiDimensionalDataSet) - a shorthand for creating
    a collection of regular DataSets that share the same columns. ([2402](https://github.com/stefan-jansen/zipline/issues/2402))
  id: totrans-1139
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加了DataSetFamily（前称MultiDimensionalDataSet）- 一种创建共享相同列的常规数据集集合的简写方式。([2402](https://github.com/stefan-jansen/zipline/issues/2402))
- en: Added `get_column()` for looking up columns by name ([2210](https://github.com/stefan-jansen/zipline/issues/2210))
  id: totrans-1140
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新增了`get_column()`方法，用于通过名称查找列（[2210](https://github.com/stefan-jansen/zipline/issues/2210)）
- en: Added `CheckWindowsClassifier` that allows us to test lookback windows of categorical
    and string columns using Pipeline. ([2458](https://github.com/stefan-jansen/zipline/issues/2458))
  id: totrans-1141
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加了`CheckWindowsClassifier`，允许我们使用Pipeline测试分类和字符串列的回溯窗口。（[2458](https://github.com/stefan-jansen/zipline/issues/2458)）
- en: Added `PipelineHooks` which is now used to display Pipline progress bars ([2467](https://github.com/stefan-jansen/zipline/issues/2467))
  id: totrans-1142
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加了`PipelineHooks`，现在用于显示Pipeline进度条。（[2467](https://github.com/stefan-jansen/zipline/issues/2467)）
- en: '[`BoundColumn`](api-reference.html#zipline.pipeline.data.BoundColumn "zipline.pipeline.data.dataset.BoundColumn")
    comparisons will now result in an error. This prevents writing `EquityPricing.volume
    > 1000` (silently returning bad data) insteads of `EquityPricing.volume.latest
    > 1000`. ([2537](https://github.com/stefan-jansen/zipline/issues/2537))'
  id: totrans-1143
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`BoundColumn`](api-reference.html#zipline.pipeline.data.BoundColumn "zipline.pipeline.data.dataset.BoundColumn")比较现在会导致错误。这防止了编写`EquityPricing.volume
    > 1000`（静默返回错误数据）而不是`EquityPricing.volume.latest > 1000`。（[2537](https://github.com/stefan-jansen/zipline/issues/2537)）'
- en: Added currency conversion support to Pipeline. ([2586](https://github.com/stefan-jansen/zipline/issues/2586))
  id: totrans-1144
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为Pipeline添加了货币转换支持。（[2586](https://github.com/stefan-jansen/zipline/issues/2586)）
- en: Added `--benchmark-file` and `--benchmark-symbol` command line arguments to
    make it easier to provide benchmark data. ([2642](https://github.com/stefan-jansen/zipline/issues/2642))
  id: totrans-1145
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加了`--benchmark-file`和`--benchmark-symbol`命令行参数，以便更容易提供基准数据。（[2642](https://github.com/stefan-jansen/zipline/issues/2642)）
- en: Added support for Python 3.6 ([2643](https://github.com/stefan-jansen/zipline/issues/2643))
  id: totrans-1146
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加了对Python 3.6的支持。（[2643](https://github.com/stefan-jansen/zipline/issues/2643)）
- en: Added `mask` argument to Factor.peer_count. ([2676](https://github.com/stefan-jansen/zipline/issues/2676))
  id: totrans-1147
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为Factor.peer_count添加了`mask`参数。（[2676](https://github.com/stefan-jansen/zipline/issues/2676)）
- en: Added `if_else()` and `fillna()` for allowing conditional logic in Pipelines.
    ([2691](https://github.com/stefan-jansen/zipline/issues/2691))
  id: totrans-1148
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加了`if_else()`和`fillna()`，允许在Pipelines中使用条件逻辑。（[2691](https://github.com/stefan-jansen/zipline/issues/2691)）
- en: Added daily summary methods to Factor for collecting summary statistics for
    the entire universe. ([2697](https://github.com/stefan-jansen/zipline/issues/2697))
  id: totrans-1149
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为Factor添加了每日汇总方法，用于为整个宇宙收集汇总统计数据。（[2697](https://github.com/stefan-jansen/zipline/issues/2697)）
- en: Added `clip()` method for clipping values to a range. ([2708](https://github.com/stefan-jansen/zipline/issues/2708))
  id: totrans-1150
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加了`clip()`方法，用于将值裁剪到一定范围内。（[2708](https://github.com/stefan-jansen/zipline/issues/2708)）
- en: Added support for Pipeline term arithmetic with more than 32 terms. ([2727](https://github.com/stefan-jansen/zipline/issues/2727))
  id: totrans-1151
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加了对Pipeline项算术运算超过32项的支持。（[2727](https://github.com/stefan-jansen/zipline/issues/2727)）
- en: Bug Fixes
  id: totrans-1152
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 错误修复
- en: Fixed support for non unique sid->exchange mappings. ([2289](https://github.com/stefan-jansen/zipline/issues/2289))
  id: totrans-1153
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了对非唯一sid->exchange映射的支持。（[2289](https://github.com/stefan-jansen/zipline/issues/2289)）
- en: Fixed crash on dividend warning. ([2323](https://github.com/stefan-jansen/zipline/issues/2323))
  id: totrans-1154
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了股息警告导致的崩溃。（[2323](https://github.com/stefan-jansen/zipline/issues/2323)）
- en: Fixed `week_start` when Monday precedes the New Year. ([2394](https://github.com/stefan-jansen/zipline/issues/2394))
  id: totrans-1155
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了周一在新年前的情况下的`week_start`。（[2394](https://github.com/stefan-jansen/zipline/issues/2394)）
- en: Ensured correct dtypes when unpacking empty dataframes. ([2444](https://github.com/stefan-jansen/zipline/issues/2444))
  id: totrans-1156
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 确保在解包空数据帧时dtype正确。（[2444](https://github.com/stefan-jansen/zipline/issues/2444)）
- en: Fixed a bug where a Pipeline term with `window_length=0` would not copy the
    input before calling `compute()` which could cause incorrect results if the input
    was reused in the Pipeline. ([2723](https://github.com/stefan-jansen/zipline/issues/2723))
  id: totrans-1157
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了一个bug，其中`window_length=0`的Pipeline项在调用`compute()`之前不会复制输入，这可能导致如果输入在Pipeline中被重用，则结果不正确。（[2723](https://github.com/stefan-jansen/zipline/issues/2723)）
- en: Performance
  id: totrans-1158
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 性能
- en: Added `HDF5DailyBarWriter`, which writes daily pricing in a new format as an
    HDF5 file. Each OHLCV field is stored as a 2D array in a chunked HDF5 dataset,
    with a row per sid and a column per day. The file also supports multiple countries.
    Added `HDF5DailyBarReader`, which implements the BarReader interface and can read
    files written by HDF5DailyBarWriter. ([2295](https://github.com/stefan-jansen/zipline/issues/2295))
  id: totrans-1159
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加了`HDF5DailyBarWriter`，它以新的HDF5文件格式写入每日定价。每个OHLCV字段都存储为块状HDF5数据集中的2D数组，每行代表一个sid，每列代表一天。该文件还支持多个国家。添加了`HDF5DailyBarReader`，它实现了BarReader接口，并可以读取由HDF5DailyBarWriter编写的文件。（[2295](https://github.com/stefan-jansen/zipline/issues/2295)）
- en: Vectorized dividend ratio calculation ([2298](https://github.com/stefan-jansen/zipline/issues/2298))
  id: totrans-1160
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 矢量化股息比率计算（[2298](https://github.com/stefan-jansen/zipline/issues/2298)）
- en: Improved performance of the [`RollingPearson`](api-reference.html#zipline.pipeline.factors.RollingPearson
    "zipline.pipeline.factors.RollingPearson") and [`RollingPearsonOfReturns`](api-reference.html#zipline.pipeline.factors.RollingPearsonOfReturns
    "zipline.pipeline.factors.RollingPearsonOfReturns") pipeline factors. ([2071](https://github.com/stefan-jansen/zipline/issues/2071))
  id: totrans-1161
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 改进了[`RollingPearson`](api-reference.html#zipline.pipeline.factors.RollingPearson
    "zipline.pipeline.factors.RollingPearson")和[`RollingPearsonOfReturns`](api-reference.html#zipline.pipeline.factors.RollingPearsonOfReturns
    "zipline.pipeline.factors.RollingPearsonOfReturns")管道因子的性能。（[2071](https://github.com/stefan-jansen/zipline/issues/2071)）
- en: Maintenance and Refactorings
  id: totrans-1162
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 维护和重构
- en: Made `parameter_space()` reset instance fixtures between runs ([2433](https://github.com/stefan-jansen/zipline/issues/2433))
  id: totrans-1163
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使`parameter_space()`在运行之间重置实例固定装置（[2433](https://github.com/stefan-jansen/zipline/issues/2433)）
- en: Removed unused treasury curves data handling. ([2626](https://github.com/stefan-jansen/zipline/issues/2626))
  id: totrans-1164
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 删除了未使用的国债曲线数据处理。（[2626](https://github.com/stefan-jansen/zipline/issues/2626)）
- en: Miscellaneous
  id: totrans-1165
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 杂项
- en: International Pipelines
  id: totrans-1166
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 国际管道
- en: Pipeline now supports international data.
  id: totrans-1167
  prefs: []
  type: TYPE_NORMAL
  zh: 管道现在支持国际数据。
- en: Pipeline is a tool that allows you to define computations over a universe of
    assets and a period of time. In the past, you could only run pipelines on the
    US equity market. Now, you can now specify a domain over which a pipeline should
    be computed. The name “domain” refers to the mathematical concept of the “domain
    of a function”, which is the set of potential inputs to a function. In the context
    of Pipeline, the domain specifies the set of assets and a corresponding trading
    calendar over which the expressions of a pipeline should be computed.
  id: totrans-1168
  prefs: []
  type: TYPE_NORMAL
  zh: 管道是一种工具，允许您在资产集合和时间段上定义计算。过去，您只能在美国的股票市场上运行管道。现在，您可以指定一个域，在该域上应该计算管道。“域”一词指的是数学概念中的“函数的域”，即函数的可能输入集合。在管道的上下文中，域指定了一组资产和相应的交易日历，在该日历上应该计算管道的表达式。
- en: For example, the following pipeline returns the latest close price and volume
    for all Canadian equities, every day.
  id: totrans-1169
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，以下管道返回所有加拿大股票的最新收盘价和成交量，每天。
- en: '[PRE33]'
  id: totrans-1170
  prefs: []
  type: TYPE_PRE
  zh: '[PRE33]'
- en: Another challenge related to currencies is the fact that some exchanges don’t
    require stocks to be listed in local currency. For example, the London Stock Exchange
    only has about 75% of its listings denominated in GBP*. The other 25% are primarily
    listed in EUR or USD. This can make it hard to make cross sectional comparisons.
  id: totrans-1171
  prefs: []
  type: TYPE_NORMAL
  zh: 与货币相关的另一个挑战是，一些交易所不要求股票以当地货币列出。例如，伦敦证券交易所只有大约75%的上市股票以英镑计价。其余25%主要以欧元或美元计价。这使得进行跨部门比较变得困难。
- en: To solve this problem, most people rely on currency conversions to bring price-based
    fields into the same currency. Pipeline columns now support an `fx` method for
    specifying what currency the data should be viewed as. This method is only available
    on terms which are “currency-aware”, for example open or close, but not on terms
    that do not care about currency like volume.
  id: totrans-1172
  prefs: []
  type: TYPE_NORMAL
  zh: 为了解决这个问题，大多数人依赖货币转换将基于价格的字段转换为同一货币。管道列现在支持一个`fx`方法，用于指定数据应以哪种货币查看。此方法仅适用于“货币感知”期限，例如开盘或收盘，但不适用于不关心货币的期限，如成交量。
- en: Currently, there is no way to load international data into a bundle. We are
    working on ways to make it easy to get international data into Zipline.
  id: totrans-1173
  prefs: []
  type: TYPE_NORMAL
  zh: 目前，没有办法将国际数据加载到包中。我们正在寻找方法，使将国际数据导入Zipline变得容易。
- en: ([2265](https://github.com/stefan-jansen/zipline/issues/2265), [2262](https://github.com/stefan-jansen/zipline/issues/2262),
    and many others)
  id: totrans-1174
  prefs: []
  type: TYPE_NORMAL
  zh: （[2265](https://github.com/stefan-jansen/zipline/issues/2265)，[2262](https://github.com/stefan-jansen/zipline/issues/2262)，以及许多其他）
- en: 'The domains that Zipline currently supports for running pipelines (using the
    latest [trading-calendars](https://pypi.org/project/trading-calendars/) package)
    are the following:'
  id: totrans-1175
  prefs: []
  type: TYPE_NORMAL
  zh: Zipline目前支持运行管道的域（使用最新的[trading-calendars](https://pypi.org/project/trading-calendars/)包）如下：
- en: Argentina
  id: totrans-1176
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 阿根廷
- en: Australia
  id: totrans-1177
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 澳大利亚
- en: Austria
  id: totrans-1178
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 奥地利
- en: Belgium
  id: totrans-1179
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 比利时
- en: Brazil
  id: totrans-1180
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 巴西
- en: Canada
  id: totrans-1181
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 加拿大
- en: Chile
  id: totrans-1182
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 智利
- en: China
  id: totrans-1183
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 中国
- en: Czech Republic
  id: totrans-1184
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 捷克共和国
- en: Colombia
  id: totrans-1185
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 哥伦比亚
- en: Czechia
  id: totrans-1186
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 捷克共和国
- en: Finland
  id: totrans-1187
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 芬兰
- en: France
  id: totrans-1188
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 法国
- en: Germany
  id: totrans-1189
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 德国
- en: Greece
  id: totrans-1190
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 希腊
- en: Hong Kong
  id: totrans-1191
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 香港
- en: Hungary
  id: totrans-1192
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 匈牙利
- en: India
  id: totrans-1193
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 印度
- en: Indonesia
  id: totrans-1194
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 印度尼西亚
- en: Ireland
  id: totrans-1195
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 爱尔兰
- en: Italy
  id: totrans-1196
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 意大利
- en: Japan
  id: totrans-1197
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 日本
- en: Malaysia
  id: totrans-1198
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 马来西亚
- en: Mexico
  id: totrans-1199
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 墨西哥
- en: Netherlands
  id: totrans-1200
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 荷兰
- en: New Zealand
  id: totrans-1201
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新西兰
- en: Norway
  id: totrans-1202
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 挪威
- en: Pakistan
  id: totrans-1203
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 巴基斯坦
- en: Peru
  id: totrans-1204
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 秘鲁
- en: Philippines
  id: totrans-1205
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 菲律宾
- en: Poland
  id: totrans-1206
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 波兰
- en: Portugal
  id: totrans-1207
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 葡萄牙
- en: Russia
  id: totrans-1208
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 俄罗斯
- en: Singapore
  id: totrans-1209
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新加坡
- en: Spain
  id: totrans-1210
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 西班牙
- en: Sweden
  id: totrans-1211
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 瑞典
- en: Taiwan
  id: totrans-1212
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 台湾
- en: Thailand
  id: totrans-1213
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 泰国
- en: Turkey
  id: totrans-1214
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 土耳其
- en: United Kingdom
  id: totrans-1215
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 英国
- en: United States
  id: totrans-1216
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 美国
- en: South Africa
  id: totrans-1217
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 南非
- en: South Korea
  id: totrans-1218
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 韩国
- en: Switzerland
  id: totrans-1219
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 瑞士
- en: ([2301](https://github.com/stefan-jansen/zipline/issues/2301), [2333](https://github.com/stefan-jansen/zipline/issues/2333),
    [2338](https://github.com/stefan-jansen/zipline/issues/2338), [2355](https://github.com/stefan-jansen/zipline/issues/2355),
    [2369](https://github.com/stefan-jansen/zipline/issues/2369), [2550](https://github.com/stefan-jansen/zipline/issues/2550),
    [2552](https://github.com/stefan-jansen/zipline/issues/2552), [2559](https://github.com/stefan-jansen/zipline/issues/2559))
  id: totrans-1220
  prefs: []
  type: TYPE_NORMAL
  zh: ([2301](https://github.com/stefan-jansen/zipline/issues/2301), [2333](https://github.com/stefan-jansen/zipline/issues/2333),
    [2338](https://github.com/stefan-jansen/zipline/issues/2338), [2355](https://github.com/stefan-jansen/zipline/issues/2355),
    [2369](https://github.com/stefan-jansen/zipline/issues/2369), [2550](https://github.com/stefan-jansen/zipline/issues/2550),
    [2552](https://github.com/stefan-jansen/zipline/issues/2552), [2559](https://github.com/stefan-jansen/zipline/issues/2559))
- en: DataSetFamily
  id: totrans-1221
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: DataSetFamily
- en: Dataset families are used to represent data where the unique identifier for
    a row requires more than just asset and date coordinates. A [`DataSetFamily`](api-reference.html#zipline.pipeline.data.DataSetFamily
    "zipline.pipeline.data.DataSetFamily") can also be thought of as a collection
    of [`DataSet`](api-reference.html#zipline.pipeline.data.DataSet "zipline.pipeline.data.DataSet")
    objects, each of which has the same columns, domain, and ndim.
  id: totrans-1222
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 数据集家族用于表示数据，其中行的唯一标识符需要不仅仅是资产和日期坐标。一个 [`DataSetFamily`](api-reference.html#zipline.pipeline.data.DataSetFamily
    "zipline.pipeline.data.DataSetFamily") 也可以被认为是一组 [`DataSet`](api-reference.html#zipline.pipeline.data.DataSet
    "zipline.pipeline.data.DataSet") 对象，每个对象都有相同的列、域和 ndim。
- en: ''
  id: totrans-1223
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '[`DataSetFamily`](api-reference.html#zipline.pipeline.data.DataSetFamily "zipline.pipeline.data.DataSetFamily")
    objects are defined with one or more [`Column`](api-reference.html#zipline.pipeline.data.Column
    "zipline.pipeline.data.Column") objects, plus one additional field: `extra_dims`.'
  id: totrans-1224
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '[`DataSetFamily`](api-reference.html#zipline.pipeline.data.DataSetFamily "zipline.pipeline.data.DataSetFamily")
    对象是通过一个或多个 [`Column`](api-reference.html#zipline.pipeline.data.Column "zipline.pipeline.data.Column")
    对象以及一个额外的字段：`extra_dims` 来定义的。'
- en: ''
  id: totrans-1225
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: The `extra_dims` field defines coordinates other than asset and date that must
    be fixed to produce a logical timeseries. The column objects determine columns
    that will be shared by slices of the family.
  id: totrans-1226
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '`extra_dims` 字段定义了除资产和日期之外的坐标，这些坐标必须固定以生成逻辑时间序列。列对象确定将由家族的切片共享的列。'
- en: ''
  id: totrans-1227
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '`extra_dims` are represented as an ordered dictionary where the keys are the
    dimension name, and the values are a set of unique values along that dimension.'
  id: totrans-1228
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '`extra_dims` 表示为有序字典，其中键是维度名称，值是沿该维度的唯一值的集合。'
- en: ''
  id: totrans-1229
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'To work with a [`DataSetFamily`](api-reference.html#zipline.pipeline.data.DataSetFamily
    "zipline.pipeline.data.DataSetFamily") in a pipeline expression, one must choose
    a specific value for each of the extra dimensions using the [`slice()`](api-reference.html#zipline.pipeline.data.DataSetFamily.slice
    "zipline.pipeline.data.DataSetFamily.slice") method. For example, given a [`DataSetFamily`](api-reference.html#zipline.pipeline.data.DataSetFamily
    "zipline.pipeline.data.DataSetFamily"):'
  id: totrans-1230
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 要在流水线表达式中使用 [`DataSetFamily`](api-reference.html#zipline.pipeline.data.DataSetFamily
    "zipline.pipeline.data.DataSetFamily")，必须为每个额外的维度选择一个特定的值，使用 [`slice()`](api-reference.html#zipline.pipeline.data.DataSetFamily.slice
    "zipline.pipeline.data.DataSetFamily.slice") 方法。例如，给定一个 [`DataSetFamily`](api-reference.html#zipline.pipeline.data.DataSetFamily
    "zipline.pipeline.data.DataSetFamily")：
- en: ''
  id: totrans-1231
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '[PRE34]'
  id: totrans-1232
  prefs:
  - PREF_BQ
  type: TYPE_PRE
  zh: '[PRE34]'
- en: ''
  id: totrans-1233
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'This dataset might represent a table with the following columns:'
  id: totrans-1234
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 此数据集可能表示具有以下列的表：
- en: ''
  id: totrans-1235
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '[PRE35]'
  id: totrans-1236
  prefs:
  - PREF_BQ
  type: TYPE_PRE
  zh: '[PRE35]'
- en: ''
  id: totrans-1237
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Here we see the implicit `sid`, `asof_date` and `timestamp` columns as well
    as the extra dimensions columns.
  id: totrans-1238
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 在这里，我们看到了隐含的 `sid`、`asof_date` 和 `timestamp` 列以及额外的维度列。
- en: ''
  id: totrans-1239
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'This [`DataSetFamily`](api-reference.html#zipline.pipeline.data.DataSetFamily
    "zipline.pipeline.data.DataSetFamily") can be converted to a regular [`DataSet`](api-reference.html#zipline.pipeline.data.DataSet
    "zipline.pipeline.data.DataSet") with:'
  id: totrans-1240
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 这个 [`DataSetFamily`](api-reference.html#zipline.pipeline.data.DataSetFamily
    "zipline.pipeline.data.DataSetFamily") 可以转换为常规的 [`DataSet`](api-reference.html#zipline.pipeline.data.DataSet
    "zipline.pipeline.data.DataSet") 使用：
- en: ''
  id: totrans-1241
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '[PRE36]'
  id: totrans-1242
  prefs:
  - PREF_BQ
  type: TYPE_PRE
  zh: '[PRE36]'
- en: ''
  id: totrans-1243
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: This sliced dataset represents the rows from the higher dimensional dataset
    where `(dimension_0 == 'a') & (dimension_1 == 'e')`.
  id: totrans-1244
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 这个切片数据集表示来自更高维数据集的行，其中 `(dimension_0 == 'a') & (dimension_1 == 'e')`。
- en: ([2402](https://github.com/stefan-jansen/zipline/issues/2402), [2452](https://github.com/stefan-jansen/zipline/issues/2452),
    [2456](https://github.com/stefan-jansen/zipline/issues/2456))
  id: totrans-1245
  prefs: []
  type: TYPE_NORMAL
  zh: ([2402](https://github.com/stefan-jansen/zipline/issues/2402), [2452](https://github.com/stefan-jansen/zipline/issues/2452),
    [2456](https://github.com/stefan-jansen/zipline/issues/2456))
- en: International Pipelines
  id: totrans-1246
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 国际管道
- en: Pipeline now supports international data.
  id: totrans-1247
  prefs: []
  type: TYPE_NORMAL
  zh: 流水线现在支持国际数据。
- en: Pipeline is a tool that allows you to define computations over a universe of
    assets and a period of time. In the past, you could only run pipelines on the
    US equity market. Now, you can now specify a domain over which a pipeline should
    be computed. The name “domain” refers to the mathematical concept of the “domain
    of a function”, which is the set of potential inputs to a function. In the context
    of Pipeline, the domain specifies the set of assets and a corresponding trading
    calendar over which the expressions of a pipeline should be computed.
  id: totrans-1248
  prefs: []
  type: TYPE_NORMAL
  zh: 管道是一个工具，允许你在一个资产宇宙和一段时间内定义计算。过去，你只能在美国的股票市场上运行管道。现在，你可以指定一个域，在这个域上应该计算管道。“域”这个名字指的是数学中“函数的域”的概念，即函数可能的输入集合。在管道的上下文中，域指定了资产集合和相应的交易日历，在这个日历上应该计算管道的表达式。
- en: For example, the following pipeline returns the latest close price and volume
    for all Canadian equities, every day.
  id: totrans-1249
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，以下管道返回所有加拿大股票的最新收盘价和成交量，每天。
- en: '[PRE37]'
  id: totrans-1250
  prefs: []
  type: TYPE_PRE
  zh: '[PRE37]'
- en: Another challenge related to currencies is the fact that some exchanges don’t
    require stocks to be listed in local currency. For example, the London Stock Exchange
    only has about 75% of its listings denominated in GBP*. The other 25% are primarily
    listed in EUR or USD. This can make it hard to make cross sectional comparisons.
  id: totrans-1251
  prefs: []
  type: TYPE_NORMAL
  zh: 与货币相关的另一个挑战是，一些交易所不要求股票以当地货币列出。例如，伦敦证券交易所只有大约75%的上市股票以英镑计价。其余25%主要以欧元或美元计价。这使得进行跨部门比较变得困难。
- en: To solve this problem, most people rely on currency conversions to bring price-based
    fields into the same currency. Pipeline columns now support an `fx` method for
    specifying what currency the data should be viewed as. This method is only available
    on terms which are “currency-aware”, for example open or close, but not on terms
    that do not care about currency like volume.
  id: totrans-1252
  prefs: []
  type: TYPE_NORMAL
  zh: 为了解决这个问题，大多数人依赖货币转换将基于价格的字段转换为相同的货币。管道列现在支持一个`fx`方法，用于指定数据应该以哪种货币查看。此方法仅适用于“货币感知”的术语，例如开盘或收盘，但不适用于不关心货币的术语，如成交量。
- en: Currently, there is no way to load international data into a bundle. We are
    working on ways to make it easy to get international data into Zipline.
  id: totrans-1253
  prefs: []
  type: TYPE_NORMAL
  zh: 目前，没有办法将国际数据加载到包中。我们正在寻找方法，使将国际数据导入Zipline变得容易。
- en: ([2265](https://github.com/stefan-jansen/zipline/issues/2265), [2262](https://github.com/stefan-jansen/zipline/issues/2262),
    and many others)
  id: totrans-1254
  prefs: []
  type: TYPE_NORMAL
  zh: ([2265](https://github.com/stefan-jansen/zipline/issues/2265), [2262](https://github.com/stefan-jansen/zipline/issues/2262),
    以及其他许多)
- en: 'The domains that Zipline currently supports for running pipelines (using the
    latest [trading-calendars](https://pypi.org/project/trading-calendars/) package)
    are the following:'
  id: totrans-1255
  prefs: []
  type: TYPE_NORMAL
  zh: 目前，Zipline支持运行管道的域（使用最新的[trading-calendars](https://pypi.org/project/trading-calendars/)包）如下：
- en: Argentina
  id: totrans-1256
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 阿根廷
- en: Australia
  id: totrans-1257
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 澳大利亚
- en: Austria
  id: totrans-1258
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 奥地利
- en: Belgium
  id: totrans-1259
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 比利时
- en: Brazil
  id: totrans-1260
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 巴西
- en: Canada
  id: totrans-1261
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 加拿大
- en: Chile
  id: totrans-1262
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 智利
- en: China
  id: totrans-1263
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 中国
- en: Czech Republic
  id: totrans-1264
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 捷克共和国
- en: Colombia
  id: totrans-1265
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 哥伦比亚
- en: Czechia
  id: totrans-1266
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 捷克
- en: Finland
  id: totrans-1267
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 芬兰
- en: France
  id: totrans-1268
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 法国
- en: Germany
  id: totrans-1269
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 德国
- en: Greece
  id: totrans-1270
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 希腊
- en: Hong Kong
  id: totrans-1271
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 香港
- en: Hungary
  id: totrans-1272
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 匈牙利
- en: India
  id: totrans-1273
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 印度
- en: Indonesia
  id: totrans-1274
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 印度尼西亚
- en: Ireland
  id: totrans-1275
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 爱尔兰
- en: Italy
  id: totrans-1276
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 意大利
- en: Japan
  id: totrans-1277
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 日本
- en: Malaysia
  id: totrans-1278
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 马来西亚
- en: Mexico
  id: totrans-1279
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 墨西哥
- en: Netherlands
  id: totrans-1280
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 荷兰
- en: New Zealand
  id: totrans-1281
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新西兰
- en: Norway
  id: totrans-1282
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 挪威
- en: Pakistan
  id: totrans-1283
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 巴基斯坦
- en: Peru
  id: totrans-1284
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 秘鲁
- en: Philippines
  id: totrans-1285
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 菲律宾
- en: Poland
  id: totrans-1286
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 波兰
- en: Portugal
  id: totrans-1287
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 葡萄牙
- en: Russia
  id: totrans-1288
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 俄罗斯
- en: Singapore
  id: totrans-1289
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新加坡
- en: Spain
  id: totrans-1290
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 西班牙
- en: Sweden
  id: totrans-1291
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 瑞典
- en: Taiwan
  id: totrans-1292
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 台湾
- en: Thailand
  id: totrans-1293
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 泰国
- en: Turkey
  id: totrans-1294
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 土耳其
- en: United Kingdom
  id: totrans-1295
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 英国
- en: United States
  id: totrans-1296
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 美国
- en: South Africa
  id: totrans-1297
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 南非
- en: South Korea
  id: totrans-1298
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 韩国
- en: Switzerland
  id: totrans-1299
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 瑞士
- en: ([2301](https://github.com/stefan-jansen/zipline/issues/2301), [2333](https://github.com/stefan-jansen/zipline/issues/2333),
    [2338](https://github.com/stefan-jansen/zipline/issues/2338), [2355](https://github.com/stefan-jansen/zipline/issues/2355),
    [2369](https://github.com/stefan-jansen/zipline/issues/2369), [2550](https://github.com/stefan-jansen/zipline/issues/2550),
    [2552](https://github.com/stefan-jansen/zipline/issues/2552), [2559](https://github.com/stefan-jansen/zipline/issues/2559))
  id: totrans-1300
  prefs: []
  type: TYPE_NORMAL
  zh: ([2301](https://github.com/stefan-jansen/zipline/issues/2301), [2333](https://github.com/stefan-jansen/zipline/issues/2333),
    [2338](https://github.com/stefan-jansen/zipline/issues/2338), [2355](https://github.com/stefan-jansen/zipline/issues/2355),
    [2369](https://github.com/stefan-jansen/zipline/issues/2369), [2550](https://github.com/stefan-jansen/zipline/issues/2550),
    [2552](https://github.com/stefan-jansen/zipline/issues/2552), [2559](https://github.com/stefan-jansen/zipline/issues/2559))
- en: DataSetFamily
  id: totrans-1301
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 数据集家族
- en: Dataset families are used to represent data where the unique identifier for
    a row requires more than just asset and date coordinates. A [`DataSetFamily`](api-reference.html#zipline.pipeline.data.DataSetFamily
    "zipline.pipeline.data.DataSetFamily") can also be thought of as a collection
    of [`DataSet`](api-reference.html#zipline.pipeline.data.DataSet "zipline.pipeline.data.DataSet")
    objects, each of which has the same columns, domain, and ndim.
  id: totrans-1302
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 数据集家族用于表示行唯一标识符需要超过资产和日期坐标的场景。[`DataSetFamily`](api-reference.html#zipline.pipeline.data.DataSetFamily
    "zipline.pipeline.data.DataSetFamily")也可以被视为一组[`DataSet`](api-reference.html#zipline.pipeline.data.DataSet
    "zipline.pipeline.data.DataSet")对象，每个对象都有相同的列、域和维度。
- en: ''
  id: totrans-1303
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '[`DataSetFamily`](api-reference.html#zipline.pipeline.data.DataSetFamily "zipline.pipeline.data.DataSetFamily")
    objects are defined with one or more [`Column`](api-reference.html#zipline.pipeline.data.Column
    "zipline.pipeline.data.Column") objects, plus one additional field: `extra_dims`.'
  id: totrans-1304
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '[`DataSetFamily`](api-reference.html#zipline.pipeline.data.DataSetFamily "zipline.pipeline.data.DataSetFamily")对象是通过一个或多个[`Column`](api-reference.html#zipline.pipeline.data.Column
    "zipline.pipeline.data.Column")对象定义的，再加上一个额外的字段：`extra_dims`。'
- en: ''
  id: totrans-1305
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: The `extra_dims` field defines coordinates other than asset and date that must
    be fixed to produce a logical timeseries. The column objects determine columns
    that will be shared by slices of the family.
  id: totrans-1306
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '`extra_dims`字段定义了除资产和日期之外的坐标，这些坐标必须固定以产生逻辑时间序列。列对象确定将由家族切片共享的列。'
- en: ''
  id: totrans-1307
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '`extra_dims` are represented as an ordered dictionary where the keys are the
    dimension name, and the values are a set of unique values along that dimension.'
  id: totrans-1308
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '`extra_dims`被表示为一个有序字典，其中键是维度名称，值是沿着该维度的唯一值集合。'
- en: ''
  id: totrans-1309
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'To work with a [`DataSetFamily`](api-reference.html#zipline.pipeline.data.DataSetFamily
    "zipline.pipeline.data.DataSetFamily") in a pipeline expression, one must choose
    a specific value for each of the extra dimensions using the [`slice()`](api-reference.html#zipline.pipeline.data.DataSetFamily.slice
    "zipline.pipeline.data.DataSetFamily.slice") method. For example, given a [`DataSetFamily`](api-reference.html#zipline.pipeline.data.DataSetFamily
    "zipline.pipeline.data.DataSetFamily"):'
  id: totrans-1310
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 要在管道表达式中使用[`DataSetFamily`](api-reference.html#zipline.pipeline.data.DataSetFamily
    "zipline.pipeline.data.DataSetFamily")，必须使用[`slice()`](api-reference.html#zipline.pipeline.data.DataSetFamily.slice
    "zipline.pipeline.data.DataSetFamily.slice")方法为每个额外维度选择一个特定值。例如，给定一个[`DataSetFamily`](api-reference.html#zipline.pipeline.data.DataSetFamily
    "zipline.pipeline.data.DataSetFamily")：
- en: ''
  id: totrans-1311
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '[PRE38]'
  id: totrans-1312
  prefs:
  - PREF_BQ
  type: TYPE_PRE
  zh: '[PRE38]'
- en: ''
  id: totrans-1313
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'This dataset might represent a table with the following columns:'
  id: totrans-1314
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 这个数据集可能代表具有以下列的表：
- en: ''
  id: totrans-1315
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '[PRE39]'
  id: totrans-1316
  prefs:
  - PREF_BQ
  type: TYPE_PRE
  zh: '[PRE39]'
- en: ''
  id: totrans-1317
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Here we see the implicit `sid`, `asof_date` and `timestamp` columns as well
    as the extra dimensions columns.
  id: totrans-1318
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 在这里我们可以看到隐含的`sid`、`asof_date`和`timestamp`列，以及额外的维度列。
- en: ''
  id: totrans-1319
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'This [`DataSetFamily`](api-reference.html#zipline.pipeline.data.DataSetFamily
    "zipline.pipeline.data.DataSetFamily") can be converted to a regular [`DataSet`](api-reference.html#zipline.pipeline.data.DataSet
    "zipline.pipeline.data.DataSet") with:'
  id: totrans-1320
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 这个[`DataSetFamily`](api-reference.html#zipline.pipeline.data.DataSetFamily "zipline.pipeline.data.DataSetFamily")可以通过以下方式转换为常规[`DataSet`](api-reference.html#zipline.pipeline.data.DataSet
    "zipline.pipeline.data.DataSet")：
- en: ''
  id: totrans-1321
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '[PRE40]'
  id: totrans-1322
  prefs:
  - PREF_BQ
  type: TYPE_PRE
  zh: '[PRE40]'
- en: ''
  id: totrans-1323
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: This sliced dataset represents the rows from the higher dimensional dataset
    where `(dimension_0 == 'a') & (dimension_1 == 'e')`.
  id: totrans-1324
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 这个切片数据集代表了高维数据集中满足`(dimension_0 == 'a') & (dimension_1 == 'e')`条件的行。
- en: ([2402](https://github.com/stefan-jansen/zipline/issues/2402), [2452](https://github.com/stefan-jansen/zipline/issues/2452),
    [2456](https://github.com/stefan-jansen/zipline/issues/2456))
  id: totrans-1325
  prefs: []
  type: TYPE_NORMAL
  zh: ([2402](https://github.com/stefan-jansen/zipline/issues/2402), [2452](https://github.com/stefan-jansen/zipline/issues/2452),
    [2456](https://github.com/stefan-jansen/zipline/issues/2456))
- en: Release 1.3.0
  id: totrans-1326
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 发布版本1.3.0
- en: 'Release:'
  id: totrans-1327
  prefs: []
  type: TYPE_NORMAL
  zh: 发布说明：
- en: 1.3.0
  id: totrans-1328
  prefs: []
  type: TYPE_NORMAL
  zh: 1.3.0
- en: 'Date:'
  id: totrans-1329
  prefs: []
  type: TYPE_NORMAL
  zh: 日期：
- en: July 16, 2018
  id: totrans-1330
  prefs: []
  type: TYPE_NORMAL
  zh: 2018年7月16日
- en: This release includes several enhancements and performance improvements along
    with a small number of bug fixes. We recommend that all users upgrade to this
    version.
  id: totrans-1331
  prefs: []
  type: TYPE_NORMAL
  zh: 此版本包含多项增强功能和性能改进，以及少量错误修复。我们建议所有用户升级到此版本。
- en: Note
  id: totrans-1332
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: This will likely be the last minor release in the Zipline 1.x series. The release
    next will be Zipline 2.0, which will include a number of small breaking changes
    required to support international equities.
  id: totrans-1333
  prefs: []
  type: TYPE_NORMAL
  zh: 这很可能是Zipline 1.x系列的最后一个次要版本。下一个版本将是Zipline 2.0，它将包含一些小的破坏性更改，以支持国际股票。
- en: Highlights
  id: totrans-1334
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 亮点
- en: Support for Newer Numpy/Pandas Versions
  id: totrans-1335
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 支持更新的Numpy/Pandas版本
- en: Zipline has historically been very conservative when updating versions of numpy,
    pandas, and other “PyData” ecosystem packages. This conservatism is primarily
    due to the fact that Zipline is used as the backtesting engine for [Quantopian](https://www.quantopian.com/),
    which means that updating package versions risks breaking a large installed codebase.
    Of course, many Zipline users don’t have the backwards compatibility requirements
    that Quantopian has, and they’d like to be able to use the latest and greatest
    package versions.
  id: totrans-1336
  prefs: []
  type: TYPE_NORMAL
  zh: Zipline在更新numpy、pandas和其他“PyData”生态系统包的版本时一直非常保守。这种保守主要是因为Zipline被用作[Quantopian](https://www.quantopian.com/)的回测引擎，这意味着更新包版本可能会破坏大量的已安装代码库。当然，许多Zipline用户并没有Quantopian那样的向后兼容性要求，他们希望能够使用最新和最棒的包版本。
- en: 'As part of this release, we’re now building and testing Zipline with two package
    configurations:'
  id: totrans-1337
  prefs: []
  type: TYPE_NORMAL
  zh: 作为本次发布的一部分，我们现在使用两种包配置构建和测试Zipline：
- en: “Stable”, using numpy version 1.11 and pandas version 0.18.1.
  id: totrans-1338
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: “稳定版”，使用numpy版本1.11和pandas版本0.18.1。
- en: “Latest”, using numpy version 1.14 and pandas version 0.22.0.
  id: totrans-1339
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: “最新版”，使用numpy版本1.14和pandas版本0.22.0。
- en: Other combinations of numpy and pandas **may** work, but these package sets
    will be built and tested during our normal development cycle.
  id: totrans-1340
  prefs: []
  type: TYPE_NORMAL
  zh: 其他组合的numpy和pandas**可能**可以工作，但这些包集合将在我们的正常开发周期中进行构建和测试。
- en: Moving forward, our goal is to continue to maintain support for two sets of
    packages at any given time. The “stable” package set will change relatively infrequently,
    and will contain the versions of numpy and pandas supported on Quantopian. The
    “latest” package set will change regularly, and will contain recently-released
    versions of numpy and pandas.
  id: totrans-1341
  prefs: []
  type: TYPE_NORMAL
  zh: 展望未来，我们的目标是继续在任何给定时间维护两套包的支持。“稳定版”包集合变化相对不频繁，并将包含Quantopian支持的numpy和pandas版本。“最新版”包集合将定期变化，并将包含最近发布的numpy和pandas版本。
- en: Our hope with these changes is to strike a balance between stability and novelty
    without taking on too great a maintenance burden by supporting every possible
    combination of packages. ([2194](https://github.com/stefan-jansen/zipline/issues/2194))
  id: totrans-1342
  prefs: []
  type: TYPE_NORMAL
  zh: 我们希望通过这些变化在稳定性和新颖性之间取得平衡，而不承担支持每种可能的包组合的维护负担。([2194](https://github.com/stefan-jansen/zipline/issues/2194))
- en: Standalone `trading_calendars` Module
  id: totrans-1343
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 独立的`trading_calendars`模块
- en: One of the most popular features of Zipline is its collection of trading calendars,
    which provide information about holidays and trading hours of various markets.
    As part of this release, Zipline’s calendar-related functionality has been moved
    to a separate [trading-calendars](https://pypi.org/project/trading-calendars/)
    package, allowing users that only needed access to the calendars to use them without
    taking on the rest of Zipline’s dependencies.
  id: totrans-1344
  prefs: []
  type: TYPE_NORMAL
  zh: Zipline最受欢迎的功能之一是其交易日历集合，提供各种市场的假日和交易时间信息。作为本次发布的一部分，Zipline的日历相关功能已移至单独的[trading-calendars](https://pypi.org/project/trading-calendars/)包，允许只需要访问日历的用户在不承担Zipline其他依赖的情况下使用它们。
- en: For backwards compability, Zipline will continue to re-export calendar-related
    functions. For example, `zipline.get_calendar()` still exists, but is now an alias
    for `trading_calendars.get_calendar`. Users that depend on this functionality
    are encouraged to update their imports to the new locations in `trading_calendars`.
    ([2219](https://github.com/stefan-jansen/zipline/issues/2219))
  id: totrans-1345
  prefs: []
  type: TYPE_NORMAL
  zh: 为了向后兼容，Zipline将继续重新导出与日历相关的函数。例如，`zipline.get_calendar()`仍然存在，但现在它是`trading_calendars.get_calendar`的别名。依赖此功能的用户应将其导入更新到`trading_calendars`中的新位置。([2219](https://github.com/stefan-jansen/zipline/issues/2219))
- en: Custom Blotters
  id: totrans-1346
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 自定义Blotters
- en: This release adds experimental support for running Zipline with user-defined
    subclasses of [`Blotter`](api-reference.html#zipline.finance.blotter.blotter.Blotter
    "zipline.finance.blotter.blotter.Blotter"). The primary motivation for this change
    is to make it easier to run live algorithms from the Zipline CLI.
  id: totrans-1347
  prefs: []
  type: TYPE_NORMAL
  zh: 本次发布增加了对使用用户定义的`Blotter`子类的实验性支持。这一变化的主要动机是使从Zipline CLI运行实时算法变得更加容易。
- en: 'There are two primary ways to configure a custom blotter:'
  id: totrans-1348
  prefs: []
  type: TYPE_NORMAL
  zh: 配置自定义blotter主要有两种方式：
- en: You can pass an instance of [`Blotter`](api-reference.html#zipline.finance.blotter.blotter.Blotter
    "zipline.finance.blotter.blotter.Blotter") as the `blotter` parameter to [`zipline.run_algorithm()`](api-reference.html#zipline.run_algorithm
    "zipline.run_algorithm"). (This functionality had existed previously, but wasn’t
    well-documented.)
  id: totrans-1349
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您可以将 [`Blotter`](api-reference.html#zipline.finance.blotter.blotter.Blotter
    "zipline.finance.blotter.blotter.Blotter") 实例作为 `blotter` 参数传递给 [`zipline.run_algorithm()`](api-reference.html#zipline.run_algorithm
    "zipline.run_algorithm")。（此功能之前已存在，但未得到很好的文档记录。）
- en: You can register a named **factory** for a blotter in your `extension.py` and
    pass the name on the command line via the `--blotter` flag.
  id: totrans-1350
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您可以在 `extension.py` 中注册一个名为 **工厂** 的 blotter，并通过 `--blotter` 标志在命令行上传递名称。
- en: 'An example usage of **(2)** might look like this:'
  id: totrans-1351
  prefs: []
  type: TYPE_NORMAL
  zh: '**(2)** 的一个示例用法可能如下所示：'
- en: ~/.zipline/extension.py
  id: totrans-1352
  prefs: []
  type: TYPE_NORMAL
  zh: ~/.zipline/extension.py
- en: '[PRE41]'
  id: totrans-1353
  prefs: []
  type: TYPE_PRE
  zh: '[PRE41]'
- en: 'To use this factory when running zipline from the command line, we would invoke
    zipline like this:'
  id: totrans-1354
  prefs: []
  type: TYPE_NORMAL
  zh: 要在从命令行运行 zipline 时使用此工厂，我们将以这种方式调用 zipline：
- en: '[PRE42]'
  id: totrans-1355
  prefs: []
  type: TYPE_PRE
  zh: '[PRE42]'
- en: As part of this change, the [`Blotter`](api-reference.html#zipline.finance.blotter.blotter.Blotter
    "zipline.finance.blotter.blotter.Blotter") class has been converted to an abstract
    base class. The default blotter used in simulations is now named [`zipline.finance.blotter.SimulationBlotter`](api-reference.html#zipline.finance.blotter.SimulationBlotter
    "zipline.finance.blotter.SimulationBlotter").
  id: totrans-1356
  prefs: []
  type: TYPE_NORMAL
  zh: 作为此更改的一部分，[`Blotter`](api-reference.html#zipline.finance.blotter.blotter.Blotter
    "zipline.finance.blotter.blotter.Blotter") 类已被转换为抽象基类。模拟中使用的默认 blotter 现在名为 [`zipline.finance.blotter.SimulationBlotter`](api-reference.html#zipline.finance.blotter.SimulationBlotter
    "zipline.finance.blotter.SimulationBlotter")。
- en: ([2210](https://github.com/stefan-jansen/zipline/issues/2210), [2251](https://github.com/stefan-jansen/zipline/issues/2251))
  id: totrans-1357
  prefs: []
  type: TYPE_NORMAL
  zh: ([2210](https://github.com/stefan-jansen/zipline/issues/2210), [2251](https://github.com/stefan-jansen/zipline/issues/2251))
- en: Custom Command-Line Arguments
  id: totrans-1358
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 自定义命令行参数
- en: 'This release adds support for passing custom arguments to the `zipline` command-line
    interface. Custom command-line arguments are passed via the `-x` flag followed
    by a `key=value` pair. Arguments passed this way can be accessed from Python code
    (e.g., an algorithm or an extension) via attributes of `zipline.extension_args`.
    For example, if zipline is invoked like this:'
  id: totrans-1359
  prefs: []
  type: TYPE_NORMAL
  zh: 此版本增加了对向 `zipline` 命令行界面传递自定义参数的支持。自定义命令行参数通过 `-x` 标志后跟一个 `key=value` 对来传递。通过这种方式传递的参数可以从
    Python 代码（例如，算法或扩展）通过 `zipline.extension_args` 的属性访问。例如，如果以这种方式调用 zipline：
- en: '[PRE43]'
  id: totrans-1360
  prefs: []
  type: TYPE_PRE
  zh: '[PRE43]'
- en: then the result of `zipline.extension_args.argle` would be the string `"bargle"`.
  id: totrans-1361
  prefs: []
  type: TYPE_NORMAL
  zh: 那么 `zipline.extension_args.argle` 的结果将是字符串 `"bargle"`。
- en: 'Custom arguments can be grouped into namespaces by including `.` characters
    in keys. For example, if zipline is invoked like this:'
  id: totrans-1362
  prefs: []
  type: TYPE_NORMAL
  zh: 自定义参数可以通过在键中包含 `.` 字符来分组到命名空间中。例如，如果以这种方式调用 zipline：
- en: '[PRE44]'
  id: totrans-1363
  prefs: []
  type: TYPE_PRE
  zh: '[PRE44]'
- en: then `zipline.extension_args.argle` will contain an object with a `bargle` attribute
    containing the string `"foo"`. Keys can contain multiple dots to create nested
    namespaces. ([2210](https://github.com/stefan-jansen/zipline/issues/2210))
  id: totrans-1364
  prefs: []
  type: TYPE_NORMAL
  zh: 那么 `zipline.extension_args.argle` 将包含一个具有 `bargle` 属性的对象，该属性包含字符串 `"foo"`。键可以包含多个点来创建嵌套的命名空间。([2210](https://github.com/stefan-jansen/zipline/issues/2210))
- en: Enhancements
  id: totrans-1365
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 增强功能
- en: Added support for pandas 0.22 and numpy 1.14\. See above for details. ([2194](https://github.com/stefan-jansen/zipline/issues/2194))
  id: totrans-1366
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增加了对 pandas 0.22 和 numpy 1.14 的支持。详情请参阅上文。([2194](https://github.com/stefan-jansen/zipline/issues/2194))
- en: Moved `zipline.utils.calendars` into a separately-installable [trading-calendars](https://pypi.org/project/trading-calendars/)
    package. ([2219](https://github.com/stefan-jansen/zipline/issues/2219))
  id: totrans-1367
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将 `zipline.utils.calendars` 移至可单独安装的 [trading-calendars](https://pypi.org/project/trading-calendars/)
    包中。([2219](https://github.com/stefan-jansen/zipline/issues/2219))
- en: Added support for specifying custom string arguments with the `-x` flag. See
    above for details. ([2210](https://github.com/stefan-jansen/zipline/issues/2210))
  id: totrans-1368
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增加了对使用 `-x` 标志指定自定义字符串参数的支持。详情请参阅上文。([2210](https://github.com/stefan-jansen/zipline/issues/2210))
- en: Experimental Features
  id: totrans-1369
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 实验性功能
- en: Warning
  id: totrans-1370
  prefs: []
  type: TYPE_NORMAL
  zh: 警告
- en: Experimental features are subject to change.
  id: totrans-1371
  prefs: []
  type: TYPE_NORMAL
  zh: 实验性功能可能会发生变化。
- en: Added support for registering custom subclass of `zipline.finance.blotter.Blotter`.
    See above for details. ([2210](https://github.com/stefan-jansen/zipline/issues/2210),
    [2251](https://github.com/stefan-jansen/zipline/issues/2251))
  id: totrans-1372
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增加了对注册 `zipline.finance.blotter.Blotter` 的自定义子类的支持。详情请参阅上文。([2210](https://github.com/stefan-jansen/zipline/issues/2210),
    [2251](https://github.com/stefan-jansen/zipline/issues/2251))
- en: Bug Fixes
  id: totrans-1373
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 错误修复
- en: Fixed a bug in [`zipline.pipeline.Factor.winsorize()`](api-reference.html#zipline.pipeline.Factor.winsorize
    "zipline.pipeline.Factor.winsorize") where NaN values were incorrectly included
    in value counts when determining cutoff thresholds for winsorization. ([2138](https://github.com/stefan-jansen/zipline/issues/2138))
  id: totrans-1374
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了在 [`zipline.pipeline.Factor.winsorize()`](api-reference.html#zipline.pipeline.Factor.winsorize
    "zipline.pipeline.Factor.winsorize") 中 NaN 值在确定 winsorization 的截止阈值时被错误地包含在值计数中的
    bug。([2138](https://github.com/stefan-jansen/zipline/issues/2138))
- en: Fixed a crash in [`zipline.pipeline.Factor.top()`](api-reference.html#zipline.pipeline.Factor.top
    "zipline.pipeline.Factor.top") with a count of 1 and no groupby. ([2218](https://github.com/stefan-jansen/zipline/issues/2218))
  id: totrans-1375
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了在 [`zipline.pipeline.Factor.top()`](api-reference.html#zipline.pipeline.Factor.top
    "zipline.pipeline.Factor.top") 中计数为 1 且没有 groupby 时的崩溃问题。([2218](https://github.com/stefan-jansen/zipline/issues/2218))
- en: Fixed a bug where calling `data.history` with a negative lookback would fetch
    prices from the future. ([2164](https://github.com/stefan-jansen/zipline/issues/2164))
  id: totrans-1376
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了一个 bug，即在调用 `data.history` 时使用负的回溯会从未来获取价格。([2164](https://github.com/stefan-jansen/zipline/issues/2164))
- en: Fixed a bug where `StopOrder``, [`zipline.finance.execution.LimitOrder`](api-reference.html#zipline.finance.execution.LimitOrder
    "zipline.finance.execution.LimitOrder"), and [`zipline.finance.execution.StopLimitOrder`](api-reference.html#zipline.finance.execution.StopLimitOrder
    "zipline.finance.execution.StopLimitOrder") prices were being rounded to the nearest
    penny regardless of asset tick size. Prices are now rounded based on the `tick_size`
    attribute of the asset being ordered. ([2211](https://github.com/stefan-jansen/zipline/issues/2211))
  id: totrans-1377
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了一个 bug，其中 `StopOrder`、[`zipline.finance.execution.LimitOrder`](api-reference.html#zipline.finance.execution.LimitOrder
    "zipline.finance.execution.LimitOrder") 和 [`zipline.finance.execution.StopLimitOrder`](api-reference.html#zipline.finance.execution.StopLimitOrder
    "zipline.finance.execution.StopLimitOrder") 的价格被四舍五入到最接近的便士，而不管资产的刻度大小。现在，价格根据所订购资产的
    `tick_size` 属性进行四舍五入。([2211](https://github.com/stefan-jansen/zipline/issues/2211))
- en: Performance
  id: totrans-1378
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 性能
- en: Improved performance when fetching minutely prices for assets that trade regularly.
    ([2108](https://github.com/stefan-jansen/zipline/issues/2108))
  id: totrans-1379
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 改进了定期交易的资产获取每分钟价格的性能。([2108](https://github.com/stefan-jansen/zipline/issues/2108))
- en: Improved performance when fetching minutely prices for many assets by tuning
    cache sizes. ([2110](https://github.com/stefan-jansen/zipline/issues/2110))
  id: totrans-1380
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通过调整缓存大小，改进了获取许多资产的每分钟价格的性能。([2110](https://github.com/stefan-jansen/zipline/issues/2110))
- en: Maintenance and Refactorings
  id: totrans-1381
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 维护和重构
- en: Refactored large parts of the Zipline test suite to make it easier to change
    the signature of `zipline.algorithm.TradingAlgorithm`. ([2169](https://github.com/stefan-jansen/zipline/issues/2169),
    [2168](https://github.com/stefan-jansen/zipline/issues/2168), [2165](https://github.com/stefan-jansen/zipline/issues/2165),
    [2171](https://github.com/stefan-jansen/zipline/issues/2171))
  id: totrans-1382
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 重构了 Zipline 测试套件的大部分内容，使其更容易更改 `zipline.algorithm.TradingAlgorithm` 的签名。([2169](https://github.com/stefan-jansen/zipline/issues/2169),
    [2168](https://github.com/stefan-jansen/zipline/issues/2168), [2165](https://github.com/stefan-jansen/zipline/issues/2165),
    [2171](https://github.com/stefan-jansen/zipline/issues/2171))
- en: Build
  id: totrans-1383
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 构建
- en: Added support for running travis builds with pandas 0.18 and 0.22. ([2194](https://github.com/stefan-jansen/zipline/issues/2194))
  id: totrans-1384
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加了使用 pandas 0.18 和 0.22 运行 travis 构建的支持。([2194](https://github.com/stefan-jansen/zipline/issues/2194))
- en: Added OSX builds to the travis build matrix. ([2244](https://github.com/stefan-jansen/zipline/issues/2244))
  id: totrans-1385
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在 travis 构建矩阵中添加了 OSX 构建。([2244](https://github.com/stefan-jansen/zipline/issues/2244))
- en: Highlights
  id: totrans-1386
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 亮点
- en: Support for Newer Numpy/Pandas Versions
  id: totrans-1387
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 支持更新的 Numpy/Pandas 版本
- en: Zipline has historically been very conservative when updating versions of numpy,
    pandas, and other “PyData” ecosystem packages. This conservatism is primarily
    due to the fact that Zipline is used as the backtesting engine for [Quantopian](https://www.quantopian.com/),
    which means that updating package versions risks breaking a large installed codebase.
    Of course, many Zipline users don’t have the backwards compatibility requirements
    that Quantopian has, and they’d like to be able to use the latest and greatest
    package versions.
  id: totrans-1388
  prefs: []
  type: TYPE_NORMAL
  zh: 在历史上，Zipline 在更新 numpy、pandas 以及其他“PyData”生态系统包的版本时一直非常保守。这种保守主要是因为 Zipline
    被用作 [Quantopian](https://www.quantopian.com/) 的回测引擎，这意味着更新包版本可能会破坏大量的已安装代码库。当然，许多
    Zipline 用户并没有 Quantopian 那样的向后兼容性要求，他们希望能够使用最新、最棒的包版本。
- en: 'As part of this release, we’re now building and testing Zipline with two package
    configurations:'
  id: totrans-1389
  prefs: []
  type: TYPE_NORMAL
  zh: 作为此次发布的一部分，我们现在使用两种包配置构建和测试 Zipline：
- en: “Stable”, using numpy version 1.11 and pandas version 0.18.1.
  id: totrans-1390
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: “稳定版”，使用 numpy 版本 1.11 和 pandas 版本 0.18.1。
- en: “Latest”, using numpy version 1.14 and pandas version 0.22.0.
  id: totrans-1391
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: “最新”，使用numpy版本1.14和pandas版本0.22.0。
- en: Other combinations of numpy and pandas **may** work, but these package sets
    will be built and tested during our normal development cycle.
  id: totrans-1392
  prefs: []
  type: TYPE_NORMAL
  zh: 其他numpy和pandas的组合**可能**有效，但这些包集将在我们的正常开发周期中进行构建和测试。
- en: Moving forward, our goal is to continue to maintain support for two sets of
    packages at any given time. The “stable” package set will change relatively infrequently,
    and will contain the versions of numpy and pandas supported on Quantopian. The
    “latest” package set will change regularly, and will contain recently-released
    versions of numpy and pandas.
  id: totrans-1393
  prefs: []
  type: TYPE_NORMAL
  zh: 展望未来，我们的目标是继续在任何给定时间维护对两组包的支持。“稳定”包集将相对不频繁地变化，并将包含Quantopian支持的numpy和pandas版本。“最新”包集将定期变化，并将包含最近发布的numpy和pandas版本。
- en: Our hope with these changes is to strike a balance between stability and novelty
    without taking on too great a maintenance burden by supporting every possible
    combination of packages. ([2194](https://github.com/stefan-jansen/zipline/issues/2194))
  id: totrans-1394
  prefs: []
  type: TYPE_NORMAL
  zh: 我们希望通过这些改变在稳定性和新颖性之间取得平衡，而不承担过大的维护负担，即支持所有可能的包组合。([2194](https://github.com/stefan-jansen/zipline/issues/2194))
- en: Standalone `trading_calendars` Module
  id: totrans-1395
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 独立的`trading_calendars`模块
- en: One of the most popular features of Zipline is its collection of trading calendars,
    which provide information about holidays and trading hours of various markets.
    As part of this release, Zipline’s calendar-related functionality has been moved
    to a separate [trading-calendars](https://pypi.org/project/trading-calendars/)
    package, allowing users that only needed access to the calendars to use them without
    taking on the rest of Zipline’s dependencies.
  id: totrans-1396
  prefs: []
  type: TYPE_NORMAL
  zh: Zipline最受欢迎的功能之一是其交易日历集合，这些日历提供了关于各种市场假日和交易时间的信息。作为此版本的一部分，Zipline的日历相关功能已被移动到一个单独的[trading-calendars](https://pypi.org/project/trading-calendars/)包中，允许只需要访问日历的用户使用它们，而不必承担Zipline其余部分的依赖。
- en: For backwards compability, Zipline will continue to re-export calendar-related
    functions. For example, `zipline.get_calendar()` still exists, but is now an alias
    for `trading_calendars.get_calendar`. Users that depend on this functionality
    are encouraged to update their imports to the new locations in `trading_calendars`.
    ([2219](https://github.com/stefan-jansen/zipline/issues/2219))
  id: totrans-1397
  prefs: []
  type: TYPE_NORMAL
  zh: 为了向后兼容，Zipline将继续重新导出与日历相关的函数。例如，`zipline.get_calendar()`仍然存在，但现在它是`trading_calendars.get_calendar`的别名。依赖此功能的用户被鼓励更新他们的导入到`trading_calendars`中的新位置。([2219](https://github.com/stefan-jansen/zipline/issues/2219))
- en: Custom Blotters
  id: totrans-1398
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 自定义交易记录器
- en: This release adds experimental support for running Zipline with user-defined
    subclasses of [`Blotter`](api-reference.html#zipline.finance.blotter.blotter.Blotter
    "zipline.finance.blotter.blotter.Blotter"). The primary motivation for this change
    is to make it easier to run live algorithms from the Zipline CLI.
  id: totrans-1399
  prefs: []
  type: TYPE_NORMAL
  zh: 此版本增加了对使用用户定义的`Blotter`子类运行Zipline的实验性支持。这一变化的主要动机是使从Zipline CLI运行实时算法变得更加容易。
- en: 'There are two primary ways to configure a custom blotter:'
  id: totrans-1400
  prefs: []
  type: TYPE_NORMAL
  zh: 配置自定义交易记录器主要有两种方式：
- en: You can pass an instance of [`Blotter`](api-reference.html#zipline.finance.blotter.blotter.Blotter
    "zipline.finance.blotter.blotter.Blotter") as the `blotter` parameter to [`zipline.run_algorithm()`](api-reference.html#zipline.run_algorithm
    "zipline.run_algorithm"). (This functionality had existed previously, but wasn’t
    well-documented.)
  id: totrans-1401
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您可以将`Blotter`实例作为`blotter`参数传递给`zipline.run_algorithm()`。（此功能之前已经存在，但文档不够完善。）
- en: You can register a named **factory** for a blotter in your `extension.py` and
    pass the name on the command line via the `--blotter` flag.
  id: totrans-1402
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您可以在`extension.py`中注册一个名为**工厂**的交易记录器，并通过命令行上的`--blotter`标志传递名称。
- en: 'An example usage of **(2)** might look like this:'
  id: totrans-1403
  prefs: []
  type: TYPE_NORMAL
  zh: 对于**(2)**的一个示例用法可能如下所示：
- en: ~/.zipline/extension.py
  id: totrans-1404
  prefs: []
  type: TYPE_NORMAL
  zh: ~/.zipline/extension.py
- en: '[PRE45]'
  id: totrans-1405
  prefs: []
  type: TYPE_PRE
  zh: '[PRE45]'
- en: 'To use this factory when running zipline from the command line, we would invoke
    zipline like this:'
  id: totrans-1406
  prefs: []
  type: TYPE_NORMAL
  zh: 要在命令行上运行zipline时使用此工厂，我们将这样调用zipline：
- en: '[PRE46]'
  id: totrans-1407
  prefs: []
  type: TYPE_PRE
  zh: '[PRE46]'
- en: As part of this change, the [`Blotter`](api-reference.html#zipline.finance.blotter.blotter.Blotter
    "zipline.finance.blotter.blotter.Blotter") class has been converted to an abstract
    base class. The default blotter used in simulations is now named [`zipline.finance.blotter.SimulationBlotter`](api-reference.html#zipline.finance.blotter.SimulationBlotter
    "zipline.finance.blotter.SimulationBlotter").
  id: totrans-1408
  prefs: []
  type: TYPE_NORMAL
  zh: 作为此次变更的一部分，[`Blotter`](api-reference.html#zipline.finance.blotter.blotter.Blotter
    "zipline.finance.blotter.blotter.Blotter")类已被转换为抽象基类。模拟中使用的默认账本现在名为[`zipline.finance.blotter.SimulationBlotter`](api-reference.html#zipline.finance.blotter.SimulationBlotter
    "zipline.finance.blotter.SimulationBlotter")。
- en: ([2210](https://github.com/stefan-jansen/zipline/issues/2210), [2251](https://github.com/stefan-jansen/zipline/issues/2251))
  id: totrans-1409
  prefs: []
  type: TYPE_NORMAL
  zh: （[2210](https://github.com/stefan-jansen/zipline/issues/2210)，[2251](https://github.com/stefan-jansen/zipline/issues/2251)）
- en: Custom Command-Line Arguments
  id: totrans-1410
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 自定义命令行参数
- en: 'This release adds support for passing custom arguments to the `zipline` command-line
    interface. Custom command-line arguments are passed via the `-x` flag followed
    by a `key=value` pair. Arguments passed this way can be accessed from Python code
    (e.g., an algorithm or an extension) via attributes of `zipline.extension_args`.
    For example, if zipline is invoked like this:'
  id: totrans-1411
  prefs: []
  type: TYPE_NORMAL
  zh: 此版本增加了对将自定义参数传递给`zipline`命令行界面的支持。自定义命令行参数通过`-x`标志后跟一个`key=value`对来传递。通过这种方式传递的参数可以从Python代码（例如，算法或扩展）通过`zipline.extension_args`的属性访问。例如，如果以这种方式调用zipline：
- en: '[PRE47]'
  id: totrans-1412
  prefs: []
  type: TYPE_PRE
  zh: '[PRE47]'
- en: then the result of `zipline.extension_args.argle` would be the string `"bargle"`.
  id: totrans-1413
  prefs: []
  type: TYPE_NORMAL
  zh: 那么`zipline.extension_args.argle`的结果将是字符串`"bargle"`。
- en: 'Custom arguments can be grouped into namespaces by including `.` characters
    in keys. For example, if zipline is invoked like this:'
  id: totrans-1414
  prefs: []
  type: TYPE_NORMAL
  zh: 自定义参数可以通过在键中包含`.`字符来分组到命名空间中。例如，如果以这种方式调用zipline：
- en: '[PRE48]'
  id: totrans-1415
  prefs: []
  type: TYPE_PRE
  zh: '[PRE48]'
- en: then `zipline.extension_args.argle` will contain an object with a `bargle` attribute
    containing the string `"foo"`. Keys can contain multiple dots to create nested
    namespaces. ([2210](https://github.com/stefan-jansen/zipline/issues/2210))
  id: totrans-1416
  prefs: []
  type: TYPE_NORMAL
  zh: 那么`zipline.extension_args.argle`将包含一个具有`bargle`属性的对象，该属性包含字符串`"foo"`。键可以包含多个点来创建嵌套的命名空间。（[2210](https://github.com/stefan-jansen/zipline/issues/2210)）
- en: Support for Newer Numpy/Pandas Versions
  id: totrans-1417
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 支持更新的Numpy/Pandas版本
- en: Zipline has historically been very conservative when updating versions of numpy,
    pandas, and other “PyData” ecosystem packages. This conservatism is primarily
    due to the fact that Zipline is used as the backtesting engine for [Quantopian](https://www.quantopian.com/),
    which means that updating package versions risks breaking a large installed codebase.
    Of course, many Zipline users don’t have the backwards compatibility requirements
    that Quantopian has, and they’d like to be able to use the latest and greatest
    package versions.
  id: totrans-1418
  prefs: []
  type: TYPE_NORMAL
  zh: Zipline在更新numpy、pandas和其他“PyData”生态系统包的版本时历来非常保守。这种保守主要是因为Zipline被用作[Quantopian](https://www.quantopian.com/)的回测引擎，这意味着更新包版本可能会破坏大量已安装的代码库。当然，许多Zipline用户没有Quantopian那样的向后兼容性要求，他们希望能够使用最新和最棒的包版本。
- en: 'As part of this release, we’re now building and testing Zipline with two package
    configurations:'
  id: totrans-1419
  prefs: []
  type: TYPE_NORMAL
  zh: 作为此次发布的一部分，我们现在使用两种包配置构建和测试Zipline：
- en: “Stable”, using numpy version 1.11 and pandas version 0.18.1.
  id: totrans-1420
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: “稳定”，使用numpy版本1.11和pandas版本0.18.1。
- en: “Latest”, using numpy version 1.14 and pandas version 0.22.0.
  id: totrans-1421
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: “最新”，使用numpy版本1.14和pandas版本0.22.0。
- en: Other combinations of numpy and pandas **may** work, but these package sets
    will be built and tested during our normal development cycle.
  id: totrans-1422
  prefs: []
  type: TYPE_NORMAL
  zh: numpy和pandas的其他组合**可能**有效，但这些包组将在我们的正常开发周期中构建和测试。
- en: Moving forward, our goal is to continue to maintain support for two sets of
    packages at any given time. The “stable” package set will change relatively infrequently,
    and will contain the versions of numpy and pandas supported on Quantopian. The
    “latest” package set will change regularly, and will contain recently-released
    versions of numpy and pandas.
  id: totrans-1423
  prefs: []
  type: TYPE_NORMAL
  zh: 我们的目标是在任何给定时间继续维护两组包的支持。“稳定”包组相对变化不大，将包含Quantopian支持的numpy和pandas版本。“最新”包组将定期变化，将包含最近发布的numpy和pandas版本。
- en: Our hope with these changes is to strike a balance between stability and novelty
    without taking on too great a maintenance burden by supporting every possible
    combination of packages. ([2194](https://github.com/stefan-jansen/zipline/issues/2194))
  id: totrans-1424
  prefs: []
  type: TYPE_NORMAL
  zh: 我们希望通过这些变化在稳定性和新颖性之间取得平衡，而不承担支持每种可能的包组合的过重维护负担。（[2194](https://github.com/stefan-jansen/zipline/issues/2194)）
- en: Standalone `trading_calendars` Module
  id: totrans-1425
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 独立的`trading_calendars`模块
- en: One of the most popular features of Zipline is its collection of trading calendars,
    which provide information about holidays and trading hours of various markets.
    As part of this release, Zipline’s calendar-related functionality has been moved
    to a separate [trading-calendars](https://pypi.org/project/trading-calendars/)
    package, allowing users that only needed access to the calendars to use them without
    taking on the rest of Zipline’s dependencies.
  id: totrans-1426
  prefs: []
  type: TYPE_NORMAL
  zh: Zipline最受欢迎的功能之一是其交易日历集合，这些日历提供了有关各种市场假日和交易时间的信息。作为此版本的一部分，Zipline的日历相关功能已移至单独的[trading-calendars](https://pypi.org/project/trading-calendars/)包，允许只需要访问日历的用户在不承担Zipline其余依赖项的情况下使用它们。
- en: For backwards compability, Zipline will continue to re-export calendar-related
    functions. For example, `zipline.get_calendar()` still exists, but is now an alias
    for `trading_calendars.get_calendar`. Users that depend on this functionality
    are encouraged to update their imports to the new locations in `trading_calendars`.
    ([2219](https://github.com/stefan-jansen/zipline/issues/2219))
  id: totrans-1427
  prefs: []
  type: TYPE_NORMAL
  zh: 为了向后兼容，Zipline将继续重新导出与日历相关的函数。例如，`zipline.get_calendar()`仍然存在，但现在它是`trading_calendars.get_calendar`的别名。依赖此功能的用户被鼓励更新他们的导入到`trading_calendars`中的新位置。([2219](https://github.com/stefan-jansen/zipline/issues/2219))
- en: Custom Blotters
  id: totrans-1428
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 自定义Blotters
- en: This release adds experimental support for running Zipline with user-defined
    subclasses of [`Blotter`](api-reference.html#zipline.finance.blotter.blotter.Blotter
    "zipline.finance.blotter.blotter.Blotter"). The primary motivation for this change
    is to make it easier to run live algorithms from the Zipline CLI.
  id: totrans-1429
  prefs: []
  type: TYPE_NORMAL
  zh: 此版本增加了对运行Zipline的用户定义的[`Blotter`](api-reference.html#zipline.finance.blotter.blotter.Blotter
    "zipline.finance.blotter.blotter.Blotter")子类的实验性支持。这一变化的主要动机是使从Zipline CLI运行实时算法变得更加容易。
- en: 'There are two primary ways to configure a custom blotter:'
  id: totrans-1430
  prefs: []
  type: TYPE_NORMAL
  zh: 配置自定义blotter主要有两种方式：
- en: You can pass an instance of [`Blotter`](api-reference.html#zipline.finance.blotter.blotter.Blotter
    "zipline.finance.blotter.blotter.Blotter") as the `blotter` parameter to [`zipline.run_algorithm()`](api-reference.html#zipline.run_algorithm
    "zipline.run_algorithm"). (This functionality had existed previously, but wasn’t
    well-documented.)
  id: totrans-1431
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您可以将[`Blotter`](api-reference.html#zipline.finance.blotter.blotter.Blotter "zipline.finance.blotter.blotter.Blotter")的实例作为`blotter`参数传递给[`zipline.run_algorithm()`](api-reference.html#zipline.run_algorithm
    "zipline.run_algorithm")。（此功能之前已经存在，但文档不够完善。）
- en: You can register a named **factory** for a blotter in your `extension.py` and
    pass the name on the command line via the `--blotter` flag.
  id: totrans-1432
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您可以在`extension.py`中注册一个名为**工厂**的blotter，并通过命令行上的`--blotter`标志传递名称。
- en: 'An example usage of **(2)** might look like this:'
  id: totrans-1433
  prefs: []
  type: TYPE_NORMAL
  zh: 对**(2)**的一个示例用法可能看起来像这样：
- en: ~/.zipline/extension.py
  id: totrans-1434
  prefs: []
  type: TYPE_NORMAL
  zh: ~/.zipline/extension.py
- en: '[PRE49]'
  id: totrans-1435
  prefs: []
  type: TYPE_PRE
  zh: '[PRE49]'
- en: 'To use this factory when running zipline from the command line, we would invoke
    zipline like this:'
  id: totrans-1436
  prefs: []
  type: TYPE_NORMAL
  zh: 要从命令行运行zipline时使用此工厂，我们将这样调用zipline：
- en: '[PRE50]'
  id: totrans-1437
  prefs: []
  type: TYPE_PRE
  zh: '[PRE50]'
- en: As part of this change, the [`Blotter`](api-reference.html#zipline.finance.blotter.blotter.Blotter
    "zipline.finance.blotter.blotter.Blotter") class has been converted to an abstract
    base class. The default blotter used in simulations is now named [`zipline.finance.blotter.SimulationBlotter`](api-reference.html#zipline.finance.blotter.SimulationBlotter
    "zipline.finance.blotter.SimulationBlotter").
  id: totrans-1438
  prefs: []
  type: TYPE_NORMAL
  zh: 作为这一变化的一部分，[`Blotter`](api-reference.html#zipline.finance.blotter.blotter.Blotter
    "zipline.finance.blotter.blotter.Blotter")类已被转换为抽象基类。模拟中使用的默认blotter现在名为[`zipline.finance.blotter.SimulationBlotter`](api-reference.html#zipline.finance.blotter.SimulationBlotter
    "zipline.finance.blotter.SimulationBlotter")。
- en: ([2210](https://github.com/stefan-jansen/zipline/issues/2210), [2251](https://github.com/stefan-jansen/zipline/issues/2251))
  id: totrans-1439
  prefs: []
  type: TYPE_NORMAL
  zh: ([2210](https://github.com/stefan-jansen/zipline/issues/2210), [2251](https://github.com/stefan-jansen/zipline/issues/2251))
- en: Custom Command-Line Arguments
  id: totrans-1440
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 自定义命令行参数
- en: 'This release adds support for passing custom arguments to the `zipline` command-line
    interface. Custom command-line arguments are passed via the `-x` flag followed
    by a `key=value` pair. Arguments passed this way can be accessed from Python code
    (e.g., an algorithm or an extension) via attributes of `zipline.extension_args`.
    For example, if zipline is invoked like this:'
  id: totrans-1441
  prefs: []
  type: TYPE_NORMAL
  zh: 此版本增加了对向`zipline`命令行界面传递自定义参数的支持。自定义命令行参数通过`-x`标志后跟一个`key=value`对传递。通过这种方式传递的参数可以从Python代码（例如，算法或扩展）通过`zipline.extension_args`的属性访问。例如，如果这样调用zipline：
- en: '[PRE51]'
  id: totrans-1442
  prefs: []
  type: TYPE_PRE
  zh: '[PRE51]'
- en: then the result of `zipline.extension_args.argle` would be the string `"bargle"`.
  id: totrans-1443
  prefs: []
  type: TYPE_NORMAL
  zh: 那么`zipline.extension_args.argle`的结果将是字符串`"bargle"`。
- en: 'Custom arguments can be grouped into namespaces by including `.` characters
    in keys. For example, if zipline is invoked like this:'
  id: totrans-1444
  prefs: []
  type: TYPE_NORMAL
  zh: 自定义参数可以通过在键中包含 `.` 字符来分组到命名空间中。例如，如果以这种方式调用zipline：
- en: '[PRE52]'
  id: totrans-1445
  prefs: []
  type: TYPE_PRE
  zh: '[PRE52]'
- en: then `zipline.extension_args.argle` will contain an object with a `bargle` attribute
    containing the string `"foo"`. Keys can contain multiple dots to create nested
    namespaces. ([2210](https://github.com/stefan-jansen/zipline/issues/2210))
  id: totrans-1446
  prefs: []
  type: TYPE_NORMAL
  zh: 然后 `zipline.extension_args.argle` 将包含一个具有 `bargle` 属性的对象，该属性包含字符串 `"foo"`。键可以包含多个点来创建嵌套的命名空间。([2210](https://github.com/stefan-jansen/zipline/issues/2210))
- en: Enhancements
  id: totrans-1447
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 增强功能
- en: Added support for pandas 0.22 and numpy 1.14\. See above for details. ([2194](https://github.com/stefan-jansen/zipline/issues/2194))
  id: totrans-1448
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增加了对 pandas 0.22 和 numpy 1.14 的支持。详情请参阅上文。([2194](https://github.com/stefan-jansen/zipline/issues/2194))
- en: Moved `zipline.utils.calendars` into a separately-installable [trading-calendars](https://pypi.org/project/trading-calendars/)
    package. ([2219](https://github.com/stefan-jansen/zipline/issues/2219))
  id: totrans-1449
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将 `zipline.utils.calendars` 移至一个单独可安装的 [trading-calendars](https://pypi.org/project/trading-calendars/)
    包中。([2219](https://github.com/stefan-jansen/zipline/issues/2219))
- en: Added support for specifying custom string arguments with the `-x` flag. See
    above for details. ([2210](https://github.com/stefan-jansen/zipline/issues/2210))
  id: totrans-1450
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增加了使用 `-x` 标志指定自定义字符串参数的支持。详情请参阅上文。([2210](https://github.com/stefan-jansen/zipline/issues/2210))
- en: Experimental Features
  id: totrans-1451
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 实验性功能
- en: Warning
  id: totrans-1452
  prefs: []
  type: TYPE_NORMAL
  zh: 警告
- en: Experimental features are subject to change.
  id: totrans-1453
  prefs: []
  type: TYPE_NORMAL
  zh: 实验性功能可能会发生变化。
- en: Added support for registering custom subclass of `zipline.finance.blotter.Blotter`.
    See above for details. ([2210](https://github.com/stefan-jansen/zipline/issues/2210),
    [2251](https://github.com/stefan-jansen/zipline/issues/2251))
  id: totrans-1454
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增加了注册 `zipline.finance.blotter.Blotter` 的自定义子类的支持。详情请参阅上文。([2210](https://github.com/stefan-jansen/zipline/issues/2210),
    [2251](https://github.com/stefan-jansen/zipline/issues/2251))
- en: Bug Fixes
  id: totrans-1455
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 错误修复
- en: Fixed a bug in [`zipline.pipeline.Factor.winsorize()`](api-reference.html#zipline.pipeline.Factor.winsorize
    "zipline.pipeline.Factor.winsorize") where NaN values were incorrectly included
    in value counts when determining cutoff thresholds for winsorization. ([2138](https://github.com/stefan-jansen/zipline/issues/2138))
  id: totrans-1456
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了在 [`zipline.pipeline.Factor.winsorize()`](api-reference.html#zipline.pipeline.Factor.winsorize
    "zipline.pipeline.Factor.winsorize") 中，当确定winsorization的截断阈值时，NaN值被错误地计入值计数中的bug。([2138](https://github.com/stefan-jansen/zipline/issues/2138))
- en: Fixed a crash in [`zipline.pipeline.Factor.top()`](api-reference.html#zipline.pipeline.Factor.top
    "zipline.pipeline.Factor.top") with a count of 1 and no groupby. ([2218](https://github.com/stefan-jansen/zipline/issues/2218))
  id: totrans-1457
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了在 [`zipline.pipeline.Factor.top()`](api-reference.html#zipline.pipeline.Factor.top
    "zipline.pipeline.Factor.top") 中，当计数为1且没有groupby时发生的崩溃。([2218](https://github.com/stefan-jansen/zipline/issues/2218))
- en: Fixed a bug where calling `data.history` with a negative lookback would fetch
    prices from the future. ([2164](https://github.com/stefan-jansen/zipline/issues/2164))
  id: totrans-1458
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了调用 `data.history` 时，如果回溯期为负数，则会从未来获取价格的bug。([2164](https://github.com/stefan-jansen/zipline/issues/2164))
- en: Fixed a bug where `StopOrder``, [`zipline.finance.execution.LimitOrder`](api-reference.html#zipline.finance.execution.LimitOrder
    "zipline.finance.execution.LimitOrder"), and [`zipline.finance.execution.StopLimitOrder`](api-reference.html#zipline.finance.execution.StopLimitOrder
    "zipline.finance.execution.StopLimitOrder") prices were being rounded to the nearest
    penny regardless of asset tick size. Prices are now rounded based on the `tick_size`
    attribute of the asset being ordered. ([2211](https://github.com/stefan-jansen/zipline/issues/2211))
  id: totrans-1459
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了 `StopOrder`、[`zipline.finance.execution.LimitOrder`](api-reference.html#zipline.finance.execution.LimitOrder
    "zipline.finance.execution.LimitOrder") 和 [`zipline.finance.execution.StopLimitOrder`](api-reference.html#zipline.finance.execution.StopLimitOrder
    "zipline.finance.execution.StopLimitOrder") 的价格无论资产的tick大小如何都被四舍五入到最接近的便士的bug。现在价格根据所订购资产的
    `tick_size` 属性进行四舍五入。([2211](https://github.com/stefan-jansen/zipline/issues/2211))
- en: Performance
  id: totrans-1460
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 性能
- en: Improved performance when fetching minutely prices for assets that trade regularly.
    ([2108](https://github.com/stefan-jansen/zipline/issues/2108))
  id: totrans-1461
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 改进了定期交易的资产获取每分钟价格的性能。([2108](https://github.com/stefan-jansen/zipline/issues/2108))
- en: Improved performance when fetching minutely prices for many assets by tuning
    cache sizes. ([2110](https://github.com/stefan-jansen/zipline/issues/2110))
  id: totrans-1462
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通过调整缓存大小，改进了获取大量资产每分钟价格的性能。([2110](https://github.com/stefan-jansen/zipline/issues/2110))
- en: Maintenance and Refactorings
  id: totrans-1463
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 维护和重构
- en: Refactored large parts of the Zipline test suite to make it easier to change
    the signature of `zipline.algorithm.TradingAlgorithm`. ([2169](https://github.com/stefan-jansen/zipline/issues/2169),
    [2168](https://github.com/stefan-jansen/zipline/issues/2168), [2165](https://github.com/stefan-jansen/zipline/issues/2165),
    [2171](https://github.com/stefan-jansen/zipline/issues/2171))
  id: totrans-1464
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 重构了Zipline测试套件的大部分内容，使其更容易更改`zipline.algorithm.TradingAlgorithm`的签名（[2169](https://github.com/stefan-jansen/zipline/issues/2169)，[2168](https://github.com/stefan-jansen/zipline/issues/2168)，[2165](https://github.com/stefan-jansen/zipline/issues/2165)，[2171](https://github.com/stefan-jansen/zipline/issues/2171)）
- en: Build
  id: totrans-1465
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 构建
- en: Added support for running travis builds with pandas 0.18 and 0.22. ([2194](https://github.com/stefan-jansen/zipline/issues/2194))
  id: totrans-1466
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增加了对使用pandas 0.18和0.22运行travis构建的支持（[2194](https://github.com/stefan-jansen/zipline/issues/2194)）
- en: Added OSX builds to the travis build matrix. ([2244](https://github.com/stefan-jansen/zipline/issues/2244))
  id: totrans-1467
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在travis构建矩阵中增加了OSX构建（[2244](https://github.com/stefan-jansen/zipline/issues/2244)）
- en: Release 1.2.0
  id: totrans-1468
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 发布1.2.0
- en: 'Release:'
  id: totrans-1469
  prefs: []
  type: TYPE_NORMAL
  zh: 发布：
- en: 1.2.0
  id: totrans-1470
  prefs: []
  type: TYPE_NORMAL
  zh: 1.2.0
- en: 'Date:'
  id: totrans-1471
  prefs: []
  type: TYPE_NORMAL
  zh: 日期：
- en: April 4, 2018
  id: totrans-1472
  prefs: []
  type: TYPE_NORMAL
  zh: 2018年4月4日
- en: Highlights
  id: totrans-1473
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 亮点
- en: Extensible Risk and Performance Metrics ([2081](https://github.com/stefan-jansen/zipline/issues/2081))
  id: totrans-1474
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 可扩展的风险和性能指标（[2081](https://github.com/stefan-jansen/zipline/issues/2081)）
- en: 'The risk and performance metrics are summarizing values calculated by Zipline
    when running a simulation, for example: returns or Sharpe ratio. 1.1.2 introduces
    a new API for registering custom risk and performance metrics defined by the user.
    We have also made it possible to run a backtest without computing any metrics
    to improve the feedback cycle when debugging an algorithm.'
  id: totrans-1475
  prefs: []
  type: TYPE_NORMAL
  zh: 风险和性能指标是Zipline在运行模拟时计算的汇总值，例如：回报率或夏普比率。1.1.2引入了一个新的API，用于注册用户定义的自定义风险和性能指标。我们还使得在不计算任何指标的情况下运行回测成为可能，以改善调试算法的反馈循环。
- en: For more information, see [Metrics](risk-and-perf-metrics.html#metrics).
  id: totrans-1476
  prefs: []
  type: TYPE_NORMAL
  zh: 更多信息，请参阅[Metrics](risk-and-perf-metrics.html#metrics)。
- en: Docs, Trading Calendars, and Benchmarks
  id: totrans-1477
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 文档、交易日历和基准
- en: Zipline now defaults to using the `quandl` bundle, which you’ll need an API
    Key for, and can find information about in the Data Bundles documentation.
  id: totrans-1478
  prefs: []
  type: TYPE_NORMAL
  zh: Zipline现在默认使用`quandl` bundle，您需要一个API Key，可以在数据包文档中找到相关信息。
- en: We’ve added many Tutorial & Documentations updates, including information on
    how to create your own `TradingCalendar`, pass it to your algorithm via the Zipline
    CLI, and how to use custom csv data using the `csvdir` bundle.
  id: totrans-1479
  prefs: []
  type: TYPE_NORMAL
  zh: 我们添加了许多教程和文档更新，包括有关如何创建自己的`TradingCalendar`，通过Zipline CLI将其传递给您的算法，以及如何使用`csvdir`
    bundle使用自定义csv数据的信息。
- en: Zipline is no longer being tested and packaged for Python 3.4.
  id: totrans-1480
  prefs: []
  type: TYPE_NORMAL
  zh: Zipline不再为Python 3.4进行测试和打包。
- en: Zipline now requests data for SPY, the default benchmark used for Zipline backtests,
    using the [IEX Trading](https://iextrading.com) API, and no longer uses `pandas-datareader`.
    You can run a backtest up to 5 years from the current day using this data.
  id: totrans-1481
  prefs: []
  type: TYPE_NORMAL
  zh: Zipline现在通过[IEX Trading](https://iextrading.com) API请求SPY数据，SPY是Zipline回测使用的默认基准，不再使用`pandas-datareader`。您可以使用此数据运行长达5年的回测。
- en: Enhancements
  id: totrans-1482
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 增强功能
- en: Grow minute file cache to 1550 by default ([1906](https://github.com/stefan-jansen/zipline/issues/1906))
  id: totrans-1483
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将分钟文件缓存默认增长，默认值为1550（[1906](https://github.com/stefan-jansen/zipline/issues/1906)）
- en: Change default commission to .001 ([1946](https://github.com/stefan-jansen/zipline/issues/1946))
  id: totrans-1484
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将默认佣金更改为.001（[1946](https://github.com/stefan-jansen/zipline/issues/1946)）
- en: Enable the ability to compute multiple pipelines ([1974](https://github.com/stefan-jansen/zipline/issues/1974))
  id: totrans-1485
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 启用计算多个管道的能力（[1974](https://github.com/stefan-jansen/zipline/issues/1974)）
- en: Allow users to switch between calendars ([1800](https://github.com/stefan-jansen/zipline/issues/1800))
  id: totrans-1486
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 允许用户在不同日历之间切换（[1800](https://github.com/stefan-jansen/zipline/issues/1800)）
- en: New filter `NoMissingValues` ([1969](https://github.com/stefan-jansen/zipline/issues/1969))
  id: totrans-1487
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新增过滤器`NoMissingValues`（[1969](https://github.com/stefan-jansen/zipline/issues/1969)）
- en: Fail better on `AssetFinder(nonexistent_path)` ([2000](https://github.com/stefan-jansen/zipline/issues/2000))
  id: totrans-1488
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在`AssetFinder(nonexistent_path)`上更好地失败（[2000](https://github.com/stefan-jansen/zipline/issues/2000)）
- en: Implement csvdir bundle ([1860](https://github.com/stefan-jansen/zipline/issues/1860))
  id: totrans-1489
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 实现csvdir bundle（[1860](https://github.com/stefan-jansen/zipline/issues/1860)）
- en: Update quandl_bundle to use Quandl API v3 ([1990](https://github.com/stefan-jansen/zipline/issues/1990))
  id: totrans-1490
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 更新quandl_bundle以使用Quandl API v3（[1990](https://github.com/stefan-jansen/zipline/issues/1990)）
- en: Add `FixedBasisPointsSlippage` slippage model ([2047](https://github.com/stefan-jansen/zipline/issues/2047))
  id: totrans-1491
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加`FixedBasisPointsSlippage`滑点模型（[2047](https://github.com/stefan-jansen/zipline/issues/2047)）
- en: Create MinLeverage control ([2064](https://github.com/stefan-jansen/zipline/issues/2064))
  id: totrans-1492
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 创建MinLeverage控制（[2064](https://github.com/stefan-jansen/zipline/issues/2064)）
- en: Experimental Features
  id: totrans-1493
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 实验性功能
- en: Warning
  id: totrans-1494
  prefs: []
  type: TYPE_NORMAL
  zh: 警告
- en: Experimental features are subject to change.
  id: totrans-1495
  prefs: []
  type: TYPE_NORMAL
  zh: 实验性功能可能会发生变化。
- en: None
  id: totrans-1496
  prefs: []
  type: TYPE_NORMAL
  zh: 无
- en: Bug Fixes
  id: totrans-1497
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 错误修复
- en: '`history` calls with a frequency of `1d` now work when using a Panel as the
    minute data source. ([1920](https://github.com/stefan-jansen/zipline/issues/1920))'
  id: totrans-1498
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用Panel作为分钟数据源时，频率为`1d`的`history`调用现在可以正常工作（[1920](https://github.com/stefan-jansen/zipline/issues/1920)）
- en: Check contract exists when using futures daily bar reader ([1892](https://github.com/stefan-jansen/zipline/issues/1892))
  id: totrans-1499
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在使用期货每日条形阅读器时检查合约是否存在（[1892](https://github.com/stefan-jansen/zipline/issues/1892)）
- en: '`NoDataBeforeDate` edge cases ([1894](https://github.com/stefan-jansen/zipline/issues/1894))'
  id: totrans-1500
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`NoDataBeforeDate`的边缘情况（[1894](https://github.com/stefan-jansen/zipline/issues/1894)）'
- en: Fix frame column validation in Python 2.7.5 ([1954](https://github.com/stefan-jansen/zipline/issues/1954))
  id: totrans-1501
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复Python 2.7.5中的框架列验证（[1954](https://github.com/stefan-jansen/zipline/issues/1954)）
- en: Fix daily history for minute panel data backtest ([1920](https://github.com/stefan-jansen/zipline/issues/1920))
  id: totrans-1502
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复分钟面板数据回测的每日历史记录（[1920](https://github.com/stefan-jansen/zipline/issues/1920)）
- en: '`get_last_traded_dt` expects a trading day ([2087](https://github.com/stefan-jansen/zipline/issues/2087))'
  id: totrans-1503
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`get_last_traded_dt`期望一个交易日（[2087](https://github.com/stefan-jansen/zipline/issues/2087)）'
- en: Daily Adjustment perspective fix ([2089](https://github.com/stefan-jansen/zipline/issues/2089))
  id: totrans-1504
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 日常调整视角修复（[2089](https://github.com/stefan-jansen/zipline/issues/2089)）
- en: Performance
  id: totrans-1505
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 性能
- en: Change algorithm account validation from happening every minute in `handle_data`
    to only occurring once at the end of each day ([1884](https://github.com/stefan-jansen/zipline/issues/1884))
  id: totrans-1506
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将算法账户验证从`handle_data`中每分钟发生一次改为每天结束时仅发生一次（[1884](https://github.com/stefan-jansen/zipline/issues/1884)）
- en: Blaze core loader performance improvements ([1866](https://github.com/stefan-jansen/zipline/issues/1866))
  id: totrans-1507
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Blaze核心加载器性能改进（[1866](https://github.com/stefan-jansen/zipline/issues/1866)）
- en: Add a new factor that just computes beta ([2021](https://github.com/stefan-jansen/zipline/issues/2021))
  id: totrans-1508
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加一个仅计算贝塔值的新因子（[2021](https://github.com/stefan-jansen/zipline/issues/2021)）
- en: Reduces memory footprint of Quandl WIKI Prices bundle ([2053](https://github.com/stefan-jansen/zipline/issues/2053))
  id: totrans-1509
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 减少Quandl WIKI价格包的内存占用（[2053](https://github.com/stefan-jansen/zipline/issues/2053)）
- en: Maintenance and Refactorings
  id: totrans-1510
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 维护和重构
- en: Add `CachedObject.expired()` ([1881](https://github.com/stefan-jansen/zipline/issues/1881))
  id: totrans-1511
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加`CachedObject.expired()`（[1881](https://github.com/stefan-jansen/zipline/issues/1881)）
- en: Set `RollingLinearRegressionOfReturns` factor to be window_safe ([1902](https://github.com/stefan-jansen/zipline/issues/1902))
  id: totrans-1512
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将`RollingLinearRegressionOfReturns`因子设置为window_safe（[1902](https://github.com/stefan-jansen/zipline/issues/1902)）
- en: Set `RSI` factor to be window_safe ([1904](https://github.com/stefan-jansen/zipline/issues/1904))
  id: totrans-1513
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将`RSI`因子设置为window_safe（[1904](https://github.com/stefan-jansen/zipline/issues/1904)）
- en: Updates for better docs generation ([1890](https://github.com/stefan-jansen/zipline/issues/1890))
  id: totrans-1514
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 改进文档生成的更新（[1890](https://github.com/stefan-jansen/zipline/issues/1890)）
- en: Remove and zero out unused treasury curves ([1910](https://github.com/stefan-jansen/zipline/issues/1910))
  id: totrans-1515
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 移除并清空未使用的国债曲线（[1910](https://github.com/stefan-jansen/zipline/issues/1910)）
- en: Networkx 2 changes the behavior of out_degree ([1996](https://github.com/stefan-jansen/zipline/issues/1996))
  id: totrans-1516
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Networkx 2改变了out_degree的行为（[1996](https://github.com/stefan-jansen/zipline/issues/1996)）
- en: Pass calendars to `DataPortal` ([2026](https://github.com/stefan-jansen/zipline/issues/2026))
  id: totrans-1517
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将日历传递给`DataPortal`（[2026](https://github.com/stefan-jansen/zipline/issues/2026)）
- en: Remove old Yahoo code ([2032](https://github.com/stefan-jansen/zipline/issues/2032))
  id: totrans-1518
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 移除旧的Yahoo代码（[2032](https://github.com/stefan-jansen/zipline/issues/2032)）
- en: Sync and fill benchmarks through latest trading day ([2044](https://github.com/stefan-jansen/zipline/issues/2044))
  id: totrans-1519
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 同步并通过最新交易日填充基准（[2044](https://github.com/stefan-jansen/zipline/issues/2044)）
- en: Provides better error message when QUANDL_API_KEY is missing ([2078](https://github.com/stefan-jansen/zipline/issues/2078))
  id: totrans-1520
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当QUANDL_API_KEY缺失时提供更好的错误消息（[2078](https://github.com/stefan-jansen/zipline/issues/2078)）
- en: Improve the error message for misaligned dates in Pipeline engine ([2131](https://github.com/stefan-jansen/zipline/issues/2131))
  id: totrans-1521
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 改进管道引擎中日期错位时的错误消息（[2131](https://github.com/stefan-jansen/zipline/issues/2131)）
- en: Build
  id: totrans-1522
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 构建
- en: Update the conda tools we’re using to fix our packaging ([1942](https://github.com/stefan-jansen/zipline/issues/1942))
  id: totrans-1523
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 更新我们使用的conda工具以修复我们的打包问题（[1942](https://github.com/stefan-jansen/zipline/issues/1942)）
- en: Upgrade empyrical to 0.3.2 ([1983](https://github.com/stefan-jansen/zipline/issues/1983))
  id: totrans-1524
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将empyrical升级到0.3.2（[1983](https://github.com/stefan-jansen/zipline/issues/1983)）
- en: Update conda tooling and remove Python 3.4 builds ([2009](https://github.com/stefan-jansen/zipline/issues/2009))
  id: totrans-1525
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 更新conda工具并移除Python 3.4构建（[2009](https://github.com/stefan-jansen/zipline/issues/2009)）
- en: Upgrade empyrical to 0.3.3 ([2014](https://github.com/stefan-jansen/zipline/issues/2014))
  id: totrans-1526
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将empyrical升级到0.3.3（[2014](https://github.com/stefan-jansen/zipline/issues/2014)）
- en: Upgrade empyrical to 0.3.4 ([2098](https://github.com/stefan-jansen/zipline/issues/2098))
  id: totrans-1527
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将empyrical升级到0.3.4（[2098](https://github.com/stefan-jansen/zipline/issues/2098)）
- en: Upgrade empyrical to 0.4.2 ([2125](https://github.com/stefan-jansen/zipline/issues/2125))
  id: totrans-1528
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将empyrical升级到0.4.2（[2125](https://github.com/stefan-jansen/zipline/issues/2125)）
- en: Documentation
  id: totrans-1529
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 文档
- en: Include `MACDSignal` in zipline.io documentation ([1828](https://github.com/stefan-jansen/zipline/issues/1828))
  id: totrans-1530
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在zipline.io文档中包含`MACDSignal`（[1828](https://github.com/stefan-jansen/zipline/issues/1828)）
- en: Remove mentions of Yahoo from the Beginner Tutorial ([1845](https://github.com/stefan-jansen/zipline/issues/1845))
  id: totrans-1531
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从入门教程中删除对Yahoo的提及（[1845](https://github.com/stefan-jansen/zipline/issues/1845)）
- en: Add contributing & questions section to the README ([1889](https://github.com/stefan-jansen/zipline/issues/1889))
  id: totrans-1532
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在README中添加贡献和问题部分（[1889](https://github.com/stefan-jansen/zipline/issues/1889)）
- en: Add info about using a conda envs for installs ([1922](https://github.com/stefan-jansen/zipline/issues/1922))
  id: totrans-1533
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加有关使用conda环境进行安装的信息（[1922](https://github.com/stefan-jansen/zipline/issues/1922)）
- en: Fix Beginner Tutorial link ([1932](https://github.com/stefan-jansen/zipline/issues/1932))
  id: totrans-1534
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复入门教程链接（[1932](https://github.com/stefan-jansen/zipline/issues/1932)）
- en: Add clean docs ([1943](https://github.com/stefan-jansen/zipline/issues/1943))
  id: totrans-1535
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加干净的文档（[1943](https://github.com/stefan-jansen/zipline/issues/1943)）
- en: Add distinct warnings for benchmark and treasury fetchers ([1971](https://github.com/stefan-jansen/zipline/issues/1971))
  id: totrans-1536
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为基准和财政部提取器添加不同的警告（[1971](https://github.com/stefan-jansen/zipline/issues/1971)）
- en: Add CONTRIBUTING.rst ([2033](https://github.com/stefan-jansen/zipline/issues/2033))
  id: totrans-1537
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加CONTRIBUTING.rst（[2033](https://github.com/stefan-jansen/zipline/issues/2033)）
- en: Add tutorial on creating a custom `TradingCalendar` ([2035](https://github.com/stefan-jansen/zipline/issues/2035))
  id: totrans-1538
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加有关创建自定义`TradingCalendar`的教程（[2035](https://github.com/stefan-jansen/zipline/issues/2035)）
- en: Docs & tutorial updates for ingesting, beginners, and csvdir ([2073](https://github.com/stefan-jansen/zipline/issues/2073))
  id: totrans-1539
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 文档和教程更新，用于摄取、初学者和csvdir（[2073](https://github.com/stefan-jansen/zipline/issues/2073)）
- en: Documented the new risk and performance metrics API ([2081](https://github.com/stefan-jansen/zipline/issues/2081)).
  id: totrans-1540
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 记录了新的风险和性能指标API（[2081](https://github.com/stefan-jansen/zipline/issues/2081)）。
- en: Fixed a typo in the description of `--bundle-timestamp` ([2123](https://github.com/stefan-jansen/zipline/issues/2123))
  id: totrans-1541
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了`--bundle-timestamp`描述中的一个拼写错误（[2123](https://github.com/stefan-jansen/zipline/issues/2123)）
- en: Miscellaneous
  id: totrans-1542
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 杂项
- en: None
  id: totrans-1543
  prefs: []
  type: TYPE_NORMAL
  zh: 无
- en: Highlights
  id: totrans-1544
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 亮点
- en: Extensible Risk and Performance Metrics ([2081](https://github.com/stefan-jansen/zipline/issues/2081))
  id: totrans-1545
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 可扩展的风险和性能指标（[2081](https://github.com/stefan-jansen/zipline/issues/2081)）
- en: 'The risk and performance metrics are summarizing values calculated by Zipline
    when running a simulation, for example: returns or Sharpe ratio. 1.1.2 introduces
    a new API for registering custom risk and performance metrics defined by the user.
    We have also made it possible to run a backtest without computing any metrics
    to improve the feedback cycle when debugging an algorithm.'
  id: totrans-1546
  prefs: []
  type: TYPE_NORMAL
  zh: 风险和性能指标总结了Zipline在运行模拟时计算的值，例如：回报率或夏普比率。1.1.2引入了一个新的API，用于注册用户定义的自定义风险和性能指标。我们还使得在不计算任何指标的情况下运行回测成为可能，以改善调试算法时的反馈循环。
- en: For more information, see [Metrics](risk-and-perf-metrics.html#metrics).
  id: totrans-1547
  prefs: []
  type: TYPE_NORMAL
  zh: 有关更多信息，请参阅[Metrics](risk-and-perf-metrics.html#metrics)。
- en: Docs, Trading Calendars, and Benchmarks
  id: totrans-1548
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 文档、交易日历和基准
- en: Zipline now defaults to using the `quandl` bundle, which you’ll need an API
    Key for, and can find information about in the Data Bundles documentation.
  id: totrans-1549
  prefs: []
  type: TYPE_NORMAL
  zh: Zipline现在默认使用`quandl`捆绑包，您需要一个API密钥，可以在数据捆绑包文档中找到相关信息。
- en: We’ve added many Tutorial & Documentations updates, including information on
    how to create your own `TradingCalendar`, pass it to your algorithm via the Zipline
    CLI, and how to use custom csv data using the `csvdir` bundle.
  id: totrans-1550
  prefs: []
  type: TYPE_NORMAL
  zh: 我们增加了许多教程和文档更新，包括如何创建自己的`TradingCalendar`，通过Zipline CLI将其传递给算法，以及如何使用`csvdir`捆绑包使用自定义csv数据。
- en: Zipline is no longer being tested and packaged for Python 3.4.
  id: totrans-1551
  prefs: []
  type: TYPE_NORMAL
  zh: Zipline不再为Python 3.4进行测试和打包。
- en: Zipline now requests data for SPY, the default benchmark used for Zipline backtests,
    using the [IEX Trading](https://iextrading.com) API, and no longer uses `pandas-datareader`.
    You can run a backtest up to 5 years from the current day using this data.
  id: totrans-1552
  prefs: []
  type: TYPE_NORMAL
  zh: Zipline现在使用[IEX Trading](https://iextrading.com) API请求SPY的数据，这是Zipline回测使用的默认基准，不再使用`pandas-datareader`。您可以使用此数据运行长达5年的回测。
- en: Extensible Risk and Performance Metrics ([2081](https://github.com/stefan-jansen/zipline/issues/2081))
  id: totrans-1553
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 可扩展的风险和性能指标（[2081](https://github.com/stefan-jansen/zipline/issues/2081)）
- en: 'The risk and performance metrics are summarizing values calculated by Zipline
    when running a simulation, for example: returns or Sharpe ratio. 1.1.2 introduces
    a new API for registering custom risk and performance metrics defined by the user.
    We have also made it possible to run a backtest without computing any metrics
    to improve the feedback cycle when debugging an algorithm.'
  id: totrans-1554
  prefs: []
  type: TYPE_NORMAL
  zh: 风险和性能指标汇总了Zipline在运行模拟时计算的值，例如：回报率或夏普比率。1.1.2版本引入了一个新的API，用于注册用户定义的自定义风险和性能指标。我们还使得在不计算任何指标的情况下运行回测成为可能，以改善调试算法时的反馈循环。
- en: For more information, see [Metrics](risk-and-perf-metrics.html#metrics).
  id: totrans-1555
  prefs: []
  type: TYPE_NORMAL
  zh: 更多信息，请参阅[Metrics](risk-and-perf-metrics.html#metrics)。
- en: Docs, Trading Calendars, and Benchmarks
  id: totrans-1556
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 文档、交易日历和基准
- en: Zipline now defaults to using the `quandl` bundle, which you’ll need an API
    Key for, and can find information about in the Data Bundles documentation.
  id: totrans-1557
  prefs: []
  type: TYPE_NORMAL
  zh: 现在Zipline默认使用`quandl`数据包，这需要一个API密钥，你可以在数据包文档中找到相关信息。
- en: We’ve added many Tutorial & Documentations updates, including information on
    how to create your own `TradingCalendar`, pass it to your algorithm via the Zipline
    CLI, and how to use custom csv data using the `csvdir` bundle.
  id: totrans-1558
  prefs: []
  type: TYPE_NORMAL
  zh: 我们增加了许多教程和文档更新，包括如何创建自己的`TradingCalendar`，通过Zipline CLI将其传递给算法，以及如何使用`csvdir`数据包使用自定义csv数据。
- en: Zipline is no longer being tested and packaged for Python 3.4.
  id: totrans-1559
  prefs: []
  type: TYPE_NORMAL
  zh: Zipline不再为Python 3.4进行测试和打包。
- en: Zipline now requests data for SPY, the default benchmark used for Zipline backtests,
    using the [IEX Trading](https://iextrading.com) API, and no longer uses `pandas-datareader`.
    You can run a backtest up to 5 years from the current day using this data.
  id: totrans-1560
  prefs: []
  type: TYPE_NORMAL
  zh: Zipline现在使用[IEX Trading](https://iextrading.com) API请求SPY数据，这是Zipline回测默认使用的基准，不再使用`pandas-datareader`。你可以使用这些数据进行长达5年的回测。
- en: Enhancements
  id: totrans-1561
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 增强功能
- en: Grow minute file cache to 1550 by default ([1906](https://github.com/stefan-jansen/zipline/issues/1906))
  id: totrans-1562
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将分钟文件缓存默认大小增加到1550（[1906](https://github.com/stefan-jansen/zipline/issues/1906)）
- en: Change default commission to .001 ([1946](https://github.com/stefan-jansen/zipline/issues/1946))
  id: totrans-1563
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将默认佣金改为0.001（[1946](https://github.com/stefan-jansen/zipline/issues/1946)）
- en: Enable the ability to compute multiple pipelines ([1974](https://github.com/stefan-jansen/zipline/issues/1974))
  id: totrans-1564
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 启用计算多个管道的能力（[1974](https://github.com/stefan-jansen/zipline/issues/1974)）
- en: Allow users to switch between calendars ([1800](https://github.com/stefan-jansen/zipline/issues/1800))
  id: totrans-1565
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 允许用户在不同日历之间切换（[1800](https://github.com/stefan-jansen/zipline/issues/1800)）
- en: New filter `NoMissingValues` ([1969](https://github.com/stefan-jansen/zipline/issues/1969))
  id: totrans-1566
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新增过滤器`NoMissingValues`（[1969](https://github.com/stefan-jansen/zipline/issues/1969)）
- en: Fail better on `AssetFinder(nonexistent_path)` ([2000](https://github.com/stefan-jansen/zipline/issues/2000))
  id: totrans-1567
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在`AssetFinder(nonexistent_path)`上更好地处理失败（[2000](https://github.com/stefan-jansen/zipline/issues/2000)）
- en: Implement csvdir bundle ([1860](https://github.com/stefan-jansen/zipline/issues/1860))
  id: totrans-1568
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 实现csvdir数据包（[1860](https://github.com/stefan-jansen/zipline/issues/1860)）
- en: Update quandl_bundle to use Quandl API v3 ([1990](https://github.com/stefan-jansen/zipline/issues/1990))
  id: totrans-1569
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将quandl_bundle更新为使用Quandl API v3（[1990](https://github.com/stefan-jansen/zipline/issues/1990)）
- en: Add `FixedBasisPointsSlippage` slippage model ([2047](https://github.com/stefan-jansen/zipline/issues/2047))
  id: totrans-1570
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加`FixedBasisPointsSlippage`滑点模型（[2047](https://github.com/stefan-jansen/zipline/issues/2047)）
- en: Create MinLeverage control ([2064](https://github.com/stefan-jansen/zipline/issues/2064))
  id: totrans-1571
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 创建最小杠杆控制（[2064](https://github.com/stefan-jansen/zipline/issues/2064)）
- en: Experimental Features
  id: totrans-1572
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 实验性功能
- en: Warning
  id: totrans-1573
  prefs: []
  type: TYPE_NORMAL
  zh: 警告
- en: Experimental features are subject to change.
  id: totrans-1574
  prefs: []
  type: TYPE_NORMAL
  zh: 实验性功能可能会发生变化。
- en: None
  id: totrans-1575
  prefs: []
  type: TYPE_NORMAL
  zh: 无
- en: Bug Fixes
  id: totrans-1576
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 错误修复
- en: '`history` calls with a frequency of `1d` now work when using a Panel as the
    minute data source. ([1920](https://github.com/stefan-jansen/zipline/issues/1920))'
  id: totrans-1577
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当使用Panel作为分钟数据源时，`history`调用频率为`1d`现在可以正常工作（[1920](https://github.com/stefan-jansen/zipline/issues/1920)）
- en: Check contract exists when using futures daily bar reader ([1892](https://github.com/stefan-jansen/zipline/issues/1892))
  id: totrans-1578
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在使用期货日K线阅读器时检查合约是否存在（[1892](https://github.com/stefan-jansen/zipline/issues/1892)）
- en: '`NoDataBeforeDate` edge cases ([1894](https://github.com/stefan-jansen/zipline/issues/1894))'
  id: totrans-1579
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`NoDataBeforeDate`的边缘情况（[1894](https://github.com/stefan-jansen/zipline/issues/1894)）'
- en: Fix frame column validation in Python 2.7.5 ([1954](https://github.com/stefan-jansen/zipline/issues/1954))
  id: totrans-1580
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复Python 2.7.5中的帧列验证（[1954](https://github.com/stefan-jansen/zipline/issues/1954)）
- en: Fix daily history for minute panel data backtest ([1920](https://github.com/stefan-jansen/zipline/issues/1920))
  id: totrans-1581
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复分钟面板数据回测的日历史记录（[1920](https://github.com/stefan-jansen/zipline/issues/1920)）
- en: '`get_last_traded_dt` expects a trading day ([2087](https://github.com/stefan-jansen/zipline/issues/2087))'
  id: totrans-1582
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`get_last_traded_dt` 期望得到一个交易日（[2087](https://github.com/stefan-jansen/zipline/issues/2087)）'
- en: Daily Adjustment perspective fix ([2089](https://github.com/stefan-jansen/zipline/issues/2089))
  id: totrans-1583
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 日常调整视角修复（[2089](https://github.com/stefan-jansen/zipline/issues/2089)）
- en: Performance
  id: totrans-1584
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 性能
- en: Change algorithm account validation from happening every minute in `handle_data`
    to only occurring once at the end of each day ([1884](https://github.com/stefan-jansen/zipline/issues/1884))
  id: totrans-1585
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将算法账户验证从`handle_data`中每分钟发生改为仅在每天结束时发生一次（[1884](https://github.com/stefan-jansen/zipline/issues/1884)）
- en: Blaze core loader performance improvements ([1866](https://github.com/stefan-jansen/zipline/issues/1866))
  id: totrans-1586
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Blaze核心加载器性能改进（[1866](https://github.com/stefan-jansen/zipline/issues/1866)）
- en: Add a new factor that just computes beta ([2021](https://github.com/stefan-jansen/zipline/issues/2021))
  id: totrans-1587
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加一个仅计算beta的新因子（[2021](https://github.com/stefan-jansen/zipline/issues/2021)）
- en: Reduces memory footprint of Quandl WIKI Prices bundle ([2053](https://github.com/stefan-jansen/zipline/issues/2053))
  id: totrans-1588
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 减少Quandl WIKI价格包的内存占用（[2053](https://github.com/stefan-jansen/zipline/issues/2053)）
- en: Maintenance and Refactorings
  id: totrans-1589
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 维护和重构
- en: Add `CachedObject.expired()` ([1881](https://github.com/stefan-jansen/zipline/issues/1881))
  id: totrans-1590
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加`CachedObject.expired()`（[1881](https://github.com/stefan-jansen/zipline/issues/1881)）
- en: Set `RollingLinearRegressionOfReturns` factor to be window_safe ([1902](https://github.com/stefan-jansen/zipline/issues/1902))
  id: totrans-1591
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将`RollingLinearRegressionOfReturns`因子设置为window_safe（[1902](https://github.com/stefan-jansen/zipline/issues/1902)）
- en: Set `RSI` factor to be window_safe ([1904](https://github.com/stefan-jansen/zipline/issues/1904))
  id: totrans-1592
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将`RSI`因子设置为window_safe（[1904](https://github.com/stefan-jansen/zipline/issues/1904)）
- en: Updates for better docs generation ([1890](https://github.com/stefan-jansen/zipline/issues/1890))
  id: totrans-1593
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为更好的文档生成进行更新（[1890](https://github.com/stefan-jansen/zipline/issues/1890)）
- en: Remove and zero out unused treasury curves ([1910](https://github.com/stefan-jansen/zipline/issues/1910))
  id: totrans-1594
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 移除并清零未使用的国债曲线（[1910](https://github.com/stefan-jansen/zipline/issues/1910)）
- en: Networkx 2 changes the behavior of out_degree ([1996](https://github.com/stefan-jansen/zipline/issues/1996))
  id: totrans-1595
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Networkx 2改变了out_degree的行为（[1996](https://github.com/stefan-jansen/zipline/issues/1996)）
- en: Pass calendars to `DataPortal` ([2026](https://github.com/stefan-jansen/zipline/issues/2026))
  id: totrans-1596
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 向`DataPortal`传递日历（[2026](https://github.com/stefan-jansen/zipline/issues/2026)）
- en: Remove old Yahoo code ([2032](https://github.com/stefan-jansen/zipline/issues/2032))
  id: totrans-1597
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 移除旧的Yahoo代码（[2032](https://github.com/stefan-jansen/zipline/issues/2032)）
- en: Sync and fill benchmarks through latest trading day ([2044](https://github.com/stefan-jansen/zipline/issues/2044))
  id: totrans-1598
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 同步并填充至最新交易日的基准（[2044](https://github.com/stefan-jansen/zipline/issues/2044)）
- en: Provides better error message when QUANDL_API_KEY is missing ([2078](https://github.com/stefan-jansen/zipline/issues/2078))
  id: totrans-1599
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当QUANDL_API_KEY缺失时提供更好的错误信息（[2078](https://github.com/stefan-jansen/zipline/issues/2078)）
- en: Improve the error message for misaligned dates in Pipeline engine ([2131](https://github.com/stefan-jansen/zipline/issues/2131))
  id: totrans-1600
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 改进管道引擎中日期不一致的错误信息（[2131](https://github.com/stefan-jansen/zipline/issues/2131)）
- en: Build
  id: totrans-1601
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 构建
- en: Update the conda tools we’re using to fix our packaging ([1942](https://github.com/stefan-jansen/zipline/issues/1942))
  id: totrans-1602
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 更新我们使用的conda工具以修复我们的打包（[1942](https://github.com/stefan-jansen/zipline/issues/1942)）
- en: Upgrade empyrical to 0.3.2 ([1983](https://github.com/stefan-jansen/zipline/issues/1983))
  id: totrans-1603
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将empyrical升级到0.3.2（[1983](https://github.com/stefan-jansen/zipline/issues/1983)）
- en: Update conda tooling and remove Python 3.4 builds ([2009](https://github.com/stefan-jansen/zipline/issues/2009))
  id: totrans-1604
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 更新conda工具并移除Python 3.4构建（[2009](https://github.com/stefan-jansen/zipline/issues/2009)）
- en: Upgrade empyrical to 0.3.3 ([2014](https://github.com/stefan-jansen/zipline/issues/2014))
  id: totrans-1605
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将empyrical升级到0.3.3（[2014](https://github.com/stefan-jansen/zipline/issues/2014)）
- en: Upgrade empyrical to 0.3.4 ([2098](https://github.com/stefan-jansen/zipline/issues/2098))
  id: totrans-1606
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将empyrical升级到0.3.4（[2098](https://github.com/stefan-jansen/zipline/issues/2098)）
- en: Upgrade empyrical to 0.4.2 ([2125](https://github.com/stefan-jansen/zipline/issues/2125))
  id: totrans-1607
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将empyrical升级到0.4.2（[2125](https://github.com/stefan-jansen/zipline/issues/2125)）
- en: Documentation
  id: totrans-1608
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 文档
- en: Include `MACDSignal` in zipline.io documentation ([1828](https://github.com/stefan-jansen/zipline/issues/1828))
  id: totrans-1609
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在zipline.io文档中包含`MACDSignal`（[1828](https://github.com/stefan-jansen/zipline/issues/1828)）
- en: Remove mentions of Yahoo from the Beginner Tutorial ([1845](https://github.com/stefan-jansen/zipline/issues/1845))
  id: totrans-1610
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从入门教程中移除Yahoo的提及（[1845](https://github.com/stefan-jansen/zipline/issues/1845)）
- en: Add contributing & questions section to the README ([1889](https://github.com/stefan-jansen/zipline/issues/1889))
  id: totrans-1611
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在README中添加贡献和问题部分（[1889](https://github.com/stefan-jansen/zipline/issues/1889)）
- en: Add info about using a conda envs for installs ([1922](https://github.com/stefan-jansen/zipline/issues/1922))
  id: totrans-1612
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加关于使用conda环境进行安装的信息（[1922](https://github.com/stefan-jansen/zipline/issues/1922)）
- en: Fix Beginner Tutorial link ([1932](https://github.com/stefan-jansen/zipline/issues/1932))
  id: totrans-1613
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复入门教程链接（[1932](https://github.com/stefan-jansen/zipline/issues/1932)）
- en: Add clean docs ([1943](https://github.com/stefan-jansen/zipline/issues/1943))
  id: totrans-1614
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加清晰的文档（[1943](https://github.com/stefan-jansen/zipline/issues/1943)）
- en: Add distinct warnings for benchmark and treasury fetchers ([1971](https://github.com/stefan-jansen/zipline/issues/1971))
  id: totrans-1615
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为基准和财政部提取器添加不同的警告（[1971](https://github.com/stefan-jansen/zipline/issues/1971)）
- en: Add CONTRIBUTING.rst ([2033](https://github.com/stefan-jansen/zipline/issues/2033))
  id: totrans-1616
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加CONTRIBUTING.rst（[2033](https://github.com/stefan-jansen/zipline/issues/2033)）
- en: Add tutorial on creating a custom `TradingCalendar` ([2035](https://github.com/stefan-jansen/zipline/issues/2035))
  id: totrans-1617
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加了关于创建自定义`TradingCalendar`的教程（[2035](https://github.com/stefan-jansen/zipline/issues/2035)）
- en: Docs & tutorial updates for ingesting, beginners, and csvdir ([2073](https://github.com/stefan-jansen/zipline/issues/2073))
  id: totrans-1618
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 文档和教程更新，包括数据导入、初学者和csvdir（[2073](https://github.com/stefan-jansen/zipline/issues/2073)）
- en: Documented the new risk and performance metrics API ([2081](https://github.com/stefan-jansen/zipline/issues/2081)).
  id: totrans-1619
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 记录了新的风险和绩效指标API（[2081](https://github.com/stefan-jansen/zipline/issues/2081)）
- en: Fixed a typo in the description of `--bundle-timestamp` ([2123](https://github.com/stefan-jansen/zipline/issues/2123))
  id: totrans-1620
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了`--bundle-timestamp`描述中的一个拼写错误（[2123](https://github.com/stefan-jansen/zipline/issues/2123)）
- en: Miscellaneous
  id: totrans-1621
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 杂项
- en: None
  id: totrans-1622
  prefs: []
  type: TYPE_NORMAL
  zh: 无
- en: Release 1.1.1
  id: totrans-1623
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 发布1.1.1
- en: 'Release:'
  id: totrans-1624
  prefs: []
  type: TYPE_NORMAL
  zh: 发布：
- en: 1.1.1
  id: totrans-1625
  prefs: []
  type: TYPE_NORMAL
  zh: 1.1.1
- en: 'Date:'
  id: totrans-1626
  prefs: []
  type: TYPE_NORMAL
  zh: 日期：
- en: July 5, 2017
  id: totrans-1627
  prefs: []
  type: TYPE_NORMAL
  zh: 2017年7月5日
- en: Highlights
  id: totrans-1628
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 亮点
- en: Zipline now has broad support for futures, in addition to equities. It’s also
    being tested and packaged for Python 3.5.
  id: totrans-1629
  prefs: []
  type: TYPE_NORMAL
  zh: Zipline现在除了股票外，还广泛支持期货。它也正在为Python 3.5进行测试和打包。
- en: We also saw breaking changes occur from Yahoo changing their API endpoint, thus
    preventing users from downloading benchmark data needed for backtests. Since that
    change, we have swapped out Yahoo-related benchmarking code with references to
    Google Finance and have removed all deprecated Yahoo code, including the usage
    of custom Yahoo bundles.
  id: totrans-1630
  prefs: []
  type: TYPE_NORMAL
  zh: 我们还看到由于雅虎更改了其API端点，导致用户无法下载回测所需的基准数据，从而发生了重大变化。自那次更改以来，我们已经用对谷歌财经的引用来替换与雅虎相关的基准代码，并删除了所有已弃用的雅虎代码，包括对自定义雅虎包的使用。
- en: Enhancements
  id: totrans-1631
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 增强功能
- en: Adds a property for BarData to know about current session’s minutes ([1713](https://github.com/stefan-jansen/zipline/issues/1713))
  id: totrans-1632
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为BarData添加了一个属性，以了解当前会话的分钟数（[1713](https://github.com/stefan-jansen/zipline/issues/1713)）
- en: Adds a better error message for non-existent root symbols ([1715:](https://github.com/stefan-jansen/zipline/issues/1715:))
  id: totrans-1633
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为不存在的根符号添加了更好的错误消息（[1715](https://github.com/stefan-jansen/zipline/issues/1715)）
- en: Adds `StaticSids` Pipeline Filter ([1717](https://github.com/stefan-jansen/zipline/issues/1717))
  id: totrans-1634
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加了`StaticSids` 流水线过滤器（[1717](https://github.com/stefan-jansen/zipline/issues/1717)）
- en: Allows `zipline.data.data_portal.DataPortal.get_spot_value` to accept multiple
    assets ([1719](https://github.com/stefan-jansen/zipline/issues/1719))
  id: totrans-1635
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 允许`zipline.data.data_portal.DataPortal.get_spot_value`接受多个资产（[1719](https://github.com/stefan-jansen/zipline/issues/1719)）
- en: Adds `ContinuousFuture` to `lookup_generic` ([1718](https://github.com/stefan-jansen/zipline/issues/1718))
  id: totrans-1636
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 向`lookup_generic`添加了`ContinuousFuture`（[1718](https://github.com/stefan-jansen/zipline/issues/1718)）
- en: Adds CFE Adhoc Holidays to `exchange_calendar_cfe` ([1698](https://github.com/stefan-jansen/zipline/issues/1698))
  id: totrans-1637
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 向`exchange_calendar_cfe`添加CFE临时假日（[1698](https://github.com/stefan-jansen/zipline/issues/1698)）
- en: Allows overriding of order amount rounding ([1722](https://github.com/stefan-jansen/zipline/issues/1722))
  id: totrans-1638
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 允许覆盖订单金额的舍入（[1722](https://github.com/stefan-jansen/zipline/issues/1722)）
- en: Makes continuous future adjustment style an argument ([1726](https://github.com/stefan-jansen/zipline/issues/1726))
  id: totrans-1639
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使连续期货调整风格成为参数（[1726](https://github.com/stefan-jansen/zipline/issues/1726)）
- en: Adds preliminary support for Futures slippage and commission models ([1738](https://github.com/stefan-jansen/zipline/issues/1738))
  id: totrans-1640
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加了对期货滑点和佣金模型的初步支持（[1738](https://github.com/stefan-jansen/zipline/issues/1738)）
- en: Fix a bug in cost basis calculation and change all mentions of `sid` to `asset`
    ([1757](https://github.com/stefan-jansen/zipline/issues/1757))
  id: totrans-1641
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了成本基础计算中的一个错误，并将所有提及的`sid`更改为`asset`（[1757](https://github.com/stefan-jansen/zipline/issues/1757)）
- en: Add slippage and commission models for futures ([1748](https://github.com/stefan-jansen/zipline/issues/1748))
  id: totrans-1642
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加期货的滑点和佣金模型（[1748](https://github.com/stefan-jansen/zipline/issues/1748)）
- en: Use Python 3.5 in our Dockerfile ([1806](https://github.com/stefan-jansen/zipline/issues/1806))
  id: totrans-1643
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在我们的Dockerfile中使用Python 3.5（[1806](https://github.com/stefan-jansen/zipline/issues/1806)）
- en: Allow pipelines to be run in chunks ([1811](https://github.com/stefan-jansen/zipline/issues/1811))
  id: totrans-1644
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 允许流水线以块的形式运行（[1811](https://github.com/stefan-jansen/zipline/issues/1811)）
- en: Adds get_range to BenchmarkSource ([1815](https://github.com/stefan-jansen/zipline/issues/1815))
  id: totrans-1645
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 向BenchmarkSource添加了get_range（[1815](https://github.com/stefan-jansen/zipline/issues/1815)）
- en: Adds support for relabeling classifiers in Pipeline ([1833](https://github.com/stefan-jansen/zipline/issues/1833))
  id: totrans-1646
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加了对Pipeline中重新标记分类器的支持（[1833](https://github.com/stefan-jansen/zipline/issues/1833)）
- en: Experimental Features
  id: totrans-1647
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 实验性功能
- en: Warning
  id: totrans-1648
  prefs: []
  type: TYPE_NORMAL
  zh: 警告
- en: Experimental features are subject to change.
  id: totrans-1649
  prefs: []
  type: TYPE_NORMAL
  zh: 实验性功能可能会发生变化。
- en: None
  id: totrans-1650
  prefs: []
  type: TYPE_NORMAL
  zh: 无
- en: Bug Fixes
  id: totrans-1651
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 错误修复
- en: Fixes a floating point division issue in `zipline.data.minute_bars` by using
    integer divison instead ([1683](https://github.com/stefan-jansen/zipline/issues/1683))
  id: totrans-1652
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在`zipline.data.minute_bars`中修复了浮点数除法问题，改为使用整数除法（[1683](https://github.com/stefan-jansen/zipline/issues/1683)）
- en: Sorts data in `zipline.pipeline.loaders.blaze.core` on `asof_date` to resolve
    timestamp conflicts ([1710](https://github.com/stefan-jansen/zipline/issues/1710))
  id: totrans-1653
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在`zipline.pipeline.loaders.blaze.core`中按`asof_date`排序数据，以解决时间戳冲突（[1710](https://github.com/stefan-jansen/zipline/issues/1710)）
- en: Swapped out Yahoo for Google Finance benchmark data ([1812](https://github.com/stefan-jansen/zipline/issues/1812))
  id: totrans-1654
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将Yahoo替换为Google Finance的基准数据（[1812](https://github.com/stefan-jansen/zipline/issues/1812)）
- en: Gold and silver futures contracts only traded during certain months ([1779](https://github.com/stefan-jansen/zipline/issues/1779))
  id: totrans-1655
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 黄金和白银期货合约只在某些月份交易（[1779](https://github.com/stefan-jansen/zipline/issues/1779)）
- en: Fixes bug in TradingCalendar initialization when we use tzaware datetimes ([1802](https://github.com/stefan-jansen/zipline/issues/1802))
  id: totrans-1656
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了在使用时区感知的时间时，TradingCalendar初始化中的错误（[1802](https://github.com/stefan-jansen/zipline/issues/1802)）
- en: Fixes precision issues on futures prices when rounding ([1788](https://github.com/stefan-jansen/zipline/issues/1788))
  id: totrans-1657
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了期货价格四舍五入时的精度问题（[1788](https://github.com/stefan-jansen/zipline/issues/1788)）
- en: Performance
  id: totrans-1658
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 性能改进
- en: Avoid repeated recursive calls when getting forward-filled close price ([1735](https://github.com/stefan-jansen/zipline/issues/1735))
  id: totrans-1659
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在获取前向填充的收盘价时避免重复的递归调用（[1735](https://github.com/stefan-jansen/zipline/issues/1735)）
- en: Maintenance and Refactorings
  id: totrans-1660
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 维护和重构
- en: Adds linter recommendations to adjustments module ([1712](https://github.com/stefan-jansen/zipline/issues/1712))
  id: totrans-1661
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将linter建议添加到adjustments模块（[1712](https://github.com/stefan-jansen/zipline/issues/1712)）
- en: Clears up naming and logic in resample close ([1728](https://github.com/stefan-jansen/zipline/issues/1728))
  id: totrans-1662
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 清理了resample close中的命名和逻辑（[1728](https://github.com/stefan-jansen/zipline/issues/1728)）
- en: Use March quarterly cycle for several continuous futures ([1762](https://github.com/stefan-jansen/zipline/issues/1762))
  id: totrans-1663
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对几个连续期货使用3月季度周期（[1762](https://github.com/stefan-jansen/zipline/issues/1762)）
- en: Use better repr for Transaction objects ([1746](https://github.com/stefan-jansen/zipline/issues/1746))
  id: totrans-1664
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为Transaction对象使用更好的repr（[1746](https://github.com/stefan-jansen/zipline/issues/1746)）
- en: Shorten repr for Asset objects ([1786](https://github.com/stefan-jansen/zipline/issues/1786))
  id: totrans-1665
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 缩短Asset对象的repr（[1786](https://github.com/stefan-jansen/zipline/issues/1786)）
- en: Removes usage of empyrical’s information ratio ([1854](https://github.com/stefan-jansen/zipline/issues/1854))
  id: totrans-1666
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 移除了empyrical的信息比率的使用（[1854](https://github.com/stefan-jansen/zipline/issues/1854)）
- en: Build
  id: totrans-1667
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 构建
- en: Adds Python 3.5 packages ([1701](https://github.com/stefan-jansen/zipline/issues/1701))
  id: totrans-1668
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加了Python 3.5的包（[1701](https://github.com/stefan-jansen/zipline/issues/1701)）
- en: Swap conda-build arguments so we don’t build packages on every CI build ([1813](https://github.com/stefan-jansen/zipline/issues/1813))
  id: totrans-1669
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 交换conda-build参数，这样我们就不会在每次CI构建时都构建包（[1813](https://github.com/stefan-jansen/zipline/issues/1813)）
- en: Documentation
  id: totrans-1670
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 文档更新
- en: Adds Zipline Development Guidelines, for people to read about how to contribute
    to zipline ([1820](https://github.com/stefan-jansen/zipline/issues/1820))
  id: totrans-1671
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加了Zipline开发指南，供人们阅读如何为Zipline做贡献（[1820](https://github.com/stefan-jansen/zipline/issues/1820)）
- en: Show exchange as required for equities ([1731](https://github.com/stefan-jansen/zipline/issues/1731))
  id: totrans-1672
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对于股票，要求显示交易所（[1731](https://github.com/stefan-jansen/zipline/issues/1731)）
- en: Updates the Zipline Beginner Tutorial notebook ([1707](https://github.com/stefan-jansen/zipline/issues/1707))
  id: totrans-1673
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 更新了Zipline入门教程笔记本（[1707](https://github.com/stefan-jansen/zipline/issues/1707)）
- en: Includes PipelineEngine, pipeline Term, Factors, and other pipeline things to
    docs ([1826](https://github.com/stefan-jansen/zipline/issues/1826))
  id: totrans-1674
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将PipelineEngine、pipeline Term、Factors等管道相关内容添加到文档中（[1826](https://github.com/stefan-jansen/zipline/issues/1826)）
- en: Miscellaneous
  id: totrans-1675
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 其他
- en: Use csv market data with `run_algorithm` so we don’t try to download data for
    tests ([1793](https://github.com/stefan-jansen/zipline/issues/1793))
  id: totrans-1676
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用csv市场数据与`run_algorithm`，这样我们就不需要在测试时尝试下载数据（[1793](https://github.com/stefan-jansen/zipline/issues/1793)）
- en: Updates Dockerfile to use Python 3.5
  id: totrans-1677
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 更新Dockerfile以使用Python 3.5
- en: Highlights
  id: totrans-1678
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 亮点
- en: Zipline now has broad support for futures, in addition to equities. It’s also
    being tested and packaged for Python 3.5.
  id: totrans-1679
  prefs: []
  type: TYPE_NORMAL
  zh: Zipline现在除了股票外，还广泛支持期货。它也正在为Python 3.5进行测试和打包。
- en: We also saw breaking changes occur from Yahoo changing their API endpoint, thus
    preventing users from downloading benchmark data needed for backtests. Since that
    change, we have swapped out Yahoo-related benchmarking code with references to
    Google Finance and have removed all deprecated Yahoo code, including the usage
    of custom Yahoo bundles.
  id: totrans-1680
  prefs: []
  type: TYPE_NORMAL
  zh: 我们还注意到，由于雅虎更改了他们的API端点，导致用户无法下载回测所需的基准数据。自那次更改以来，我们已经将所有与雅虎相关的基准代码替换为对谷歌财经的引用，并删除了所有已弃用的雅虎代码，包括自定义雅虎捆绑包的使用。
- en: Enhancements
  id: totrans-1681
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 增强功能
- en: Adds a property for BarData to know about current session’s minutes ([1713](https://github.com/stefan-jansen/zipline/issues/1713))
  id: totrans-1682
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为BarData添加了一个属性，以了解当前会话的分钟数（[1713](https://github.com/stefan-jansen/zipline/issues/1713)）
- en: Adds a better error message for non-existent root symbols ([1715:](https://github.com/stefan-jansen/zipline/issues/1715:))
  id: totrans-1683
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为不存在的根符号添加了更好的错误消息（[1715](https://github.com/stefan-jansen/zipline/issues/1715)）
- en: Adds `StaticSids` Pipeline Filter ([1717](https://github.com/stefan-jansen/zipline/issues/1717))
  id: totrans-1684
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加了`StaticSids`管道过滤器（[1717](https://github.com/stefan-jansen/zipline/issues/1717)）
- en: Allows `zipline.data.data_portal.DataPortal.get_spot_value` to accept multiple
    assets ([1719](https://github.com/stefan-jansen/zipline/issues/1719))
  id: totrans-1685
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 允许`zipline.data.data_portal.DataPortal.get_spot_value`接受多个资产（[1719](https://github.com/stefan-jansen/zipline/issues/1719)）
- en: Adds `ContinuousFuture` to `lookup_generic` ([1718](https://github.com/stefan-jansen/zipline/issues/1718))
  id: totrans-1686
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将`ContinuousFuture`添加到`lookup_generic`中（[1718](https://github.com/stefan-jansen/zipline/issues/1718)）
- en: Adds CFE Adhoc Holidays to `exchange_calendar_cfe` ([1698](https://github.com/stefan-jansen/zipline/issues/1698))
  id: totrans-1687
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为`exchange_calendar_cfe`添加了CFE临时假日（[1698](https://github.com/stefan-jansen/zipline/issues/1698)）
- en: Allows overriding of order amount rounding ([1722](https://github.com/stefan-jansen/zipline/issues/1722))
  id: totrans-1688
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 允许覆盖订单金额的舍入（[1722](https://github.com/stefan-jansen/zipline/issues/1722)）
- en: Makes continuous future adjustment style an argument ([1726](https://github.com/stefan-jansen/zipline/issues/1726))
  id: totrans-1689
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将连续期货调整风格作为参数（[1726](https://github.com/stefan-jansen/zipline/issues/1726)）
- en: Adds preliminary support for Futures slippage and commission models ([1738](https://github.com/stefan-jansen/zipline/issues/1738))
  id: totrans-1690
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加了对期货滑点和佣金模型的初步支持（[1738](https://github.com/stefan-jansen/zipline/issues/1738)）
- en: Fix a bug in cost basis calculation and change all mentions of `sid` to `asset`
    ([1757](https://github.com/stefan-jansen/zipline/issues/1757))
  id: totrans-1691
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了成本基础计算中的错误，并将所有提及的`sid`改为`asset`（[1757](https://github.com/stefan-jansen/zipline/issues/1757)）
- en: Add slippage and commission models for futures ([1748](https://github.com/stefan-jansen/zipline/issues/1748))
  id: totrans-1692
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加了期货的滑点和佣金模型（[1748](https://github.com/stefan-jansen/zipline/issues/1748)）
- en: Use Python 3.5 in our Dockerfile ([1806](https://github.com/stefan-jansen/zipline/issues/1806))
  id: totrans-1693
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在我们的Dockerfile中使用Python 3.5（[1806](https://github.com/stefan-jansen/zipline/issues/1806)）
- en: Allow pipelines to be run in chunks ([1811](https://github.com/stefan-jansen/zipline/issues/1811))
  id: totrans-1694
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 允许以块的形式运行管道（[1811](https://github.com/stefan-jansen/zipline/issues/1811)）
- en: Adds get_range to BenchmarkSource ([1815](https://github.com/stefan-jansen/zipline/issues/1815))
  id: totrans-1695
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为BenchmarkSource添加了get_range方法（[1815](https://github.com/stefan-jansen/zipline/issues/1815)）
- en: Adds support for relabeling classifiers in Pipeline ([1833](https://github.com/stefan-jansen/zipline/issues/1833))
  id: totrans-1696
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增加了对管道中重新标记分类器的支持（[1833](https://github.com/stefan-jansen/zipline/issues/1833)）
- en: Experimental Features
  id: totrans-1697
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 实验性功能
- en: Warning
  id: totrans-1698
  prefs: []
  type: TYPE_NORMAL
  zh: 警告
- en: Experimental features are subject to change.
  id: totrans-1699
  prefs: []
  type: TYPE_NORMAL
  zh: 实验性功能可能会发生变化。
- en: None
  id: totrans-1700
  prefs: []
  type: TYPE_NORMAL
  zh: 无
- en: Bug Fixes
  id: totrans-1701
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 错误修复
- en: Fixes a floating point division issue in `zipline.data.minute_bars` by using
    integer divison instead ([1683](https://github.com/stefan-jansen/zipline/issues/1683))
  id: totrans-1702
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通过使用整数除法而不是浮点除法，修复了`zipline.data.minute_bars`中的浮点除法问题（[1683](https://github.com/stefan-jansen/zipline/issues/1683)）
- en: Sorts data in `zipline.pipeline.loaders.blaze.core` on `asof_date` to resolve
    timestamp conflicts ([1710](https://github.com/stefan-jansen/zipline/issues/1710))
  id: totrans-1703
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在`asof_date`上对`zipline.pipeline.loaders.blaze.core`中的数据进行排序，以解决时间戳冲突（[1710](https://github.com/stefan-jansen/zipline/issues/1710)）
- en: Swapped out Yahoo for Google Finance benchmark data ([1812](https://github.com/stefan-jansen/zipline/issues/1812))
  id: totrans-1704
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将基准数据从雅虎换成了谷歌财经（[1812](https://github.com/stefan-jansen/zipline/issues/1812)）
- en: Gold and silver futures contracts only traded during certain months ([1779](https://github.com/stefan-jansen/zipline/issues/1779))
  id: totrans-1705
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 黄金和白银期货合约只在特定月份交易（[1779](https://github.com/stefan-jansen/zipline/issues/1779)）
- en: Fixes bug in TradingCalendar initialization when we use tzaware datetimes ([1802](https://github.com/stefan-jansen/zipline/issues/1802))
  id: totrans-1706
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了使用时区感知时间时TradingCalendar初始化中的错误（[1802](https://github.com/stefan-jansen/zipline/issues/1802)）
- en: Fixes precision issues on futures prices when rounding ([1788](https://github.com/stefan-jansen/zipline/issues/1788))
  id: totrans-1707
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了期货价格在四舍五入时的精度问题（[1788](https://github.com/stefan-jansen/zipline/issues/1788)）
- en: Performance
  id: totrans-1708
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 性能
- en: Avoid repeated recursive calls when getting forward-filled close price ([1735](https://github.com/stefan-jansen/zipline/issues/1735))
  id: totrans-1709
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在获取前向填充收盘价时避免重复的递归调用（[1735](https://github.com/stefan-jansen/zipline/issues/1735)）
- en: Maintenance and Refactorings
  id: totrans-1710
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 维护和重构
- en: Adds linter recommendations to adjustments module ([1712](https://github.com/stefan-jansen/zipline/issues/1712))
  id: totrans-1711
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为调整模块添加linter建议（[1712](https://github.com/stefan-jansen/zipline/issues/1712)）
- en: Clears up naming and logic in resample close ([1728](https://github.com/stefan-jansen/zipline/issues/1728))
  id: totrans-1712
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 清理了resample close中的命名和逻辑（[1728](https://github.com/stefan-jansen/zipline/issues/1728)）
- en: Use March quarterly cycle for several continuous futures ([1762](https://github.com/stefan-jansen/zipline/issues/1762))
  id: totrans-1713
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为多个连续期货使用3月季度周期（[1762](https://github.com/stefan-jansen/zipline/issues/1762)）
- en: Use better repr for Transaction objects ([1746](https://github.com/stefan-jansen/zipline/issues/1746))
  id: totrans-1714
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为Transaction对象使用更好的repr（[1746](https://github.com/stefan-jansen/zipline/issues/1746)）
- en: Shorten repr for Asset objects ([1786](https://github.com/stefan-jansen/zipline/issues/1786))
  id: totrans-1715
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 缩短Asset对象的repr（[1786](https://github.com/stefan-jansen/zipline/issues/1786)）
- en: Removes usage of empyrical’s information ratio ([1854](https://github.com/stefan-jansen/zipline/issues/1854))
  id: totrans-1716
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 移除了empyrical的信息比率的使用（[1854](https://github.com/stefan-jansen/zipline/issues/1854)）
- en: Build
  id: totrans-1717
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 构建
- en: Adds Python 3.5 packages ([1701](https://github.com/stefan-jansen/zipline/issues/1701))
  id: totrans-1718
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加Python 3.5包（[1701](https://github.com/stefan-jansen/zipline/issues/1701)）
- en: Swap conda-build arguments so we don’t build packages on every CI build ([1813](https://github.com/stefan-jansen/zipline/issues/1813))
  id: totrans-1719
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 交换conda-build参数，这样我们就不必在每次CI构建时构建包（[1813](https://github.com/stefan-jansen/zipline/issues/1813)）
- en: Documentation
  id: totrans-1720
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 文档
- en: Adds Zipline Development Guidelines, for people to read about how to contribute
    to zipline ([1820](https://github.com/stefan-jansen/zipline/issues/1820))
  id: totrans-1721
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加了Zipline开发指南，供人们阅读如何为Zipline做出贡献（[1820](https://github.com/stefan-jansen/zipline/issues/1820)）
- en: Show exchange as required for equities ([1731](https://github.com/stefan-jansen/zipline/issues/1731))
  id: totrans-1722
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 显示股票所需的交易所（[1731](https://github.com/stefan-jansen/zipline/issues/1731)）
- en: Updates the Zipline Beginner Tutorial notebook ([1707](https://github.com/stefan-jansen/zipline/issues/1707))
  id: totrans-1723
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 更新了Zipline入门教程笔记本（[1707](https://github.com/stefan-jansen/zipline/issues/1707)）
- en: Includes PipelineEngine, pipeline Term, Factors, and other pipeline things to
    docs ([1826](https://github.com/stefan-jansen/zipline/issues/1826))
  id: totrans-1724
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 包括PipelineEngine、pipeline Term、Factors等其他pipeline相关内容到文档中（[1826](https://github.com/stefan-jansen/zipline/issues/1826)）
- en: Miscellaneous
  id: totrans-1725
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 杂项
- en: Use csv market data with `run_algorithm` so we don’t try to download data for
    tests ([1793](https://github.com/stefan-jansen/zipline/issues/1793))
  id: totrans-1726
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用csv市场数据与`run_algorithm`，这样我们就不必为测试下载数据（[1793](https://github.com/stefan-jansen/zipline/issues/1793)）
- en: Updates Dockerfile to use Python 3.5
  id: totrans-1727
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 更新Dockerfile以使用Python 3.5
- en: Release 1.1.0
  id: totrans-1728
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 发布1.1.0
- en: 'Release:'
  id: totrans-1729
  prefs: []
  type: TYPE_NORMAL
  zh: 发布：
- en: 1.1.0
  id: totrans-1730
  prefs: []
  type: TYPE_NORMAL
  zh: 1.1.0
- en: 'Date:'
  id: totrans-1731
  prefs: []
  type: TYPE_NORMAL
  zh: 日期：
- en: March 10, 2017
  id: totrans-1732
  prefs: []
  type: TYPE_NORMAL
  zh: 2017年3月10日
- en: This release is meant to provide zipline support for pandas 0.18, as well as
    several bug fixes, API changes, and many performance changes.
  id: totrans-1733
  prefs: []
  type: TYPE_NORMAL
  zh: 此次发布旨在为pandas 0.18提供Zipline支持，以及多个错误修复、API变更和许多性能改进。
- en: Enhancements
  id: totrans-1734
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 增强功能
- en: Makes the minute bar read catch NoDataOnDate exceptions if dates are not in
    the calendar. Before, the minute bar reader was forward filling, but now it returns
    nan for OHLC and 0 for V. ([1488](https://github.com/stefan-jansen/zipline/issues/1488))
  id: totrans-1735
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果日期不在日历中，使分钟条形图读取捕获NoDataOnDate异常。之前，分钟条形图阅读器是前向填充的，但现在它为OHLC返回nan，为V返回0。（[1488](https://github.com/stefan-jansen/zipline/issues/1488)）
- en: Adds `truncate` method to `BcolzMinuteBarWriter` ([1499](https://github.com/stefan-jansen/zipline/issues/1499))
  id: totrans-1736
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为`BcolzMinuteBarWriter`添加`truncate`方法（[1499](https://github.com/stefan-jansen/zipline/issues/1499)）
- en: Bumps up to pandas 0.18.1 and numpy 1.11.1 ([1339](https://github.com/stefan-jansen/zipline/issues/1339))
  id: totrans-1737
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 升级到pandas 0.18.1和numpy 1.11.1（[1339](https://github.com/stefan-jansen/zipline/issues/1339)）
- en: Adds an earnings estimates quarter loader for Pipeline ([1396](https://github.com/stefan-jansen/zipline/issues/1396))
  id: totrans-1738
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为Pipeline添加了收益估计季度加载器（[1396](https://github.com/stefan-jansen/zipline/issues/1396)）
- en: Creates a restricted list manager that takes in information about restricted
    sids and stores in memory upon instantiation ([1487](https://github.com/stefan-jansen/zipline/issues/1487))
  id: totrans-1739
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 创建了一个受限列表管理器，该管理器在实例化时接收有关受限sid的信息并将其存储在内存中（[1487](https://github.com/stefan-jansen/zipline/issues/1487)）
- en: Adds `last_available{session, minute}` args to `DataPortal` ([1528](https://github.com/stefan-jansen/zipline/issues/1528))
  id: totrans-1740
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为`DataPortal`添加`last_available{session, minute}`参数（[1528](https://github.com/stefan-jansen/zipline/issues/1528)）
- en: Adds `SpecificAssets` filter ([1530](https://github.com/stefan-jansen/zipline/issues/1530))
  id: totrans-1741
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增加了`SpecificAssets`过滤器（[1530](https://github.com/stefan-jansen/zipline/issues/1530)）
- en: Adds the ability for an algorithm to request the current contract for a future
    chain ([1529](https://github.com/stefan-jansen/zipline/issues/1529))
  id: totrans-1742
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增加了算法请求期货链当前合约的能力（[1529](https://github.com/stefan-jansen/zipline/issues/1529)）
- en: Adds `chain` field to current and supporting methods in `DataPortal` and `OrderedContracts`
    ([1538](https://github.com/stefan-jansen/zipline/issues/1538))
  id: totrans-1743
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在`DataPortal`和`OrderedContracts`的当前和支持方法中增加了`chain`字段（[1538](https://github.com/stefan-jansen/zipline/issues/1538)）
- en: Adds history for continuous futures ([1539](https://github.com/stefan-jansen/zipline/issues/1539))
  id: totrans-1744
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增加了连续期货的历史数据（[1539](https://github.com/stefan-jansen/zipline/issues/1539)）
- en: Adds adjusted history for continuous future ([1548](https://github.com/stefan-jansen/zipline/issues/1548))
  id: totrans-1745
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增加了连续期货的调整历史数据（[1548](https://github.com/stefan-jansen/zipline/issues/1548)）
- en: Adds roll style which takes the volume of a future contract into account, specifically
    for continuous futures ([1556](https://github.com/stefan-jansen/zipline/issues/1556))
  id: totrans-1746
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增加了考虑期货合约成交量的滚动风格，特别是针对连续期货（[1556](https://github.com/stefan-jansen/zipline/issues/1556)）
- en: Adds better error message when calling Zipline API functions outside of a running
    simulation ([1593](https://github.com/stefan-jansen/zipline/issues/1593))
  id: totrans-1747
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在非运行模拟中调用Zipline API函数时增加了更好的错误信息（[1593](https://github.com/stefan-jansen/zipline/issues/1593)）
- en: Adds `MACDSignal()`, `MovingAverageConvergenceDivergenceSignal()`, and `AnnualizedVolatility()`
    as built-in factors. ([1588](https://github.com/stefan-jansen/zipline/issues/1588))
  id: totrans-1748
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增加了`MACDSignal()`、`MovingAverageConvergenceDivergenceSignal()`和`AnnualizedVolatility()`作为内置因子（[1588](https://github.com/stefan-jansen/zipline/issues/1588)）
- en: Allows running pipelines with custom date chunks in `attach_pipeline` ([1617](https://github.com/stefan-jansen/zipline/issues/1617))
  id: totrans-1749
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 允许在`attach_pipeline`中使用自定义日期块运行管道（[1617](https://github.com/stefan-jansen/zipline/issues/1617)）
- en: Adds `order_batch` to the trade blotter ([1596](https://github.com/stefan-jansen/zipline/issues/1596))
  id: totrans-1750
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在交易记录中增加了`order_batch`功能（[1596](https://github.com/stefan-jansen/zipline/issues/1596)）
- en: Adds vectorized lookup_symbol ([1627](https://github.com/stefan-jansen/zipline/issues/1627))
  id: totrans-1751
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增加了向量化查找符号功能（[1627](https://github.com/stefan-jansen/zipline/issues/1627)）
- en: Solidifies equality comparisons for SlippageModel classes ([1657](https://github.com/stefan-jansen/zipline/issues/1657))
  id: totrans-1752
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 加强了SlippageModel类之间的等式比较（[1657](https://github.com/stefan-jansen/zipline/issues/1657)）
- en: Adds a factor for winsorized results ([1696](https://github.com/stefan-jansen/zipline/issues/1696))
  id: totrans-1753
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增加了用于缩尾结果的因子（[1696](https://github.com/stefan-jansen/zipline/issues/1696)）
- en: Bug Fixes
  id: totrans-1754
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 错误修复
- en: Changes str to string_types to avoid errors when type checking unicode and not
    str type. ([1315](https://github.com/stefan-jansen/zipline/issues/1315))
  id: totrans-1755
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将`str`改为`string_types`以避免在类型检查unicode而不是str类型时出错（[1315](https://github.com/stefan-jansen/zipline/issues/1315)）
- en: Algorithms default to quantopian-quandl bundle when no data source is specified
    ([1479](https://github.com/stefan-jansen/zipline/issues/1479)) ([1374](https://github.com/stefan-jansen/zipline/issues/1374))
  id: totrans-1756
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当未指定数据源时，算法默认使用quantopian-quandl数据包（[1479](https://github.com/stefan-jansen/zipline/issues/1479)）（[1374](https://github.com/stefan-jansen/zipline/issues/1374)）
- en: Catches all missing data exceptions when computing dividend ratios ([1507](https://github.com/stefan-jansen/zipline/issues/1507))
  id: totrans-1757
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在计算股息比率时捕获所有缺失数据异常（[1507](https://github.com/stefan-jansen/zipline/issues/1507)）
- en: Creates adjustments based on ordered assets instead of a set. Before, adjustments
    were created for estimates based on where assets happened to fall in a set rather
    than using ordered assets ([1547](https://github.com/stefan-jansen/zipline/issues/1547))
  id: totrans-1758
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 根据有序资产而不是集合创建调整。之前，调整是根据资产在集合中的位置而不是有序资产来估计的（[1547](https://github.com/stefan-jansen/zipline/issues/1547)）
- en: Fixes blaze pipeline queries for when users query for the `asof_date` column
    ([1608](https://github.com/stefan-jansen/zipline/issues/1608))
  id: totrans-1759
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了用户查询`asof_date`列时的blaze管道查询问题（[1608](https://github.com/stefan-jansen/zipline/issues/1608)）
- en: Datetimes should be converted in utc. DataFrames being returned were creating
    US/Eastern timestamps out of the ints, potentially changing the date returned
    to be the date before ([1635](https://github.com/stefan-jansen/zipline/issues/1635))
  id: totrans-1760
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 应将日期时间转换为UTC格式。返回的DataFrame将整数转换为美国/东部时间戳，可能导致返回的日期变为前一天的日期（[1635](https://github.com/stefan-jansen/zipline/issues/1635)）
- en: Fixes default inputs for `IchimokuKinkoHyo` factor ([1638](https://github.com/stefan-jansen/zipline/issues/1638))
  id: totrans-1761
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了`IchimokuKinkoHyo`因子的默认输入（[1638](https://github.com/stefan-jansen/zipline/issues/1638)）
- en: Performance
  id: totrans-1762
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 性能改进
- en: Removes invocations of `get_calendar('NYSE')` which cuts down zipline import
    time and makes the CLI more responsive and use less memory. ([1471](https://github.com/stefan-jansen/zipline/issues/1471))
  id: totrans-1763
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 移除了`get_calendar('NYSE')`的调用，减少了zipline的导入时间，使CLI更加响应迅速且使用更少的内存（[1471](https://github.com/stefan-jansen/zipline/issues/1471)）
- en: Refcounts and releases pipeline terms when they are no longer needed ([1484](https://github.com/stefan-jansen/zipline/issues/1484))
  id: totrans-1764
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在不再需要时对管道术语进行引用计数和释放（[1484](https://github.com/stefan-jansen/zipline/issues/1484)）
- en: Saves up to 75% of calls to minute_to_session_label ([1492](https://github.com/stefan-jansen/zipline/issues/1492))
  id: totrans-1765
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 最多可减少75%的minute_to_session_label调用次数（[1492](https://github.com/stefan-jansen/zipline/issues/1492)）
- en: Speeds up counting of number of minutes across contiguous session ([1497](https://github.com/stefan-jansen/zipline/issues/1497))
  id: totrans-1766
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 加快了连续会话中分钟数的计数速度（[1497](https://github.com/stefan-jansen/zipline/issues/1497)）
- en: Removes/defers calls to get_loc on large indices ([1504](https://github.com/stefan-jansen/zipline/issues/1504))
    ([1503](https://github.com/stefan-jansen/zipline/issues/1503))
  id: totrans-1767
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 移除/推迟了对大型索引的get_loc调用（[1504](https://github.com/stefan-jansen/zipline/issues/1504)）（[1503](https://github.com/stefan-jansen/zipline/issues/1503)）
- en: Replaces `get_loc` calls in `calc_dividend_ratios` with `get_indexer` ([1510](https://github.com/stefan-jansen/zipline/issues/1510))
  id: totrans-1768
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在`calc_dividend_ratios`中用`get_indexer`替换了`get_loc`调用（[1510](https://github.com/stefan-jansen/zipline/issues/1510)）
- en: Speeds up minute to session sampling ([1549](https://github.com/stefan-jansen/zipline/issues/1549))
  id: totrans-1769
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 加快了分钟到会话的采样速度（[1549](https://github.com/stefan-jansen/zipline/issues/1549)）
- en: Adds some micro optimizations in `data.current` ([1561](https://github.com/stefan-jansen/zipline/issues/1561))
  id: totrans-1770
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在`data.current`中增加了一些微优化（[1561](https://github.com/stefan-jansen/zipline/issues/1561)）
- en: Adds optimization for initial workspace for pipelines ([1521](https://github.com/stefan-jansen/zipline/issues/1521))
  id: totrans-1771
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为管道初始工作区增加了优化（[1521](https://github.com/stefan-jansen/zipline/issues/1521)）
- en: More memory savings ([1599](https://github.com/stefan-jansen/zipline/issues/1599))
  id: totrans-1772
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 更多的内存节省（[1599](https://github.com/stefan-jansen/zipline/issues/1599)）
- en: Maintenance and Refactorings
  id: totrans-1773
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 维护和重构
- en: Updates leveraged ETF list ([747](https://github.com/stefan-jansen/zipline/issues/747))
    ([1434](https://github.com/stefan-jansen/zipline/issues/1434))
  id: totrans-1774
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 更新了杠杆ETF列表（[747](https://github.com/stefan-jansen/zipline/issues/747)）（[1434](https://github.com/stefan-jansen/zipline/issues/1434)）
- en: Adds additional fields to `__getitem__` for Order class ([1483](https://github.com/stefan-jansen/zipline/issues/1483))
  id: totrans-1775
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为Order类的`__getitem__`增加了额外的字段（[1483](https://github.com/stefan-jansen/zipline/issues/1483)）
- en: Adds `BarReader` base class for minute and session readers ([1486](https://github.com/stefan-jansen/zipline/issues/1486))
  id: totrans-1776
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为分钟和会话阅读器增加了`BarReader`基类（[1486](https://github.com/stefan-jansen/zipline/issues/1486)）
- en: Removes `future_chain` API method, to be replaced by `data.current_chain` ([1502](https://github.com/stefan-jansen/zipline/issues/1502))
  id: totrans-1777
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 移除了`future_chain` API方法，将由`data.current_chain`替代（[1502](https://github.com/stefan-jansen/zipline/issues/1502)）
- en: Puts zipline back on blaze master ([1505](https://github.com/stefan-jansen/zipline/issues/1505))
  id: totrans-1778
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将zipline重新放回blaze master（[1505](https://github.com/stefan-jansen/zipline/issues/1505)）
- en: Adds Tini and sets version range for numpy, pandas, and scipy in Dockerfile
    ([1514](https://github.com/stefan-jansen/zipline/issues/1514))
  id: totrans-1779
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在Dockerfile中添加了Tini，并设置了numpy、pandas和scipy的版本范围（[1514](https://github.com/stefan-jansen/zipline/issues/1514)）
- en: Deprecates `set_do_not_order_list` ([1487](https://github.com/stefan-jansen/zipline/issues/1487))
  id: totrans-1780
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 弃用了`set_do_not_order_list`（[1487](https://github.com/stefan-jansen/zipline/issues/1487)）
- en: Uses `Timedelta` instead of `DateOffset` ([1487](https://github.com/stefan-jansen/zipline/issues/1487))
  id: totrans-1781
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用`Timedelta`代替了`DateOffset`（[1487](https://github.com/stefan-jansen/zipline/issues/1487)）
- en: Update and pin more dev requirements ([1642](https://github.com/stefan-jansen/zipline/issues/1642))
  id: totrans-1782
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 更新并固定了更多的开发需求（[1642](https://github.com/stefan-jansen/zipline/issues/1642)）
- en: Build
  id: totrans-1783
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 构建
- en: Adds binary dependency on numpy for empyrical
  id: totrans-1784
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为empyrical增加了numpy的二进制依赖
- en: Removes old numpy/pandas versions from Travis ([1339](https://github.com/stefan-jansen/zipline/issues/1339))
  id: totrans-1785
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从Travis中移除了旧的numpy/pandas版本（[1339](https://github.com/stefan-jansen/zipline/issues/1339)）
- en: Updates appveyor.yml for new numpy and pandas ([1339](https://github.com/stefan-jansen/zipline/issues/1339))
  id: totrans-1786
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 更新了appveyor.yml以适配新的numpy和pandas版本（[1339](https://github.com/stefan-jansen/zipline/issues/1339)）
- en: Downgrades to scipy 0.17 ([1339](https://github.com/stefan-jansen/zipline/issues/1339))
  id: totrans-1787
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 降级到scipy 0.17（[1339](https://github.com/stefan-jansen/zipline/issues/1339)）
- en: Bumps empyrical to 0.2.2
  id: totrans-1788
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将empyrical升级到0.2.2
- en: Documentation
  id: totrans-1789
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 文档
- en: Updated example notebook for latest zipline cell magic
  id: totrans-1790
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 更新了最新的zipline单元魔法的示例笔记本
- en: Adds ANACONDA_TOKEN directions ([1589](https://github.com/stefan-jansen/zipline/issues/1589))
  id: totrans-1791
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增加了ANACONDA_TOKEN的指引（[1589](https://github.com/stefan-jansen/zipline/issues/1589)）
- en: Miscellaneous
  id: totrans-1792
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 杂项
- en: Changed the short-opt for `--before` in the `zipline clean` entrypoint. The
    new argument is `-e`. The old argument, `-b`, conflicted with the `--bundle` short-opt
    ([1625](https://github.com/stefan-jansen/zipline/issues/1625)).
  id: totrans-1793
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 更改了 `zipline clean` 入口点中 `--before` 的短选项。新参数是 `-e`。旧参数 `-b` 与 `--bundle` 短选项冲突。([1625](https://github.com/stefan-jansen/zipline/issues/1625))
- en: Enhancements
  id: totrans-1794
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 增强功能
- en: Makes the minute bar read catch NoDataOnDate exceptions if dates are not in
    the calendar. Before, the minute bar reader was forward filling, but now it returns
    nan for OHLC and 0 for V. ([1488](https://github.com/stefan-jansen/zipline/issues/1488))
  id: totrans-1795
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果日期不在日历中，分钟条形图读取会捕获 NoDataOnDate 异常。之前，分钟条形图读取器是向前填充的，但现在它为 OHLC 返回 nan，为 V
    返回 0。([1488](https://github.com/stefan-jansen/zipline/issues/1488))
- en: Adds `truncate` method to `BcolzMinuteBarWriter` ([1499](https://github.com/stefan-jansen/zipline/issues/1499))
  id: totrans-1796
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为 `BcolzMinuteBarWriter` 增加了 `truncate` 方法。([1499](https://github.com/stefan-jansen/zipline/issues/1499))
- en: Bumps up to pandas 0.18.1 and numpy 1.11.1 ([1339](https://github.com/stefan-jansen/zipline/issues/1339))
  id: totrans-1797
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 升级至 pandas 0.18.1 和 numpy 1.11.1。([1339](https://github.com/stefan-jansen/zipline/issues/1339))
- en: Adds an earnings estimates quarter loader for Pipeline ([1396](https://github.com/stefan-jansen/zipline/issues/1396))
  id: totrans-1798
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为 Pipeline 增加了季度盈利预测加载器。([1396](https://github.com/stefan-jansen/zipline/issues/1396))
- en: Creates a restricted list manager that takes in information about restricted
    sids and stores in memory upon instantiation ([1487](https://github.com/stefan-jansen/zipline/issues/1487))
  id: totrans-1799
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 创建了一个受限列表管理器，它在实例化时接收有关受限 sid 的信息并存储在内存中。([1487](https://github.com/stefan-jansen/zipline/issues/1487))
- en: Adds `last_available{session, minute}` args to `DataPortal` ([1528](https://github.com/stefan-jansen/zipline/issues/1528))
  id: totrans-1800
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在 `DataPortal` 中增加了 `last_available{session, minute}` 参数。([1528](https://github.com/stefan-jansen/zipline/issues/1528))
- en: Adds `SpecificAssets` filter ([1530](https://github.com/stefan-jansen/zipline/issues/1530))
  id: totrans-1801
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增加了 `SpecificAssets` 过滤器。([1530](https://github.com/stefan-jansen/zipline/issues/1530))
- en: Adds the ability for an algorithm to request the current contract for a future
    chain ([1529](https://github.com/stefan-jansen/zipline/issues/1529))
  id: totrans-1802
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增加了算法请求未来链当前合约的能力。([1529](https://github.com/stefan-jansen/zipline/issues/1529))
- en: Adds `chain` field to current and supporting methods in `DataPortal` and `OrderedContracts`
    ([1538](https://github.com/stefan-jansen/zipline/issues/1538))
  id: totrans-1803
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在 `DataPortal` 和 `OrderedContracts` 的当前和支持方法中增加了 `chain` 字段。([1538](https://github.com/stefan-jansen/zipline/issues/1538))
- en: Adds history for continuous futures ([1539](https://github.com/stefan-jansen/zipline/issues/1539))
  id: totrans-1804
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增加了连续期货的历史记录。([1539](https://github.com/stefan-jansen/zipline/issues/1539))
- en: Adds adjusted history for continuous future ([1548](https://github.com/stefan-jansen/zipline/issues/1548))
  id: totrans-1805
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为连续期货增加了调整后的历史记录。([1548](https://github.com/stefan-jansen/zipline/issues/1548))
- en: Adds roll style which takes the volume of a future contract into account, specifically
    for continuous futures ([1556](https://github.com/stefan-jansen/zipline/issues/1556))
  id: totrans-1806
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增加了考虑未来合约成交量的滚动风格，特别针对连续期货。([1556](https://github.com/stefan-jansen/zipline/issues/1556))
- en: Adds better error message when calling Zipline API functions outside of a running
    simulation ([1593](https://github.com/stefan-jansen/zipline/issues/1593))
  id: totrans-1807
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在非运行模拟中调用 Zipline API 函数时，增加了更好的错误消息。([1593](https://github.com/stefan-jansen/zipline/issues/1593))
- en: Adds `MACDSignal()`, `MovingAverageConvergenceDivergenceSignal()`, and `AnnualizedVolatility()`
    as built-in factors. ([1588](https://github.com/stefan-jansen/zipline/issues/1588))
  id: totrans-1808
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增加了 `MACDSignal()`、`MovingAverageConvergenceDivergenceSignal()` 和 `AnnualizedVolatility()`
    作为内置因子。([1588](https://github.com/stefan-jansen/zipline/issues/1588))
- en: Allows running pipelines with custom date chunks in `attach_pipeline` ([1617](https://github.com/stefan-jansen/zipline/issues/1617))
  id: totrans-1809
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 允许在 `attach_pipeline` 中使用自定义日期块运行管道。([1617](https://github.com/stefan-jansen/zipline/issues/1617))
- en: Adds `order_batch` to the trade blotter ([1596](https://github.com/stefan-jansen/zipline/issues/1596))
  id: totrans-1810
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在交易记录中增加了 `order_batch`。([1596](https://github.com/stefan-jansen/zipline/issues/1596))
- en: Adds vectorized lookup_symbol ([1627](https://github.com/stefan-jansen/zipline/issues/1627))
  id: totrans-1811
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增加了矢量化的 lookup_symbol。([1627](https://github.com/stefan-jansen/zipline/issues/1627))
- en: Solidifies equality comparisons for SlippageModel classes ([1657](https://github.com/stefan-jansen/zipline/issues/1657))
  id: totrans-1812
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 加强了 SlippageModel 类的相等比较。([1657](https://github.com/stefan-jansen/zipline/issues/1657))
- en: Adds a factor for winsorized results ([1696](https://github.com/stefan-jansen/zipline/issues/1696))
  id: totrans-1813
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增加了截断结果的因素。([1696](https://github.com/stefan-jansen/zipline/issues/1696))
- en: Bug Fixes
  id: totrans-1814
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 错误修复
- en: Changes str to string_types to avoid errors when type checking unicode and not
    str type. ([1315](https://github.com/stefan-jansen/zipline/issues/1315))
  id: totrans-1815
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将 str 改为 string_types 以避免在检查 unicode 类型而非 str 类型时出现错误。([1315](https://github.com/stefan-jansen/zipline/issues/1315))
- en: Algorithms default to quantopian-quandl bundle when no data source is specified
    ([1479](https://github.com/stefan-jansen/zipline/issues/1479)) ([1374](https://github.com/stefan-jansen/zipline/issues/1374))
  id: totrans-1816
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当未指定数据源时，算法默认使用quantopian-quandl包（[1479](https://github.com/stefan-jansen/zipline/issues/1479)）（[1374](https://github.com/stefan-jansen/zipline/issues/1374)）
- en: Catches all missing data exceptions when computing dividend ratios ([1507](https://github.com/stefan-jansen/zipline/issues/1507))
  id: totrans-1817
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在计算股息比率时捕获所有缺失数据的异常（[1507](https://github.com/stefan-jansen/zipline/issues/1507)）
- en: Creates adjustments based on ordered assets instead of a set. Before, adjustments
    were created for estimates based on where assets happened to fall in a set rather
    than using ordered assets ([1547](https://github.com/stefan-jansen/zipline/issues/1547))
  id: totrans-1818
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 根据有序资产而不是集合创建调整。之前，调整是根据资产在集合中恰好出现的位置而不是使用有序资产来创建的估计（[1547](https://github.com/stefan-jansen/zipline/issues/1547)）
- en: Fixes blaze pipeline queries for when users query for the `asof_date` column
    ([1608](https://github.com/stefan-jansen/zipline/issues/1608))
  id: totrans-1819
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了当用户查询`asof_date`列时对blaze pipeline查询的修复（[1608](https://github.com/stefan-jansen/zipline/issues/1608)）
- en: Datetimes should be converted in utc. DataFrames being returned were creating
    US/Eastern timestamps out of the ints, potentially changing the date returned
    to be the date before ([1635](https://github.com/stefan-jansen/zipline/issues/1635))
  id: totrans-1820
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 日期时间应以utc转换。返回的DataFrames正在将ints转换为US/Eastern时间戳，可能会将返回的日期更改为前一天的日期（[1635](https://github.com/stefan-jansen/zipline/issues/1635)）
- en: Fixes default inputs for `IchimokuKinkoHyo` factor ([1638](https://github.com/stefan-jansen/zipline/issues/1638))
  id: totrans-1821
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了`IchimokuKinkoHyo`因子的默认输入（[1638](https://github.com/stefan-jansen/zipline/issues/1638)）
- en: Performance
  id: totrans-1822
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 性能
- en: Removes invocations of `get_calendar('NYSE')` which cuts down zipline import
    time and makes the CLI more responsive and use less memory. ([1471](https://github.com/stefan-jansen/zipline/issues/1471))
  id: totrans-1823
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 移除了`get_calendar('NYSE')`的调用，这减少了zipline的导入时间，使CLI更加响应迅速且使用更少的内存（[1471](https://github.com/stefan-jansen/zipline/issues/1471)）
- en: Refcounts and releases pipeline terms when they are no longer needed ([1484](https://github.com/stefan-jansen/zipline/issues/1484))
  id: totrans-1824
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在不再需要时对pipeline术语进行引用计数和释放（[1484](https://github.com/stefan-jansen/zipline/issues/1484)）
- en: Saves up to 75% of calls to minute_to_session_label ([1492](https://github.com/stefan-jansen/zipline/issues/1492))
  id: totrans-1825
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 最多节省了75%的minute_to_session_label调用（[1492](https://github.com/stefan-jansen/zipline/issues/1492)）
- en: Speeds up counting of number of minutes across contiguous session ([1497](https://github.com/stefan-jansen/zipline/issues/1497))
  id: totrans-1826
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 加快了连续会话中分钟数的计数（[1497](https://github.com/stefan-jansen/zipline/issues/1497)）
- en: Removes/defers calls to get_loc on large indices ([1504](https://github.com/stefan-jansen/zipline/issues/1504))
    ([1503](https://github.com/stefan-jansen/zipline/issues/1503))
  id: totrans-1827
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 移除或推迟对大型索引的get_loc调用（[1504](https://github.com/stefan-jansen/zipline/issues/1504)）（[1503](https://github.com/stefan-jansen/zipline/issues/1503)）
- en: Replaces `get_loc` calls in `calc_dividend_ratios` with `get_indexer` ([1510](https://github.com/stefan-jansen/zipline/issues/1510))
  id: totrans-1828
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在`calc_dividend_ratios`中用`get_indexer`替换`get_loc`调用（[1510](https://github.com/stefan-jansen/zipline/issues/1510)）
- en: Speeds up minute to session sampling ([1549](https://github.com/stefan-jansen/zipline/issues/1549))
  id: totrans-1829
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 加快了分钟到会话采样（[1549](https://github.com/stefan-jansen/zipline/issues/1549)）
- en: Adds some micro optimizations in `data.current` ([1561](https://github.com/stefan-jansen/zipline/issues/1561))
  id: totrans-1830
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在`data.current`中添加了一些微优化（[1561](https://github.com/stefan-jansen/zipline/issues/1561)）
- en: Adds optimization for initial workspace for pipelines ([1521](https://github.com/stefan-jansen/zipline/issues/1521))
  id: totrans-1831
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为pipeline的初始工作区添加了优化（[1521](https://github.com/stefan-jansen/zipline/issues/1521)）
- en: More memory savings ([1599](https://github.com/stefan-jansen/zipline/issues/1599))
  id: totrans-1832
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 更多的内存节省（[1599](https://github.com/stefan-jansen/zipline/issues/1599)）
- en: Maintenance and Refactorings
  id: totrans-1833
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 维护和重构
- en: Updates leveraged ETF list ([747](https://github.com/stefan-jansen/zipline/issues/747))
    ([1434](https://github.com/stefan-jansen/zipline/issues/1434))
  id: totrans-1834
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 更新了杠杆ETF列表（[747](https://github.com/stefan-jansen/zipline/issues/747)）（[1434](https://github.com/stefan-jansen/zipline/issues/1434)）
- en: Adds additional fields to `__getitem__` for Order class ([1483](https://github.com/stefan-jansen/zipline/issues/1483))
  id: totrans-1835
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为Order类的`__getitem__`添加了其他字段（[1483](https://github.com/stefan-jansen/zipline/issues/1483)）
- en: Adds `BarReader` base class for minute and session readers ([1486](https://github.com/stefan-jansen/zipline/issues/1486))
  id: totrans-1836
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为分钟和会话阅读器添加了`BarReader`基类（[1486](https://github.com/stefan-jansen/zipline/issues/1486)）
- en: Removes `future_chain` API method, to be replaced by `data.current_chain` ([1502](https://github.com/stefan-jansen/zipline/issues/1502))
  id: totrans-1837
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 移除了`future_chain` API方法，将由`data.current_chain`替换（[1502](https://github.com/stefan-jansen/zipline/issues/1502)）
- en: Puts zipline back on blaze master ([1505](https://github.com/stefan-jansen/zipline/issues/1505))
  id: totrans-1838
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将zipline重新放回blaze主分支（[1505](https://github.com/stefan-jansen/zipline/issues/1505)）
- en: Adds Tini and sets version range for numpy, pandas, and scipy in Dockerfile
    ([1514](https://github.com/stefan-jansen/zipline/issues/1514))
  id: totrans-1839
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在Dockerfile中添加了Tini，并设置了numpy、pandas和scipy的版本范围（[1514](https://github.com/stefan-jansen/zipline/issues/1514)）
- en: Deprecates `set_do_not_order_list` ([1487](https://github.com/stefan-jansen/zipline/issues/1487))
  id: totrans-1840
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 弃用了`set_do_not_order_list`（[1487](https://github.com/stefan-jansen/zipline/issues/1487)）
- en: Uses `Timedelta` instead of `DateOffset` ([1487](https://github.com/stefan-jansen/zipline/issues/1487))
  id: totrans-1841
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用`Timedelta`代替`DateOffset`（[1487](https://github.com/stefan-jansen/zipline/issues/1487)）
- en: Update and pin more dev requirements ([1642](https://github.com/stefan-jansen/zipline/issues/1642))
  id: totrans-1842
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 更新并固定更多的开发要求（[1642](https://github.com/stefan-jansen/zipline/issues/1642)）
- en: Build
  id: totrans-1843
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 构建
- en: Adds binary dependency on numpy for empyrical
  id: totrans-1844
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为empyrical添加了numpy的二进制依赖
- en: Removes old numpy/pandas versions from Travis ([1339](https://github.com/stefan-jansen/zipline/issues/1339))
  id: totrans-1845
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从Travis中移除了旧的numpy/pandas版本（[1339](https://github.com/stefan-jansen/zipline/issues/1339)）
- en: Updates appveyor.yml for new numpy and pandas ([1339](https://github.com/stefan-jansen/zipline/issues/1339))
  id: totrans-1846
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 更新了appveyor.yml以适应新的numpy和pandas（[1339](https://github.com/stefan-jansen/zipline/issues/1339)）
- en: Downgrades to scipy 0.17 ([1339](https://github.com/stefan-jansen/zipline/issues/1339))
  id: totrans-1847
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 降级到scipy 0.17（[1339](https://github.com/stefan-jansen/zipline/issues/1339)）
- en: Bumps empyrical to 0.2.2
  id: totrans-1848
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将empyrical升级到0.2.2
- en: Documentation
  id: totrans-1849
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 文档
- en: Updated example notebook for latest zipline cell magic
  id: totrans-1850
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 更新了最新的zipline单元魔法示例笔记本
- en: Adds ANACONDA_TOKEN directions ([1589](https://github.com/stefan-jansen/zipline/issues/1589))
  id: totrans-1851
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加了ANACONDA_TOKEN指令（[1589](https://github.com/stefan-jansen/zipline/issues/1589)）
- en: Miscellaneous
  id: totrans-1852
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 杂项
- en: Changed the short-opt for `--before` in the `zipline clean` entrypoint. The
    new argument is `-e`. The old argument, `-b`, conflicted with the `--bundle` short-opt
    ([1625](https://github.com/stefan-jansen/zipline/issues/1625)).
  id: totrans-1853
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在`zipline clean`入口点中更改了`--before`的短选项。新的参数是`-e`。旧参数`-b`与`--bundle`短选项冲突（[1625](https://github.com/stefan-jansen/zipline/issues/1625)）。
- en: Release 1.0.2
  id: totrans-1854
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 发布1.0.2
- en: 'Release:'
  id: totrans-1855
  prefs: []
  type: TYPE_NORMAL
  zh: 发布：
- en: 1.0.2
  id: totrans-1856
  prefs: []
  type: TYPE_NORMAL
  zh: 1.0.2
- en: 'Date:'
  id: totrans-1857
  prefs: []
  type: TYPE_NORMAL
  zh: 日期：
- en: September 8, 2016
  id: totrans-1858
  prefs: []
  type: TYPE_NORMAL
  zh: 2016年9月8日
- en: Enhancements
  id: totrans-1859
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 增强功能
- en: Adds forward fill checkpoint tables for the blaze core loader. This allow the
    loader to more efficiently forward fill the data by capping the lower date it
    must search for when querying data. The checkpoints should have novel deltas applied
    ([1276](https://github.com/stefan-jansen/zipline/issues/1276)).
  id: totrans-1860
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为blaze核心加载器添加了前向填充检查点表。这允许加载器更有效地通过限制必须搜索的较低日期来查询数据时进行前向填充。检查点应该应用新的增量（[1276](https://github.com/stefan-jansen/zipline/issues/1276)）。
- en: Updated VagrantFile to include all dev requirements and use a newer image ([1310](https://github.com/stefan-jansen/zipline/issues/1310)).
  id: totrans-1861
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 更新了VagrantFile以包含所有开发要求并使用更新的镜像（[1310](https://github.com/stefan-jansen/zipline/issues/1310)）。
- en: Allow correlations and regressions to be computed between two 2D factors by
    doing computations asset-wise ([1307](https://github.com/stefan-jansen/zipline/issues/1307)).
  id: totrans-1862
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 允许在两个2D因子之间计算相关性和回归，通过进行资产级别的计算（[1307](https://github.com/stefan-jansen/zipline/issues/1307)）。
- en: Filters have been made window_safe by default. Now they can be passed in as
    arguments to other Filters, Factors and Classifiers ([1338](https://github.com/stefan-jansen/zipline/issues/1338)).
  id: totrans-1863
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 过滤器默认已设置为窗口安全。现在它们可以作为参数传递给其他过滤器、因子和分类器（[1338](https://github.com/stefan-jansen/zipline/issues/1338)）。
- en: Added an optional `groupby` parameter to `rank()`, `top()`, and `bottom()`.
    ([1349](https://github.com/stefan-jansen/zipline/issues/1349)).
  id: totrans-1864
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为`rank()`、`top()`和`bottom()`添加了可选的`groupby`参数（[1349](https://github.com/stefan-jansen/zipline/issues/1349)）。
- en: Added new pipeline filters, [`All`](api-reference.html#zipline.pipeline.filters.All
    "zipline.pipeline.filters.All") and [`Any`](api-reference.html#zipline.pipeline.filters.Any
    "zipline.pipeline.filters.Any"), which takes another filter and returns True if
    an asset produced a True for any/all days in the previous `window_length` days
    ([1358](https://github.com/stefan-jansen/zipline/issues/1358)).
  id: totrans-1865
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加了新的管道过滤器，[`All`](api-reference.html#zipline.pipeline.filters.All "zipline.pipeline.filters.All")
    和 [`Any`](api-reference.html#zipline.pipeline.filters.Any "zipline.pipeline.filters.Any")，它接受另一个过滤器，并返回True，如果资产在前`window_length`天内为任何/所有天产生True（[1358](https://github.com/stefan-jansen/zipline/issues/1358)）。
- en: Added new pipeline filter [`AtLeastN`](api-reference.html#zipline.pipeline.filters.AtLeastN
    "zipline.pipeline.filters.AtLeastN"), which takes another filter and an int N
    and returns True if an asset produced a True on N or more days in the previous
    `window_length` days ([1367](https://github.com/stefan-jansen/zipline/issues/1367)).
  id: totrans-1866
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加了新的管道过滤器[`AtLeastN`](api-reference.html#zipline.pipeline.filters.AtLeastN
    "zipline.pipeline.filters.AtLeastN")，它接受另一个过滤器和一个整数N，如果资产在之前的`window_length`天内产生True的天数为N或更多，则返回True。([1367](https://github.com/stefan-jansen/zipline/issues/1367))
- en: Use external library empyrical for risk calculations. Empyrical unifies risk
    metric calculations between pyfolio and zipline. Empyrical adds custom annualization
    options for returns of custom frequencies. ([855](https://github.com/stefan-jansen/zipline/issues/855))
  id: totrans-1867
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用外部库empyrical进行风险计算。Empyrical统一了pyfolio和zipline之间的风险度量计算。Empyrical为自定义频率的回报添加了自定义年化选项。([855](https://github.com/stefan-jansen/zipline/issues/855))
- en: Add Aroon factor. ([1258](https://github.com/stefan-jansen/zipline/issues/1258))
  id: totrans-1868
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加Aroon因子。([1258](https://github.com/stefan-jansen/zipline/issues/1258))
- en: Add fast stochastic oscillator factor. ([1255](https://github.com/stefan-jansen/zipline/issues/1255))
  id: totrans-1869
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加快速随机振荡器因子。([1255](https://github.com/stefan-jansen/zipline/issues/1255))
- en: Add a Dockerfile. ([1254](https://github.com/stefan-jansen/zipline/issues/1254))
  id: totrans-1870
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加Dockerfile。([1254](https://github.com/stefan-jansen/zipline/issues/1254))
- en: New trading calendar which supports sessions which span across midnights, e.g.
    24 hour 6:01PM-6:00PM sessions for futures trading. zipline.utils.tradingcalendar
    is now deprecated. ([1138](https://github.com/stefan-jansen/zipline/issues/1138))
    ([1312](https://github.com/stefan-jansen/zipline/issues/1312))
  id: totrans-1871
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新增支持跨午夜时段的交易日历，例如期货交易的24小时6:01PM-6:00PM时段。zipline.utils.tradingcalendar现已弃用。([1138](https://github.com/stefan-jansen/zipline/issues/1138))
    ([1312](https://github.com/stefan-jansen/zipline/issues/1312))
- en: Allow slicing a single column out of a Factor/Filter/Classifier. ([1267](https://github.com/stefan-jansen/zipline/issues/1267))
  id: totrans-1872
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 允许从因子/过滤器/分类器中提取单个列。([1267](https://github.com/stefan-jansen/zipline/issues/1267))
- en: Provide Ichimoku Cloud factor ([1263](https://github.com/stefan-jansen/zipline/issues/1263))
  id: totrans-1873
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 提供Ichimoku云因子。([1263](https://github.com/stefan-jansen/zipline/issues/1263))
- en: Allow default parameters on Pipeline terms. ([1263](https://github.com/stefan-jansen/zipline/issues/1263))
  id: totrans-1874
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 允许在管道术语上设置默认参数。([1263](https://github.com/stefan-jansen/zipline/issues/1263))
- en: Provide rate of change percentage factor. ([1324](https://github.com/stefan-jansen/zipline/issues/1324))
  id: totrans-1875
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 提供变化率百分比因子。([1324](https://github.com/stefan-jansen/zipline/issues/1324))
- en: Provide linear weighted moving average factor. ([1325](https://github.com/stefan-jansen/zipline/issues/1325))
  id: totrans-1876
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 提供线性加权移动平均因子。([1325](https://github.com/stefan-jansen/zipline/issues/1325))
- en: Add `NotNullFilter`. ([1345](https://github.com/stefan-jansen/zipline/issues/1345))
  id: totrans-1877
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加`NotNullFilter`。([1345](https://github.com/stefan-jansen/zipline/issues/1345))
- en: Allow capital changes to be defined by a target value. ([1337](https://github.com/stefan-jansen/zipline/issues/1337))
  id: totrans-1878
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 允许通过目标值定义资本变动。([1337](https://github.com/stefan-jansen/zipline/issues/1337))
- en: Add `TrueRange` factor. ([1348](https://github.com/stefan-jansen/zipline/issues/1348))
  id: totrans-1879
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加`TrueRange`因子。([1348](https://github.com/stefan-jansen/zipline/issues/1348))
- en: Add point in time lookups to `assets.db`. ([1361](https://github.com/stefan-jansen/zipline/issues/1361))
  id: totrans-1880
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为`assets.db`添加时点查询功能。([1361](https://github.com/stefan-jansen/zipline/issues/1361))
- en: Make `can_trade` aware of the asset’s exchange . ([1346](https://github.com/stefan-jansen/zipline/issues/1346))
  id: totrans-1881
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使`can_trade`意识到资产的交易所。([1346](https://github.com/stefan-jansen/zipline/issues/1346))
- en: Add `downsample` method to all computable terms. ([1394](https://github.com/stefan-jansen/zipline/issues/1394))
  id: totrans-1882
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为所有可计算术语添加`downsample`方法。([1394](https://github.com/stefan-jansen/zipline/issues/1394))
- en: Add QuantopianUSFuturesCalendar. ([1414](https://github.com/stefan-jansen/zipline/issues/1414))
  id: totrans-1883
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加QuantopianUSFuturesCalendar。([1414](https://github.com/stefan-jansen/zipline/issues/1414))
- en: Enable publishing of old `assets.db` versions. ([1430](https://github.com/stefan-jansen/zipline/issues/1430))
  id: totrans-1884
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 允许发布旧版本的`assets.db`。([1430](https://github.com/stefan-jansen/zipline/issues/1430))
- en: Enable `schedule_function` for Futures trading calendar. ([1442](https://github.com/stefan-jansen/zipline/issues/1442))
  id: totrans-1885
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为期货交易日历启用`schedule_function`。([1442](https://github.com/stefan-jansen/zipline/issues/1442))
- en: Disallow regressions of length 1\. ([1466](https://github.com/stefan-jansen/zipline/issues/1466))
  id: totrans-1886
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 不允许长度为1的回归。([1466](https://github.com/stefan-jansen/zipline/issues/1466))
- en: Experimental
  id: totrans-1887
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 实验性
- en: Add support for comingled Future and Equity history windows, and enable other
    Future data access via data portal. ([1435](https://github.com/stefan-jansen/zipline/issues/1435))
    ([1432](https://github.com/stefan-jansen/zipline/issues/1432))
  id: totrans-1888
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增加对混合期货和股票历史窗口的支持，并通过数据门户启用其他期货数据访问。([1435](https://github.com/stefan-jansen/zipline/issues/1435))
    ([1432](https://github.com/stefan-jansen/zipline/issues/1432))
- en: Bug Fixes
  id: totrans-1889
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 错误修复
- en: Changes [`AverageDollarVolume`](api-reference.html#zipline.pipeline.factors.AverageDollarVolume
    "zipline.pipeline.factors.AverageDollarVolume") built-in factor to treat missing
    close or volume values as 0\. Previously, NaNs were simply discarded before averaging,
    giving the remaining values too much weight ([1309](https://github.com/stefan-jansen/zipline/issues/1309)).
  id: totrans-1890
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 更改内置因子`AverageDollarVolume`以将缺失的收盘价或成交量值视为0。以前，在平均之前简单地丢弃了NaNs，给剩余的值赋予了过多的权重([1309](https://github.com/stefan-jansen/zipline/issues/1309))。
- en: Remove risk-free rate from sharpe ratio calculation. The ratio is now the average
    of risk adjusted returns over violatility of adjusted returns. ([853](https://github.com/stefan-jansen/zipline/issues/853))
  id: totrans-1891
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从夏普比率计算中移除无风险利率。现在，该比率是调整后的回报率波动性的平均值。([853](https://github.com/stefan-jansen/zipline/issues/853))
- en: Sortino ratio will return calculation instead of np.nan when required returns
    are equal to zero. The ratio now returns the average of risk adjusted returns
    over downside risk. Fixed mislabeled API by converting mar to downside_risk. ([747](https://github.com/stefan-jansen/zipline/issues/747))
  id: totrans-1892
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当所需回报率为零时，Sortino比率将返回计算结果而非np.nan。现在，该比率返回的是下行风险调整后的回报率的平均值。通过将mar转换为downside_risk，修正了API标签错误的问题。([747](https://github.com/stefan-jansen/zipline/issues/747))
- en: Downside risk now returns the square root of the mean of downside difference
    squares. ([747](https://github.com/stefan-jansen/zipline/issues/747))
  id: totrans-1893
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 下行风险现在返回下行差分平方的平均值的平方根。([747](https://github.com/stefan-jansen/zipline/issues/747))
- en: Information ratio updated to return mean of risk adjusted returns over standard
    deviation of risk adjusted returns. ([1322](https://github.com/stefan-jansen/zipline/issues/1322))
  id: totrans-1894
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 信息比率更新为返回风险调整后的回报率的标准差的风险调整后的回报率的平均值。([1322](https://github.com/stefan-jansen/zipline/issues/1322))
- en: Alpha and sharpe ratio are now annualized. ([1322](https://github.com/stefan-jansen/zipline/issues/1322))
  id: totrans-1895
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 阿尔法和夏普比率现在已年化。([1322](https://github.com/stefan-jansen/zipline/issues/1322))
- en: Fix units during reading and writing of daily bar `first_trading_day` attribute.
    ([1245](https://github.com/stefan-jansen/zipline/issues/1245))
  id: totrans-1896
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复每日条形图`first_trading_day`属性在读写时的单位问题。([1245](https://github.com/stefan-jansen/zipline/issues/1245))
- en: Optional dispatch modules, when missing, no longer cause a NameError. ([1246](https://github.com/stefan-jansen/zipline/issues/1246))
  id: totrans-1897
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当缺少可选分派模块时，不再引发NameError。([1246](https://github.com/stefan-jansen/zipline/issues/1246))
- en: Treat `schedule_function` argument as a time rule when a time rule, but no date
    rule is supplied. ([1221](https://github.com/stefan-jansen/zipline/issues/1221))
  id: totrans-1898
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当提供时间规则但没有日期规则时，将`schedule_function`参数视为时间规则。([1221](https://github.com/stefan-jansen/zipline/issues/1221))
- en: Protect against boundary conditions at beginning and end trading day in schedule
    function. ([1226](https://github.com/stefan-jansen/zipline/issues/1226))
  id: totrans-1899
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在schedule函数中保护交易日的开始和结束边界条件。([1226](https://github.com/stefan-jansen/zipline/issues/1226))
- en: Apply adjustments to previous day when using history with a frequency of 1d.
    ([1256](https://github.com/stefan-jansen/zipline/issues/1256))
  id: totrans-1900
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在使用频率为1d的历史数据时，将调整应用于前一天。([1256](https://github.com/stefan-jansen/zipline/issues/1256))
- en: Fail fast on invalid pipeline columns, instead of attempting to access the nonexistent
    column. ([1280](https://github.com/stefan-jansen/zipline/issues/1280))
  id: totrans-1901
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在尝试访问不存在的列之前，快速失败于无效的管道列。([1280](https://github.com/stefan-jansen/zipline/issues/1280))
- en: Fix `AverageDollarVolume` NaN handling. ([1309](https://github.com/stefan-jansen/zipline/issues/1309))
  id: totrans-1902
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复`AverageDollarVolume`处理NaN的问题。([1309](https://github.com/stefan-jansen/zipline/issues/1309))
- en: Performance
  id: totrans-1903
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 性能
- en: Performance improvements to blaze core loader. ([1227](https://github.com/stefan-jansen/zipline/issues/1227))
  id: totrans-1904
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对blaze核心加载器的性能改进。([1227](https://github.com/stefan-jansen/zipline/issues/1227))
- en: Allow concurrent blaze queries. ([1323](https://github.com/stefan-jansen/zipline/issues/1323))
  id: totrans-1905
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 允许并发blaze查询。([1323](https://github.com/stefan-jansen/zipline/issues/1323))
- en: Prevent missing leading bcolz minute data from doing repeated unnecessary lookups.
    ([1451](https://github.com/stefan-jansen/zipline/issues/1451))
  id: totrans-1906
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 防止由于缺少bcolz分钟数据而进行重复的不必要查找。([1451](https://github.com/stefan-jansen/zipline/issues/1451))
- en: Cache future chain lookups. ([1455](https://github.com/stefan-jansen/zipline/issues/1455))
  id: totrans-1907
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 缓存未来链查找。([1455](https://github.com/stefan-jansen/zipline/issues/1455))
- en: Maintenance and Refactorings
  id: totrans-1908
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 维护和重构
- en: Removed remaining mentions of `add_history`. ([1287](https://github.com/stefan-jansen/zipline/issues/1287))
  id: totrans-1909
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 移除剩余的`add_history`提及。([1287](https://github.com/stefan-jansen/zipline/issues/1287))
- en: Documentation
  id: totrans-1910
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 文档
- en: Testing
  id: totrans-1911
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 测试
- en: Add test fixture which sources daily pricing data from minute pricing data fixtures.
    ([1243](https://github.com/stefan-jansen/zipline/issues/1243))
  id: totrans-1912
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加测试装置，该装置从分钟定价数据装置中获取每日定价数据。([1243](https://github.com/stefan-jansen/zipline/issues/1243))
- en: Data Format Changes
  id: totrans-1913
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 数据格式更改
- en: '`BcolzDailyBarReader` and `BcolzDailyBarWriter` use trading calendar instance,
    instead of trading days serialized to `JSON`. ([1330](https://github.com/stefan-jansen/zipline/issues/1330))'
  id: totrans-1914
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`BcolzDailyBarReader`和`BcolzDailyBarWriter`使用交易日历实例，而不是序列化为`JSON`的交易日。([1330](https://github.com/stefan-jansen/zipline/issues/1330))'
- en: Change format of `assets.db` to support point in time lookups. ([1361](https://github.com/stefan-jansen/zipline/issues/1361))
  id: totrans-1915
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将`assets.db`的格式更改为支持按时间点查找。([1361](https://github.com/stefan-jansen/zipline/issues/1361))
- en: Change `BcolzMinuteBarReader``and ``BcolzMinuteBarWriter` to support varying
    tick sizes. ([1428](https://github.com/stefan-jansen/zipline/issues/1428))
  id: totrans-1916
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 更改`BcolzMinuteBarReader`和`BcolzMinuteBarWriter`以支持不同的最小变动价位。([1428](https://github.com/stefan-jansen/zipline/issues/1428))
- en: Enhancements
  id: totrans-1917
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 增强功能
- en: Adds forward fill checkpoint tables for the blaze core loader. This allow the
    loader to more efficiently forward fill the data by capping the lower date it
    must search for when querying data. The checkpoints should have novel deltas applied
    ([1276](https://github.com/stefan-jansen/zipline/issues/1276)).
  id: totrans-1918
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为blaze核心加载器添加前向填充检查点表。这允许加载器通过限制必须搜索数据的较低日期来更有效地前向填充数据。检查点应该应用新的增量([1276](https://github.com/stefan-jansen/zipline/issues/1276))。
- en: Updated VagrantFile to include all dev requirements and use a newer image ([1310](https://github.com/stefan-jansen/zipline/issues/1310)).
  id: totrans-1919
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 更新VagrantFile以包含所有开发需求并使用更新的镜像([1310](https://github.com/stefan-jansen/zipline/issues/1310))。
- en: Allow correlations and regressions to be computed between two 2D factors by
    doing computations asset-wise ([1307](https://github.com/stefan-jansen/zipline/issues/1307)).
  id: totrans-1920
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 允许通过逐资产计算来计算两个2D因子之间的相关性和回归([1307](https://github.com/stefan-jansen/zipline/issues/1307))。
- en: Filters have been made window_safe by default. Now they can be passed in as
    arguments to other Filters, Factors and Classifiers ([1338](https://github.com/stefan-jansen/zipline/issues/1338)).
  id: totrans-1921
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 过滤器默认设置为window_safe。现在它们可以作为参数传递给其他过滤器、因子和分类器([1338](https://github.com/stefan-jansen/zipline/issues/1338))。
- en: Added an optional `groupby` parameter to `rank()`, `top()`, and `bottom()`.
    ([1349](https://github.com/stefan-jansen/zipline/issues/1349)).
  id: totrans-1922
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为`rank()`、`top()`和`bottom()`添加可选的`groupby`参数。([1349](https://github.com/stefan-jansen/zipline/issues/1349))
- en: Added new pipeline filters, [`All`](api-reference.html#zipline.pipeline.filters.All
    "zipline.pipeline.filters.All") and [`Any`](api-reference.html#zipline.pipeline.filters.Any
    "zipline.pipeline.filters.Any"), which takes another filter and returns True if
    an asset produced a True for any/all days in the previous `window_length` days
    ([1358](https://github.com/stefan-jansen/zipline/issues/1358)).
  id: totrans-1923
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加新的管道过滤器，[`All`](api-reference.html#zipline.pipeline.filters.All "zipline.pipeline.filters.All")和[`Any`](api-reference.html#zipline.pipeline.filters.Any
    "zipline.pipeline.filters.Any")，它接受另一个过滤器，如果资产在前`window_length`天内对任何/所有天产生True，则返回True
    ([1358](https://github.com/stefan-jansen/zipline/issues/1358))。
- en: Added new pipeline filter [`AtLeastN`](api-reference.html#zipline.pipeline.filters.AtLeastN
    "zipline.pipeline.filters.AtLeastN"), which takes another filter and an int N
    and returns True if an asset produced a True on N or more days in the previous
    `window_length` days ([1367](https://github.com/stefan-jansen/zipline/issues/1367)).
  id: totrans-1924
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加新的管道过滤器[`AtLeastN`](api-reference.html#zipline.pipeline.filters.AtLeastN "zipline.pipeline.filters.AtLeastN")，它接受另一个过滤器和一个整数N，如果资产在前`window_length`天内产生True的天数为N或更多，则返回True
    ([1367](https://github.com/stefan-jansen/zipline/issues/1367))。
- en: Use external library empyrical for risk calculations. Empyrical unifies risk
    metric calculations between pyfolio and zipline. Empyrical adds custom annualization
    options for returns of custom frequencies. ([855](https://github.com/stefan-jansen/zipline/issues/855))
  id: totrans-1925
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用外部库empyrical进行风险计算。Empyrical统一了pyfolio和zipline之间的风险度量计算。Empyrical为自定义频率的回报添加了自定义年化选项。([855](https://github.com/stefan-jansen/zipline/issues/855))
- en: Add Aroon factor. ([1258](https://github.com/stefan-jansen/zipline/issues/1258))
  id: totrans-1926
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加Aroon因子。([1258](https://github.com/stefan-jansen/zipline/issues/1258))
- en: Add fast stochastic oscillator factor. ([1255](https://github.com/stefan-jansen/zipline/issues/1255))
  id: totrans-1927
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加快速随机振荡器因子。([1255](https://github.com/stefan-jansen/zipline/issues/1255))
- en: Add a Dockerfile. ([1254](https://github.com/stefan-jansen/zipline/issues/1254))
  id: totrans-1928
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加一个Dockerfile。([1254](https://github.com/stefan-jansen/zipline/issues/1254))
- en: New trading calendar which supports sessions which span across midnights, e.g.
    24 hour 6:01PM-6:00PM sessions for futures trading. zipline.utils.tradingcalendar
    is now deprecated. ([1138](https://github.com/stefan-jansen/zipline/issues/1138))
    ([1312](https://github.com/stefan-jansen/zipline/issues/1312))
  id: totrans-1929
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新的交易日历支持跨越午夜的会话，例如期货交易的24小时6:01PM-6:00PM会话。zipline.utils.tradingcalendar现已弃用。([1138](https://github.com/stefan-jansen/zipline/issues/1138))
    ([1312](https://github.com/stefan-jansen/zipline/issues/1312))
- en: Allow slicing a single column out of a Factor/Filter/Classifier. ([1267](https://github.com/stefan-jansen/zipline/issues/1267))
  id: totrans-1930
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 允许从因子/筛选器/分类器中提取单个列。([1267](https://github.com/stefan-jansen/zipline/issues/1267))
- en: Provide Ichimoku Cloud factor ([1263](https://github.com/stefan-jansen/zipline/issues/1263))
  id: totrans-1931
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 提供Ichimoku Cloud因子 ([1263](https://github.com/stefan-jansen/zipline/issues/1263))
- en: Allow default parameters on Pipeline terms. ([1263](https://github.com/stefan-jansen/zipline/issues/1263))
  id: totrans-1932
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 允许在管道项上使用默认参数。([1263](https://github.com/stefan-jansen/zipline/issues/1263))
- en: Provide rate of change percentage factor. ([1324](https://github.com/stefan-jansen/zipline/issues/1324))
  id: totrans-1933
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 提供变化率百分比因子。([1324](https://github.com/stefan-jansen/zipline/issues/1324))
- en: Provide linear weighted moving average factor. ([1325](https://github.com/stefan-jansen/zipline/issues/1325))
  id: totrans-1934
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 提供线性加权移动平均因子。([1325](https://github.com/stefan-jansen/zipline/issues/1325))
- en: Add `NotNullFilter`. ([1345](https://github.com/stefan-jansen/zipline/issues/1345))
  id: totrans-1935
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加`NotNullFilter`。([1345](https://github.com/stefan-jansen/zipline/issues/1345))
- en: Allow capital changes to be defined by a target value. ([1337](https://github.com/stefan-jansen/zipline/issues/1337))
  id: totrans-1936
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 允许通过目标值定义资本变动。([1337](https://github.com/stefan-jansen/zipline/issues/1337))
- en: Add `TrueRange` factor. ([1348](https://github.com/stefan-jansen/zipline/issues/1348))
  id: totrans-1937
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加`TrueRange`因子。([1348](https://github.com/stefan-jansen/zipline/issues/1348))
- en: Add point in time lookups to `assets.db`. ([1361](https://github.com/stefan-jansen/zipline/issues/1361))
  id: totrans-1938
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为`assets.db`添加实时查找功能。([1361](https://github.com/stefan-jansen/zipline/issues/1361))
- en: Make `can_trade` aware of the asset’s exchange . ([1346](https://github.com/stefan-jansen/zipline/issues/1346))
  id: totrans-1939
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使`can_trade`意识到资产的交易所。([1346](https://github.com/stefan-jansen/zipline/issues/1346))
- en: Add `downsample` method to all computable terms. ([1394](https://github.com/stefan-jansen/zipline/issues/1394))
  id: totrans-1940
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为所有可计算项添加`downsample`方法。([1394](https://github.com/stefan-jansen/zipline/issues/1394))
- en: Add QuantopianUSFuturesCalendar. ([1414](https://github.com/stefan-jansen/zipline/issues/1414))
  id: totrans-1941
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加QuantopianUSFuturesCalendar。([1414](https://github.com/stefan-jansen/zipline/issues/1414))
- en: Enable publishing of old `assets.db` versions. ([1430](https://github.com/stefan-jansen/zipline/issues/1430))
  id: totrans-1942
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 启用旧版`assets.db`版本的发布。([1430](https://github.com/stefan-jansen/zipline/issues/1430))
- en: Enable `schedule_function` for Futures trading calendar. ([1442](https://github.com/stefan-jansen/zipline/issues/1442))
  id: totrans-1943
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为期货交易日历启用`schedule_function`。([1442](https://github.com/stefan-jansen/zipline/issues/1442))
- en: Disallow regressions of length 1\. ([1466](https://github.com/stefan-jansen/zipline/issues/1466))
  id: totrans-1944
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 不允许长度为1的回归。([1466](https://github.com/stefan-jansen/zipline/issues/1466))
- en: Experimental
  id: totrans-1945
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 实验性功能
- en: Add support for comingled Future and Equity history windows, and enable other
    Future data access via data portal. ([1435](https://github.com/stefan-jansen/zipline/issues/1435))
    ([1432](https://github.com/stefan-jansen/zipline/issues/1432))
  id: totrans-1946
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加对混合的未来和股票历史窗口的支持，并通过数据门户启用其他未来数据访问。([1435](https://github.com/stefan-jansen/zipline/issues/1435))
    ([1432](https://github.com/stefan-jansen/zipline/issues/1432))
- en: Bug Fixes
  id: totrans-1947
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 错误修复
- en: Changes [`AverageDollarVolume`](api-reference.html#zipline.pipeline.factors.AverageDollarVolume
    "zipline.pipeline.factors.AverageDollarVolume") built-in factor to treat missing
    close or volume values as 0\. Previously, NaNs were simply discarded before averaging,
    giving the remaining values too much weight ([1309](https://github.com/stefan-jansen/zipline/issues/1309)).
  id: totrans-1948
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将内置因子`AverageDollarVolume`的更改处理缺失的收盘价或成交量值为0。以前，NaN值在平均之前被简单丢弃，导致剩余值权重过大 ([1309](https://github.com/stefan-jansen/zipline/issues/1309))。
- en: Remove risk-free rate from sharpe ratio calculation. The ratio is now the average
    of risk adjusted returns over violatility of adjusted returns. ([853](https://github.com/stefan-jansen/zipline/issues/853))
  id: totrans-1949
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从夏普比率计算中移除无风险利率。现在该比率是风险调整后回报的平均值除以调整后回报的波动性。([853](https://github.com/stefan-jansen/zipline/issues/853))
- en: Sortino ratio will return calculation instead of np.nan when required returns
    are equal to zero. The ratio now returns the average of risk adjusted returns
    over downside risk. Fixed mislabeled API by converting mar to downside_risk. ([747](https://github.com/stefan-jansen/zipline/issues/747))
  id: totrans-1950
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当所需回报等于零时，索提诺比率将返回计算结果而不是np.nan。现在，该比率返回风险调整后的回报平均值除以下行风险。通过将mar转换为downside_risk来修复错误标记的API。([747](https://github.com/stefan-jansen/zipline/issues/747))
- en: Downside risk now returns the square root of the mean of downside difference
    squares. ([747](https://github.com/stefan-jansen/zipline/issues/747))
  id: totrans-1951
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 下行风险现在返回下行差平方的平均值的平方根。([747](https://github.com/stefan-jansen/zipline/issues/747))
- en: Information ratio updated to return mean of risk adjusted returns over standard
    deviation of risk adjusted returns. ([1322](https://github.com/stefan-jansen/zipline/issues/1322))
  id: totrans-1952
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 信息比率更新为返回风险调整后的回报平均值除以风险调整后的回报标准差。([1322](https://github.com/stefan-jansen/zipline/issues/1322))
- en: Alpha and sharpe ratio are now annualized. ([1322](https://github.com/stefan-jansen/zipline/issues/1322))
  id: totrans-1953
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 阿尔法和夏普比率现在已年化。([1322](https://github.com/stefan-jansen/zipline/issues/1322))
- en: Fix units during reading and writing of daily bar `first_trading_day` attribute.
    ([1245](https://github.com/stefan-jansen/zipline/issues/1245))
  id: totrans-1954
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在读写每日栏的`first_trading_day`属性时修复单位。([1245](https://github.com/stefan-jansen/zipline/issues/1245))
- en: Optional dispatch modules, when missing, no longer cause a NameError. ([1246](https://github.com/stefan-jansen/zipline/issues/1246))
  id: totrans-1955
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当缺少可选分派模块时，不再导致NameError。([1246](https://github.com/stefan-jansen/zipline/issues/1246))
- en: Treat `schedule_function` argument as a time rule when a time rule, but no date
    rule is supplied. ([1221](https://github.com/stefan-jansen/zipline/issues/1221))
  id: totrans-1956
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当提供时间规则而没有日期规则时，将`schedule_function`参数视为时间规则。([1221](https://github.com/stefan-jansen/zipline/issues/1221))
- en: Protect against boundary conditions at beginning and end trading day in schedule
    function. ([1226](https://github.com/stefan-jansen/zipline/issues/1226))
  id: totrans-1957
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在schedule函数中保护交易日的开始和结束边界条件。([1226](https://github.com/stefan-jansen/zipline/issues/1226))
- en: Apply adjustments to previous day when using history with a frequency of 1d.
    ([1256](https://github.com/stefan-jansen/zipline/issues/1256))
  id: totrans-1958
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用频率为1d的历史记录时，将调整应用于前一天。([1256](https://github.com/stefan-jansen/zipline/issues/1256))
- en: Fail fast on invalid pipeline columns, instead of attempting to access the nonexistent
    column. ([1280](https://github.com/stefan-jansen/zipline/issues/1280))
  id: totrans-1959
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在尝试访问不存在的列之前，快速失败无效的管道列。([1280](https://github.com/stefan-jansen/zipline/issues/1280))
- en: Fix `AverageDollarVolume` NaN handling. ([1309](https://github.com/stefan-jansen/zipline/issues/1309))
  id: totrans-1960
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复`AverageDollarVolume`的NaN处理。([1309](https://github.com/stefan-jansen/zipline/issues/1309))
- en: Performance
  id: totrans-1961
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 性能
- en: Performance improvements to blaze core loader. ([1227](https://github.com/stefan-jansen/zipline/issues/1227))
  id: totrans-1962
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对blaze核心加载器的性能改进。([1227](https://github.com/stefan-jansen/zipline/issues/1227))
- en: Allow concurrent blaze queries. ([1323](https://github.com/stefan-jansen/zipline/issues/1323))
  id: totrans-1963
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 允许并发blaze查询。([1323](https://github.com/stefan-jansen/zipline/issues/1323))
- en: Prevent missing leading bcolz minute data from doing repeated unnecessary lookups.
    ([1451](https://github.com/stefan-jansen/zipline/issues/1451))
  id: totrans-1964
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 防止缺少领先bcolz分钟数据进行重复的不必要查找。([1451](https://github.com/stefan-jansen/zipline/issues/1451))
- en: Cache future chain lookups. ([1455](https://github.com/stefan-jansen/zipline/issues/1455))
  id: totrans-1965
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 缓存未来链查找。([1455](https://github.com/stefan-jansen/zipline/issues/1455))
- en: Maintenance and Refactorings
  id: totrans-1966
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 维护和重构
- en: Removed remaining mentions of `add_history`. ([1287](https://github.com/stefan-jansen/zipline/issues/1287))
  id: totrans-1967
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 删除了剩余的`add_history`提及。([1287](https://github.com/stefan-jansen/zipline/issues/1287))
- en: Documentation
  id: totrans-1968
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 文档
- en: Testing
  id: totrans-1969
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 测试
- en: Add test fixture which sources daily pricing data from minute pricing data fixtures.
    ([1243](https://github.com/stefan-jansen/zipline/issues/1243))
  id: totrans-1970
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加测试夹具，该夹具从分钟定价数据夹具中获取每日定价数据。([1243](https://github.com/stefan-jansen/zipline/issues/1243))
- en: Data Format Changes
  id: totrans-1971
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 数据格式更改
- en: '`BcolzDailyBarReader` and `BcolzDailyBarWriter` use trading calendar instance,
    instead of trading days serialized to `JSON`. ([1330](https://github.com/stefan-jansen/zipline/issues/1330))'
  id: totrans-1972
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`BcolzDailyBarReader`和`BcolzDailyBarWriter`使用交易日历实例，而不是交易日期序列化为`JSON`。([1330](https://github.com/stefan-jansen/zipline/issues/1330))'
- en: Change format of `assets.db` to support point in time lookups. ([1361](https://github.com/stefan-jansen/zipline/issues/1361))
  id: totrans-1973
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将`assets.db`的格式更改为支持点对点查找。([1361](https://github.com/stefan-jansen/zipline/issues/1361))
- en: Change `BcolzMinuteBarReader``and ``BcolzMinuteBarWriter` to support varying
    tick sizes. ([1428](https://github.com/stefan-jansen/zipline/issues/1428))
  id: totrans-1974
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将`BcolzMinuteBarReader`和`BcolzMinuteBarWriter`更改为支持不同的刻度大小。([1428](https://github.com/stefan-jansen/zipline/issues/1428))
- en: Release 1.0.1
  id: totrans-1975
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 发布1.0.1
- en: 'Release:'
  id: totrans-1976
  prefs: []
  type: TYPE_NORMAL
  zh: 发布：
- en: 1.0.1
  id: totrans-1977
  prefs: []
  type: TYPE_NORMAL
  zh: 1.0.1
- en: 'Date:'
  id: totrans-1978
  prefs: []
  type: TYPE_NORMAL
  zh: 日期：
- en: May 27, 2016
  id: totrans-1979
  prefs: []
  type: TYPE_NORMAL
  zh: 2016年5月27日
- en: This is a minor bug-fix release from 1.0.0 and includes a small number of bug
    fixes and documentation improvements.
  id: totrans-1980
  prefs: []
  type: TYPE_NORMAL
  zh: 这是从1.0.0版本开始的一个小错误修复版本，包括少量错误修复和文档改进。
- en: Enhancements
  id: totrans-1981
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 增强功能
- en: Added support for user-defined commission models. See the [`zipline.finance.commission.CommissionModel`](api-reference.html#zipline.finance.commission.CommissionModel
    "zipline.finance.commission.CommissionModel") class for more details on implementing
    a commision model. ([1213](https://github.com/stefan-jansen/zipline/issues/1213))
  id: totrans-1982
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增加了对用户定义的佣金模型的支持。有关实现佣金模型的更多详细信息，请参阅[`zipline.finance.commission.CommissionModel`](api-reference.html#zipline.finance.commission.CommissionModel
    "zipline.finance.commission.CommissionModel")类（[1213](https://github.com/stefan-jansen/zipline/issues/1213)）。
- en: Added support for non-float columns to Blaze-backed Pipeline datasets ([1201](https://github.com/stefan-jansen/zipline/issues/1201)).
  id: totrans-1983
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增加了对Blaze支持的Pipeline数据集中非浮点列的支持（[1201](https://github.com/stefan-jansen/zipline/issues/1201)）。
- en: Added `zipline.pipeline.slice.Slice`, a new pipeline term designed to extract
    a single column from another term. Slices can be created by indexing into a term,
    keyed by asset. ([1267](https://github.com/stefan-jansen/zipline/issues/1267))
  id: totrans-1984
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加了`zipline.pipeline.slice.Slice`，这是一种新的管道术语，旨在从另一个术语中提取单个列。可以通过对术语进行索引并按资产键来创建切片（[1267](https://github.com/stefan-jansen/zipline/issues/1267)）。
- en: Bug Fixes
  id: totrans-1985
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 错误修复
- en: Fixed a bug where Pipeline loaders were not properly initialized by [`zipline.run_algorithm()`](api-reference.html#zipline.run_algorithm
    "zipline.run_algorithm"). This also affected invocations of `zipline run` from
    the CLI.
  id: totrans-1986
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了一个错误，该错误导致Pipeline加载器未被[`zipline.run_algorithm()`](api-reference.html#zipline.run_algorithm
    "zipline.run_algorithm")正确初始化。这也影响了从CLI调用`zipline run`。
- en: Fixed a bug that caused the `%%zipline` IPython cell magic to fail ([533233fae43c7ff74abfb0044f046978817cb4e4](https://github.com/stefan-jansen/zipline/commit/533233fae43c7ff74abfb0044f046978817cb4e4)).
  id: totrans-1987
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了一个导致`%%zipline` IPython单元格魔法失败的错误（[533233fae43c7ff74abfb0044f046978817cb4e4](https://github.com/stefan-jansen/zipline/commit/533233fae43c7ff74abfb0044f046978817cb4e4)）。
- en: Fixed a bug in the [`PerTrade`](api-reference.html#zipline.finance.commission.PerTrade
    "zipline.finance.commission.PerTrade") commission model where commissions were
    incorrectly applied to each partial-fill of an order rather than on the order
    itself, resulting in algorithms being charged too much in commissions when placing
    large orders.
  id: totrans-1988
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了在[`PerTrade`](api-reference.html#zipline.finance.commission.PerTrade "zipline.finance.commission.PerTrade")佣金模型中的一个错误，该错误导致佣金被错误地应用于订单的每个部分填充，而不是订单本身，导致在下单大额订单时算法被收取过多的佣金。
- en: '[`PerTrade`](api-reference.html#zipline.finance.commission.PerTrade "zipline.finance.commission.PerTrade")
    now correctly applies commissions on a per-order basis ([1213](https://github.com/stefan-jansen/zipline/issues/1213)).'
  id: totrans-1989
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '[`PerTrade`](api-reference.html#zipline.finance.commission.PerTrade "zipline.finance.commission.PerTrade")现在正确地按订单基础应用佣金（[1213](https://github.com/stefan-jansen/zipline/issues/1213)）。'
- en: Attribute accesses on [`CustomFactors`](api-reference.html#zipline.pipeline.CustomFactor
    "zipline.pipeline.CustomFactor") defining multiple outputs will now correctly
    return an output slice when the output is also the name of a `Factor` method ([1214](https://github.com/stefan-jansen/zipline/issues/1214)).
  id: totrans-1990
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在定义多个输出的[`CustomFactors`](api-reference.html#zipline.pipeline.CustomFactor "zipline.pipeline.CustomFactor")上访问属性时，现在将正确返回输出切片，即使输出也是`Factor`方法的名称（[1214](https://github.com/stefan-jansen/zipline/issues/1214)）。
- en: Replaced deprecated usage of `pandas.io.data` with `pandas_datareader` ([1218](https://github.com/stefan-jansen/zipline/issues/1218)).
  id: totrans-1991
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 用`pandas_datareader`替换了已弃用的`pandas.io.data`的使用（[1218](https://github.com/stefan-jansen/zipline/issues/1218)）。
- en: Fixed an issue where `.pyi` stub files for `zipline.api` were accidentally excluded
    from the PyPI source distribution. Conda users should be unaffected ([1230](https://github.com/stefan-jansen/zipline/issues/1230)).
  id: totrans-1992
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了一个问题，即`zipline.api`的`.pyi`存根文件意外地从PyPI源代码分发中排除。Conda用户应该不受影响（[1230](https://github.com/stefan-jansen/zipline/issues/1230)）。
- en: Documentation
  id: totrans-1993
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 文档
- en: Added a new example, `zipline.examples.momentum_pipeline`, which exercises the
    Pipeline API ([1230](https://github.com/stefan-jansen/zipline/issues/1230)).
  id: totrans-1994
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新增了一个示例，`zipline.examples.momentum_pipeline`，该示例展示了Pipeline API的使用（[1230](https://github.com/stefan-jansen/zipline/issues/1230)）。
- en: Enhancements
  id: totrans-1995
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 增强功能
- en: Added support for user-defined commission models. See the [`zipline.finance.commission.CommissionModel`](api-reference.html#zipline.finance.commission.CommissionModel
    "zipline.finance.commission.CommissionModel") class for more details on implementing
    a commision model. ([1213](https://github.com/stefan-jansen/zipline/issues/1213))
  id: totrans-1996
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加了对用户定义的佣金模型的支持。有关实现佣金模型的更多详细信息，请参阅[`zipline.finance.commission.CommissionModel`](api-reference.html#zipline.finance.commission.CommissionModel
    "zipline.finance.commission.CommissionModel")类（[1213](https://github.com/stefan-jansen/zipline/issues/1213)）。
- en: Added support for non-float columns to Blaze-backed Pipeline datasets ([1201](https://github.com/stefan-jansen/zipline/issues/1201)).
  id: totrans-1997
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为Blaze支持的Pipeline数据集添加了对非浮点列的支持（[1201](https://github.com/stefan-jansen/zipline/issues/1201)）。
- en: Added `zipline.pipeline.slice.Slice`, a new pipeline term designed to extract
    a single column from another term. Slices can be created by indexing into a term,
    keyed by asset. ([1267](https://github.com/stefan-jansen/zipline/issues/1267))
  id: totrans-1998
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加了`zipline.pipeline.slice.Slice`，这是一种新的Pipeline术语，旨在从另一个术语中提取单个列。可以通过对术语进行索引并按资产键来创建切片（[1267](https://github.com/stefan-jansen/zipline/issues/1267)）。
- en: Bug Fixes
  id: totrans-1999
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 错误修复
- en: Fixed a bug where Pipeline loaders were not properly initialized by [`zipline.run_algorithm()`](api-reference.html#zipline.run_algorithm
    "zipline.run_algorithm"). This also affected invocations of `zipline run` from
    the CLI.
  id: totrans-2000
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了一个错误，该错误导致Pipeline加载器未被[`zipline.run_algorithm()`](api-reference.html#zipline.run_algorithm
    "zipline.run_algorithm")正确初始化。这也影响了从CLI调用`zipline run`。
- en: Fixed a bug that caused the `%%zipline` IPython cell magic to fail ([533233fae43c7ff74abfb0044f046978817cb4e4](https://github.com/stefan-jansen/zipline/commit/533233fae43c7ff74abfb0044f046978817cb4e4)).
  id: totrans-2001
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了一个导致`%%zipline` IPython单元格魔法失败的错误（[533233fae43c7ff74abfb0044f046978817cb4e4](https://github.com/stefan-jansen/zipline/commit/533233fae43c7ff74abfb0044f046978817cb4e4)）。
- en: Fixed a bug in the [`PerTrade`](api-reference.html#zipline.finance.commission.PerTrade
    "zipline.finance.commission.PerTrade") commission model where commissions were
    incorrectly applied to each partial-fill of an order rather than on the order
    itself, resulting in algorithms being charged too much in commissions when placing
    large orders.
  id: totrans-2002
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了在[`PerTrade`](api-reference.html#zipline.finance.commission.PerTrade "zipline.finance.commission.PerTrade")佣金模型中的一个错误，该错误导致佣金被错误地应用于订单的每个部分填充，而不是订单本身，导致在下单大额订单时算法被收取过多的佣金。
- en: '[`PerTrade`](api-reference.html#zipline.finance.commission.PerTrade "zipline.finance.commission.PerTrade")
    now correctly applies commissions on a per-order basis ([1213](https://github.com/stefan-jansen/zipline/issues/1213)).'
  id: totrans-2003
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '[`PerTrade`](api-reference.html#zipline.finance.commission.PerTrade "zipline.finance.commission.PerTrade")现在正确地按订单收取佣金（[1213](https://github.com/stefan-jansen/zipline/issues/1213)）。'
- en: Attribute accesses on [`CustomFactors`](api-reference.html#zipline.pipeline.CustomFactor
    "zipline.pipeline.CustomFactor") defining multiple outputs will now correctly
    return an output slice when the output is also the name of a `Factor` method ([1214](https://github.com/stefan-jansen/zipline/issues/1214)).
  id: totrans-2004
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在定义多个输出的[`CustomFactors`](api-reference.html#zipline.pipeline.CustomFactor "zipline.pipeline.CustomFactor")上的属性访问现在将正确返回输出切片，即使输出也是`Factor`方法的名称（[1214](https://github.com/stefan-jansen/zipline/issues/1214)）。
- en: Replaced deprecated usage of `pandas.io.data` with `pandas_datareader` ([1218](https://github.com/stefan-jansen/zipline/issues/1218)).
  id: totrans-2005
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将已弃用的`pandas.io.data`替换为`pandas_datareader`（[1218](https://github.com/stefan-jansen/zipline/issues/1218)）。
- en: Fixed an issue where `.pyi` stub files for `zipline.api` were accidentally excluded
    from the PyPI source distribution. Conda users should be unaffected ([1230](https://github.com/stefan-jansen/zipline/issues/1230)).
  id: totrans-2006
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了一个问题，即`.pyi`存根文件对于`zipline.api`被意外地从PyPI源分发中排除。使用Conda的用户应该不受影响（[1230](https://github.com/stefan-jansen/zipline/issues/1230)）。
- en: Documentation
  id: totrans-2007
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 文档
- en: Added a new example, `zipline.examples.momentum_pipeline`, which exercises the
    Pipeline API ([1230](https://github.com/stefan-jansen/zipline/issues/1230)).
  id: totrans-2008
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加了一个新示例，`zipline.examples.momentum_pipeline`，该示例使用了Pipeline API（[1230](https://github.com/stefan-jansen/zipline/issues/1230)）。
- en: Release 1.0.0
  id: totrans-2009
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 发布 1.0.0
- en: 'Release:'
  id: totrans-2010
  prefs: []
  type: TYPE_NORMAL
  zh: 发布：
- en: 1.0.0
  id: totrans-2011
  prefs: []
  type: TYPE_NORMAL
  zh: 1.0.0
- en: 'Date:'
  id: totrans-2012
  prefs: []
  type: TYPE_NORMAL
  zh: 日期：
- en: May 19, 2016
  id: totrans-2013
  prefs: []
  type: TYPE_NORMAL
  zh: 2016年5月19日
- en: Highlights
  id: totrans-2014
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 亮点
- en: Zipline 1.0 Rewrite ([1105](https://github.com/stefan-jansen/zipline/issues/1105))
  id: totrans-2015
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: Zipline 1.0重写（[1105](https://github.com/stefan-jansen/zipline/issues/1105)）
- en: We have rewritten a lot of Zipline and its basic concepts in order to improve
    runtime performance. At the same time, we’ve introduced several new APIs.
  id: totrans-2016
  prefs: []
  type: TYPE_NORMAL
  zh: 我们对Zipline及其基本概念进行了大量重写，以提高运行时性能。同时，我们引入了几个新的API。
- en: At a high level, earlier versions of Zipline simulations pulled from a multiplexed
    stream of data sources, which were merged via heapq. This stream was fed to the
    main simulation loop, driving the clock forward. This strong dependency on reading
    all the data made it difficult to optimize simulation performance because there
    was no connection between the amount of data we fetched and the amount of data
    actually used by the algorithm.
  id: totrans-2017
  prefs: []
  type: TYPE_NORMAL
  zh: 在较高层次上，Zipline早期版本的模拟从多个数据源的复用流中提取数据，这些数据源通过heapq合并。这个数据流被输入到主模拟循环中，推动时钟前进。由于对读取所有数据的强烈依赖，优化模拟性能变得困难，因为我们获取的数据量与算法实际使用的数据量之间没有联系。
- en: Now, we only fetch data when the algorithm needs it. A new class, [`DataPortal`](api-reference.html#zipline.data.data_portal.DataPortal
    "zipline.data.data_portal.DataPortal"), dispatches data requests to various data
    sources and returns the requested values. This makes the runtime of a simulation
    scale much more closely with the complexity of the algorithm, rather than with
    the number of assets provided by the data sources.
  id: totrans-2018
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，我们只在算法需要数据时才获取数据。一个新类，[`DataPortal`](api-reference.html#zipline.data.data_portal.DataPortal
    "zipline.data.data_portal.DataPortal")，将数据请求分派到各种数据源，并返回请求的值。这使得模拟的运行时间更紧密地与算法的复杂性而不是数据源提供的资产数量成比例。
- en: Instead of the data stream driving the clock, now simulations iterate through
    a pre-calculated set of day or minute timestamps. The timestamps are emitted by
    `MinuteSimulationClock` and `DailySimulationClock`, and consumed by the main loop
    in `transform()`.
  id: totrans-2019
  prefs: []
  type: TYPE_NORMAL
  zh: 不再是数据流驱动时钟，现在模拟通过预先计算的一组日或分钟时间戳进行迭代。时间戳由`MinuteSimulationClock`和`DailySimulationClock`发出，并由`transform()`中的主循环消费。
- en: 'We’ve retired the `data[sid(N)]` and `history` APIs, replacing them with several
    methods on the [`BarData`](api-reference.html#zipline.protocol.BarData "zipline.protocol.BarData")
    object: [`current()`](api-reference.html#zipline.protocol.BarData.current "zipline.protocol.BarData.current"),
    [`history()`](api-reference.html#zipline.protocol.BarData.history "zipline.protocol.BarData.history"),
    [`can_trade()`](api-reference.html#zipline.protocol.BarData.can_trade "zipline.protocol.BarData.can_trade"),
    and [`is_stale()`](api-reference.html#zipline.protocol.BarData.is_stale "zipline.protocol.BarData.is_stale").
    Old APIs will continue to work for now, but will issue deprecation warnings.'
  id: totrans-2020
  prefs: []
  type: TYPE_NORMAL
  zh: 我们已弃用`data[sid(N)]`和`history` API，用[`BarData`](api-reference.html#zipline.protocol.BarData
    "zipline.protocol.BarData")对象上的几个方法替换它们：[`current()`](api-reference.html#zipline.protocol.BarData.current
    "zipline.protocol.BarData.current")，[`history()`](api-reference.html#zipline.protocol.BarData.history
    "zipline.protocol.BarData.history")，[`can_trade()`](api-reference.html#zipline.protocol.BarData.can_trade
    "zipline.protocol.BarData.can_trade")，和[`is_stale()`](api-reference.html#zipline.protocol.BarData.is_stale
    "zipline.protocol.BarData.is_stale")。旧的API将继续工作，但现在会发出弃用警告。
- en: You can now pass in an adjustments source to the [`DataPortal`](api-reference.html#zipline.data.data_portal.DataPortal
    "zipline.data.data_portal.DataPortal"), and we will apply adjustments to the pricing
    data when looking backwards at data. Prices and volumes for execution and presented
    to the algorithm in data.current are the as-traded value of the asset.
  id: totrans-2021
  prefs: []
  type: TYPE_NORMAL
  zh: 现在可以将调整源传递给[`DataPortal`](api-reference.html#zipline.data.data_portal.DataPortal
    "zipline.data.data_portal.DataPortal")，当我们回顾数据时，我们将对定价数据应用调整。执行和呈现给算法的数据的当前价格和成交量是资产的实际交易价值。
- en: New Entry Points ([1173](https://github.com/stefan-jansen/zipline/issues/1173)
    and [1178](https://github.com/stefan-jansen/zipline/issues/1178))
  id: totrans-2022
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 新入口点（[1173](https://github.com/stefan-jansen/zipline/issues/1173) 和 [1178](https://github.com/stefan-jansen/zipline/issues/1178)）
- en: 'In order to make it easier to use zipline we have updated the entry points
    for a backtest. The three supported ways to run a backtest are now:'
  id: totrans-2023
  prefs: []
  type: TYPE_NORMAL
  zh: 为了更容易使用Zipline，我们更新了回测的入口点。现在支持运行回测的三种方式是：
- en: '`zipline.run_algo()`'
  id: totrans-2024
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`zipline.run_algo()`'
- en: '`$ zipline run`'
  id: totrans-2025
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`$ zipline run`'
- en: '`%zipline` (IPython magic)'
  id: totrans-2026
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`%zipline`（IPython魔法命令）'
- en: Data Bundles ([1173](https://github.com/stefan-jansen/zipline/issues/1173) and
    [1178](https://github.com/stefan-jansen/zipline/issues/1178))
  id: totrans-2027
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 数据包（[1173](https://github.com/stefan-jansen/zipline/issues/1173) 和 [1178](https://github.com/stefan-jansen/zipline/issues/1178)）
- en: 1.0.0 introduces data bundles. Data bundles are groups of data that should be
    preloaded and used to run backtests later. This allows users to not need to specify
    which tickers they are interested in each time they run an algorithm. This also
    allows us to cache the data between runs.
  id: totrans-2028
  prefs: []
  type: TYPE_NORMAL
  zh: 1.0.0引入了数据包。数据包是一组应该预先加载并在以后用于运行回测的数据。这允许用户不需要每次运行算法时都指定他们感兴趣的标记。这也允许我们在运行之间缓存数据。
- en: 'By default, the `quantopian-quandl` bundle will be used which pulls data from
    Quantopian’s mirror of the quandl [WIKI dataset](https://www.quandl.com/data/WIKI).
    New bundles may be registered with [`zipline.data.bundles.register()`](api-reference.html#zipline.data.bundles.register
    "zipline.data.bundles.register") like:'
  id: totrans-2029
  prefs: []
  type: TYPE_NORMAL
  zh: 默认情况下，将使用 `quantopian-quandl` 包，该包从 Quantopian 的 quandl [WIKI 数据集](https://www.quandl.com/data/WIKI)镜像中提取数据。可以通过
    [`zipline.data.bundles.register()`](api-reference.html#zipline.data.bundles.register
    "zipline.data.bundles.register") 注册新包，例如：
- en: '[PRE53]'
  id: totrans-2030
  prefs: []
  type: TYPE_PRE
  zh: '[PRE53]'
- en: This function should retrieve the data it needs and then use the writers that
    have been passed to write that data to disc in a location that zipline can find
    later.
  id: totrans-2031
  prefs: []
  type: TYPE_NORMAL
  zh: 该函数应检索所需数据，然后使用已传递的写入器将该数据写入磁盘上的位置，以便 zipline 稍后可以找到。
- en: This data can be used in backtests by passing the name as the `-b / --bundle`
    argument to `$ zipline run` or as the `bundle` argument to [`zipline.run_algorithm()`](api-reference.html#zipline.run_algorithm
    "zipline.run_algorithm").
  id: totrans-2032
  prefs: []
  type: TYPE_NORMAL
  zh: 通过将名称作为 `-b / --bundle` 参数传递给 `$ zipline run` 或作为 [`zipline.run_algorithm()`](api-reference.html#zipline.run_algorithm
    "zipline.run_algorithm") 的 `bundle` 参数，可以在回测中使用此数据。
- en: For more information see [Data](bundles.html#data-bundles) for more information.
  id: totrans-2033
  prefs: []
  type: TYPE_NORMAL
  zh: 有关更多信息，请参阅 [Data](bundles.html#data-bundles) 了解更多信息。
- en: String Support in Pipeline ([1174](https://github.com/stefan-jansen/zipline/issues/1174))
  id: totrans-2034
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 流水线中的字符串支持 ([1174](https://github.com/stefan-jansen/zipline/issues/1174))
- en: Added support for string data in Pipeline. [`zipline.pipeline.data.Column`](api-reference.html#zipline.pipeline.data.Column
    "zipline.pipeline.data.Column") now accepts `object` as a dtype, which signifies
    that loaders for that column should emit windowed iterators over the experimental
    new `LabelArray` class.
  id: totrans-2035
  prefs: []
  type: TYPE_NORMAL
  zh: 增加了对流水线中字符串数据的支持。[`zipline.pipeline.data.Column`](api-reference.html#zipline.pipeline.data.Column
    "zipline.pipeline.data.Column") 现在接受 `object` 作为数据类型，表示该列的加载器应发出实验性新 `LabelArray`
    类的窗口迭代器。
- en: 'Several new `Classifier` methods have also been added for constructing [`Filter`](api-reference.html#zipline.pipeline.Filter
    "zipline.pipeline.Filter") instances based on string operations. The new methods
    are:'
  id: totrans-2036
  prefs: []
  type: TYPE_NORMAL
  zh: 还添加了几个新的 `Classifier` 方法，用于构建基于字符串操作的 [`Filter`](api-reference.html#zipline.pipeline.Filter
    "zipline.pipeline.Filter") 实例。新方法包括：
- en: '`element_of()`'
  id: totrans-2037
  prefs:
  - PREF_BQ
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`element_of()`'
- en: ''
  id: totrans-2038
  prefs:
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  id: totrans-2039
  prefs:
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: '`startswith()`'
  id: totrans-2040
  prefs:
  - PREF_BQ
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`startswith()`'
- en: ''
  id: totrans-2041
  prefs:
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  id: totrans-2042
  prefs:
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: '`endswith()`'
  id: totrans-2043
  prefs:
  - PREF_BQ
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`endswith()`'
- en: ''
  id: totrans-2044
  prefs:
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  id: totrans-2045
  prefs:
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: '`has_substring()`'
  id: totrans-2046
  prefs:
  - PREF_BQ
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`has_substring()`'
- en: ''
  id: totrans-2047
  prefs:
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  id: totrans-2048
  prefs:
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: '`matches()`'
  id: totrans-2049
  prefs:
  - PREF_BQ
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`matches()`'
- en: ''
  id: totrans-2050
  prefs:
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  id: totrans-2051
  prefs:
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  id: totrans-2052
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '`element_of` is defined for all classifiers. The remaining methods are only
    defined for string-dtype classifiers.'
  id: totrans-2053
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '`element_of` 对所有分类器都进行了定义。其余方法仅对字符串数据类型的分类器进行了定义。'
- en: Enhancements
  id: totrans-2054
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 增强功能
- en: Made the data loading classes have more consistent interfaces. This includes
    the equity bar writers, adjustment writer, and asset db writer. The new interface
    is that the resource to be written to is passed at construction time and the data
    to write is provided later to the write method as dataframes or some iterator
    of dataframes. This model allows us to pass these writer objects around as a resource
    for other classes and functions to consume ([1109](https://github.com/stefan-jansen/zipline/issues/1109)
    and [1149](https://github.com/stefan-jansen/zipline/issues/1149)).
  id: totrans-2055
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使数据加载类具有更一致的接口。这包括股票条形写入器、调整写入器和资产数据库写入器。新接口是在构造时传递要写入的资源，稍后将数据提供给写入方法，作为数据帧或一些数据帧的迭代器。这种模型允许我们将这些写入器对象作为其他类和函数消耗的资源传递
    ([1109](https://github.com/stefan-jansen/zipline/issues/1109) 和 [1149](https://github.com/stefan-jansen/zipline/issues/1149))。
- en: Added masking to [`zipline.pipeline.CustomFactor`](api-reference.html#zipline.pipeline.CustomFactor
    "zipline.pipeline.CustomFactor"). Custom factors can now be passed a Filter upon
    instantiation. This tells the factor to only compute over stocks for which the
    filter returns True, rather than always computing over the entire universe of
    stocks. ([1095](https://github.com/stefan-jansen/zipline/issues/1095))
  id: totrans-2056
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为 [`zipline.pipeline.CustomFactor`](api-reference.html#zipline.pipeline.CustomFactor
    "zipline.pipeline.CustomFactor") 添加了掩码。自定义因子现在可以在实例化时传递一个过滤器。这告诉因子仅在过滤器返回 True
    的股票上计算，而不是始终在整个股票宇宙上计算。([1095](https://github.com/stefan-jansen/zipline/issues/1095))
- en: Added [`zipline.utils.cache.ExpiringCache`](api-reference.html#zipline.utils.cache.ExpiringCache
    "zipline.utils.cache.ExpiringCache"). A cache which wraps entries in a [`zipline.utils.cache.CachedObject`](api-reference.html#zipline.utils.cache.CachedObject
    "zipline.utils.cache.CachedObject"), which manages expiration of entries based
    on the dt supplied to the get method. ([1130](https://github.com/stefan-jansen/zipline/issues/1130))
  id: totrans-2057
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增加了[`zipline.utils.cache.ExpiringCache`](api-reference.html#zipline.utils.cache.ExpiringCache
    "zipline.utils.cache.ExpiringCache")。这是一个缓存，它将条目包装在[`zipline.utils.cache.CachedObject`](api-reference.html#zipline.utils.cache.CachedObject
    "zipline.utils.cache.CachedObject")中，该缓存根据get方法提供的dt管理条目的过期。（[1130](https://github.com/stefan-jansen/zipline/issues/1130)）
- en: Implemented `zipline.pipeline.factors.RecarrayField`, a new pipeline term designed
    to be the output type of a CustomFactor with multiple outputs. ([1119](https://github.com/stefan-jansen/zipline/issues/1119))
  id: totrans-2058
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 实现了`zipline.pipeline.factors.RecarrayField`，这是一种新的管道术语，设计用于自定义因子具有多个输出时的输出类型。（[1119](https://github.com/stefan-jansen/zipline/issues/1119)）
- en: Added optional outputs parameter to [`zipline.pipeline.CustomFactor`](api-reference.html#zipline.pipeline.CustomFactor
    "zipline.pipeline.CustomFactor"). Custom factors are now capable of computing
    and returning multiple outputs, each of which are themselves a Factor. ([1119](https://github.com/stefan-jansen/zipline/issues/1119))
  id: totrans-2059
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在[`zipline.pipeline.CustomFactor`](api-reference.html#zipline.pipeline.CustomFactor
    "zipline.pipeline.CustomFactor")中增加了可选的outputs参数。现在，自定义因子能够计算并返回多个输出，每个输出本身都是一个因子。（[1119](https://github.com/stefan-jansen/zipline/issues/1119)）
- en: Added support for string-dtype pipeline columns. Loaders for thse columns should
    produce instances of `zipline.lib.labelarray.LabelArray` when traversed. [`latest()`](api-reference.html#zipline.pipeline.data.BoundColumn.latest
    "zipline.pipeline.data.BoundColumn.latest") on string columns produces a string-dtype
    `zipline.pipeline.Classifier`. ([1174](https://github.com/stefan-jansen/zipline/issues/1174))
  id: totrans-2060
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增加了对字符串类型数据管道列的支持。这些列的加载器在遍历时应生成`zipline.lib.labelarray.LabelArray`实例。在字符串列上调用[`latest()`](api-reference.html#zipline.pipeline.data.BoundColumn.latest
    "zipline.pipeline.data.BoundColumn.latest")将产生一个字符串类型的`zipline.pipeline.Classifier`。（[1174](https://github.com/stefan-jansen/zipline/issues/1174)）
- en: Added several methods for converting Classifiers into Filters.
  id: totrans-2061
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增加了将分类器转换为过滤器的多种方法。
- en: 'The new methods are: - `element_of()` - `startswith()` - `endswith()` - `has_substring()`
    - `matches()`'
  id: totrans-2062
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 新增方法包括：- `element_of()` - `startswith()` - `endswith()` - `has_substring()`
    - `matches()`
- en: '`element_of` is defined for all classifiers. The remaining methods are only
    defined for strings. ([1174](https://github.com/stefan-jansen/zipline/issues/1174))'
  id: totrans-2063
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '`element_of` 定义了所有分类器。其余方法仅对字符串定义。（[1174](https://github.com/stefan-jansen/zipline/issues/1174)）'
- en: 'Added [`BollingerBands`](api-reference.html#zipline.pipeline.factors.BollingerBands
    "zipline.pipeline.factors.BollingerBands") factor. This factor implements the
    Bollinger Bands technical indicator: [https://en.wikipedia.org/wiki/Bollinger_Bands](https://en.wikipedia.org/wiki/Bollinger_Bands)
    ([1199](https://github.com/stefan-jansen/zipline/issues/1199)).'
  id: totrans-2064
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增加了[`BollingerBands`](api-reference.html#zipline.pipeline.factors.BollingerBands
    "zipline.pipeline.factors.BollingerBands")因子。该因子实现了布林带技术指标：[https://en.wikipedia.org/wiki/Bollinger_Bands](https://en.wikipedia.org/wiki/Bollinger_Bands)（[1199](https://github.com/stefan-jansen/zipline/issues/1199)）。
- en: Fetcher has been moved from Quantopian internal code into Zipline ([1105](https://github.com/stefan-jansen/zipline/issues/1105)).
  id: totrans-2065
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将Fetcher从Quantopian内部代码迁移到Zipline中（[1105](https://github.com/stefan-jansen/zipline/issues/1105)）。
- en: Added new built-in factors, [`RollingPearsonOfReturns`](api-reference.html#zipline.pipeline.factors.RollingPearsonOfReturns
    "zipline.pipeline.factors.RollingPearsonOfReturns"), [`RollingSpearmanOfReturns`](api-reference.html#zipline.pipeline.factors.RollingSpearmanOfReturns
    "zipline.pipeline.factors.RollingSpearmanOfReturns") and [`RollingLinearRegressionOfReturns`](api-reference.html#zipline.pipeline.factors.RollingLinearRegressionOfReturns
    "zipline.pipeline.factors.RollingLinearRegressionOfReturns") ([1154](https://github.com/stefan-jansen/zipline/issues/1154))
  id: totrans-2066
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增加了新的内置因子，[`RollingPearsonOfReturns`](api-reference.html#zipline.pipeline.factors.RollingPearsonOfReturns
    "zipline.pipeline.factors.RollingPearsonOfReturns")，[`RollingSpearmanOfReturns`](api-reference.html#zipline.pipeline.factors.RollingSpearmanOfReturns
    "zipline.pipeline.factors.RollingSpearmanOfReturns")和[`RollingLinearRegressionOfReturns`](api-reference.html#zipline.pipeline.factors.RollingLinearRegressionOfReturns
    "zipline.pipeline.factors.RollingLinearRegressionOfReturns"）（[1154](https://github.com/stefan-jansen/zipline/issues/1154)）
- en: Experimental Features
  id: totrans-2067
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 实验性功能
- en: Warning
  id: totrans-2068
  prefs: []
  type: TYPE_NORMAL
  zh: 警告
- en: Experimental features are subject to change.
  id: totrans-2069
  prefs: []
  type: TYPE_NORMAL
  zh: 实验性功能可能会发生变化。
- en: Added a new `zipline.lib.labelarray.LabelArray` class for efficiently representing
    and computing on string data with numpy. This class is conceptually similar to
    [`pandas.Categorical`](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Categorical.html#pandas.Categorical
    "(in pandas v2.0.3)"), in that it represents string arrays as arrays of indices
    into a (smaller) array of unique string values. ([1174](https://github.com/stefan-jansen/zipline/issues/1174))
  id: totrans-2070
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新增了`zipline.lib.labelarray.LabelArray`类，用于高效地表示和计算numpy中的字符串数据。该类在概念上类似于[`pandas.Categorical`](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Categorical.html#pandas.Categorical
    "(in pandas v2.0.3)")，它将字符串数组表示为索引数组，这些索引指向一个（较小的）唯一字符串值数组。([1174](https://github.com/stefan-jansen/zipline/issues/1174))
- en: Bug Fixes
  id: totrans-2071
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 错误修复
- en: None
  id: totrans-2072
  prefs: []
  type: TYPE_NORMAL
  zh: 无
- en: Performance
  id: totrans-2073
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 性能
- en: None
  id: totrans-2074
  prefs: []
  type: TYPE_NORMAL
  zh: 无
- en: Maintenance and Refactorings
  id: totrans-2075
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 维护和重构
- en: None
  id: totrans-2076
  prefs: []
  type: TYPE_NORMAL
  zh: 无
- en: Build
  id: totrans-2077
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 构建
- en: None
  id: totrans-2078
  prefs: []
  type: TYPE_NORMAL
  zh: 无
- en: Documentation
  id: totrans-2079
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 文档
- en: Updated documentation for the API methods ([1188](https://github.com/stefan-jansen/zipline/issues/1188)).
  id: totrans-2080
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 更新了API方法的文档 ([1188](https://github.com/stefan-jansen/zipline/issues/1188))。
- en: Updated release process to mention that docs should be built with python 3 ([1188](https://github.com/stefan-jansen/zipline/issues/1188)).
  id: totrans-2081
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 更新了发布流程，提到文档应该使用python 3构建 ([1188](https://github.com/stefan-jansen/zipline/issues/1188))。
- en: Miscellaneous
  id: totrans-2082
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 杂项
- en: Zipline now provides a [stub file](https://www.python.org/dev/peps/pep-0484/#stub-files)
    for the `zipline.api` module. This module is normally dynamically created so the
    stub file provides some static information for utilities that can consume it,
    for example PyCharm ([1208](https://github.com/stefan-jansen/zipline/issues/1208)).
  id: totrans-2083
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Zipline现在为`zipline.api`模块提供了一个[存根文件](https://www.python.org/dev/peps/pep-0484/#stub-files)。该模块通常是动态创建的，因此存根文件为可以消费它的实用程序提供了一些静态信息，例如PyCharm
    ([1208](https://github.com/stefan-jansen/zipline/issues/1208))。
- en: Highlights
  id: totrans-2084
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 亮点
- en: Zipline 1.0 Rewrite ([1105](https://github.com/stefan-jansen/zipline/issues/1105))
  id: totrans-2085
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: Zipline 1.0重写 ([1105](https://github.com/stefan-jansen/zipline/issues/1105))
- en: We have rewritten a lot of Zipline and its basic concepts in order to improve
    runtime performance. At the same time, we’ve introduced several new APIs.
  id: totrans-2086
  prefs: []
  type: TYPE_NORMAL
  zh: 我们对Zipline及其基本概念进行了大量重写，以提高运行时性能。同时，我们还引入了几个新的API。
- en: At a high level, earlier versions of Zipline simulations pulled from a multiplexed
    stream of data sources, which were merged via heapq. This stream was fed to the
    main simulation loop, driving the clock forward. This strong dependency on reading
    all the data made it difficult to optimize simulation performance because there
    was no connection between the amount of data we fetched and the amount of data
    actually used by the algorithm.
  id: totrans-2087
  prefs: []
  type: TYPE_NORMAL
  zh: 从高层次来看，早期版本的Zipline模拟从多路复用的数据源流中提取数据，这些数据源通过heapq合并。这个流被送入主模拟循环，推动时钟前进。这种对读取所有数据的强烈依赖使得优化模拟性能变得困难，因为我们在获取的数据量和算法实际使用的数据量之间没有联系。
- en: Now, we only fetch data when the algorithm needs it. A new class, [`DataPortal`](api-reference.html#zipline.data.data_portal.DataPortal
    "zipline.data.data_portal.DataPortal"), dispatches data requests to various data
    sources and returns the requested values. This makes the runtime of a simulation
    scale much more closely with the complexity of the algorithm, rather than with
    the number of assets provided by the data sources.
  id: totrans-2088
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，我们只在算法需要时才获取数据。一个新类，[`DataPortal`](api-reference.html#zipline.data.data_portal.DataPortal
    "zipline.data.data_portal.DataPortal")，将数据请求分派到各种数据源，并返回请求的值。这使得模拟的运行时间更紧密地与算法的复杂性而不是数据源提供的资产数量成比例。
- en: Instead of the data stream driving the clock, now simulations iterate through
    a pre-calculated set of day or minute timestamps. The timestamps are emitted by
    `MinuteSimulationClock` and `DailySimulationClock`, and consumed by the main loop
    in `transform()`.
  id: totrans-2089
  prefs: []
  type: TYPE_NORMAL
  zh: 不再是数据流驱动时钟，现在模拟迭代通过一个预先计算的日或分钟时间戳集合。时间戳由`MinuteSimulationClock`和`DailySimulationClock`发出，并由`transform()`中的主循环消费。
- en: 'We’ve retired the `data[sid(N)]` and `history` APIs, replacing them with several
    methods on the [`BarData`](api-reference.html#zipline.protocol.BarData "zipline.protocol.BarData")
    object: [`current()`](api-reference.html#zipline.protocol.BarData.current "zipline.protocol.BarData.current"),
    [`history()`](api-reference.html#zipline.protocol.BarData.history "zipline.protocol.BarData.history"),
    [`can_trade()`](api-reference.html#zipline.protocol.BarData.can_trade "zipline.protocol.BarData.can_trade"),
    and [`is_stale()`](api-reference.html#zipline.protocol.BarData.is_stale "zipline.protocol.BarData.is_stale").
    Old APIs will continue to work for now, but will issue deprecation warnings.'
  id: totrans-2090
  prefs: []
  type: TYPE_NORMAL
  zh: 我们已弃用`data[sid(N)]`和`history` API，用`[BarData](api-reference.html#zipline.protocol.BarData
    "zipline.protocol.BarData")`对象上的几个方法取而代之：`[current()](api-reference.html#zipline.protocol.BarData.current
    "zipline.protocol.BarData.current")`，`[history()](api-reference.html#zipline.protocol.BarData.history
    "zipline.protocol.BarData.history")`，`[can_trade()](api-reference.html#zipline.protocol.BarData.can_trade
    "zipline.protocol.BarData.can_trade")`，和`[is_stale()](api-reference.html#zipline.protocol.BarData.is_stale
    "zipline.protocol.BarData.is_stale")`。旧的API目前仍可使用，但会发出弃用警告。
- en: You can now pass in an adjustments source to the [`DataPortal`](api-reference.html#zipline.data.data_portal.DataPortal
    "zipline.data.data_portal.DataPortal"), and we will apply adjustments to the pricing
    data when looking backwards at data. Prices and volumes for execution and presented
    to the algorithm in data.current are the as-traded value of the asset.
  id: totrans-2091
  prefs: []
  type: TYPE_NORMAL
  zh: 现在可以将调整源传递给`[DataPortal](api-reference.html#zipline.data.data_portal.DataPortal
    "zipline.data.data_portal.DataPortal")`，当我们回顾数据时，我们将对定价数据应用调整。算法在data.current中接收到的执行价格和交易量是资产的实际交易价值。
- en: New Entry Points ([1173](https://github.com/stefan-jansen/zipline/issues/1173)
    and [1178](https://github.com/stefan-jansen/zipline/issues/1178))
  id: totrans-2092
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 新入口点（[1173](https://github.com/stefan-jansen/zipline/issues/1173)和[1178](https://github.com/stefan-jansen/zipline/issues/1178)）
- en: 'In order to make it easier to use zipline we have updated the entry points
    for a backtest. The three supported ways to run a backtest are now:'
  id: totrans-2093
  prefs: []
  type: TYPE_NORMAL
  zh: 为了使使用zipline更加容易，我们更新了回测的入口点。现在支持的三种运行回测的方式是：
- en: '`zipline.run_algo()`'
  id: totrans-2094
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`zipline.run_algo()`'
- en: '`$ zipline run`'
  id: totrans-2095
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`$ zipline run`'
- en: '`%zipline` (IPython magic)'
  id: totrans-2096
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`%zipline`（IPython magic）'
- en: Data Bundles ([1173](https://github.com/stefan-jansen/zipline/issues/1173) and
    [1178](https://github.com/stefan-jansen/zipline/issues/1178))
  id: totrans-2097
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 数据包（[1173](https://github.com/stefan-jansen/zipline/issues/1173)和[1178](https://github.com/stefan-jansen/zipline/issues/1178)）
- en: 1.0.0 introduces data bundles. Data bundles are groups of data that should be
    preloaded and used to run backtests later. This allows users to not need to specify
    which tickers they are interested in each time they run an algorithm. This also
    allows us to cache the data between runs.
  id: totrans-2098
  prefs: []
  type: TYPE_NORMAL
  zh: 1.0.0引入了数据包。数据包是应预加载并用于运行回测的一组数据。这允许用户无需每次运行算法时都指定他们感兴趣的符号。这也允许我们在运行之间缓存数据。
- en: 'By default, the `quantopian-quandl` bundle will be used which pulls data from
    Quantopian’s mirror of the quandl [WIKI dataset](https://www.quandl.com/data/WIKI).
    New bundles may be registered with [`zipline.data.bundles.register()`](api-reference.html#zipline.data.bundles.register
    "zipline.data.bundles.register") like:'
  id: totrans-2099
  prefs: []
  type: TYPE_NORMAL
  zh: 默认情况下，将使用`quantopian-quandl`包，该包从Quantopian的quandl [WIKI数据集](https://www.quandl.com/data/WIKI)镜像中提取数据。可以使用`[zipline.data.bundles.register()](api-reference.html#zipline.data.bundles.register
    "zipline.data.bundles.register")`注册新包，例如：
- en: '[PRE54]'
  id: totrans-2100
  prefs: []
  type: TYPE_PRE
  zh: '[PRE54]'
- en: This function should retrieve the data it needs and then use the writers that
    have been passed to write that data to disc in a location that zipline can find
    later.
  id: totrans-2101
  prefs: []
  type: TYPE_NORMAL
  zh: 此函数应检索所需数据，然后使用已传递的写入器将该数据写入磁盘上的位置，以便zipline稍后可以找到。
- en: This data can be used in backtests by passing the name as the `-b / --bundle`
    argument to `$ zipline run` or as the `bundle` argument to [`zipline.run_algorithm()`](api-reference.html#zipline.run_algorithm
    "zipline.run_algorithm").
  id: totrans-2102
  prefs: []
  type: TYPE_NORMAL
  zh: 通过将名称作为`-b / --bundle`参数传递给`$ zipline run`或作为`[zipline.run_algorithm()](api-reference.html#zipline.run_algorithm
    "zipline.run_algorithm")`的`bundle`参数，可以在回测中使用此数据。
- en: For more information see [Data](bundles.html#data-bundles) for more information.
  id: totrans-2103
  prefs: []
  type: TYPE_NORMAL
  zh: 如需了解更多信息，请参阅[数据](bundles.html#data-bundles)。
- en: String Support in Pipeline ([1174](https://github.com/stefan-jansen/zipline/issues/1174))
  id: totrans-2104
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 流水线中的字符串支持（[1174](https://github.com/stefan-jansen/zipline/issues/1174)）
- en: Added support for string data in Pipeline. [`zipline.pipeline.data.Column`](api-reference.html#zipline.pipeline.data.Column
    "zipline.pipeline.data.Column") now accepts `object` as a dtype, which signifies
    that loaders for that column should emit windowed iterators over the experimental
    new `LabelArray` class.
  id: totrans-2105
  prefs: []
  type: TYPE_NORMAL
  zh: 增加了对Pipeline中字符串数据的支持。[`zipline.pipeline.data.Column`](api-reference.html#zipline.pipeline.data.Column
    "zipline.pipeline.data.Column")现在接受`object`作为dtype，这意味着该列的加载器应该发出实验性的新`LabelArray`类的窗口迭代器。
- en: 'Several new `Classifier` methods have also been added for constructing [`Filter`](api-reference.html#zipline.pipeline.Filter
    "zipline.pipeline.Filter") instances based on string operations. The new methods
    are:'
  id: totrans-2106
  prefs: []
  type: TYPE_NORMAL
  zh: 还添加了几个新的`分类器`方法，用于构建基于字符串操作的[`过滤器`](api-reference.html#zipline.pipeline.Filter
    "zipline.pipeline.Filter")实例。新方法包括：
- en: '`element_of()`'
  id: totrans-2107
  prefs:
  - PREF_BQ
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`element_of()`'
- en: ''
  id: totrans-2108
  prefs:
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  id: totrans-2109
  prefs:
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: '`startswith()`'
  id: totrans-2110
  prefs:
  - PREF_BQ
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`startswith()`'
- en: ''
  id: totrans-2111
  prefs:
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  id: totrans-2112
  prefs:
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: '`endswith()`'
  id: totrans-2113
  prefs:
  - PREF_BQ
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`endswith()`'
- en: ''
  id: totrans-2114
  prefs:
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  id: totrans-2115
  prefs:
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: '`has_substring()`'
  id: totrans-2116
  prefs:
  - PREF_BQ
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`has_substring()`'
- en: ''
  id: totrans-2117
  prefs:
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  id: totrans-2118
  prefs:
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: '`matches()`'
  id: totrans-2119
  prefs:
  - PREF_BQ
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`matches()`'
- en: ''
  id: totrans-2120
  prefs:
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  id: totrans-2121
  prefs:
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  id: totrans-2122
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '`element_of` is defined for all classifiers. The remaining methods are only
    defined for string-dtype classifiers.'
  id: totrans-2123
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '`element_of` 为所有分类器定义。剩余的方法仅对字符串类型的分类器定义。'
- en: Zipline 1.0 Rewrite ([1105](https://github.com/stefan-jansen/zipline/issues/1105))
  id: totrans-2124
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: Zipline 1.0 重写 ([1105](https://github.com/stefan-jansen/zipline/issues/1105))
- en: We have rewritten a lot of Zipline and its basic concepts in order to improve
    runtime performance. At the same time, we’ve introduced several new APIs.
  id: totrans-2125
  prefs: []
  type: TYPE_NORMAL
  zh: 我们对Zipline及其基本概念进行了大量重写，以提高运行时性能。同时，我们引入了几个新的API。
- en: At a high level, earlier versions of Zipline simulations pulled from a multiplexed
    stream of data sources, which were merged via heapq. This stream was fed to the
    main simulation loop, driving the clock forward. This strong dependency on reading
    all the data made it difficult to optimize simulation performance because there
    was no connection between the amount of data we fetched and the amount of data
    actually used by the algorithm.
  id: totrans-2126
  prefs: []
  type: TYPE_NORMAL
  zh: 从高层次来看，早期版本的Zipline模拟从多路复用的数据源流中提取数据，这些数据源通过heapq合并。这个流被送入主模拟循环，推动时钟前进。这种对读取所有数据的强烈依赖使得优化模拟性能变得困难，因为我们获取的数据量与算法实际使用的数据量之间没有联系。
- en: Now, we only fetch data when the algorithm needs it. A new class, [`DataPortal`](api-reference.html#zipline.data.data_portal.DataPortal
    "zipline.data.data_portal.DataPortal"), dispatches data requests to various data
    sources and returns the requested values. This makes the runtime of a simulation
    scale much more closely with the complexity of the algorithm, rather than with
    the number of assets provided by the data sources.
  id: totrans-2127
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，我们只在算法需要时获取数据。一个新的类，[`数据门户`](api-reference.html#zipline.data.data_portal.DataPortal
    "zipline.data.data_portal.DataPortal")，将数据请求分发到各种数据源并返回请求的值。这使得模拟运行的时长更紧密地与算法的复杂性而不是数据源提供的资产数量成比例。
- en: Instead of the data stream driving the clock, now simulations iterate through
    a pre-calculated set of day or minute timestamps. The timestamps are emitted by
    `MinuteSimulationClock` and `DailySimulationClock`, and consumed by the main loop
    in `transform()`.
  id: totrans-2128
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，模拟不再由数据流驱动时钟，而是迭代通过一组预先计算的日或分钟时间戳。这些时间戳由`MinuteSimulationClock`和`DailySimulationClock`发出，并由`transform()`中的主循环消费。
- en: 'We’ve retired the `data[sid(N)]` and `history` APIs, replacing them with several
    methods on the [`BarData`](api-reference.html#zipline.protocol.BarData "zipline.protocol.BarData")
    object: [`current()`](api-reference.html#zipline.protocol.BarData.current "zipline.protocol.BarData.current"),
    [`history()`](api-reference.html#zipline.protocol.BarData.history "zipline.protocol.BarData.history"),
    [`can_trade()`](api-reference.html#zipline.protocol.BarData.can_trade "zipline.protocol.BarData.can_trade"),
    and [`is_stale()`](api-reference.html#zipline.protocol.BarData.is_stale "zipline.protocol.BarData.is_stale").
    Old APIs will continue to work for now, but will issue deprecation warnings.'
  id: totrans-2129
  prefs: []
  type: TYPE_NORMAL
  zh: 我们退役了`data[sid(N)]`和`history` API，用[`BarData`](api-reference.html#zipline.protocol.BarData
    "zipline.protocol.BarData")对象上的几个方法取而代之：[`current()`](api-reference.html#zipline.protocol.BarData.current
    "zipline.protocol.BarData.current")、[`history()`](api-reference.html#zipline.protocol.BarData.history
    "zipline.protocol.BarData.history")、[`can_trade()`](api-reference.html#zipline.protocol.BarData.can_trade
    "zipline.protocol.BarData.can_trade")和[`is_stale()`](api-reference.html#zipline.protocol.BarData.is_stale
    "zipline.protocol.BarData.is_stale")。旧的API将继续工作，但现在会发出弃用警告。
- en: You can now pass in an adjustments source to the [`DataPortal`](api-reference.html#zipline.data.data_portal.DataPortal
    "zipline.data.data_portal.DataPortal"), and we will apply adjustments to the pricing
    data when looking backwards at data. Prices and volumes for execution and presented
    to the algorithm in data.current are the as-traded value of the asset.
  id: totrans-2130
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，您可以将调整源传递给[`DataPortal`](api-reference.html#zipline.data.data_portal.DataPortal
    "zipline.data.data_portal.DataPortal")，我们将对定价数据应用调整，以便在查看数据时向后看。执行和呈现给算法的数据的当前价格和成交量是资产的交易价值。
- en: New Entry Points ([1173](https://github.com/stefan-jansen/zipline/issues/1173)
    and [1178](https://github.com/stefan-jansen/zipline/issues/1178))
  id: totrans-2131
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 新入口点（[1173](https://github.com/stefan-jansen/zipline/issues/1173)和[1178](https://github.com/stefan-jansen/zipline/issues/1178)）
- en: 'In order to make it easier to use zipline we have updated the entry points
    for a backtest. The three supported ways to run a backtest are now:'
  id: totrans-2132
  prefs: []
  type: TYPE_NORMAL
  zh: 为了使zipline的使用更加便捷，我们更新了回测的入口点。现在支持的三种运行回测的方式包括：
- en: '`zipline.run_algo()`'
  id: totrans-2133
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`zipline.run_algo()`'
- en: '`$ zipline run`'
  id: totrans-2134
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`$ zipline run`'
- en: '`%zipline` (IPython magic)'
  id: totrans-2135
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`%zipline`（IPython magic）'
- en: Data Bundles ([1173](https://github.com/stefan-jansen/zipline/issues/1173) and
    [1178](https://github.com/stefan-jansen/zipline/issues/1178))
  id: totrans-2136
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 数据包（[1173](https://github.com/stefan-jansen/zipline/issues/1173)和[1178](https://github.com/stefan-jansen/zipline/issues/1178)）
- en: 1.0.0 introduces data bundles. Data bundles are groups of data that should be
    preloaded and used to run backtests later. This allows users to not need to specify
    which tickers they are interested in each time they run an algorithm. This also
    allows us to cache the data between runs.
  id: totrans-2137
  prefs: []
  type: TYPE_NORMAL
  zh: 1.0.0引入了数据包。数据包是应预加载并用于稍后运行回测的数据组。这允许用户无需每次运行算法时指定他们感兴趣的符号。这也允许我们在运行之间缓存数据。
- en: 'By default, the `quantopian-quandl` bundle will be used which pulls data from
    Quantopian’s mirror of the quandl [WIKI dataset](https://www.quandl.com/data/WIKI).
    New bundles may be registered with [`zipline.data.bundles.register()`](api-reference.html#zipline.data.bundles.register
    "zipline.data.bundles.register") like:'
  id: totrans-2138
  prefs: []
  type: TYPE_NORMAL
  zh: 默认情况下，将使用`quantopian-quandl`包，该包从Quantopian的quandl镜像中提取数据[WIKI数据集](https://www.quandl.com/data/WIKI)。可以通过[`zipline.data.bundles.register()`](api-reference.html#zipline.data.bundles.register
    "zipline.data.bundles.register")注册新包，例如：
- en: '[PRE55]'
  id: totrans-2139
  prefs: []
  type: TYPE_PRE
  zh: '[PRE55]'
- en: This function should retrieve the data it needs and then use the writers that
    have been passed to write that data to disc in a location that zipline can find
    later.
  id: totrans-2140
  prefs: []
  type: TYPE_NORMAL
  zh: 此函数应检索所需数据，然后使用已传递的写入器将该数据写入磁盘上的位置，以便zipline稍后可以找到。
- en: This data can be used in backtests by passing the name as the `-b / --bundle`
    argument to `$ zipline run` or as the `bundle` argument to [`zipline.run_algorithm()`](api-reference.html#zipline.run_algorithm
    "zipline.run_algorithm").
  id: totrans-2141
  prefs: []
  type: TYPE_NORMAL
  zh: 通过将名称作为`-b / --bundle`参数传递给 `$ zipline run` 或作为 `bundle` 参数传递给 [`zipline.run_algorithm()`](api-reference.html#zipline.run_algorithm
    "zipline.run_algorithm")，可以在回测中使用此数据。
- en: For more information see [Data](bundles.html#data-bundles) for more information.
  id: totrans-2142
  prefs: []
  type: TYPE_NORMAL
  zh: 有关更多信息，请参阅[数据](bundles.html#data-bundles)了解更多信息。
- en: String Support in Pipeline ([1174](https://github.com/stefan-jansen/zipline/issues/1174))
  id: totrans-2143
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 管道中的字符串支持（[1174](https://github.com/stefan-jansen/zipline/issues/1174)）
- en: Added support for string data in Pipeline. [`zipline.pipeline.data.Column`](api-reference.html#zipline.pipeline.data.Column
    "zipline.pipeline.data.Column") now accepts `object` as a dtype, which signifies
    that loaders for that column should emit windowed iterators over the experimental
    new `LabelArray` class.
  id: totrans-2144
  prefs: []
  type: TYPE_NORMAL
  zh: 增加了对管道中字符串数据的支持。[`zipline.pipeline.data.Column`](api-reference.html#zipline.pipeline.data.Column
    "zipline.pipeline.data.Column")现在接受`object`作为数据类型，这表示该列的加载器应发出实验性新`LabelArray`类的窗口迭代器。
- en: 'Several new `Classifier` methods have also been added for constructing [`Filter`](api-reference.html#zipline.pipeline.Filter
    "zipline.pipeline.Filter") instances based on string operations. The new methods
    are:'
  id: totrans-2145
  prefs: []
  type: TYPE_NORMAL
  zh: 还新增了多个`分类器`方法，用于构建基于字符串操作的[`过滤器`](api-reference.html#zipline.pipeline.Filter
    "zipline.pipeline.Filter")实例。新增的方法有：
- en: '`element_of()`'
  id: totrans-2146
  prefs:
  - PREF_BQ
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`element_of()`'
- en: ''
  id: totrans-2147
  prefs:
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  id: totrans-2148
  prefs:
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: '`startswith()`'
  id: totrans-2149
  prefs:
  - PREF_BQ
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`startswith()`'
- en: ''
  id: totrans-2150
  prefs:
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  id: totrans-2151
  prefs:
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: '`endswith()`'
  id: totrans-2152
  prefs:
  - PREF_BQ
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`endswith()`'
- en: ''
  id: totrans-2153
  prefs:
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  id: totrans-2154
  prefs:
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: '`has_substring()`'
  id: totrans-2155
  prefs:
  - PREF_BQ
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`has_substring()`'
- en: ''
  id: totrans-2156
  prefs:
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  id: totrans-2157
  prefs:
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: '`matches()`'
  id: totrans-2158
  prefs:
  - PREF_BQ
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`matches()`'
- en: ''
  id: totrans-2159
  prefs:
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  id: totrans-2160
  prefs:
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  id: totrans-2161
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '`element_of` is defined for all classifiers. The remaining methods are only
    defined for string-dtype classifiers.'
  id: totrans-2162
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '`element_of` 为所有分类器定义。其余方法仅针对字符串数据类型的分类器定义。'
- en: Enhancements
  id: totrans-2163
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 增强功能
- en: Made the data loading classes have more consistent interfaces. This includes
    the equity bar writers, adjustment writer, and asset db writer. The new interface
    is that the resource to be written to is passed at construction time and the data
    to write is provided later to the write method as dataframes or some iterator
    of dataframes. This model allows us to pass these writer objects around as a resource
    for other classes and functions to consume ([1109](https://github.com/stefan-jansen/zipline/issues/1109)
    and [1149](https://github.com/stefan-jansen/zipline/issues/1149)).
  id: totrans-2164
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使数据加载类具有更一致的接口。这包括股票条形写入器、调整写入器和资产数据库写入器。新的接口是在构造时传递要写入的资源，稍后将数据提供给write方法，作为数据帧或数据帧的某些迭代器。这种模式允许我们将这些写入器对象作为其他类和函数可以消费的资源传递（[1109](https://github.com/stefan-jansen/zipline/issues/1109)和[1149](https://github.com/stefan-jansen/zipline/issues/1149)）。
- en: Added masking to [`zipline.pipeline.CustomFactor`](api-reference.html#zipline.pipeline.CustomFactor
    "zipline.pipeline.CustomFactor"). Custom factors can now be passed a Filter upon
    instantiation. This tells the factor to only compute over stocks for which the
    filter returns True, rather than always computing over the entire universe of
    stocks. ([1095](https://github.com/stefan-jansen/zipline/issues/1095))
  id: totrans-2165
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为[`zipline.pipeline.CustomFactor`](api-reference.html#zipline.pipeline.CustomFactor
    "zipline.pipeline.CustomFactor")添加了掩码功能。自定义因子现在可以在实例化时传递一个过滤器。这告诉因子只计算过滤器返回True的股票，而不是总是计算整个股票宇宙。（[1095](https://github.com/stefan-jansen/zipline/issues/1095)）
- en: Added [`zipline.utils.cache.ExpiringCache`](api-reference.html#zipline.utils.cache.ExpiringCache
    "zipline.utils.cache.ExpiringCache"). A cache which wraps entries in a [`zipline.utils.cache.CachedObject`](api-reference.html#zipline.utils.cache.CachedObject
    "zipline.utils.cache.CachedObject"), which manages expiration of entries based
    on the dt supplied to the get method. ([1130](https://github.com/stefan-jansen/zipline/issues/1130))
  id: totrans-2166
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新增了[`zipline.utils.cache.ExpiringCache`](api-reference.html#zipline.utils.cache.ExpiringCache
    "zipline.utils.cache.ExpiringCache")。这是一个缓存，它将条目包装在[`zipline.utils.cache.CachedObject`](api-reference.html#zipline.utils.cache.CachedObject
    "zipline.utils.cache.CachedObject")中，该缓存根据get方法提供的dt管理条目的过期。（[1130](https://github.com/stefan-jansen/zipline/issues/1130)）
- en: Implemented `zipline.pipeline.factors.RecarrayField`, a new pipeline term designed
    to be the output type of a CustomFactor with multiple outputs. ([1119](https://github.com/stefan-jansen/zipline/issues/1119))
  id: totrans-2167
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 实现了`zipline.pipeline.factors.RecarrayField`，这是一个新的管道术语，设计为具有多个输出的自定义因子的输出类型。（[1119](https://github.com/stefan-jansen/zipline/issues/1119)）
- en: Added optional outputs parameter to [`zipline.pipeline.CustomFactor`](api-reference.html#zipline.pipeline.CustomFactor
    "zipline.pipeline.CustomFactor"). Custom factors are now capable of computing
    and returning multiple outputs, each of which are themselves a Factor. ([1119](https://github.com/stefan-jansen/zipline/issues/1119))
  id: totrans-2168
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为[`zipline.pipeline.CustomFactor`](api-reference.html#zipline.pipeline.CustomFactor
    "zipline.pipeline.CustomFactor")添加了可选的outputs参数。自定义因子现在能够计算并返回多个输出，每个输出本身都是一个因子。（[1119](https://github.com/stefan-jansen/zipline/issues/1119)）
- en: Added support for string-dtype pipeline columns. Loaders for thse columns should
    produce instances of `zipline.lib.labelarray.LabelArray` when traversed. [`latest()`](api-reference.html#zipline.pipeline.data.BoundColumn.latest
    "zipline.pipeline.data.BoundColumn.latest") on string columns produces a string-dtype
    `zipline.pipeline.Classifier`. ([1174](https://github.com/stefan-jansen/zipline/issues/1174))
  id: totrans-2169
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增加了对字符串数据类型管道列的支持。这些列的加载器在遍历时应该生成`zipline.lib.labelarray.LabelArray`的实例。字符串列上的[`latest()`](api-reference.html#zipline.pipeline.data.BoundColumn.latest
    "zipline.pipeline.data.BoundColumn.latest")生成一个字符串数据类型的`zipline.pipeline.Classifier`。（[1174](https://github.com/stefan-jansen/zipline/issues/1174)）
- en: Added several methods for converting Classifiers into Filters.
  id: totrans-2170
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增加了几种将分类器转换为过滤器的方法。
- en: 'The new methods are: - `element_of()` - `startswith()` - `endswith()` - `has_substring()`
    - `matches()`'
  id: totrans-2171
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 新增的方法包括：- `element_of()` - `startswith()` - `endswith()` - `has_substring()`
    - `matches()`
- en: '`element_of` is defined for all classifiers. The remaining methods are only
    defined for strings. ([1174](https://github.com/stefan-jansen/zipline/issues/1174))'
  id: totrans-2172
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '`element_of` 为所有分类器定义。其余方法仅对字符串定义。（[1174](https://github.com/stefan-jansen/zipline/issues/1174)）'
- en: 'Added [`BollingerBands`](api-reference.html#zipline.pipeline.factors.BollingerBands
    "zipline.pipeline.factors.BollingerBands") factor. This factor implements the
    Bollinger Bands technical indicator: [https://en.wikipedia.org/wiki/Bollinger_Bands](https://en.wikipedia.org/wiki/Bollinger_Bands)
    ([1199](https://github.com/stefan-jansen/zipline/issues/1199)).'
  id: totrans-2173
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新增了 [`BollingerBands`](api-reference.html#zipline.pipeline.factors.BollingerBands
    "zipline.pipeline.factors.BollingerBands") 因子。该因子实现了布林带技术指标：[https://en.wikipedia.org/wiki/Bollinger_Bands](https://en.wikipedia.org/wiki/Bollinger_Bands)
    ([1199](https://github.com/stefan-jansen/zipline/issues/1199))。
- en: Fetcher has been moved from Quantopian internal code into Zipline ([1105](https://github.com/stefan-jansen/zipline/issues/1105)).
  id: totrans-2174
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Fetcher 已从 Quantopian 内部代码移至 Zipline ([1105](https://github.com/stefan-jansen/zipline/issues/1105))。
- en: Added new built-in factors, [`RollingPearsonOfReturns`](api-reference.html#zipline.pipeline.factors.RollingPearsonOfReturns
    "zipline.pipeline.factors.RollingPearsonOfReturns"), [`RollingSpearmanOfReturns`](api-reference.html#zipline.pipeline.factors.RollingSpearmanOfReturns
    "zipline.pipeline.factors.RollingSpearmanOfReturns") and [`RollingLinearRegressionOfReturns`](api-reference.html#zipline.pipeline.factors.RollingLinearRegressionOfReturns
    "zipline.pipeline.factors.RollingLinearRegressionOfReturns") ([1154](https://github.com/stefan-jansen/zipline/issues/1154))
  id: totrans-2175
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新增了新的内置因子，[`RollingPearsonOfReturns`](api-reference.html#zipline.pipeline.factors.RollingPearsonOfReturns
    "zipline.pipeline.factors.RollingPearsonOfReturns")、[`RollingSpearmanOfReturns`](api-reference.html#zipline.pipeline.factors.RollingSpearmanOfReturns
    "zipline.pipeline.factors.RollingSpearmanOfReturns") 和 [`RollingLinearRegressionOfReturns`](api-reference.html#zipline.pipeline.factors.RollingLinearRegressionOfReturns
    "zipline.pipeline.factors.RollingLinearRegressionOfReturns") ([1154](https://github.com/stefan-jansen/zipline/issues/1154))
- en: Experimental Features
  id: totrans-2176
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 实验性功能
- en: Warning
  id: totrans-2177
  prefs: []
  type: TYPE_NORMAL
  zh: 警告
- en: Experimental features are subject to change.
  id: totrans-2178
  prefs: []
  type: TYPE_NORMAL
  zh: 实验性功能可能会发生变化。
- en: Added a new `zipline.lib.labelarray.LabelArray` class for efficiently representing
    and computing on string data with numpy. This class is conceptually similar to
    [`pandas.Categorical`](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Categorical.html#pandas.Categorical
    "(in pandas v2.0.3)"), in that it represents string arrays as arrays of indices
    into a (smaller) array of unique string values. ([1174](https://github.com/stefan-jansen/zipline/issues/1174))
  id: totrans-2179
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新增了一个新的 `zipline.lib.labelarray.LabelArray` 类，用于高效地表示和计算 numpy 中的字符串数据。这个类在概念上类似于
    [`pandas.Categorical`](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Categorical.html#pandas.Categorical
    "(in pandas v2.0.3)")，它将字符串数组表示为索引数组，索引指向一个（较小的）唯一字符串值数组。([1174](https://github.com/stefan-jansen/zipline/issues/1174))
- en: Bug Fixes
  id: totrans-2180
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 错误修复
- en: None
  id: totrans-2181
  prefs: []
  type: TYPE_NORMAL
  zh: 无
- en: Performance
  id: totrans-2182
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 性能
- en: None
  id: totrans-2183
  prefs: []
  type: TYPE_NORMAL
  zh: 无
- en: Maintenance and Refactorings
  id: totrans-2184
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 维护和重构
- en: None
  id: totrans-2185
  prefs: []
  type: TYPE_NORMAL
  zh: 无
- en: Build
  id: totrans-2186
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 构建
- en: None
  id: totrans-2187
  prefs: []
  type: TYPE_NORMAL
  zh: 无
- en: Documentation
  id: totrans-2188
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 文档
- en: Updated documentation for the API methods ([1188](https://github.com/stefan-jansen/zipline/issues/1188)).
  id: totrans-2189
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 更新了 API 方法的文档 ([1188](https://github.com/stefan-jansen/zipline/issues/1188))。
- en: Updated release process to mention that docs should be built with python 3 ([1188](https://github.com/stefan-jansen/zipline/issues/1188)).
  id: totrans-2190
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 更新了发布流程，提到文档应该使用 Python 3 构建 ([1188](https://github.com/stefan-jansen/zipline/issues/1188))。
- en: Miscellaneous
  id: totrans-2191
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 杂项
- en: Zipline now provides a [stub file](https://www.python.org/dev/peps/pep-0484/#stub-files)
    for the `zipline.api` module. This module is normally dynamically created so the
    stub file provides some static information for utilities that can consume it,
    for example PyCharm ([1208](https://github.com/stefan-jansen/zipline/issues/1208)).
  id: totrans-2192
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Zipline 现在为 `zipline.api` 模块提供了一个 [stub 文件](https://www.python.org/dev/peps/pep-0484/#stub-files)。该模块通常是动态创建的，因此
    stub 文件为能够消费它的工具提供了一些静态信息，例如 PyCharm ([1208](https://github.com/stefan-jansen/zipline/issues/1208))。
- en: Release 0.9.0
  id: totrans-2193
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 发布 0.9.0
- en: 'Release:'
  id: totrans-2194
  prefs: []
  type: TYPE_NORMAL
  zh: 发布：
- en: 0.9.0
  id: totrans-2195
  prefs: []
  type: TYPE_NORMAL
  zh: 0.9.0
- en: 'Date:'
  id: totrans-2196
  prefs: []
  type: TYPE_NORMAL
  zh: 日期：
- en: March 29, 2016
  id: totrans-2197
  prefs: []
  type: TYPE_NORMAL
  zh: 2016年3月29日
- en: Highlights
  id: totrans-2198
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 亮点
- en: Added classifiers and normalization methods to pipeline, along with new datasets
    and factors.
  id: totrans-2199
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为管道增加了分类器和归一化方法，以及新的数据集和因子。
- en: Added support for Windows with continuous integration on AppVeyor.
  id: totrans-2200
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增加了对 Windows 的支持，并在 AppVeyor 上进行持续集成。
- en: Enhancements
  id: totrans-2201
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 增强功能
- en: Added new datasets `CashBuybackAuthorizations` and `ShareBuybackAuthorizations`
    for use in the Pipeline API. These datasets provide an abstract interface for
    adding cash and share buyback authorizations data, respectively, to a new algorithm.
    pandas-based reference implementations for these datasets can be found in `zipline.pipeline.loaders.buyback_auth`,
    and experimental blaze-based implementations can be found in `zipline.pipeline.loaders.blaze.buyback_auth`.
    ([1022](https://github.com/stefan-jansen/zipline/issues/1022)).
  id: totrans-2202
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新增了`CashBuybackAuthorizations`和`ShareBuybackAuthorizations`两个数据集，用于管道API。这些数据集提供了一个抽象接口，用于分别向新算法添加现金和股票回购授权数据。基于pandas的这些数据集的参考实现可以在`zipline.pipeline.loaders.buyback_auth`中找到，而基于blaze的实验性实现可以在`zipline.pipeline.loaders.blaze.buyback_auth`中找到。([1022](https://github.com/stefan-jansen/zipline/issues/1022))
- en: Added new datasets `DividendsByExDate`, `DividendsByPayDate`, and `DividendsByAnnouncementDate`
    for use in the Pipeline API. These datasets provide an abstract interface for
    adding dividends data organized by ex date, pay date, and announcement date, respectively,
    to a new algorithm. pandas-based reference implementations for these datasets
    can be found in `zipline.pipeline.loaders.dividends`, and experimental blaze-based
    implementations can be found in `zipline.pipeline.loaders.blaze.dividends`. ([1093](https://github.com/stefan-jansen/zipline/issues/1093)).
  id: totrans-2203
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新增了`DividendsByExDate`、`DividendsByPayDate`和`DividendsByAnnouncementDate`三个数据集，用于管道API。这些数据集提供了一个抽象接口，用于按除息日、支付日和公告日分别向新算法添加股息数据。基于pandas的这些数据集的参考实现可以在`zipline.pipeline.loaders.dividends`中找到，而基于blaze的实验性实现可以在`zipline.pipeline.loaders.blaze.dividends`中找到。([1093](https://github.com/stefan-jansen/zipline/issues/1093))
- en: Added new built-in factors, `zipline.pipeline.factors.BusinessDaysSinceCashBuybackAuth`
    and `zipline.pipeline.factors.BusinessDaysSinceShareBuybackAuth`. These factors
    use the new `CashBuybackAuthorizations` and `ShareBuybackAuthorizations` datasets,
    respectively. ([1022](https://github.com/stefan-jansen/zipline/issues/1022)).
  id: totrans-2204
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新增了内置因子`zipline.pipeline.factors.BusinessDaysSinceCashBuybackAuth`和`zipline.pipeline.factors.BusinessDaysSinceShareBuybackAuth`。这些因子分别使用新的`CashBuybackAuthorizations`和`ShareBuybackAuthorizations`数据集。([1022](https://github.com/stefan-jansen/zipline/issues/1022))
- en: Added new built-in factors, `zipline.pipeline.factors.BusinessDaysSinceDividendAnnouncement`,
    `zipline.pipeline.factors.BusinessDaysUntilNextExDate`, and `zipline.pipeline.factors.BusinessDaysSincePreviousExDate`.
    These factors use the new `DividendsByAnnouncementDate` and ``DividendsByExDate`
    datasets, respectively. ([1093](https://github.com/stefan-jansen/zipline/issues/1093)).
  id: totrans-2205
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新增了内置因子`zipline.pipeline.factors.BusinessDaysSinceDividendAnnouncement`、`zipline.pipeline.factors.BusinessDaysUntilNextExDate`和`zipline.pipeline.factors.BusinessDaysSincePreviousExDate`。这些因子分别使用新的`DividendsByAnnouncementDate`和`DividendsByExDate`数据集。([1093](https://github.com/stefan-jansen/zipline/issues/1093))
- en: Implemented `zipline.pipeline.Classifier`, a new core pipeline API term representing
    grouping keys. Classifiers are primarily used by passing them as the `groupby`
    parameter to factor normalization methods. ([1046](https://github.com/stefan-jansen/zipline/issues/1046))
  id: totrans-2206
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 实现了`zipline.pipeline.Classifier`，这是一个新的核心管道API术语，代表分组键。分类器主要通过将它们作为`groupby`参数传递给因子归一化方法来使用。([1046](https://github.com/stefan-jansen/zipline/issues/1046))
- en: 'Added factor normalization methods: [`zipline.pipeline.Factor.demean()`](api-reference.html#zipline.pipeline.Factor.demean
    "zipline.pipeline.Factor.demean") and [`zipline.pipeline.Factor.zscore()`](api-reference.html#zipline.pipeline.Factor.zscore
    "zipline.pipeline.Factor.zscore"). ([1046](https://github.com/stefan-jansen/zipline/issues/1046))'
  id: totrans-2207
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新增了因子归一化方法：[`zipline.pipeline.Factor.demean()`](api-reference.html#zipline.pipeline.Factor.demean
    "zipline.pipeline.Factor.demean")和[`zipline.pipeline.Factor.zscore()`](api-reference.html#zipline.pipeline.Factor.zscore
    "zipline.pipeline.Factor.zscore")。([1046](https://github.com/stefan-jansen/zipline/issues/1046))
- en: Added [`zipline.pipeline.Factor.quantiles()`](api-reference.html#zipline.pipeline.Factor.quantiles
    "zipline.pipeline.Factor.quantiles"), a method for computing a Classifier from
    a Factor by partitioning into equally-sized buckets. Also added helpers for common
    quantile sizes ([`zipline.pipeline.Factor.quartiles()`](api-reference.html#zipline.pipeline.Factor.quartiles
    "zipline.pipeline.Factor.quartiles"), [`zipline.pipeline.Factor.quartiles()`](api-reference.html#zipline.pipeline.Factor.quartiles
    "zipline.pipeline.Factor.quartiles"), and [`zipline.pipeline.Factor.deciles()`](api-reference.html#zipline.pipeline.Factor.deciles
    "zipline.pipeline.Factor.deciles")) ([1075](https://github.com/stefan-jansen/zipline/issues/1075)).
  id: totrans-2208
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加了[`zipline.pipeline.Factor.quantiles()`](api-reference.html#zipline.pipeline.Factor.quantiles
    "zipline.pipeline.Factor.quantiles")，这是一个方法，用于通过将因子分成等大小的桶来计算一个分类器。还添加了常见分位数大小的辅助方法([`zipline.pipeline.Factor.quartiles()`](api-reference.html#zipline.pipeline.Factor.quartiles
    "zipline.pipeline.Factor.quartiles")，[`zipline.pipeline.Factor.quartiles()`](api-reference.html#zipline.pipeline.Factor.quartiles
    "zipline.pipeline.Factor.quartiles")，和[`zipline.pipeline.Factor.deciles()`](api-reference.html#zipline.pipeline.Factor.deciles
    "zipline.pipeline.Factor.deciles")) ([1075](https://github.com/stefan-jansen/zipline/issues/1075))。
- en: Experimental Features
  id: totrans-2209
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 实验性功能
- en: Warning
  id: totrans-2210
  prefs: []
  type: TYPE_NORMAL
  zh: 警告
- en: Experimental features are subject to change.
  id: totrans-2211
  prefs: []
  type: TYPE_NORMAL
  zh: 实验性功能可能会发生变化。
- en: None
  id: totrans-2212
  prefs: []
  type: TYPE_NORMAL
  zh: 无
- en: Bug Fixes
  id: totrans-2213
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 错误修复
- en: Fixed a bug where merging two numerical expressions failed given too many inputs.
    This caused running a pipeline to fail when combining more than ten factors or
    filters. ([1072](https://github.com/stefan-jansen/zipline/issues/1072))
  id: totrans-2214
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了一个bug，该bug导致在输入过多时合并两个数值表达式失败。这导致在合并超过十个因子或过滤器时运行管道失败。([1072](https://github.com/stefan-jansen/zipline/issues/1072))
- en: Performance
  id: totrans-2215
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 性能
- en: None
  id: totrans-2216
  prefs: []
  type: TYPE_NORMAL
  zh: 无
- en: Maintenance and Refactorings
  id: totrans-2217
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 维护和重构
- en: None
  id: totrans-2218
  prefs: []
  type: TYPE_NORMAL
  zh: 无
- en: Build
  id: totrans-2219
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 构建
- en: Added AppVeyor for continuous integration on Windows. Added conda build of zipline
    and its dependencies to AppVeyor and Travis builds, which upload their results
    to anaconda.org labeled with “ci”. ([981](https://github.com/stefan-jansen/zipline/issues/981))
  id: totrans-2220
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为Windows上的持续集成添加了AppVeyor。在AppVeyor和Travis构建中添加了zipline及其依赖项的conda构建，这些构建将其结果上传到anaconda.org，并标记为“ci”。([981](https://github.com/stefan-jansen/zipline/issues/981))
- en: Documentation
  id: totrans-2221
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 文档
- en: None
  id: totrans-2222
  prefs: []
  type: TYPE_NORMAL
  zh: 无
- en: Miscellaneous
  id: totrans-2223
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 杂项
- en: 'Adds `ZiplineTestCase` which provides hooks to consume test fixtures. Fixtures
    are things like: `WithAssetFinder` which will make `self.asset_finder` available
    to your test with some mock data ([1042](https://github.com/stefan-jansen/zipline/issues/1042)).'
  id: totrans-2224
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加了`ZiplineTestCase`，它提供了消费测试fixture的钩子。Fixture包括像`WithAssetFinder`这样的东西，它会在你的测试中使`self.asset_finder`可用，并附带一些mock数据([1042](https://github.com/stefan-jansen/zipline/issues/1042))。
- en: Highlights
  id: totrans-2225
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 亮点
- en: Added classifiers and normalization methods to pipeline, along with new datasets
    and factors.
  id: totrans-2226
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为pipeline添加了分类器和归一化方法，以及新的数据集和因子。
- en: Added support for Windows with continuous integration on AppVeyor.
  id: totrans-2227
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增加了对Windows系统的持续集成支持，使用AppVeyor进行集成。
- en: Enhancements
  id: totrans-2228
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 增强功能
- en: Added new datasets `CashBuybackAuthorizations` and `ShareBuybackAuthorizations`
    for use in the Pipeline API. These datasets provide an abstract interface for
    adding cash and share buyback authorizations data, respectively, to a new algorithm.
    pandas-based reference implementations for these datasets can be found in `zipline.pipeline.loaders.buyback_auth`,
    and experimental blaze-based implementations can be found in `zipline.pipeline.loaders.blaze.buyback_auth`.
    ([1022](https://github.com/stefan-jansen/zipline/issues/1022)).
  id: totrans-2229
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为Pipeline API添加了新的数据集`CashBuybackAuthorizations`和`ShareBuybackAuthorizations`。这些数据集提供了一个抽象接口，用于分别为一个新的算法添加现金和股票回购授权数据。这些数据集的基于pandas的参考实现可以在`zipline.pipeline.loaders.buyback_auth`中找到，而基于blaze的实验性实现可以在`zipline.pipeline.loaders.blaze.buyback_auth`中找到。([1022](https://github.com/stefan-jansen/zipline/issues/1022))
- en: Added new datasets `DividendsByExDate`, `DividendsByPayDate`, and `DividendsByAnnouncementDate`
    for use in the Pipeline API. These datasets provide an abstract interface for
    adding dividends data organized by ex date, pay date, and announcement date, respectively,
    to a new algorithm. pandas-based reference implementations for these datasets
    can be found in `zipline.pipeline.loaders.dividends`, and experimental blaze-based
    implementations can be found in `zipline.pipeline.loaders.blaze.dividends`. ([1093](https://github.com/stefan-jansen/zipline/issues/1093)).
  id: totrans-2230
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为Pipeline API添加了新的数据集`DividendsByExDate`、`DividendsByPayDate`和`DividendsByAnnouncementDate`。这些数据集提供了一个抽象接口，用于根据除息日、支付日和公告日分别添加股息数据到一个新的算法中。这些数据集的基于pandas的参考实现可以在`zipline.pipeline.loaders.dividends`中找到，而基于blaze的实验性实现可以在`zipline.pipeline.loaders.blaze.dividends`中找到。([1093](https://github.com/stefan-jansen/zipline/issues/1093))
- en: Added new built-in factors, `zipline.pipeline.factors.BusinessDaysSinceCashBuybackAuth`
    and `zipline.pipeline.factors.BusinessDaysSinceShareBuybackAuth`. These factors
    use the new `CashBuybackAuthorizations` and `ShareBuybackAuthorizations` datasets,
    respectively. ([1022](https://github.com/stefan-jansen/zipline/issues/1022)).
  id: totrans-2231
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加了新的内置因子，`zipline.pipeline.factors.BusinessDaysSinceCashBuybackAuth`和`zipline.pipeline.factors.BusinessDaysSinceShareBuybackAuth`。这些因子分别使用新的`CashBuybackAuthorizations`和`ShareBuybackAuthorizations`数据集。([1022](https://github.com/stefan-jansen/zipline/issues/1022))。
- en: Added new built-in factors, `zipline.pipeline.factors.BusinessDaysSinceDividendAnnouncement`,
    `zipline.pipeline.factors.BusinessDaysUntilNextExDate`, and `zipline.pipeline.factors.BusinessDaysSincePreviousExDate`.
    These factors use the new `DividendsByAnnouncementDate` and ``DividendsByExDate`
    datasets, respectively. ([1093](https://github.com/stefan-jansen/zipline/issues/1093)).
  id: totrans-2232
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加了新的内置因子，`zipline.pipeline.factors.BusinessDaysSinceDividendAnnouncement`，`zipline.pipeline.factors.BusinessDaysUntilNextExDate`和`zipline.pipeline.factors.BusinessDaysSincePreviousExDate`。这些因子分别使用新的`DividendsByAnnouncementDate`和`DividendsByExDate`数据集。([1093](https://github.com/stefan-jansen/zipline/issues/1093))。
- en: Implemented `zipline.pipeline.Classifier`, a new core pipeline API term representing
    grouping keys. Classifiers are primarily used by passing them as the `groupby`
    parameter to factor normalization methods. ([1046](https://github.com/stefan-jansen/zipline/issues/1046))
  id: totrans-2233
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 实现了`zipline.pipeline.Classifier`，一个新的核心管道API术语，代表分组键。分类器主要用于将它们作为`groupby`参数传递给因子归一化方法。([1046](https://github.com/stefan-jansen/zipline/issues/1046))
- en: 'Added factor normalization methods: [`zipline.pipeline.Factor.demean()`](api-reference.html#zipline.pipeline.Factor.demean
    "zipline.pipeline.Factor.demean") and [`zipline.pipeline.Factor.zscore()`](api-reference.html#zipline.pipeline.Factor.zscore
    "zipline.pipeline.Factor.zscore"). ([1046](https://github.com/stefan-jansen/zipline/issues/1046))'
  id: totrans-2234
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加了因子归一化方法：[`zipline.pipeline.Factor.demean()`](api-reference.html#zipline.pipeline.Factor.demean
    "zipline.pipeline.Factor.demean")和[`zipline.pipeline.Factor.zscore()`](api-reference.html#zipline.pipeline.Factor.zscore
    "zipline.pipeline.Factor.zscore")。([1046](https://github.com/stefan-jansen/zipline/issues/1046))
- en: Added [`zipline.pipeline.Factor.quantiles()`](api-reference.html#zipline.pipeline.Factor.quantiles
    "zipline.pipeline.Factor.quantiles"), a method for computing a Classifier from
    a Factor by partitioning into equally-sized buckets. Also added helpers for common
    quantile sizes ([`zipline.pipeline.Factor.quartiles()`](api-reference.html#zipline.pipeline.Factor.quartiles
    "zipline.pipeline.Factor.quartiles"), [`zipline.pipeline.Factor.quartiles()`](api-reference.html#zipline.pipeline.Factor.quartiles
    "zipline.pipeline.Factor.quartiles"), and [`zipline.pipeline.Factor.deciles()`](api-reference.html#zipline.pipeline.Factor.deciles
    "zipline.pipeline.Factor.deciles")) ([1075](https://github.com/stefan-jansen/zipline/issues/1075)).
  id: totrans-2235
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加了[`zipline.pipeline.Factor.quantiles()`](api-reference.html#zipline.pipeline.Factor.quantiles
    "zipline.pipeline.Factor.quantiles")方法，该方法通过将因子分成等大小的桶来计算分类器。还添加了常见分位数大小的辅助方法（[`zipline.pipeline.Factor.quartiles()`](api-reference.html#zipline.pipeline.Factor.quartiles
    "zipline.pipeline.Factor.quartiles")，[`zipline.pipeline.Factor.quartiles()`](api-reference.html#zipline.pipeline.Factor.quartiles
    "zipline.pipeline.Factor.quartiles")和[`zipline.pipeline.Factor.deciles()`](api-reference.html#zipline.pipeline.Factor.deciles
    "zipline.pipeline.Factor.deciles")）([1075](https://github.com/stefan-jansen/zipline/issues/1075))。
- en: Experimental Features
  id: totrans-2236
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 实验性功能
- en: Warning
  id: totrans-2237
  prefs: []
  type: TYPE_NORMAL
  zh: 警告
- en: Experimental features are subject to change.
  id: totrans-2238
  prefs: []
  type: TYPE_NORMAL
  zh: 实验性功能可能会发生变化。
- en: None
  id: totrans-2239
  prefs: []
  type: TYPE_NORMAL
  zh: 无
- en: Bug Fixes
  id: totrans-2240
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 错误修复
- en: Fixed a bug where merging two numerical expressions failed given too many inputs.
    This caused running a pipeline to fail when combining more than ten factors or
    filters. ([1072](https://github.com/stefan-jansen/zipline/issues/1072))
  id: totrans-2241
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了一个bug，即合并两个数值表达式在输入过多时失败。这导致在合并超过十个因子或过滤器时运行管道失败。([1072](https://github.com/stefan-jansen/zipline/issues/1072))
- en: Performance
  id: totrans-2242
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 性能
- en: None
  id: totrans-2243
  prefs: []
  type: TYPE_NORMAL
  zh: 无
- en: Maintenance and Refactorings
  id: totrans-2244
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 维护和重构
- en: None
  id: totrans-2245
  prefs: []
  type: TYPE_NORMAL
  zh: 无
- en: Build
  id: totrans-2246
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 构建
- en: Added AppVeyor for continuous integration on Windows. Added conda build of zipline
    and its dependencies to AppVeyor and Travis builds, which upload their results
    to anaconda.org labeled with “ci”. ([981](https://github.com/stefan-jansen/zipline/issues/981))
  id: totrans-2247
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为Windows上的持续集成添加了AppVeyor。在AppVeyor和Travis构建中添加了zipline及其依赖项的conda构建，这些构建将其结果上传到anaconda.org，并标记为“ci”。([981](https://github.com/stefan-jansen/zipline/issues/981))
- en: Documentation
  id: totrans-2248
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 文档
- en: None
  id: totrans-2249
  prefs: []
  type: TYPE_NORMAL
  zh: 无
- en: Miscellaneous
  id: totrans-2250
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 杂项
- en: 'Adds `ZiplineTestCase` which provides hooks to consume test fixtures. Fixtures
    are things like: `WithAssetFinder` which will make `self.asset_finder` available
    to your test with some mock data ([1042](https://github.com/stefan-jansen/zipline/issues/1042)).'
  id: totrans-2251
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加了`ZiplineTestCase`，它提供了消费测试fixture的钩子。fixture是一些东西，比如：`WithAssetFinder`，它将使`self.asset_finder`在你的测试中可用，并带有一些mock数据([1042](https://github.com/stefan-jansen/zipline/issues/1042))。
- en: Release 0.8.4
  id: totrans-2252
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 发布0.8.4
- en: 'Release:'
  id: totrans-2253
  prefs: []
  type: TYPE_NORMAL
  zh: 发布：
- en: 0.8.4
  id: totrans-2254
  prefs: []
  type: TYPE_NORMAL
  zh: 0.8.4
- en: 'Date:'
  id: totrans-2255
  prefs: []
  type: TYPE_NORMAL
  zh: 日期：
- en: February 24, 2016
  id: totrans-2256
  prefs: []
  type: TYPE_NORMAL
  zh: 2016年2月24日
- en: Highlights
  id: totrans-2257
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 亮点
- en: Added a new `EarningsCalendar` dataset for use in the Pipeline API. ([905](https://github.com/stefan-jansen/zipline/issues/905)).
  id: totrans-2258
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新增了一个用于Pipeline API的`EarningsCalendar`数据集（[905](https://github.com/stefan-jansen/zipline/issues/905)）。
- en: '[`AssetFinder`](api-reference.html#zipline.assets.AssetFinder "zipline.assets.assets.AssetFinder")
    speedups ([830](https://github.com/stefan-jansen/zipline/issues/830) and [817](https://github.com/stefan-jansen/zipline/issues/817)).'
  id: totrans-2259
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`AssetFinder`](api-reference.html#zipline.assets.AssetFinder "zipline.assets.AssetFinder")
    加速（[830](https://github.com/stefan-jansen/zipline/issues/830) 和 [817](https://github.com/stefan-jansen/zipline/issues/817)）。'
- en: Improved support for non-float dtypes in Pipeline. Most notably, we now support
    `datetime64` and `int64` dtypes for `Factor`, and `BoundColumn.latest` now returns
    a proper `Filter` object when the column is of dtype `bool`.
  id: totrans-2260
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 改进了Pipeline对非浮点dtype的支持。最值得注意的是，我们现在支持`Factor`的`datetime64`和`int64` dtype，以及`BoundColumn.latest`现在在列的dtype为`bool`时返回一个正确的`Filter`对象。
- en: Zipline now supports `numpy` 1.10, `pandas` 0.17, and `scipy` 0.16 ([969](https://github.com/stefan-jansen/zipline/issues/969)).
  id: totrans-2261
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Zipline现在支持`numpy` 1.10、`pandas` 0.17和`scipy` 0.16（[969](https://github.com/stefan-jansen/zipline/issues/969)）。
- en: Batch transforms have been deprecated and will be removed in a future release.
    Using `history` is recommended as an alternative.
  id: totrans-2262
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 批量转换已被弃用，并将在未来的版本中移除。建议使用`history`作为替代。
- en: Enhancements
  id: totrans-2263
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 增强功能
- en: Adds a way for users to provide a context manager to use when executing the
    scheduled functions (including `handle_data`). This context manager will be passed
    the [`BarData`](api-reference.html#zipline.protocol.BarData "zipline.protocol.BarData")
    object for the bar and will be used for the duration of all of the functions scheduled
    to run. This can be passed to `TradingAlgorithm` by the keyword argument `create_event_context`
    ([828](https://github.com/stefan-jansen/zipline/issues/828)).
  id: totrans-2264
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为用户提供了一种方法，可以在执行预定函数（包括`handle_data`）时使用上下文管理器。这个上下文管理器将传递给[`BarData`](api-reference.html#zipline.protocol.BarData
    "zipline.protocol.BarData")对象，并用于所有预定运行的函数期间。这可以通过`TradingAlgorithm`的关键字参数`create_event_context`传递（[828](https://github.com/stefan-jansen/zipline/issues/828)）。
- en: Added support for `zipline.pipeline.factors.Factor` instances with `datetime64[ns]`
    dtypes. ([905](https://github.com/stefan-jansen/zipline/issues/905))
  id: totrans-2265
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增加了对具有`datetime64[ns]` dtype的`zipline.pipeline.factors.Factor`实例的支持（[905](https://github.com/stefan-jansen/zipline/issues/905)）。
- en: Added a new `EarningsCalendar` dataset for use in the Pipeline API. This dataset
    provides an abstract interface for adding earnings announcement data to a new
    algorithm. A pandas-based reference implementation for this dataset can be found
    in `zipline.pipeline.loaders.earnings`, and an experimental blaze-based implementation
    can be found in `zipline.pipeline.loaders.blaze.earnings`. ([905](https://github.com/stefan-jansen/zipline/issues/905)).
  id: totrans-2266
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新增了一个用于Pipeline API的`EarningsCalendar`数据集。这个数据集提供了一个抽象接口，用于向新算法添加收益公告数据。这个数据集的基于pandas的参考实现可以在`zipline.pipeline.loaders.earnings`中找到，而基于blaze的实验性实现可以在`zipline.pipeline.loaders.blaze.earnings`中找到（[905](https://github.com/stefan-jansen/zipline/issues/905)）。
- en: Added new built-in factors, `zipline.pipeline.factors.BusinessDaysUntilNextEarnings`
    and `zipline.pipeline.factors.BusinessDaysSincePreviousEarnings`. These factors
    use the new `EarningsCalendar` dataset. ([905](https://github.com/stefan-jansen/zipline/issues/905)).
  id: totrans-2267
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新增了两个内置因子：`zipline.pipeline.factors.BusinessDaysUntilNextEarnings`和`zipline.pipeline.factors.BusinessDaysSincePreviousEarnings`。这些因子使用了新的`EarningsCalendar`数据集（[905](https://github.com/stefan-jansen/zipline/issues/905)）。
- en: Added `isnan()`, `notnan()` and `isfinite()` methods to `zipline.pipeline.factors.Factor`
    ([861](https://github.com/stefan-jansen/zipline/issues/861)).
  id: totrans-2268
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为`zipline.pipeline.factors.Factor`添加了`isnan()`、`notnan()`和`isfinite()`方法（[861](https://github.com/stefan-jansen/zipline/issues/861)）。
- en: Added [`zipline.pipeline.factors.Returns`](api-reference.html#zipline.pipeline.factors.Returns
    "zipline.pipeline.factors.Returns"), a built-in factor which calculates the percent
    change in close price over the given window_length. ([884](https://github.com/stefan-jansen/zipline/issues/884)).
  id: totrans-2269
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新增了[`zipline.pipeline.factors.Returns`](api-reference.html#zipline.pipeline.factors.Returns
    "zipline.pipeline.factors.Returns")，这是一个内置因子，用于计算给定窗口长度内收盘价的变化百分比（[884](https://github.com/stefan-jansen/zipline/issues/884)）。
- en: 'Added a new built-in factor: [`AverageDollarVolume`](api-reference.html#zipline.pipeline.factors.AverageDollarVolume
    "zipline.pipeline.factors.AverageDollarVolume"). ([927](https://github.com/stefan-jansen/zipline/issues/927)).'
  id: totrans-2270
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新增了一个内置因子：[`AverageDollarVolume`](api-reference.html#zipline.pipeline.factors.AverageDollarVolume
    "zipline.pipeline.factors.AverageDollarVolume")（[927](https://github.com/stefan-jansen/zipline/issues/927)）。
- en: Added [`ExponentialWeightedMovingAverage`](api-reference.html#zipline.pipeline.factors.ExponentialWeightedMovingAverage
    "zipline.pipeline.factors.ExponentialWeightedMovingAverage") and [`ExponentialWeightedMovingStdDev`](api-reference.html#zipline.pipeline.factors.ExponentialWeightedMovingStdDev
    "zipline.pipeline.factors.ExponentialWeightedMovingStdDev") factors. ([910](https://github.com/stefan-jansen/zipline/issues/910)).
  id: totrans-2271
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加了[`ExponentialWeightedMovingAverage`](api-reference.html#zipline.pipeline.factors.ExponentialWeightedMovingAverage
    "zipline.pipeline.factors.ExponentialWeightedMovingAverage")和[`ExponentialWeightedMovingStdDev`](api-reference.html#zipline.pipeline.factors.ExponentialWeightedMovingStdDev
    "zipline.pipeline.factors.ExponentialWeightedMovingStdDev")因子（[910](https://github.com/stefan-jansen/zipline/issues/910)）。
- en: Allow [`DataSet`](api-reference.html#zipline.pipeline.data.DataSet "zipline.pipeline.data.DataSet")
    classes to be subclassed where subclasses inherit all of the columns from the
    parent. These columns will be new sentinels so you can register them a custom
    loader ([924](https://github.com/stefan-jansen/zipline/issues/924)).
  id: totrans-2272
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 允许对[`DataSet`](api-reference.html#zipline.pipeline.data.DataSet "zipline.pipeline.data.DataSet")类进行子类化，其中子类继承了父类的所有列。这些列将成为新的哨兵，因此您可以注册一个自定义加载器（[924](https://github.com/stefan-jansen/zipline/issues/924)）。
- en: Added `coerce()` to coerce inputs from one type into another before passing
    them to the function ([948](https://github.com/stefan-jansen/zipline/issues/948)).
  id: totrans-2273
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加了`coerce()`函数，用于在将输入传递给函数之前将其从一种类型强制转换为另一种类型（[948](https://github.com/stefan-jansen/zipline/issues/948)）。
- en: Added `optionally()` to wrap other preprocessor functions to explicitly allow
    `None` ([947](https://github.com/stefan-jansen/zipline/issues/947)).
  id: totrans-2274
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加了`optionally()`函数，用于包装其他预处理器函数，明确允许`None`值（[947](https://github.com/stefan-jansen/zipline/issues/947)）。
- en: Added `ensure_timezone()` to allow string arguments to get converted into [`datetime.tzinfo`](https://docs.python.org/3/library/datetime.html#datetime.tzinfo
    "(in Python v3.11)") objects. This also allows `tzinfo` objects to be passed directly
    ([947](https://github.com/stefan-jansen/zipline/issues/947)).
  id: totrans-2275
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加了`ensure_timezone()`函数，允许将字符串参数转换为[`datetime.tzinfo`](https://docs.python.org/3/library/datetime.html#datetime.tzinfo
    "(in Python v3.11)")对象。这也允许直接传递`tzinfo`对象（[947](https://github.com/stefan-jansen/zipline/issues/947)）。
- en: Added two optional arguments, `data_query_time` and `data_query_tz` to `BlazeLoader`
    and `BlazeEarningsCalendarLoader`. These arguments allow the user to specify some
    cutoff time for data when loading from the resource. For example, if I want to
    simulate executing my `before_trading_start` function at `8:45 US/Eastern` then
    I could pass `datetime.time(8, 45)` and `'US/Eastern'` to the loader. This means
    that data that is timestamped on or after `8:45` will not seen on that day in
    the simulation. The data will be made available on the next day ([947](https://github.com/stefan-jansen/zipline/issues/947)).
  id: totrans-2276
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为`BlazeLoader`和`BlazeEarningsCalendarLoader`添加了两个可选参数`data_query_time`和`data_query_tz`。这些参数允许用户在从资源加载数据时指定一些截止时间。例如，如果我想模拟在`8:45
    US/Eastern`执行我的`before_trading_start`函数，那么我可以将`datetime.time(8, 45)`和`'US/Eastern'`传递给加载器。这意味着在模拟中，在`8:45`之后的时间戳的数据将不会在当天看到。这些数据将在下一天提供（[947](https://github.com/stefan-jansen/zipline/issues/947)）。
- en: '`BoundColumn.latest` now returns a `Filter` for columns of dtype `bool` ([962](https://github.com/stefan-jansen/zipline/issues/962)).'
  id: totrans-2277
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`BoundColumn.latest`现在为`bool`数据类型的列返回一个`Filter`（[962](https://github.com/stefan-jansen/zipline/issues/962)）。'
- en: Added support for `Factor` instances with `int64` dtype. [`Column`](api-reference.html#zipline.pipeline.data.Column
    "zipline.pipeline.data.dataset.Column") now requires a `missing_value` when dtype
    is integral. ([962](https://github.com/stefan-jansen/zipline/issues/962))
  id: totrans-2278
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增加了对`Factor`实例使用`int64`数据类型的支持。现在，当数据类型为整数时，[`Column`](api-reference.html#zipline.pipeline.data.Column
    "zipline.pipeline.data.dataset.Column")需要一个`missing_value`（[962](https://github.com/stefan-jansen/zipline/issues/962)）。
- en: It is also now possible to specify custom `missing_value` values for `float`,
    `datetime`, and `bool` Pipeline terms. ([962](https://github.com/stefan-jansen/zipline/issues/962))
  id: totrans-2279
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 现在还可以为`float`、`datetime`和`bool` Pipeline项指定自定义的`missing_value`值（[962](https://github.com/stefan-jansen/zipline/issues/962)）。
- en: Added auto-close support for equities. Any positions held in an equity that
    reaches its `auto_close_date` will be liquidated for cash according to the equity’s
    last sale price. Furthermore, any open orders for that equity will be canceled.
    Both futures and equities are now auto-closed on the morning of their `auto_close_date`,
    immediately prior to `before_trading_start`. ([982](https://github.com/stefan-jansen/zipline/issues/982))
  id: totrans-2280
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为股票增加了自动关闭支持。任何在股票达到其`auto_close_date`时持有的头寸将根据股票的最后成交价清算为现金。此外，该股票的所有未结订单将被取消。现在，期货和股票都在其`auto_close_date`的早晨自动关闭，即在`before_trading_start`之前立即关闭（[982](https://github.com/stefan-jansen/zipline/issues/982)）。
- en: Experimental Features
  id: totrans-2281
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 实验性功能
- en: Warning
  id: totrans-2282
  prefs: []
  type: TYPE_NORMAL
  zh: 警告
- en: Experimental features are subject to change.
  id: totrans-2283
  prefs: []
  type: TYPE_NORMAL
  zh: 实验性功能可能会发生变化。
- en: Added support for parameterized `Factor` subclasses. Factors may specify `params`
    as a class-level attribute containing a tuple of parameter names. These values
    are then accepted by the constructor and forwarded by name to the factor’s `compute`
    function. This API is experimental, and may change in future releases.
  id: totrans-2284
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增加了对参数化`Factor`子类的支持。因子可以指定`params`作为类级别的属性，其中包含参数名的元组。然后，这些值被构造函数接受，并通过名称转发到因子的`compute`函数。此API是实验性的，可能会在将来的版本中更改。
- en: Bug Fixes
  id: totrans-2285
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 错误修复
- en: Fixes an issue that would cause the daily/minutely method caching to change
    the `len` of a `SIDData` object. This would cause us to think that the object
    was not empty even when it was ([826](https://github.com/stefan-jansen/zipline/issues/826)).
  id: totrans-2286
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了一个问题，该问题会导致每日/每分钟方法缓存改变`SIDData`对象的`len`，即使对象为空，也会让我们认为它不为空（[826](https://github.com/stefan-jansen/zipline/issues/826)）。
- en: Fixes an error raised in calculating beta when benchmark data were sparse. Instead
    [`numpy.nan`](https://numpy.org/doc/stable/reference/constants.html#numpy.nan
    "(in NumPy v1.25)") is returned ([859](https://github.com/stefan-jansen/zipline/issues/859)).
  id: totrans-2287
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了在基准数据稀疏时计算beta时引发的错误。现在返回的是[`numpy.nan`](https://numpy.org/doc/stable/reference/constants.html#numpy.nan
    "(in NumPy v1.25)")（[859](https://github.com/stefan-jansen/zipline/issues/859)）。
- en: Fixed an issue pickling `sentinel()` objects ([872](https://github.com/stefan-jansen/zipline/issues/872)).
  id: totrans-2288
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了挑选`sentinel()`对象的问题（[872](https://github.com/stefan-jansen/zipline/issues/872)）。
- en: Fixed spurious warnings on first download of treasury data (:issue 922).
  id: totrans-2289
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了在首次下载国债数据时出现的虚假警告（:issue 922）。
- en: Corrected the error messages for [`set_commission()`](api-reference.html#zipline.api.set_commission
    "zipline.api.set_commission") and [`set_slippage()`](api-reference.html#zipline.api.set_slippage
    "zipline.api.set_slippage") when used outside of the `initialize` function. These
    errors called the functions `override_*` instead of `set_*`. This also renamed
    the exception types raised from `OverrideSlippagePostInit` and `OverrideCommissionPostInit`
    to `SetSlippagePostInit` and `SetCommissionPostInit` ([923](https://github.com/stefan-jansen/zipline/issues/923)).
  id: totrans-2290
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 更正了在`initialize`函数外部使用[`set_commission()`](api-reference.html#zipline.api.set_commission
    "zipline.api.set_commission")和[`set_slippage()`](api-reference.html#zipline.api.set_slippage
    "zipline.api.set_slippage")时的错误消息。这些错误将函数称为`override_*`而不是`set_*`。还将引发的异常类型从`OverrideSlippagePostInit`和`OverrideCommissionPostInit`重命名为`SetSlippagePostInit`和`SetCommissionPostInit`（[923](https://github.com/stefan-jansen/zipline/issues/923)）。
- en: Fixed an issue in the CLI that would cause assets to be added twice. This would
    map the same symbol to two different sids ([942](https://github.com/stefan-jansen/zipline/issues/942)).
  id: totrans-2291
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了CLI中的一个问题，该问题会导致资产被重复添加，从而将同一符号映射到两个不同的sid（[942](https://github.com/stefan-jansen/zipline/issues/942)）。
- en: Fixed an issue where the `PerformancePeriod` incorrectly reported the total_positions_value
    when creating a [`Account`](api-reference.html#zipline.protocol.Account "zipline.protocol.Account")
    ([950](https://github.com/stefan-jansen/zipline/issues/950)).
  id: totrans-2292
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了一个问题，即`PerformancePeriod`在创建[`Account`](api-reference.html#zipline.protocol.Account
    "zipline.protocol.Account")时错误地报告了总持仓价值（[950](https://github.com/stefan-jansen/zipline/issues/950)）。
- en: Fixed issues around KeyErrors coming from history and BarData on 32-bit python,
    where Assets did not compare properly with int64s ([959](https://github.com/stefan-jansen/zipline/issues/959)).
  id: totrans-2293
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了在32位python中历史和BarData引发的KeyError问题，其中Assets与int64s比较不正确（[959](https://github.com/stefan-jansen/zipline/issues/959)）。
- en: Fixed a bug where boolean operators were not properly implemented on [`Filter`](api-reference.html#zipline.pipeline.Filter
    "zipline.pipeline.Filter") ([991](https://github.com/stefan-jansen/zipline/issues/991)).
  id: totrans-2294
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了一个错误，其中`Filter`上的布尔运算符未正确实现（[991](https://github.com/stefan-jansen/zipline/issues/991)）。
- en: Installation of zipline no longer downgrades numpy to 1.9.2 silently and unconditionally
    ([969](https://github.com/stefan-jansen/zipline/issues/969)).
  id: totrans-2295
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 安装zipline不再无声且无条件地将numpy降级到1.9.2（[969](https://github.com/stefan-jansen/zipline/issues/969)）。
- en: Performance
  id: totrans-2296
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 性能
- en: Speeds up `lookup_symbol()` by adding an extension, `AssetFinderCachedEquities`,
    that loads equities into dictionaries and then directs `lookup_symbol()` to these
    dictionaries to find matching equities ([830](https://github.com/stefan-jansen/zipline/issues/830)).
  id: totrans-2297
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通过添加一个扩展`AssetFinderCachedEquities`，将股票加载到字典中，然后指导`lookup_symbol()`使用这些字典查找匹配的股票，从而加快了`lookup_symbol()`的速度（[830](https://github.com/stefan-jansen/zipline/issues/830)）。
- en: Improved performance of `lookup_symbol()` by performing batched queries. ([817](https://github.com/stefan-jansen/zipline/issues/817)).
  id: totrans-2298
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通过执行批量查询，提高了`lookup_symbol()`的性能（[817](https://github.com/stefan-jansen/zipline/issues/817)）。
- en: Maintenance and Refactorings
  id: totrans-2299
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 维护和重构
- en: Asset databases now contain version information to ensure compatibility with
    current Zipline version ([815](https://github.com/stefan-jansen/zipline/issues/815)).
  id: totrans-2300
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 资产数据库现在包含版本信息，以确保与当前Zipline版本（[815](https://github.com/stefan-jansen/zipline/issues/815)）的兼容性。
- en: Upgrade `requests` version to 2.9.1 ([2ee40db](https://github.com/stefan-jansen/zipline/commit/2ee40db))
  id: totrans-2301
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将`requests`版本升级到2.9.1（[2ee40db](https://github.com/stefan-jansen/zipline/commit/2ee40db)）
- en: Upgrade `logbook` version to 0.12.5 ([11465d9](https://github.com/stefan-jansen/zipline/commit/11465d9)).
  id: totrans-2302
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将`logbook`版本升级到0.12.5（[11465d9](https://github.com/stefan-jansen/zipline/commit/11465d9)）。
- en: Upgrade `Cython` version to 0.23.4 ([5f49fa2](https://github.com/stefan-jansen/zipline/commit/5f49fa2)).
  id: totrans-2303
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将`Cython`版本升级到0.23.4（[5f49fa2](https://github.com/stefan-jansen/zipline/commit/5f49fa2)）。
- en: Build
  id: totrans-2304
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 构建
- en: Makes zipline install requirements more flexible ([825](https://github.com/stefan-jansen/zipline/issues/825)).
  id: totrans-2305
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使zipline安装需求更加灵活（[825](https://github.com/stefan-jansen/zipline/issues/825)）。
- en: Use `versioneer` to manage the project `__version__` and setup.py version ([829](https://github.com/stefan-jansen/zipline/issues/829)).
  id: totrans-2306
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用`versioneer`管理项目`__version__`和setup.py版本（[829](https://github.com/stefan-jansen/zipline/issues/829)）。
- en: Fixed coveralls integration on travis build ([840](https://github.com/stefan-jansen/zipline/issues/840)).
  id: totrans-2307
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了travis构建上的coveralls集成（[840](https://github.com/stefan-jansen/zipline/issues/840)）。
- en: Fixed conda build, which now uses git source as its source and reads requirements
    using setup.py, instead of copying them and letting them get out of sync ([937](https://github.com/stefan-jansen/zipline/issues/937)).
  id: totrans-2308
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了conda构建，现在使用git源作为其源，并使用setup.py读取需求，而不是复制它们并让它们不同步（[937](https://github.com/stefan-jansen/zipline/issues/937)）。
- en: Require `setuptools` > 18.0 ([951](https://github.com/stefan-jansen/zipline/issues/951)).
  id: totrans-2309
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 要求`setuptools`版本大于18.0（[951](https://github.com/stefan-jansen/zipline/issues/951)）。
- en: Documentation
  id: totrans-2310
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 文档
- en: Document the release process for developers ([835](https://github.com/stefan-jansen/zipline/issues/835)).
  id: totrans-2311
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为开发者记录发布流程（[835](https://github.com/stefan-jansen/zipline/issues/835)）。
- en: Added reference docs for the Pipeline API. ([864](https://github.com/stefan-jansen/zipline/issues/864)).
  id: totrans-2312
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为Pipeline API添加了参考文档（[864](https://github.com/stefan-jansen/zipline/issues/864)）。
- en: Added reference docs for Asset Metadata APIs. ([864](https://github.com/stefan-jansen/zipline/issues/864)).
  id: totrans-2313
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为资产元数据API添加了参考文档（[864](https://github.com/stefan-jansen/zipline/issues/864)）。
- en: Generated documentation now includes links to source code for many classes and
    functions. ([864](https://github.com/stefan-jansen/zipline/issues/864)).
  id: totrans-2314
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 生成的文档现在包括许多类和函数的源代码链接（[864](https://github.com/stefan-jansen/zipline/issues/864)）。
- en: Added platform-specific documentation describing how to find binary dependencies.
    ([883](https://github.com/stefan-jansen/zipline/issues/883)).
  id: totrans-2315
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加了平台特定的文档，描述如何找到二进制依赖项（[883](https://github.com/stefan-jansen/zipline/issues/883)）。
- en: Miscellaneous
  id: totrans-2316
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 杂项
- en: Added a `show_graph()` method to render a Pipeline as an image ([836](https://github.com/stefan-jansen/zipline/issues/836)).
  id: totrans-2317
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加了一个`show_graph()`方法，用于将Pipeline渲染为图像（[836](https://github.com/stefan-jansen/zipline/issues/836)）。
- en: Adds `subtest()` decorator for creating subtests without `nose_parameterized.expand()`
    which bloats the test output ([833](https://github.com/stefan-jansen/zipline/issues/833)).
  id: totrans-2318
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加了`subtest()`装饰器，用于创建子测试，而不使用`nose_parameterized.expand()`，后者会使测试输出膨胀（[833](https://github.com/stefan-jansen/zipline/issues/833)）。
- en: Limits timer report in test output to 15 longest tests ([838](https://github.com/stefan-jansen/zipline/issues/838)).
  id: totrans-2319
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将测试输出中的计时器报告限制为最长的15个测试（[838](https://github.com/stefan-jansen/zipline/issues/838)）。
- en: Treasury and benchmark downloads will now wait up to an hour to download again
    if data returned from a remote source does not extend to the date expected. ([841](https://github.com/stefan-jansen/zipline/issues/841)).
  id: totrans-2320
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 国债和基准下载现在将等待长达一小时再次下载，如果从远程源返回的数据没有延伸到预期的日期（[841](https://github.com/stefan-jansen/zipline/issues/841)）。
- en: Added a tool to downgrade the assets db to previous versions ([941](https://github.com/stefan-jansen/zipline/issues/941)).
  id: totrans-2321
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加了一个工具，用于将资产数据库降级到以前的版本（[941](https://github.com/stefan-jansen/zipline/issues/941)）。
- en: Highlights
  id: totrans-2322
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 亮点
- en: Added a new `EarningsCalendar` dataset for use in the Pipeline API. ([905](https://github.com/stefan-jansen/zipline/issues/905)).
  id: totrans-2323
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为Pipeline API添加了一个新的`EarningsCalendar`数据集（[905](https://github.com/stefan-jansen/zipline/issues/905)）。
- en: '[`AssetFinder`](api-reference.html#zipline.assets.AssetFinder "zipline.assets.assets.AssetFinder")
    speedups ([830](https://github.com/stefan-jansen/zipline/issues/830) and [817](https://github.com/stefan-jansen/zipline/issues/817)).'
  id: totrans-2324
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`AssetFinder`](api-reference.html#zipline.assets.AssetFinder "zipline.assets.AssetFinder")
    的加速改进（[830](https://github.com/stefan-jansen/zipline/issues/830) 和 [817](https://github.com/stefan-jansen/zipline/issues/817)）。'
- en: Improved support for non-float dtypes in Pipeline. Most notably, we now support
    `datetime64` and `int64` dtypes for `Factor`, and `BoundColumn.latest` now returns
    a proper `Filter` object when the column is of dtype `bool`.
  id: totrans-2325
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 改进了 Pipeline 对非浮点数据类型的支持。最值得注意的是，我们现在支持 `Factor` 的 `datetime64` 和 `int64` 数据类型，以及
    `BoundColumn.latest` 现在在列的数据类型为 `bool` 时返回一个正确的 `Filter` 对象。
- en: Zipline now supports `numpy` 1.10, `pandas` 0.17, and `scipy` 0.16 ([969](https://github.com/stefan-jansen/zipline/issues/969)).
  id: totrans-2326
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Zipline 现在支持 `numpy` 1.10、`pandas` 0.17 和 `scipy` 0.16（[969](https://github.com/stefan-jansen/zipline/issues/969)）。
- en: Batch transforms have been deprecated and will be removed in a future release.
    Using `history` is recommended as an alternative.
  id: totrans-2327
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 批量转换已被弃用，并将在未来的版本中移除。建议使用 `history` 作为替代。
- en: Enhancements
  id: totrans-2328
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 增强功能
- en: Adds a way for users to provide a context manager to use when executing the
    scheduled functions (including `handle_data`). This context manager will be passed
    the [`BarData`](api-reference.html#zipline.protocol.BarData "zipline.protocol.BarData")
    object for the bar and will be used for the duration of all of the functions scheduled
    to run. This can be passed to `TradingAlgorithm` by the keyword argument `create_event_context`
    ([828](https://github.com/stefan-jansen/zipline/issues/828)).
  id: totrans-2329
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为用户提供了一种方法，可以在执行预定函数（包括`handle_data`）时提供一个上下文管理器。该上下文管理器将传递给 [`BarData`](api-reference.html#zipline.protocol.BarData
    "zipline.protocol.BarData") 对象，并用于所有预定运行的函数期间。这可以通过关键字参数 `create_event_context`
    传递给 `TradingAlgorithm`（[828](https://github.com/stefan-jansen/zipline/issues/828)）。
- en: Added support for `zipline.pipeline.factors.Factor` instances with `datetime64[ns]`
    dtypes. ([905](https://github.com/stefan-jansen/zipline/issues/905))
  id: totrans-2330
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增加了对 `zipline.pipeline.factors.Factor` 实例的支持，这些实例具有 `datetime64[ns]` 数据类型（[905](https://github.com/stefan-jansen/zipline/issues/905)）。
- en: Added a new `EarningsCalendar` dataset for use in the Pipeline API. This dataset
    provides an abstract interface for adding earnings announcement data to a new
    algorithm. A pandas-based reference implementation for this dataset can be found
    in `zipline.pipeline.loaders.earnings`, and an experimental blaze-based implementation
    can be found in `zipline.pipeline.loaders.blaze.earnings`. ([905](https://github.com/stefan-jansen/zipline/issues/905)).
  id: totrans-2331
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新增了一个新的 `EarningsCalendar` 数据集，用于 Pipeline API。该数据集提供了一个抽象接口，用于向新算法添加收益公告数据。该数据集的基于
    pandas 的参考实现可以在 `zipline.pipeline.loaders.earnings` 中找到，而基于 blaze 的实验性实现可以在 `zipline.pipeline.loaders.blaze.earnings`
    中找到（[905](https://github.com/stefan-jansen/zipline/issues/905)）。
- en: Added new built-in factors, `zipline.pipeline.factors.BusinessDaysUntilNextEarnings`
    and `zipline.pipeline.factors.BusinessDaysSincePreviousEarnings`. These factors
    use the new `EarningsCalendar` dataset. ([905](https://github.com/stefan-jansen/zipline/issues/905)).
  id: totrans-2332
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新增了两个内置因子：`zipline.pipeline.factors.BusinessDaysUntilNextEarnings` 和 `zipline.pipeline.factors.BusinessDaysSincePreviousEarnings`。这些因子使用了新的
    `EarningsCalendar` 数据集（[905](https://github.com/stefan-jansen/zipline/issues/905)）。
- en: Added `isnan()`, `notnan()` and `isfinite()` methods to `zipline.pipeline.factors.Factor`
    ([861](https://github.com/stefan-jansen/zipline/issues/861)).
  id: totrans-2333
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为 `zipline.pipeline.factors.Factor` 添加了 `isnan()`、`notnan()` 和 `isfinite()`
    方法（[861](https://github.com/stefan-jansen/zipline/issues/861)）。
- en: Added [`zipline.pipeline.factors.Returns`](api-reference.html#zipline.pipeline.factors.Returns
    "zipline.pipeline.factors.Returns"), a built-in factor which calculates the percent
    change in close price over the given window_length. ([884](https://github.com/stefan-jansen/zipline/issues/884)).
  id: totrans-2334
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新增了 [`zipline.pipeline.factors.Returns`](api-reference.html#zipline.pipeline.factors.Returns
    "zipline.pipeline.factors.Returns")，这是一个内置因子，用于计算给定窗口长度内收盘价的变化百分比（[884](https://github.com/stefan-jansen/zipline/issues/884)）。
- en: 'Added a new built-in factor: [`AverageDollarVolume`](api-reference.html#zipline.pipeline.factors.AverageDollarVolume
    "zipline.pipeline.factors.AverageDollarVolume"). ([927](https://github.com/stefan-jansen/zipline/issues/927)).'
  id: totrans-2335
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新增了一个新的内置因子：[`AverageDollarVolume`](api-reference.html#zipline.pipeline.factors.AverageDollarVolume
    "zipline.pipeline.factors.AverageDollarVolume")（[927](https://github.com/stefan-jansen/zipline/issues/927)）。
- en: Added [`ExponentialWeightedMovingAverage`](api-reference.html#zipline.pipeline.factors.ExponentialWeightedMovingAverage
    "zipline.pipeline.factors.ExponentialWeightedMovingAverage") and [`ExponentialWeightedMovingStdDev`](api-reference.html#zipline.pipeline.factors.ExponentialWeightedMovingStdDev
    "zipline.pipeline.factors.ExponentialWeightedMovingStdDev") factors. ([910](https://github.com/stefan-jansen/zipline/issues/910)).
  id: totrans-2336
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增加了[`ExponentialWeightedMovingAverage`](api-reference.html#zipline.pipeline.factors.ExponentialWeightedMovingAverage
    "zipline.pipeline.factors.ExponentialWeightedMovingAverage")和[`ExponentialWeightedMovingStdDev`](api-reference.html#zipline.pipeline.factors.ExponentialWeightedMovingStdDev
    "zipline.pipeline.factors.ExponentialWeightedMovingStdDev")因子（[910](https://github.com/stefan-jansen/zipline/issues/910)）。
- en: Allow [`DataSet`](api-reference.html#zipline.pipeline.data.DataSet "zipline.pipeline.data.DataSet")
    classes to be subclassed where subclasses inherit all of the columns from the
    parent. These columns will be new sentinels so you can register them a custom
    loader ([924](https://github.com/stefan-jansen/zipline/issues/924)).
  id: totrans-2337
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 允许[`DataSet`](api-reference.html#zipline.pipeline.data.DataSet "zipline.pipeline.data.DataSet")类被继承，其中子类从父类继承所有列。这些列将是新的占位符，因此您可以注册一个自定义加载器（[924](https://github.com/stefan-jansen/zipline/issues/924)）。
- en: Added `coerce()` to coerce inputs from one type into another before passing
    them to the function ([948](https://github.com/stefan-jansen/zipline/issues/948)).
  id: totrans-2338
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增加了`coerce()`，在将输入传递给函数之前，将其从一种类型强制转换为另一种类型（[948](https://github.com/stefan-jansen/zipline/issues/948)）。
- en: Added `optionally()` to wrap other preprocessor functions to explicitly allow
    `None` ([947](https://github.com/stefan-jansen/zipline/issues/947)).
  id: totrans-2339
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增加了`optionally()`来包装其他预处理函数，明确允许`None`（[947](https://github.com/stefan-jansen/zipline/issues/947)）。
- en: Added `ensure_timezone()` to allow string arguments to get converted into [`datetime.tzinfo`](https://docs.python.org/3/library/datetime.html#datetime.tzinfo
    "(in Python v3.11)") objects. This also allows `tzinfo` objects to be passed directly
    ([947](https://github.com/stefan-jansen/zipline/issues/947)).
  id: totrans-2340
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增加了`ensure_timezone()`，允许将字符串参数转换为[`datetime.tzinfo`](https://docs.python.org/3/library/datetime.html#datetime.tzinfo
    "(in Python v3.11)")对象。这也允许直接传递`tzinfo`对象（[947](https://github.com/stefan-jansen/zipline/issues/947)）。
- en: Added two optional arguments, `data_query_time` and `data_query_tz` to `BlazeLoader`
    and `BlazeEarningsCalendarLoader`. These arguments allow the user to specify some
    cutoff time for data when loading from the resource. For example, if I want to
    simulate executing my `before_trading_start` function at `8:45 US/Eastern` then
    I could pass `datetime.time(8, 45)` and `'US/Eastern'` to the loader. This means
    that data that is timestamped on or after `8:45` will not seen on that day in
    the simulation. The data will be made available on the next day ([947](https://github.com/stefan-jansen/zipline/issues/947)).
  id: totrans-2341
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在`BlazeLoader`和`BlazeEarningsCalendarLoader`中增加了两个可选参数`data_query_time`和`data_query_tz`。这些参数允许用户在从资源加载数据时指定一些截止时间。例如，如果我想模拟在`8:45
    US/Eastern`执行我的`before_trading_start`函数，那么我可以将`datetime.time(8, 45)`和`'US/Eastern'`传递给加载器。这意味着在模拟中，时间戳为`8:45`或之后的数据在那一天将不会被看到。这些数据将在下一天提供（[947](https://github.com/stefan-jansen/zipline/issues/947)）。
- en: '`BoundColumn.latest` now returns a `Filter` for columns of dtype `bool` ([962](https://github.com/stefan-jansen/zipline/issues/962)).'
  id: totrans-2342
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`BoundColumn.latest`现在为`bool`类型的列返回一个`Filter`（[962](https://github.com/stefan-jansen/zipline/issues/962)）。'
- en: Added support for `Factor` instances with `int64` dtype. [`Column`](api-reference.html#zipline.pipeline.data.Column
    "zipline.pipeline.data.dataset.Column") now requires a `missing_value` when dtype
    is integral. ([962](https://github.com/stefan-jansen/zipline/issues/962))
  id: totrans-2343
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增加了对`int64` dtype的`Factor`实例的支持。现在，当dtype为整数时，[`Column`](api-reference.html#zipline.pipeline.data.Column
    "zipline.pipeline.data.dataset.Column")需要一个`missing_value`（[962](https://github.com/stefan-jansen/zipline/issues/962)）。
- en: It is also now possible to specify custom `missing_value` values for `float`,
    `datetime`, and `bool` Pipeline terms. ([962](https://github.com/stefan-jansen/zipline/issues/962))
  id: totrans-2344
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 现在还可以为`float`、`datetime`和`bool` Pipeline项指定自定义的`missing_value`值（[962](https://github.com/stefan-jansen/zipline/issues/962)）。
- en: Added auto-close support for equities. Any positions held in an equity that
    reaches its `auto_close_date` will be liquidated for cash according to the equity’s
    last sale price. Furthermore, any open orders for that equity will be canceled.
    Both futures and equities are now auto-closed on the morning of their `auto_close_date`,
    immediately prior to `before_trading_start`. ([982](https://github.com/stefan-jansen/zipline/issues/982))
  id: totrans-2345
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增加了对股票的自动关闭支持。任何持有到其`auto_close_date`的股票头寸将根据该股票的最后成交价清算为现金。此外，该股票的所有未结订单将被取消。现在，期货和股票都在其`auto_close_date`的早晨自动关闭，即在`before_trading_start`之前立即关闭（[982](https://github.com/stefan-jansen/zipline/issues/982)）。
- en: Experimental Features
  id: totrans-2346
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 实验性功能
- en: Warning
  id: totrans-2347
  prefs: []
  type: TYPE_NORMAL
  zh: 警告
- en: Experimental features are subject to change.
  id: totrans-2348
  prefs: []
  type: TYPE_NORMAL
  zh: 实验性功能可能会发生变化。
- en: Added support for parameterized `Factor` subclasses. Factors may specify `params`
    as a class-level attribute containing a tuple of parameter names. These values
    are then accepted by the constructor and forwarded by name to the factor’s `compute`
    function. This API is experimental, and may change in future releases.
  id: totrans-2349
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增加了对参数化`Factor`子类的支持。因子可以指定`params`作为类级别的属性，其中包含参数名称的元组。这些值随后被构造函数接受，并通过名称转发到因子的`compute`函数。此API是实验性的，可能会在将来的版本中更改。
- en: Bug Fixes
  id: totrans-2350
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 错误修复
- en: Fixes an issue that would cause the daily/minutely method caching to change
    the `len` of a `SIDData` object. This would cause us to think that the object
    was not empty even when it was ([826](https://github.com/stefan-jansen/zipline/issues/826)).
  id: totrans-2351
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了一个问题，该问题会导致每日/每分钟方法缓存改变`SIDData`对象的`len`。这会导致我们认为即使对象为空，对象也不为空（[826](https://github.com/stefan-jansen/zipline/issues/826)）。
- en: Fixes an error raised in calculating beta when benchmark data were sparse. Instead
    [`numpy.nan`](https://numpy.org/doc/stable/reference/constants.html#numpy.nan
    "(in NumPy v1.25)") is returned ([859](https://github.com/stefan-jansen/zipline/issues/859)).
  id: totrans-2352
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了在基准数据稀疏时计算beta时引发的错误。改为返回[`numpy.nan`](https://numpy.org/doc/stable/reference/constants.html#numpy.nan
    "(in NumPy v1.25)")（[859](https://github.com/stefan-jansen/zipline/issues/859)）。
- en: Fixed an issue pickling `sentinel()` objects ([872](https://github.com/stefan-jansen/zipline/issues/872)).
  id: totrans-2353
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了在pickling `sentinel()`对象时出现的问题（[872](https://github.com/stefan-jansen/zipline/issues/872)）。
- en: Fixed spurious warnings on first download of treasury data (:issue 922).
  id: totrans-2354
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 首次下载国库数据时修复了虚假警告问题（:issue 922）。
- en: Corrected the error messages for [`set_commission()`](api-reference.html#zipline.api.set_commission
    "zipline.api.set_commission") and [`set_slippage()`](api-reference.html#zipline.api.set_slippage
    "zipline.api.set_slippage") when used outside of the `initialize` function. These
    errors called the functions `override_*` instead of `set_*`. This also renamed
    the exception types raised from `OverrideSlippagePostInit` and `OverrideCommissionPostInit`
    to `SetSlippagePostInit` and `SetCommissionPostInit` ([923](https://github.com/stefan-jansen/zipline/issues/923)).
  id: totrans-2355
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 更正了在`initialize`函数外部使用[`set_commission()`](api-reference.html#zipline.api.set_commission
    "zipline.api.set_commission")和[`set_slippage()`](api-reference.html#zipline.api.set_slippage
    "zipline.api.set_slippage")时的错误消息。这些错误将函数称为`override_*`而不是`set_*`。同时也将引发的异常类型从`OverrideSlippagePostInit`和`OverrideCommissionPostInit`重命名为`SetSlippagePostInit`和`SetCommissionPostInit`（[923](https://github.com/stefan-jansen/zipline/issues/923)）。
- en: Fixed an issue in the CLI that would cause assets to be added twice. This would
    map the same symbol to two different sids ([942](https://github.com/stefan-jansen/zipline/issues/942)).
  id: totrans-2356
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了CLI中的一个问题，该问题会导致资产被添加两次。这将同一符号映射到两个不同的sid（[942](https://github.com/stefan-jansen/zipline/issues/942)）。
- en: Fixed an issue where the `PerformancePeriod` incorrectly reported the total_positions_value
    when creating a [`Account`](api-reference.html#zipline.protocol.Account "zipline.protocol.Account")
    ([950](https://github.com/stefan-jansen/zipline/issues/950)).
  id: totrans-2357
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了`PerformancePeriod`在创建[`Account`](api-reference.html#zipline.protocol.Account
    "zipline.protocol.Account")时错误报告总持仓价值的问题（[950](https://github.com/stefan-jansen/zipline/issues/950)）。
- en: Fixed issues around KeyErrors coming from history and BarData on 32-bit python,
    where Assets did not compare properly with int64s ([959](https://github.com/stefan-jansen/zipline/issues/959)).
  id: totrans-2358
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了在32位python上从历史和BarData中出现的KeyError问题，其中Assets与int64s比较不正确（[959](https://github.com/stefan-jansen/zipline/issues/959)）。
- en: Fixed a bug where boolean operators were not properly implemented on [`Filter`](api-reference.html#zipline.pipeline.Filter
    "zipline.pipeline.Filter") ([991](https://github.com/stefan-jansen/zipline/issues/991)).
  id: totrans-2359
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了布尔运算符在[`Filter`](api-reference.html#zipline.pipeline.Filter "zipline.pipeline.Filter")中未正确实现的问题（[991](https://github.com/stefan-jansen/zipline/issues/991)）。
- en: Installation of zipline no longer downgrades numpy to 1.9.2 silently and unconditionally
    ([969](https://github.com/stefan-jansen/zipline/issues/969)).
  id: totrans-2360
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: zipline的安装不再无声且无条件地将numpy降级到1.9.2（[969](https://github.com/stefan-jansen/zipline/issues/969)）。
- en: Performance
  id: totrans-2361
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 性能
- en: Speeds up `lookup_symbol()` by adding an extension, `AssetFinderCachedEquities`,
    that loads equities into dictionaries and then directs `lookup_symbol()` to these
    dictionaries to find matching equities ([830](https://github.com/stefan-jansen/zipline/issues/830)).
  id: totrans-2362
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通过添加一个扩展`AssetFinderCachedEquities`，将股票加载到字典中，然后指导`lookup_symbol()`使用这些字典来查找匹配的股票，从而加快了`lookup_symbol()`的速度（[830](https://github.com/stefan-jansen/zipline/issues/830)）。
- en: Improved performance of `lookup_symbol()` by performing batched queries. ([817](https://github.com/stefan-jansen/zipline/issues/817)).
  id: totrans-2363
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通过执行批量查询，提高了`lookup_symbol()`的性能。([817](https://github.com/stefan-jansen/zipline/issues/817))。
- en: Maintenance and Refactorings
  id: totrans-2364
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 维护和重构
- en: Asset databases now contain version information to ensure compatibility with
    current Zipline version ([815](https://github.com/stefan-jansen/zipline/issues/815)).
  id: totrans-2365
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 资产数据库现在包含版本信息，以确保与当前Zipline版本的兼容性([815](https://github.com/stefan-jansen/zipline/issues/815))。
- en: Upgrade `requests` version to 2.9.1 ([2ee40db](https://github.com/stefan-jansen/zipline/commit/2ee40db))
  id: totrans-2366
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将`requests`版本升级到2.9.1 ([2ee40db](https://github.com/stefan-jansen/zipline/commit/2ee40db))
- en: Upgrade `logbook` version to 0.12.5 ([11465d9](https://github.com/stefan-jansen/zipline/commit/11465d9)).
  id: totrans-2367
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将`logbook`版本升级到0.12.5 ([11465d9](https://github.com/stefan-jansen/zipline/commit/11465d9))。
- en: Upgrade `Cython` version to 0.23.4 ([5f49fa2](https://github.com/stefan-jansen/zipline/commit/5f49fa2)).
  id: totrans-2368
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将`Cython`版本升级到0.23.4 ([5f49fa2](https://github.com/stefan-jansen/zipline/commit/5f49fa2))。
- en: Build
  id: totrans-2369
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 构建
- en: Makes zipline install requirements more flexible ([825](https://github.com/stefan-jansen/zipline/issues/825)).
  id: totrans-2370
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使zipline安装需求更加灵活([825](https://github.com/stefan-jansen/zipline/issues/825))。
- en: Use `versioneer` to manage the project `__version__` and setup.py version ([829](https://github.com/stefan-jansen/zipline/issues/829)).
  id: totrans-2371
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用`versioneer`管理项目的`__version__`和setup.py版本([829](https://github.com/stefan-jansen/zipline/issues/829))。
- en: Fixed coveralls integration on travis build ([840](https://github.com/stefan-jansen/zipline/issues/840)).
  id: totrans-2372
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了travis构建中的coveralls集成问题([840](https://github.com/stefan-jansen/zipline/issues/840))。
- en: Fixed conda build, which now uses git source as its source and reads requirements
    using setup.py, instead of copying them and letting them get out of sync ([937](https://github.com/stefan-jansen/zipline/issues/937)).
  id: totrans-2373
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了conda构建，现在使用git源作为其源，并使用setup.py读取需求，而不是复制它们并让它们不同步([937](https://github.com/stefan-jansen/zipline/issues/937))。
- en: Require `setuptools` > 18.0 ([951](https://github.com/stefan-jansen/zipline/issues/951)).
  id: totrans-2374
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 要求`setuptools`版本大于18.0 ([951](https://github.com/stefan-jansen/zipline/issues/951))。
- en: Documentation
  id: totrans-2375
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 文档
- en: Document the release process for developers ([835](https://github.com/stefan-jansen/zipline/issues/835)).
  id: totrans-2376
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为开发者记录了发布流程([835](https://github.com/stefan-jansen/zipline/issues/835))。
- en: Added reference docs for the Pipeline API. ([864](https://github.com/stefan-jansen/zipline/issues/864)).
  id: totrans-2377
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为Pipeline API添加了参考文档。([864](https://github.com/stefan-jansen/zipline/issues/864))。
- en: Added reference docs for Asset Metadata APIs. ([864](https://github.com/stefan-jansen/zipline/issues/864)).
  id: totrans-2378
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为资产元数据API添加了参考文档。([864](https://github.com/stefan-jansen/zipline/issues/864))。
- en: Generated documentation now includes links to source code for many classes and
    functions. ([864](https://github.com/stefan-jansen/zipline/issues/864)).
  id: totrans-2379
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 生成的文档现在包括许多类和函数的源代码链接。([864](https://github.com/stefan-jansen/zipline/issues/864))。
- en: Added platform-specific documentation describing how to find binary dependencies.
    ([883](https://github.com/stefan-jansen/zipline/issues/883)).
  id: totrans-2380
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加了平台特定的文档，描述如何找到二进制依赖项。([883](https://github.com/stefan-jansen/zipline/issues/883))。
- en: Miscellaneous
  id: totrans-2381
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 杂项
- en: Added a `show_graph()` method to render a Pipeline as an image ([836](https://github.com/stefan-jansen/zipline/issues/836)).
  id: totrans-2382
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加了一个`show_graph()`方法，用于将Pipeline渲染为图像([836](https://github.com/stefan-jansen/zipline/issues/836))。
- en: Adds `subtest()` decorator for creating subtests without `nose_parameterized.expand()`
    which bloats the test output ([833](https://github.com/stefan-jansen/zipline/issues/833)).
  id: totrans-2383
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加了`subtest()`装饰器，用于创建子测试，而不使用`nose_parameterized.expand()`，这会使测试输出膨胀([833](https://github.com/stefan-jansen/zipline/issues/833))。
- en: Limits timer report in test output to 15 longest tests ([838](https://github.com/stefan-jansen/zipline/issues/838)).
  id: totrans-2384
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将测试输出中的计时器报告限制为最长的15个测试([838](https://github.com/stefan-jansen/zipline/issues/838))。
- en: Treasury and benchmark downloads will now wait up to an hour to download again
    if data returned from a remote source does not extend to the date expected. ([841](https://github.com/stefan-jansen/zipline/issues/841)).
  id: totrans-2385
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 国债和基准下载现在如果从远程源返回的数据没有延伸到预期日期，将等待长达一小时再次下载。([841](https://github.com/stefan-jansen/zipline/issues/841))。
- en: Added a tool to downgrade the assets db to previous versions ([941](https://github.com/stefan-jansen/zipline/issues/941)).
  id: totrans-2386
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加了一个工具，用于将资产数据库降级到以前的版本([941](https://github.com/stefan-jansen/zipline/issues/941))。
- en: Release 0.8.3
  id: totrans-2387
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 发布 0.8.3
- en: 'Release:'
  id: totrans-2388
  prefs: []
  type: TYPE_NORMAL
  zh: 发布：
- en: 0.8.3
  id: totrans-2389
  prefs: []
  type: TYPE_NORMAL
  zh: 0.8.3
- en: 'Date:'
  id: totrans-2390
  prefs: []
  type: TYPE_NORMAL
  zh: 日期：
- en: November 6, 2015
  id: totrans-2391
  prefs: []
  type: TYPE_NORMAL
  zh: 2015年11月6日
- en: Note
  id: totrans-2392
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: We advanced the version to `0.8.3` to fix a source distribution issue with pypi.
    There are no code changes in this version.
  id: totrans-2393
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将版本推进到`0.8.3`，以修复pypi的源分布问题。这个版本没有代码更改。
- en: Release 0.8.0
  id: totrans-2394
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 发布 0.8.0
- en: 'Release:'
  id: totrans-2395
  prefs: []
  type: TYPE_NORMAL
  zh: 发布：
- en: 0.8.0
  id: totrans-2396
  prefs: []
  type: TYPE_NORMAL
  zh: 0.8.0
- en: 'Date:'
  id: totrans-2397
  prefs: []
  type: TYPE_NORMAL
  zh: 日期：
- en: November 6, 2015
  id: totrans-2398
  prefs: []
  type: TYPE_NORMAL
  zh: 2015年11月6日
- en: Highlights
  id: totrans-2399
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 亮点
- en: New documentation system with a new website at [zipline.io](https://www.zipline.io)
  id: totrans-2400
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新的文档系统，新网站位于[zipline.io](https://www.zipline.io)。
- en: Major performance enhancements.
  id: totrans-2401
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 主要性能提升。
- en: Dynamic history.
  id: totrans-2402
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 动态历史。
- en: 'New user defined method: `before_trading_start`.'
  id: totrans-2403
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新的用户定义方法：`before_trading_start`。
- en: 'New api function: [`schedule_function()`](api-reference.html#zipline.api.schedule_function
    "zipline.api.schedule_function").'
  id: totrans-2404
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新的api函数：[`schedule_function()`](api-reference.html#zipline.api.schedule_function
    "zipline.api.schedule_function")。
- en: 'New api function: [`get_environment()`](api-reference.html#zipline.api.get_environment
    "zipline.api.get_environment").'
  id: totrans-2405
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新的api函数：[`get_environment()`](api-reference.html#zipline.api.get_environment
    "zipline.api.get_environment")。
- en: 'New api function: [`set_max_leverage()`](api-reference.html#zipline.api.set_max_leverage
    "zipline.api.set_max_leverage").'
  id: totrans-2406
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新的api函数：[`set_max_leverage()`](api-reference.html#zipline.api.set_max_leverage
    "zipline.api.set_max_leverage")。
- en: 'New api function: [`set_do_not_order_list()`](api-reference.html#zipline.api.set_do_not_order_list
    "zipline.api.set_do_not_order_list").'
  id: totrans-2407
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新的api函数：[`set_do_not_order_list()`](api-reference.html#zipline.api.set_do_not_order_list
    "zipline.api.set_do_not_order_list")。
- en: Pipeline API.
  id: totrans-2408
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 管道API。
- en: Support for trading futures.
  id: totrans-2409
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 支持交易期货。
- en: Enhancements
  id: totrans-2410
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 增强功能
- en: 'Account object: Adds an account object to context to track information about
    the trading account. Example:'
  id: totrans-2411
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 账户对象：向上下文中添加一个账户对象，以跟踪有关交易账户的信息。例如：
- en: '[PRE56]'
  id: totrans-2412
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE56]'
- en: Returns the settled cash value that is stored on the account object. This value
    is updated accordingly as the algorithm is run ([396](https://github.com/stefan-jansen/zipline/issues/396)).
  id: totrans-2413
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 返回存储在账户对象上的结算现金价值。随着算法的运行，该值会相应更新（[396](https://github.com/stefan-jansen/zipline/issues/396)）。
- en: '`HistoryContainer` can now grow dynamically. Calls to `history()` will now
    be able to increase the size or change the shape of the history container to be
    able to service the call. `add_history()` now acts as a preformance hint to pre-allocate
    sufficient space in the container. This change is backwards compatible with `history`,
    all existing algorithms should continue to work as intended ([412](https://github.com/stefan-jansen/zipline/issues/412)).'
  id: totrans-2414
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`HistoryContainer`现在可以动态增长，对`history()`的调用现在能够增加历史容器的大小或改变其形状，以便能够服务调用。`add_history()`现在作为性能提示，预先分配容器中足够的空间。这个变化与`history`向后兼容，所有现有的算法应该继续按预期工作（[412](https://github.com/stefan-jansen/zipline/issues/412)）。'
- en: 'Simple transforms ported from quantopian and use history. `SIDData` now has
    methods for:'
  id: totrans-2415
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从quantopian移植的简单转换并使用历史。`SIDData`现在有以下方法：
- en: '`stddev`'
  id: totrans-2416
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`stddev`'
- en: '`mavg`'
  id: totrans-2417
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`mavg`'
- en: '`vwap`'
  id: totrans-2418
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`vwap`'
- en: '`returns`'
  id: totrans-2419
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`returns`'
- en: 'These methods, except for `returns`, accept a number of days. If you are running
    with minute data, then this will calculate the number of minutes in those days,
    accounting for early closes and the current time and apply the transform over
    the set of minutes. `returns` takes no parameters and will return the daily returns
    of the given asset. Example:'
  id: totrans-2420
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 这些方法，除了`returns`，接受一个天数参数。如果你使用分钟数据运行，那么这将计算那些天中的分钟数，考虑到提前关闭和当前时间，并在这些分钟上应用转换。`returns`不接受参数，将返回给定资产的日回报。例如：
- en: '[PRE57]'
  id: totrans-2421
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE57]'
- en: ([429](https://github.com/stefan-jansen/zipline/issues/429)).
  id: totrans-2422
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: （[429](https://github.com/stefan-jansen/zipline/issues/429)）。
- en: 'New fields in Performance Period. Performance Period has new fields accessible
    in return value of `to_dict`: - gross leverage - net leverage - short exposure
    - long exposure - shorts count - longs count ([464](https://github.com/stefan-jansen/zipline/issues/464)).'
  id: totrans-2423
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 性能周期中新增字段。性能周期在`to_dict`返回值中新增了可访问的字段：- 总杠杆 - 净杠杆 - 空头暴露 - 多头暴露 - 空头数量 - 多头数量（[464](https://github.com/stefan-jansen/zipline/issues/464)）。
- en: Allow [`order_percent()`](api-reference.html#zipline.api.order_percent "zipline.api.order_percent")
    to work with various market values (by Jeremiah Lowin).
  id: totrans-2424
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 允许[`order_percent()`](api-reference.html#zipline.api.order_percent "zipline.api.order_percent")与各种市场价值一起工作（由Jeremiah
    Lowin提供）。
- en: 'Currently, [`order_percent()`](api-reference.html#zipline.api.order_percent
    "zipline.api.order_percent") and [`order_target_percent()`](api-reference.html#zipline.api.order_target_percent
    "zipline.api.order_target_percent") both operate as a percentage of `self.portfolio.portfolio_value`.
    This PR lets them operate as percentages of other important MVs. Also adds `context.get_market_value()`,
    which enables this functionality. For example:'
  id: totrans-2425
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 目前，[`order_percent()`](api-reference.html#zipline.api.order_percent "zipline.api.order_percent")和[`order_target_percent()`](api-reference.html#zipline.api.order_target_percent
    "zipline.api.order_target_percent")都作为`self.portfolio.portfolio_value`的百分比操作。这个PR允许它们作为其他重要市场价值的百分比操作。还增加了`context.get_market_value()`，这使得这种功能得以实现。例如：
- en: '[PRE58]'
  id: totrans-2426
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE58]'
- en: ([477](https://github.com/stefan-jansen/zipline/issues/477)).
  id: totrans-2427
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: （[477](https://github.com/stefan-jansen/zipline/issues/477)）。
- en: Command line option to for printing algo to stdout (by Andrea D’Amore) ([545](https://github.com/stefan-jansen/zipline/issues/545)).
  id: totrans-2428
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 命令行选项，用于将算法打印到stdout（由Andrea D’Amore提供）([545](https://github.com/stefan-jansen/zipline/issues/545))。
- en: New user defined function `before_trading_start`. This function can be overridden
    by the user to be called once before the market opens every day ([389](https://github.com/stefan-jansen/zipline/issues/389)).
  id: totrans-2429
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新的用户定义函数`before_trading_start`。用户可以重写该函数，以便在市场开盘前每天调用一次([389](https://github.com/stefan-jansen/zipline/issues/389))。
- en: New api function [`schedule_function()`](api-reference.html#zipline.api.schedule_function
    "zipline.api.schedule_function"). This function allows the user to schedule a
    function to be called based on more complicated rules about the date and time.
    For example, call the function 15 minutes before market close respecting early
    closes ([411](https://github.com/stefan-jansen/zipline/issues/411)).
  id: totrans-2430
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新的api函数[`schedule_function()`](api-reference.html#zipline.api.schedule_function
    "zipline.api.schedule_function")。该函数允许用户根据更复杂的日期和时间规则安排函数调用。例如，在市场关闭前15分钟调用该函数，尊重提前关闭([411](https://github.com/stefan-jansen/zipline/issues/411))。
- en: New api function `set_do_not_order_list()`. This function accepts a list of
    assets and adds a trading guard that prevents the algorithm from trading them.
    Adds a list point in time list of leveraged ETFs that people may want to mark
    as ‘do not trade’ ([478](https://github.com/stefan-jansen/zipline/issues/478)).
  id: totrans-2431
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新的api函数`set_do_not_order_list()`。该函数接受一个资产列表，并添加一个交易保护措施，防止算法交易这些资产。添加了一个实时列表，列出了人们可能想要标记为“不交易”的杠杆ETF([478](https://github.com/stefan-jansen/zipline/issues/478))。
- en: Adds a class for representing securities. [`order()`](api-reference.html#zipline.api.order
    "zipline.api.order") and other order functions now require an instance of `Security`
    instead of an int or string ([520](https://github.com/stefan-jansen/zipline/issues/520)).
  id: totrans-2432
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新增表示证券的类。`order()`和其他订单函数现在需要一个`Security`实例，而不是一个整数或字符串([520](https://github.com/stefan-jansen/zipline/issues/520))。
- en: Generalize the `Security` class to [`Asset`](api-reference.html#zipline.assets.Asset
    "zipline.assets.Asset"). This is in preperation of adding support for other asset
    types ([535](https://github.com/stefan-jansen/zipline/issues/535)).
  id: totrans-2433
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将`Security`类泛化为[`Asset`](api-reference.html#zipline.assets.Asset "zipline.assets.Asset")。这是为了准备添加对其他资产类型的支持([535](https://github.com/stefan-jansen/zipline/issues/535))。
- en: New api function [`get_environment()`](api-reference.html#zipline.api.get_environment
    "zipline.api.get_environment"). This function by default returns the string `'zipline'`.
    This is used so that algorithms can have different behavior on Quantopian and
    local zipline ([384](https://github.com/stefan-jansen/zipline/issues/384)).
  id: totrans-2434
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新的api函数[`get_environment()`](api-reference.html#zipline.api.get_environment
    "zipline.api.get_environment")。该函数默认返回字符串`'zipline'`。这样算法就可以在Quantopian和本地zipline上表现出不同的行为([384](https://github.com/stefan-jansen/zipline/issues/384))。
- en: 'Extends [`get_environment()`](api-reference.html#zipline.api.get_environment
    "zipline.api.get_environment") to expose more of the environment to the algorithm.
    The function now accepts an argument that is the field to return. By default,
    this is `''platform''` which returns the old value of `''zipline''` but the following
    new fields can be requested:'
  id: totrans-2435
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 扩展[`get_environment()`](api-reference.html#zipline.api.get_environment "zipline.api.get_environment")以向算法公开更多的环境。该函数现在接受一个参数，该参数是要返回的字段。默认情况下，这是`'platform'`，它返回旧的`'zipline'`值，但可以请求以下新字段：
- en: '`''''arena''`: Is this live trading or backtesting?'
  id: totrans-2436
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`''''arena''`：这是实时交易还是回测？'
- en: '`''data_frequency''`: Is this minute mode or daily mode?'
  id: totrans-2437
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`''data_frequency''`：这是分钟模式还是日模式？'
- en: '`''start''`: Simulation start date.'
  id: totrans-2438
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`''start''`：模拟开始日期。'
- en: '`''end''`: Simulation end date.'
  id: totrans-2439
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`''end''`：模拟结束日期。'
- en: '`''capital_base''`: The starting capital for the simulation.'
  id: totrans-2440
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`''capital_base''`：模拟的起始资本。'
- en: '`''platform''`: The platform that the algorithm is running on.'
  id: totrans-2441
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`''platform''`：算法运行的平台。'
- en: '`''*''`: A dictionary containing all of these fields.'
  id: totrans-2442
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`''*''`：包含所有这些字段的字典。'
- en: ([449](https://github.com/stefan-jansen/zipline/issues/449)).
  id: totrans-2443
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: ([449](https://github.com/stefan-jansen/zipline/issues/449))。
- en: New api function `set_max_leveraged()`. This method adds a trading guard that
    prevents your algorithm from over leveraging itself ([552](https://github.com/stefan-jansen/zipline/issues/552)).
  id: totrans-2444
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新的api函数`set_max_leveraged()`。该方法添加了一个交易保护措施，防止算法过度杠杆化自身([552](https://github.com/stefan-jansen/zipline/issues/552))。
- en: Experimental Features
  id: totrans-2445
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 实验性功能
- en: Warning
  id: totrans-2446
  prefs: []
  type: TYPE_NORMAL
  zh: 警告
- en: Experimental features are subject to change.
  id: totrans-2447
  prefs: []
  type: TYPE_NORMAL
  zh: 实验性功能可能会发生变化。
- en: Adds new Pipeline API. The pipeline API is a high-level declarative API for
    representing trailing window computations on large datasets ([630](https://github.com/stefan-jansen/zipline/issues/630)).
  id: totrans-2448
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加了新的Pipeline API。Pipeline API是一个高级的声明式API，用于表示大型数据集上的尾随窗口计算（[630](https://github.com/stefan-jansen/zipline/issues/630)）。
- en: Adds support for futures trading ([637](https://github.com/stefan-jansen/zipline/issues/637)).
  id: totrans-2449
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增加了对期货交易的支持（[637](https://github.com/stefan-jansen/zipline/issues/637)）。
- en: Adds Pipeline loader for blaze expressions. This allows users to pull data from
    any format blaze understands and use it in the Pipeline API. ([775](https://github.com/stefan-jansen/zipline/issues/775)).
  id: totrans-2450
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为blaze表达式添加了Pipeline加载器。这允许用户从任何blaze理解的数据格式中提取数据，并在Pipeline API中使用它（[775](https://github.com/stefan-jansen/zipline/issues/775)）。
- en: Bug Fixes
  id: totrans-2451
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 错误修复
- en: Fix a bug where the reported returns could sharply dip for random periods of
    time ([378](https://github.com/stefan-jansen/zipline/issues/378)).
  id: totrans-2452
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了一个错误，该错误会导致报告的回报率在随机时间段内急剧下降（[378](https://github.com/stefan-jansen/zipline/issues/378)）。
- en: Fix a bug that prevented debuggers from resolving the algorithm file ([431](https://github.com/stefan-jansen/zipline/issues/431)).
  id: totrans-2453
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了一个阻止调试器解析算法文件的错误（[431](https://github.com/stefan-jansen/zipline/issues/431)）。
- en: Properly forward arguments to user defined `initialize` function ([687](https://github.com/stefan-jansen/zipline/issues/687)).
  id: totrans-2454
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 正确地将参数转发给用户自定义的`initialize`函数（[687](https://github.com/stefan-jansen/zipline/issues/687)）。
- en: Fix a bug that would cause treasury data to be redownloaded every backtest between
    midnight EST and the time when the treasury data was available ([793](https://github.com/stefan-jansen/zipline/issues/793)).
  id: totrans-2455
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了一个错误，该错误会导致在东部时间午夜和财政部数据可用时间之间的每次回测中重新下载财政部数据（[793](https://github.com/stefan-jansen/zipline/issues/793)）。
- en: Fix a bug that would cause the user defined `analyze` function to not be called
    if it was passed as a keyword argument to `TradingAlgorithm` ([819](https://github.com/stefan-jansen/zipline/issues/819)).
  id: totrans-2456
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了一个错误，该错误会导致如果将用户自定义的`analyze`函数作为关键字参数传递给`TradingAlgorithm`，则不会被调用（[819](https://github.com/stefan-jansen/zipline/issues/819)）。
- en: Performance
  id: totrans-2457
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 性能
- en: Major performance enhancements to history (by Dale Jung) ([488](https://github.com/stefan-jansen/zipline/issues/488)).
  id: totrans-2458
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对历史记录进行了重大性能改进（由Dale Jung贡献）（[488](https://github.com/stefan-jansen/zipline/issues/488)）。
- en: Maintenance and Refactorings
  id: totrans-2459
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 维护和重构
- en: Remove simple transform code. These are available as methods of `SIDData` ([550](https://github.com/stefan-jansen/zipline/issues/550)).
  id: totrans-2460
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 移除了简单的转换代码。这些代码作为`SIDData`的方法提供（[550](https://github.com/stefan-jansen/zipline/issues/550)）。
- en: Build
  id: totrans-2461
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 构建
- en: None
  id: totrans-2462
  prefs: []
  type: TYPE_NORMAL
  zh: 无
- en: Documentation
  id: totrans-2463
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 文档
- en: Switched to sphinx for the documentation ([816](https://github.com/stefan-jansen/zipline/issues/816)).
  id: totrans-2464
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 切换到sphinx进行文档编写（[816](https://github.com/stefan-jansen/zipline/issues/816)）。
- en: Highlights
  id: totrans-2465
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 亮点
- en: New documentation system with a new website at [zipline.io](https://www.zipline.io)
  id: totrans-2466
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新的文档系统，新网站位于[zipline.io](https://www.zipline.io)
- en: Major performance enhancements.
  id: totrans-2467
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 主要性能提升。
- en: Dynamic history.
  id: totrans-2468
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 动态历史。
- en: 'New user defined method: `before_trading_start`.'
  id: totrans-2469
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新增用户自定义方法：`before_trading_start`。
- en: 'New api function: [`schedule_function()`](api-reference.html#zipline.api.schedule_function
    "zipline.api.schedule_function").'
  id: totrans-2470
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新增api函数：[`schedule_function()`](api-reference.html#zipline.api.schedule_function
    "zipline.api.schedule_function")。
- en: 'New api function: [`get_environment()`](api-reference.html#zipline.api.get_environment
    "zipline.api.get_environment").'
  id: totrans-2471
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新增api函数：[`get_environment()`](api-reference.html#zipline.api.get_environment
    "zipline.api.get_environment")。
- en: 'New api function: [`set_max_leverage()`](api-reference.html#zipline.api.set_max_leverage
    "zipline.api.set_max_leverage").'
  id: totrans-2472
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新增api函数：[`set_max_leverage()`](api-reference.html#zipline.api.set_max_leverage
    "zipline.api.set_max_leverage")。
- en: 'New api function: [`set_do_not_order_list()`](api-reference.html#zipline.api.set_do_not_order_list
    "zipline.api.set_do_not_order_list").'
  id: totrans-2473
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新增api函数：[`set_do_not_order_list()`](api-reference.html#zipline.api.set_do_not_order_list
    "zipline.api.set_do_not_order_list")。
- en: Pipeline API.
  id: totrans-2474
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Pipeline API。
- en: Support for trading futures.
  id: totrans-2475
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 支持交易期货。
- en: Enhancements
  id: totrans-2476
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 增强功能
- en: 'Account object: Adds an account object to context to track information about
    the trading account. Example:'
  id: totrans-2477
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 账户对象：向上下文中添加一个账户对象，用于跟踪交易账户的信息。例如：
- en: '[PRE59]'
  id: totrans-2478
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE59]'
- en: Returns the settled cash value that is stored on the account object. This value
    is updated accordingly as the algorithm is run ([396](https://github.com/stefan-jansen/zipline/issues/396)).
  id: totrans-2479
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 返回存储在账户对象上的结算现金价值。随着算法的运行，该值会相应更新（[396](https://github.com/stefan-jansen/zipline/issues/396)）。
- en: '`HistoryContainer` can now grow dynamically. Calls to `history()` will now
    be able to increase the size or change the shape of the history container to be
    able to service the call. `add_history()` now acts as a preformance hint to pre-allocate
    sufficient space in the container. This change is backwards compatible with `history`,
    all existing algorithms should continue to work as intended ([412](https://github.com/stefan-jansen/zipline/issues/412)).'
  id: totrans-2480
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`HistoryContainer`现在可以动态增长，调用`history()`将能够增加历史容器的大小或改变其形状，以满足调用需求。`add_history()`现在作为性能提示，预先分配容器中足够的空间。这一变化与`history`向后兼容，所有现有算法应继续按预期工作（[412](https://github.com/stefan-jansen/zipline/issues/412)）。'
- en: 'Simple transforms ported from quantopian and use history. `SIDData` now has
    methods for:'
  id: totrans-2481
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从quantopian移植过来的简单变换，现在`SIDData`拥有以下方法：
- en: '`stddev`'
  id: totrans-2482
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`stddev`'
- en: '`mavg`'
  id: totrans-2483
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`mavg`'
- en: '`vwap`'
  id: totrans-2484
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`vwap`'
- en: '`returns`'
  id: totrans-2485
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`returns`'
- en: 'These methods, except for `returns`, accept a number of days. If you are running
    with minute data, then this will calculate the number of minutes in those days,
    accounting for early closes and the current time and apply the transform over
    the set of minutes. `returns` takes no parameters and will return the daily returns
    of the given asset. Example:'
  id: totrans-2486
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 除了`returns`，这些方法接受一个天数参数。如果你使用分钟数据运行，那么这将计算那些天数中的分钟数，考虑到提前收盘和当前时间，并在这些分钟集合上应用变换。`returns`不接受任何参数，将返回给定资产的日回报率。例如：
- en: '[PRE60]'
  id: totrans-2487
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE60]'
- en: ([429](https://github.com/stefan-jansen/zipline/issues/429)).
  id: totrans-2488
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: ([429](https://github.com/stefan-jansen/zipline/issues/429)）。
- en: 'New fields in Performance Period. Performance Period has new fields accessible
    in return value of `to_dict`: - gross leverage - net leverage - short exposure
    - long exposure - shorts count - longs count ([464](https://github.com/stefan-jansen/zipline/issues/464)).'
  id: totrans-2489
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 性能周期中的新字段。性能周期在`to_dict`返回值中具有新字段：- 总杠杆 - 净杠杆 - 空头暴露 - 多头暴露 - 空头数量 - 多头数量（[464](https://github.com/stefan-jansen/zipline/issues/464)）。
- en: Allow [`order_percent()`](api-reference.html#zipline.api.order_percent "zipline.api.order_percent")
    to work with various market values (by Jeremiah Lowin).
  id: totrans-2490
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 允许[`order_percent()`](api-reference.html#zipline.api.order_percent "zipline.api.order_percent")与各种市场价值一起工作（由Jeremiah
    Lowin提供）。
- en: 'Currently, [`order_percent()`](api-reference.html#zipline.api.order_percent
    "zipline.api.order_percent") and [`order_target_percent()`](api-reference.html#zipline.api.order_target_percent
    "zipline.api.order_target_percent") both operate as a percentage of `self.portfolio.portfolio_value`.
    This PR lets them operate as percentages of other important MVs. Also adds `context.get_market_value()`,
    which enables this functionality. For example:'
  id: totrans-2491
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 目前，[`order_percent()`](api-reference.html#zipline.api.order_percent "zipline.api.order_percent")和[`order_target_percent()`](api-reference.html#zipline.api.order_target_percent
    "zipline.api.order_target_percent")都作为`self.portfolio.portfolio_value`的百分比操作。此PR允许它们作为其他重要市场价值的百分比操作。还添加了`context.get_market_value()`，这使得这种功能得以实现。例如：
- en: '[PRE61]'
  id: totrans-2492
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE61]'
- en: ([477](https://github.com/stefan-jansen/zipline/issues/477)).
  id: totrans-2493
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: ([477](https://github.com/stefan-jansen/zipline/issues/477)）。
- en: Command line option to for printing algo to stdout (by Andrea D’Amore) ([545](https://github.com/stefan-jansen/zipline/issues/545)).
  id: totrans-2494
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 命令行选项，用于将算法打印到stdout（由Andrea D’Amore提供）（[545](https://github.com/stefan-jansen/zipline/issues/545)）。
- en: New user defined function `before_trading_start`. This function can be overridden
    by the user to be called once before the market opens every day ([389](https://github.com/stefan-jansen/zipline/issues/389)).
  id: totrans-2495
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新增用户自定义函数`before_trading_start`。用户可以重写该函数，使其在市场开盘前每天调用一次（[389](https://github.com/stefan-jansen/zipline/issues/389)）。
- en: New api function [`schedule_function()`](api-reference.html#zipline.api.schedule_function
    "zipline.api.schedule_function"). This function allows the user to schedule a
    function to be called based on more complicated rules about the date and time.
    For example, call the function 15 minutes before market close respecting early
    closes ([411](https://github.com/stefan-jansen/zipline/issues/411)).
  id: totrans-2496
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新增api函数[`schedule_function()`](api-reference.html#zipline.api.schedule_function
    "zipline.api.schedule_function")。该函数允许用户根据更复杂的日期和时间规则来安排函数的调用。例如，在市场收盘前15分钟调用该函数，同时尊重提前收盘的情况（[411](https://github.com/stefan-jansen/zipline/issues/411)）。
- en: New api function `set_do_not_order_list()`. This function accepts a list of
    assets and adds a trading guard that prevents the algorithm from trading them.
    Adds a list point in time list of leveraged ETFs that people may want to mark
    as ‘do not trade’ ([478](https://github.com/stefan-jansen/zipline/issues/478)).
  id: totrans-2497
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新增api函数`set_do_not_order_list()`。该函数接受一组资产，并添加一个交易防护，阻止算法交易这些资产。添加了一个时间点列表，列出了人们可能想要标记为“不交易”的杠杆ETF（[478](https://github.com/stefan-jansen/zipline/issues/478)）。
- en: Adds a class for representing securities. [`order()`](api-reference.html#zipline.api.order
    "zipline.api.order") and other order functions now require an instance of `Security`
    instead of an int or string ([520](https://github.com/stefan-jansen/zipline/issues/520)).
  id: totrans-2498
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加了一个表示证券的类。[`order()`](api-reference.html#zipline.api.order "zipline.api.order")和其他订单函数现在需要一个`Security`实例，而不是一个整数或字符串（[520](https://github.com/stefan-jansen/zipline/issues/520)）。
- en: Generalize the `Security` class to [`Asset`](api-reference.html#zipline.assets.Asset
    "zipline.assets.Asset"). This is in preperation of adding support for other asset
    types ([535](https://github.com/stefan-jansen/zipline/issues/535)).
  id: totrans-2499
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将`Security`类泛化为[`Asset`](api-reference.html#zipline.assets.Asset "zipline.assets.Asset")。这是为了准备添加对其他资产类型的支持（[535](https://github.com/stefan-jansen/zipline/issues/535)）。
- en: New api function [`get_environment()`](api-reference.html#zipline.api.get_environment
    "zipline.api.get_environment"). This function by default returns the string `'zipline'`.
    This is used so that algorithms can have different behavior on Quantopian and
    local zipline ([384](https://github.com/stefan-jansen/zipline/issues/384)).
  id: totrans-2500
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新的api函数[`get_environment()`](api-reference.html#zipline.api.get_environment
    "zipline.api.get_environment")。该函数默认返回字符串`'zipline'`。这是为了让算法在Quantopian和本地zipline上具有不同的行为（[384](https://github.com/stefan-jansen/zipline/issues/384)）。
- en: 'Extends [`get_environment()`](api-reference.html#zipline.api.get_environment
    "zipline.api.get_environment") to expose more of the environment to the algorithm.
    The function now accepts an argument that is the field to return. By default,
    this is `''platform''` which returns the old value of `''zipline''` but the following
    new fields can be requested:'
  id: totrans-2501
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 扩展了[`get_environment()`](api-reference.html#zipline.api.get_environment "zipline.api.get_environment")，以向算法暴露更多的环境。该函数现在接受一个参数，该参数是要返回的字段。默认情况下，这是`'platform'`，它返回旧的`'zipline'`值，但可以请求以下新字段：
- en: '`''''arena''`: Is this live trading or backtesting?'
  id: totrans-2502
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`''''arena''`：这是实时交易还是回测？'
- en: '`''data_frequency''`: Is this minute mode or daily mode?'
  id: totrans-2503
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`''data_frequency''`：这是分钟模式还是日模式？'
- en: '`''start''`: Simulation start date.'
  id: totrans-2504
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`''start''`：模拟开始日期。'
- en: '`''end''`: Simulation end date.'
  id: totrans-2505
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`''end''`：模拟结束日期。'
- en: '`''capital_base''`: The starting capital for the simulation.'
  id: totrans-2506
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`''capital_base''`：模拟的起始资本。'
- en: '`''platform''`: The platform that the algorithm is running on.'
  id: totrans-2507
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`''platform''`：算法运行的平台。'
- en: '`''*''`: A dictionary containing all of these fields.'
  id: totrans-2508
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`''*''`：包含所有这些字段的字典。'
- en: ([449](https://github.com/stefan-jansen/zipline/issues/449)).
  id: totrans-2509
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: （[449](https://github.com/stefan-jansen/zipline/issues/449)）。
- en: New api function `set_max_leveraged()`. This method adds a trading guard that
    prevents your algorithm from over leveraging itself ([552](https://github.com/stefan-jansen/zipline/issues/552)).
  id: totrans-2510
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新的api函数`set_max_leveraged()`。该方法添加了一个交易守卫，防止算法过度杠杆化自己（[552](https://github.com/stefan-jansen/zipline/issues/552)）。
- en: Experimental Features
  id: totrans-2511
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 实验性功能
- en: Warning
  id: totrans-2512
  prefs: []
  type: TYPE_NORMAL
  zh: 警告
- en: Experimental features are subject to change.
  id: totrans-2513
  prefs: []
  type: TYPE_NORMAL
  zh: 实验性功能可能会发生变化。
- en: Adds new Pipeline API. The pipeline API is a high-level declarative API for
    representing trailing window computations on large datasets ([630](https://github.com/stefan-jansen/zipline/issues/630)).
  id: totrans-2514
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加了新的Pipeline API。Pipeline API是一个高级的声明式API，用于表示大型数据集上的尾随窗口计算（[630](https://github.com/stefan-jansen/zipline/issues/630)）。
- en: Adds support for futures trading ([637](https://github.com/stefan-jansen/zipline/issues/637)).
  id: totrans-2515
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加了对期货交易的支持（[637](https://github.com/stefan-jansen/zipline/issues/637)）。
- en: Adds Pipeline loader for blaze expressions. This allows users to pull data from
    any format blaze understands and use it in the Pipeline API. ([775](https://github.com/stefan-jansen/zipline/issues/775)).
  id: totrans-2516
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加了用于blaze表达式的Pipeline加载器。这允许用户从任何blaze理解的数据格式中提取数据，并在Pipeline API中使用它（[775](https://github.com/stefan-jansen/zipline/issues/775)）。
- en: Bug Fixes
  id: totrans-2517
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 错误修复
- en: Fix a bug where the reported returns could sharply dip for random periods of
    time ([378](https://github.com/stefan-jansen/zipline/issues/378)).
  id: totrans-2518
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了一个问题，即报告的回报率会在随机时间段内急剧下降（[378](https://github.com/stefan-jansen/zipline/issues/378)）。
- en: Fix a bug that prevented debuggers from resolving the algorithm file ([431](https://github.com/stefan-jansen/zipline/issues/431)).
  id: totrans-2519
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了一个阻止调试器解析算法文件的错误（[431](https://github.com/stefan-jansen/zipline/issues/431)）。
- en: Properly forward arguments to user defined `initialize` function ([687](https://github.com/stefan-jansen/zipline/issues/687)).
  id: totrans-2520
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 正确地将参数传递给用户定义的`initialize`函数（[687](https://github.com/stefan-jansen/zipline/issues/687)）。
- en: Fix a bug that would cause treasury data to be redownloaded every backtest between
    midnight EST and the time when the treasury data was available ([793](https://github.com/stefan-jansen/zipline/issues/793)).
  id: totrans-2521
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了一个错误，该错误会导致国债数据在每个回测期间从午夜EST到国债数据可用的时间重新下载（[793](https://github.com/stefan-jansen/zipline/issues/793)）。
- en: Fix a bug that would cause the user defined `analyze` function to not be called
    if it was passed as a keyword argument to `TradingAlgorithm` ([819](https://github.com/stefan-jansen/zipline/issues/819)).
  id: totrans-2522
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了一个bug，该bug会导致如果将用户定义的`analyze`函数作为关键字参数传递给`TradingAlgorithm`，则不会被调用（[819](https://github.com/stefan-jansen/zipline/issues/819)）。
- en: Performance
  id: totrans-2523
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 性能
- en: Major performance enhancements to history (by Dale Jung) ([488](https://github.com/stefan-jansen/zipline/issues/488)).
  id: totrans-2524
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对历史记录进行了重大性能改进（由Dale Jung提供）（[488](https://github.com/stefan-jansen/zipline/issues/488)）。
- en: Maintenance and Refactorings
  id: totrans-2525
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 维护和重构
- en: Remove simple transform code. These are available as methods of `SIDData` ([550](https://github.com/stefan-jansen/zipline/issues/550)).
  id: totrans-2526
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 移除简单的转换代码。这些作为`SIDData`的方法提供（[550](https://github.com/stefan-jansen/zipline/issues/550)）。
- en: Build
  id: totrans-2527
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 构建
- en: None
  id: totrans-2528
  prefs: []
  type: TYPE_NORMAL
  zh: 无
- en: Documentation
  id: totrans-2529
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 文档
- en: Switched to sphinx for the documentation ([816](https://github.com/stefan-jansen/zipline/issues/816)).
  id: totrans-2530
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 切换到sphinx进行文档编写（[816](https://github.com/stefan-jansen/zipline/issues/816)）。
- en: Release 0.7.0
  id: totrans-2531
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 发布0.7.0
- en: 'Release:'
  id: totrans-2532
  prefs: []
  type: TYPE_NORMAL
  zh: 发布：
- en: 0.7.0
  id: totrans-2533
  prefs: []
  type: TYPE_NORMAL
  zh: 0.7.0
- en: 'Date:'
  id: totrans-2534
  prefs: []
  type: TYPE_NORMAL
  zh: 日期：
- en: July 25, 2014
  id: totrans-2535
  prefs: []
  type: TYPE_NORMAL
  zh: 2014年7月25日
- en: Highlights
  id: totrans-2536
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 亮点
- en: Command line interface to run algorithms directly.
  id: totrans-2537
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 直接运行算法的命令行界面。
- en: IPython Magic `%%zipline` that runs algorithm defined in an IPython notebook
    cell.
  id: totrans-2538
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: IPython魔法命令`%%zipline`，用于在IPython笔记本单元格中运行定义的算法。
- en: API methods for building safeguards against runaway ordering and undesired short
    positions.
  id: totrans-2539
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 用于构建防止订单失控和意外空头头寸的安全措施的API方法。
- en: New history() function to get a moving DataFrame of past market data (replaces
    BatchTransform).
  id: totrans-2540
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新的history()函数，用于获取过去市场数据的移动DataFrame（替换BatchTransform）。
- en: A new [beginner tutorial](http://nbviewer.ipython.org/github/quantopian/zipline/blob/master/docs/tutorial.ipynb).
  id: totrans-2541
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一个新的[入门教程](http://nbviewer.ipython.org/github/quantopian/zipline/blob/master/docs/tutorial.ipynb)。
- en: Enhancements
  id: totrans-2542
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 增强功能
- en: 'CLI: Adds a CLI and IPython magic for zipline. Example:'
  id: totrans-2543
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: CLI：为zipline添加CLI和IPython魔法。示例：
- en: '[PRE62]'
  id: totrans-2544
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE62]'
- en: Grabs the data from yahoo finance, runs the file dual_moving_avg.py (and looks
    for `dual_moving_avg_analyze.py` which, if found, will be executed after the algorithm
    has been run), and outputs the perf `DataFrame` to `dma.pickle` ([325](https://github.com/stefan-jansen/zipline/issues/325)).
  id: totrans-2545
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 从雅虎财经获取数据，运行`dual_moving_avg.py`文件（并查找`dual_moving_avg_analyze.py`，如果找到，将在算法运行后执行），并将性能`DataFrame`输出到`dma.pickle`（[325](https://github.com/stefan-jansen/zipline/issues/325)）。
- en: 'IPython magic command (at the top of an IPython notebook cell). Example:'
  id: totrans-2546
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: IPython魔法命令（在IPython笔记本单元格顶部）。示例：
- en: '[PRE63]'
  id: totrans-2547
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE63]'
- en: Does the same as above except instead of executing the file looks for the algorithm
    in the cell and instead of outputting the perf df to a file, creates a variable
    in the namespace called perf ([325](https://github.com/stefan-jansen/zipline/issues/325)).
  id: totrans-2548
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 与上述相同，只是不是执行文件，而是查找单元格中的算法，并且不是将性能df输出到文件，而是在命名空间中创建一个名为perf的变量（[325](https://github.com/stefan-jansen/zipline/issues/325)）。
- en: Adds Trading Controls to the algorithm API.
  id: totrans-2549
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 向算法API添加交易控制。
- en: 'The following functions are now available on `TradingAlgorithm` and for algo
    scripts:'
  id: totrans-2550
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 以下函数现在可在`TradingAlgorithm`和算法脚本中使用：
- en: '`set_max_order_size(self, sid=None, max_shares=None, max_notional=None)` Set
    a limit on the absolute magnitude, in shares and/or total dollar value, of any
    single order placed by this algorithm for a given sid. If `sid` is None, then
    the rule is applied to any order placed by the algorithm. Example:'
  id: totrans-2551
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '`set_max_order_size(self, sid=None, max_shares=None, max_notional=None)` 为算法为给定sid下的任何单个订单设置绝对大小限制，无论是以股份还是总美元价值计算。如果`sid`为None，则该规则适用于算法下的任何订单。示例：'
- en: '[PRE64]'
  id: totrans-2552
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE64]'
- en: '`set_max_position_size(self, sid=None, max_shares=None, max_notional=None)`
    -Set a limit on the absolute magnitude, in either shares or dollar value, of any
    position held by the algorithm for a given sid. If `sid` is None, then the rule
    is applied to any position held by the algorithm. Example:'
  id: totrans-2553
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '`set_max_position_size(self, sid=None, max_shares=None, max_notional=None)`
    - 为算法持有的给定sid的任何仓位设置绝对大小限制，无论是以股份还是美元价值计算。如果`sid`为None，则该规则适用于算法持有的任何仓位。示例：'
- en: '[PRE65]'
  id: totrans-2554
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE65]'
- en: '[PRE66]'
  id: totrans-2555
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE66]'
- en: '`set_long_only(self)` Set a rule specifying that the algorithm may not hold
    short positions. Example:'
  id: totrans-2556
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '`set_long_only(self)` 设置规则，指定算法不得持有空头头寸。示例：'
- en: '[PRE67]'
  id: totrans-2557
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE67]'
- en: ([329](https://github.com/stefan-jansen/zipline/issues/329)).
  id: totrans-2558
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: （[329](https://github.com/stefan-jansen/zipline/issues/329)）。
- en: Adds an `all_api_methods` classmethod on `TradingAlgorithm` that returns a list
    of all `TradingAlgorithm` API methods ([333](https://github.com/stefan-jansen/zipline/issues/333)).
  id: totrans-2559
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在`TradingAlgorithm`上添加了一个`all_api_methods`类方法，该方法返回所有`TradingAlgorithm` API方法的列表（[333](https://github.com/stefan-jansen/zipline/issues/333)）。
- en: 'Expanded record() functionality for dynamic naming. The record() function can
    now take positional args before the kwargs. All original usage and functionality
    is the same, but now these extra usages will work:'
  id: totrans-2560
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 扩展了record()功能以实现动态命名。record()函数现在可以在kwargs之前接受positional args。所有原始用法和功能保持不变，但现在这些额外用法将起作用：
- en: '[PRE68]'
  id: totrans-2561
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE68]'
- en: The requirements are simply that the poritional args occur only before the kwargs
    ([355](https://github.com/stefan-jansen/zipline/issues/355)).
  id: totrans-2562
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 要求仅仅是positional args只出现在kwargs之前（[355](https://github.com/stefan-jansen/zipline/issues/355)）。
- en: history() has been ported from Quantopian to Zipline and provides moving window
    of market data. history() replaces BatchTransform. It is faster, works for minute
    level data and has a superior interface. To use it, call `add_history()` inside
    of `initialize()` and then receive a pandas `DataFrame` by calling history() from
    inside `handle_data()`. Check out the [tutorial](http://nbviewer.ipython.org/github/quantopian/zipline/blob/master/docs/tutorial.ipynb)
    and an [example](https://github.com/quantopian/zipline/blob/master/zipline/examples/dual_moving_average.py).
    ([345](https://github.com/stefan-jansen/zipline/issues/345) and [357](https://github.com/stefan-jansen/zipline/issues/357)).
  id: totrans-2563
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`history()`已从Quantopian移植到Zipline，并提供市场数据的移动窗口。`history()`取代了BatchTransform。它更快，适用于分钟级数据，并且具有更优越的接口。要使用它，请在`initialize()`内部调用`add_history()`，然后在`handle_data()`内部通过调用`history()`接收一个pandas
    `DataFrame`。查看[教程](http://nbviewer.ipython.org/github/quantopian/zipline/blob/master/docs/tutorial.ipynb)和[示例](https://github.com/quantopian/zipline/blob/master/zipline/examples/dual_moving_average.py)。（[345](https://github.com/stefan-jansen/zipline/issues/345)和[357](https://github.com/stefan-jansen/zipline/issues/357)）。'
- en: history() now supports `1m` window lengths ([345](https://github.com/stefan-jansen/zipline/issues/345)).
  id: totrans-2564
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`history()`现在支持`1m`窗口长度（[345](https://github.com/stefan-jansen/zipline/issues/345)）。'
- en: Bug Fixes
  id: totrans-2565
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 错误修复
- en: Fix alignment of trading days and open and closes in trading environment ([331](https://github.com/stefan-jansen/zipline/issues/331)).
  id: totrans-2566
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复交易环境中的交易日、开盘和收盘对齐问题（[331](https://github.com/stefan-jansen/zipline/issues/331)）。
- en: RollingPanel fix when adding/dropping new fields ([349](https://github.com/stefan-jansen/zipline/issues/349)).
  id: totrans-2567
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复添加/删除新字段时的滚动面板问题（[349](https://github.com/stefan-jansen/zipline/issues/349)）。
- en: Performance
  id: totrans-2568
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 性能
- en: None
  id: totrans-2569
  prefs: []
  type: TYPE_NORMAL
  zh: 无
- en: Maintenance and Refactorings
  id: totrans-2570
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 维护和重构
- en: Removed undocumented and untested HDF5 and CSV data sources ([267](https://github.com/stefan-jansen/zipline/issues/267)).
  id: totrans-2571
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 移除未记录和未测试的HDF5和CSV数据源（[267](https://github.com/stefan-jansen/zipline/issues/267)）。
- en: Refactor sim_params ([352](https://github.com/stefan-jansen/zipline/issues/352)).
  id: totrans-2572
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 重构sim_params（[352](https://github.com/stefan-jansen/zipline/issues/352)）。
- en: Refactoring of history ([340](https://github.com/stefan-jansen/zipline/issues/340)).
  id: totrans-2573
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 重构历史记录（[340](https://github.com/stefan-jansen/zipline/issues/340)）。
- en: Build
  id: totrans-2574
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 构建
- en: 'The following dependencies have been updated (zipline might work with other
    versions too):'
  id: totrans-2575
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 以下依赖项已更新（zipline可能也与其他版本兼容）：
- en: '[PRE69]'
  id: totrans-2576
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE69]'
- en: Contributors
  id: totrans-2577
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 贡献者
- en: 'The following people have contributed to this release, ordered by numbers of
    commit:'
  id: totrans-2578
  prefs: []
  type: TYPE_NORMAL
  zh: 以下按提交次数排序的人员为本次发布做出了贡献：
- en: '[PRE70]'
  id: totrans-2579
  prefs: []
  type: TYPE_PRE
  zh: '[PRE70]'
- en: Highlights
  id: totrans-2580
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 亮点
- en: Command line interface to run algorithms directly.
  id: totrans-2581
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 直接运行算法的命令行界面。
- en: IPython Magic `%%zipline` that runs algorithm defined in an IPython notebook
    cell.
  id: totrans-2582
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: IPython魔法命令`%%zipline`，用于在IPython笔记本单元格中运行定义的算法。
- en: API methods for building safeguards against runaway ordering and undesired short
    positions.
  id: totrans-2583
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 构建防止失控订单和不需要的空头头寸的安全措施的API方法。
- en: New history() function to get a moving DataFrame of past market data (replaces
    BatchTransform).
  id: totrans-2584
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新增`history()`函数以获取过去市场数据的移动`DataFrame`（取代BatchTransform）。
- en: A new [beginner tutorial](http://nbviewer.ipython.org/github/quantopian/zipline/blob/master/docs/tutorial.ipynb).
  id: totrans-2585
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新增[入门教程](http://nbviewer.ipython.org/github/quantopian/zipline/blob/master/docs/tutorial.ipynb)。
- en: Enhancements
  id: totrans-2586
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 增强功能
- en: 'CLI: Adds a CLI and IPython magic for zipline. Example:'
  id: totrans-2587
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: CLI：添加了zipline的CLI和IPython魔法。示例：
- en: '[PRE71]'
  id: totrans-2588
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE71]'
- en: Grabs the data from yahoo finance, runs the file dual_moving_avg.py (and looks
    for `dual_moving_avg_analyze.py` which, if found, will be executed after the algorithm
    has been run), and outputs the perf `DataFrame` to `dma.pickle` ([325](https://github.com/stefan-jansen/zipline/issues/325)).
  id: totrans-2589
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 从雅虎财经获取数据，运行`dual_moving_avg.py`文件（并查找`dual_moving_avg_analyze.py`，如果找到，将在算法运行后执行），并将性能`DataFrame`输出到`dma.pickle`（[325](https://github.com/stefan-jansen/zipline/issues/325)）。
- en: 'IPython magic command (at the top of an IPython notebook cell). Example:'
  id: totrans-2590
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: IPython魔法命令（在IPython笔记本单元格顶部）。示例：
- en: '[PRE72]'
  id: totrans-2591
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE72]'
- en: Does the same as above except instead of executing the file looks for the algorithm
    in the cell and instead of outputting the perf df to a file, creates a variable
    in the namespace called perf ([325](https://github.com/stefan-jansen/zipline/issues/325)).
  id: totrans-2592
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 与上述相同，只是不是执行文件，而是查找单元格中的算法，并且不是将性能数据框输出到文件，而是在命名空间中创建一个名为perf的变量（[325](https://github.com/stefan-jansen/zipline/issues/325)）。
- en: Adds Trading Controls to the algorithm API.
  id: totrans-2593
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 向算法API添加了交易控制。
- en: 'The following functions are now available on `TradingAlgorithm` and for algo
    scripts:'
  id: totrans-2594
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 以下函数现在在`TradingAlgorithm`和算法脚本中可用：
- en: '`set_max_order_size(self, sid=None, max_shares=None, max_notional=None)` Set
    a limit on the absolute magnitude, in shares and/or total dollar value, of any
    single order placed by this algorithm for a given sid. If `sid` is None, then
    the rule is applied to any order placed by the algorithm. Example:'
  id: totrans-2595
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '`set_max_order_size(self, sid=None, max_shares=None, max_notional=None)` 为该算法为特定sid下的任何单个订单设置绝对量级限制，单位为股份和/或总美元价值。如果`sid`为None，则该规则适用于该算法下的任何订单。示例：'
- en: '[PRE73]'
  id: totrans-2596
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE73]'
- en: '`set_max_position_size(self, sid=None, max_shares=None, max_notional=None)`
    -Set a limit on the absolute magnitude, in either shares or dollar value, of any
    position held by the algorithm for a given sid. If `sid` is None, then the rule
    is applied to any position held by the algorithm. Example:'
  id: totrans-2597
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '`set_max_position_size(self, sid=None, max_shares=None, max_notional=None)`
    - 为该算法为特定sid下的任何持仓设置绝对量级限制，单位为股份或美元价值。如果`sid`为None，则该规则适用于该算法下的任何持仓。示例：'
- en: '[PRE74]'
  id: totrans-2598
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE74]'
- en: '[PRE75]'
  id: totrans-2599
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE75]'
- en: '`set_long_only(self)` Set a rule specifying that the algorithm may not hold
    short positions. Example:'
  id: totrans-2600
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '`set_long_only(self)` 设置一条规则，指定算法不得持有空头仓位。示例：'
- en: '[PRE76]'
  id: totrans-2601
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE76]'
- en: ([329](https://github.com/stefan-jansen/zipline/issues/329)).
  id: totrans-2602
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: （[329](https://github.com/stefan-jansen/zipline/issues/329)）。
- en: Adds an `all_api_methods` classmethod on `TradingAlgorithm` that returns a list
    of all `TradingAlgorithm` API methods ([333](https://github.com/stefan-jansen/zipline/issues/333)).
  id: totrans-2603
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在`TradingAlgorithm`上添加了一个`all_api_methods`类方法，该方法返回所有`TradingAlgorithm` API方法的列表（[333](https://github.com/stefan-jansen/zipline/issues/333)）。
- en: 'Expanded record() functionality for dynamic naming. The record() function can
    now take positional args before the kwargs. All original usage and functionality
    is the same, but now these extra usages will work:'
  id: totrans-2604
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 扩展了record()函数的动态命名功能。record()函数现在可以接受位置参数出现在关键字参数之前。所有原始用法和功能保持不变，但现在这些额外的用法将有效：
- en: '[PRE77]'
  id: totrans-2605
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE77]'
- en: The requirements are simply that the poritional args occur only before the kwargs
    ([355](https://github.com/stefan-jansen/zipline/issues/355)).
  id: totrans-2606
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 要求很简单，即位置参数必须出现在关键字参数之前（[355](https://github.com/stefan-jansen/zipline/issues/355)）。
- en: history() has been ported from Quantopian to Zipline and provides moving window
    of market data. history() replaces BatchTransform. It is faster, works for minute
    level data and has a superior interface. To use it, call `add_history()` inside
    of `initialize()` and then receive a pandas `DataFrame` by calling history() from
    inside `handle_data()`. Check out the [tutorial](http://nbviewer.ipython.org/github/quantopian/zipline/blob/master/docs/tutorial.ipynb)
    and an [example](https://github.com/quantopian/zipline/blob/master/zipline/examples/dual_moving_average.py).
    ([345](https://github.com/stefan-jansen/zipline/issues/345) and [357](https://github.com/stefan-jansen/zipline/issues/357)).
  id: totrans-2607
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: history()已从Quantopian移植到Zipline，并提供市场数据的移动窗口。history()取代了BatchTransform。它更快，适用于分钟级别的数据，并且具有更优越的接口。要使用它，请在`initialize()`内部调用`add_history()`，然后在`handle_data()`内部调用history()以接收一个pandas
    `DataFrame`。查看[教程](http://nbviewer.ipython.org/github/quantopian/zipline/blob/master/docs/tutorial.ipynb)和[示例](https://github.com/quantopian/zipline/blob/master/zipline/examples/dual_moving_average.py)。（[345](https://github.com/stefan-jansen/zipline/issues/345)和[357](https://github.com/stefan-jansen/zipline/issues/357)）。
- en: history() now supports `1m` window lengths ([345](https://github.com/stefan-jansen/zipline/issues/345)).
  id: totrans-2608
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: history()现在支持`1m`窗口长度（[345](https://github.com/stefan-jansen/zipline/issues/345)）。
- en: Bug Fixes
  id: totrans-2609
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 错误修复
- en: Fix alignment of trading days and open and closes in trading environment ([331](https://github.com/stefan-jansen/zipline/issues/331)).
  id: totrans-2610
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了交易日的对齐以及交易环境中的开盘和收盘问题（[331](https://github.com/stefan-jansen/zipline/issues/331)）。
- en: RollingPanel fix when adding/dropping new fields ([349](https://github.com/stefan-jansen/zipline/issues/349)).
  id: totrans-2611
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了添加/删除新字段时的RollingPanel问题（[349](https://github.com/stefan-jansen/zipline/issues/349)）。
- en: Performance
  id: totrans-2612
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 性能
- en: None
  id: totrans-2613
  prefs: []
  type: TYPE_NORMAL
  zh: 无
- en: Maintenance and Refactorings
  id: totrans-2614
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 维护和重构
- en: Removed undocumented and untested HDF5 and CSV data sources ([267](https://github.com/stefan-jansen/zipline/issues/267)).
  id: totrans-2615
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 删除了未记录和未测试的HDF5和CSV数据源（[267](https://github.com/stefan-jansen/zipline/issues/267)）。
- en: Refactor sim_params ([352](https://github.com/stefan-jansen/zipline/issues/352)).
  id: totrans-2616
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 重构sim_params（[352](https://github.com/stefan-jansen/zipline/issues/352)）。
- en: Refactoring of history ([340](https://github.com/stefan-jansen/zipline/issues/340)).
  id: totrans-2617
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 重构历史记录（[340](https://github.com/stefan-jansen/zipline/issues/340)）。
- en: Build
  id: totrans-2618
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 构建
- en: 'The following dependencies have been updated (zipline might work with other
    versions too):'
  id: totrans-2619
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 以下依赖项已更新（zipline可能与其他版本也兼容）：
- en: '[PRE78]'
  id: totrans-2620
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE78]'
- en: Contributors
  id: totrans-2621
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 贡献者
- en: 'The following people have contributed to this release, ordered by numbers of
    commit:'
  id: totrans-2622
  prefs: []
  type: TYPE_NORMAL
  zh: 以下人员对此次发布做出了贡献，按提交次数排序：
- en: '[PRE79]'
  id: totrans-2623
  prefs: []
  type: TYPE_PRE
  zh: '[PRE79]'
- en: Release 0.6.1
  id: totrans-2624
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 发布0.6.1
- en: 'Release:'
  id: totrans-2625
  prefs: []
  type: TYPE_NORMAL
  zh: 发布：
- en: 0.6.1
  id: totrans-2626
  prefs: []
  type: TYPE_NORMAL
  zh: 0.6.1
- en: 'Date:'
  id: totrans-2627
  prefs: []
  type: TYPE_NORMAL
  zh: 日期：
- en: April 23, 2014
  id: totrans-2628
  prefs: []
  type: TYPE_NORMAL
  zh: 2014年4月23日
- en: Highlights
  id: totrans-2629
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 亮点
- en: Major fixes to risk calculations, see Bug Fixes section.
  id: totrans-2630
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对风险计算进行了重大修复，参见Bug Fixes部分。
- en: Port of `history()` function, see Enhancements section
  id: totrans-2631
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 移植`history()`函数，参见Enhancements部分。
- en: Start of support for Quantopian algorithm script-syntax, see ENH section.
  id: totrans-2632
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 开始支持Quantopian算法脚本语法，参见ENH部分。
- en: conda package manager support, see Build section.
  id: totrans-2633
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: conda包管理器支持，参见Build部分。
- en: Enhancements
  id: totrans-2634
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 增强功能
- en: Always process new orders i.e. on bars where `handle_data` isn’t called, but
    there is ‘clock’ data e.g. a consistent benchmark, process orders.
  id: totrans-2635
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 始终处理新订单，即在`handle_data`未被调用的条上，但有“时钟”数据，例如一致的基准，处理订单。
- en: Empty positions are now filtered from the portfolio container. To help prevent
    algorithms from operating on positions that are not in the existing universe of
    stocks. Formerly, iterating over positions would return positions for stocks which
    had zero shares held. (Where an explicit check in algorithm code for `pos.amount
    != 0` could prevent from using a non-existent position.)
  id: totrans-2636
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 现在，投资组合容器中的空位已被过滤掉，以帮助防止算法对不在现有股票池中的股票进行操作。以前，遍历仓位会返回持有零股股票的仓位。（在算法代码中进行显式检查，如`pos.amount
    != 0`，可以防止使用不存在的仓位。）
- en: Add trading calendar for BMF&Bovespa.
  id: totrans-2637
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加BMF&Bovespa交易日历。
- en: Add beginning of algo script support.
  id: totrans-2638
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加算法脚本支持的开始。
- en: 'Starts on the path of parity with the script syntax in Quantopian’s IDE on
    [https://quantopian.com](https://quantopian.com) Example:'
  id: totrans-2639
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 开始与Quantopian的IDE中的脚本语法实现路径对等，[https://quantopian.com](https://quantopian.com)
    示例：
- en: '[PRE80]'
  id: totrans-2640
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE80]'
- en: Add HDF5 and CSV sources.
  id: totrans-2641
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加HDF5和CSV数据源。
- en: Limit `handle_data` to times with market data. To prevent cases where custom
    data types had unaligned timestamps, only call `handle_data` when market data
    passes through. Custom data that comes before market data will still update the
    data bar. But the handling of that data will only be done when there is actionable
    market data.
  id: totrans-2642
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 限制`handle_data`在有市场数据时调用。为了防止自定义数据类型的时间戳未对齐的情况，只在市场数据通过时调用`handle_data`。在市场数据之前到达的自定义数据仍会更新数据条，但处理该数据的操作只会在有可操作市场数据时进行。
- en: Extended commission PerShare method to allow a minimum cost per trade.
  id: totrans-2643
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 扩展每股的佣金方法，允许每笔交易有最低成本。
- en: Add symbol api function A `symbol()` lookup feature was added to Quantopian.
    By adding the same API function to zipline we can make copy&pasting of a Zipline
    algo to Quantopian easier.
  id: totrans-2644
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加符号API函数。Quantopian添加了一个`symbol()`查找功能。通过在zipline中添加相同的API函数，我们可以使将Zipline算法复制粘贴到Quantopian变得更加容易。
- en: Add simulated random trade source. Added a new data source that emits events
    with certain user-specified frequency (minute or daily). This allows users to
    backtest and debug an algorithm in minute mode to provide a cleaner path towards
    Quantopian.
  id: totrans-2645
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加模拟随机交易数据源。添加了一个新的数据源，该数据源以特定的用户指定频率（分钟或每日）发出事件。这允许用户在分钟模式下进行回测和调试算法，为通往Quantopian提供了一条更清晰的途径。
- en: 'Remove dependency on benchmark for trading day calendar. Instead of the benchmarks’
    index, the trading calendar is now used to populate the environment’s trading
    days. Remove `extra_date` field, since unlike the benchmarks list, the trading
    calendar can generate future dates, so dates for current day trading do not need
    to be appended. Motivations:'
  id: totrans-2646
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 移除对基准的依赖以获取交易日历。交易日历现在用于填充环境中的交易日，而不是基准的索引。移除`extra_date`字段，因为与基准列表不同，交易日历可以生成未来日期，因此不需要为当天的交易添加日期。动机：
- en: The source for the open and close/early close calendar and the trading day calendar
    is now the same, which should help prevent potential issues due to misalignment.
  id: totrans-2647
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 开盘和收盘/提前收盘日历以及交易日历的来源现在是相同的，这应该有助于防止由于错位而可能出现的问题。
- en: Allows configurations where the benchmark is provided as a generator based data
    source to need to supply a second benchmark list just to populate dates.
  id: totrans-2648
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 允许配置，其中基准由基于生成器的数据源提供，无需为了填充日期而提供第二个基准列表。
- en: Port `history()` API method from Quantopian. Opens the core of the `history()`
    function that was previously only available on the Quantopian platform.
  id: totrans-2649
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从Quantopian移植`history()` API方法。开放了之前仅在Quantopian平台上可用的`history()`函数的核心部分。
- en: 'The history method is analoguous to the `batch_transform` function/decorator,
    but with a hopefully more precise specification of the frequency and period of
    the previous bar data that is captured. Example usage:'
  id: totrans-2650
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 历史方法类似于`batch_transform`函数/装饰器，但希望对捕获的前一根K线数据的频率和周期有更精确的规范。示例用法：
- en: '[PRE81]'
  id: totrans-2651
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE81]'
- en: N.B. this version of history lacks the backfilling capability that allows the
    return a full DataFrame on the first bar.
  id: totrans-2652
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意：此版本的历史方法缺少回填功能，该功能允许在第一根K线上返回完整的DataFrame。
- en: Bug Fixes
  id: totrans-2653
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 错误修复
- en: 'Adjust benchmark events to match market hours ([241](https://github.com/stefan-jansen/zipline/issues/241)).
    Previously benchmark events were emitted at 0:00 on the day the benchmark related
    to: in ‘minute’ emission mode this meant that the benchmarks were emitted before
    any intra-day trades were processed.'
  id: totrans-2654
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 调整基准事件以匹配市场时间（[241](https://github.com/stefan-jansen/zipline/issues/241)）。以前基准事件是在与基准相关的日期的0:00发出的：在“分钟”排放模式下，这意味着基准在处理任何日内交易之前发出。
- en: Ensure perf stats are generated for all days When running with minutely emissions
    the simulator would report to the user that it simulated ‘n - 1’ days (where n
    is the number of days specified in the simulation params). Now the correct number
    of trading days are reported as being simulated.
  id: totrans-2655
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 确保为所有交易日生成性能统计数据。当使用每分钟排放时，模拟器会向用户报告它模拟了“n - 1”天（其中n是在模拟参数中指定的天数）。现在报告了正确数量的交易日被模拟。
- en: Fix repr for cumulative risk metrics. The `__repr__` for RiskMetricsCumulative
    was referring to an older structure of the class, causing an exception when printed.
    Also, now prints the last values in the metrics DataFrame.
  id: totrans-2656
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修正累积风险指标的repr。RiskMetricsCumulative的`__repr__`引用了该类的旧结构，导致打印时出现异常。此外，现在打印了指标DataFrame中的最后值。
- en: Prevent minute emission from crashing at end of available data. The next day
    calculation was causing an error when a minute emission algorithm reached the
    end of available data. Instead of a generic exception when available data is reached,
    raise and catch a named exception so that the tradesimulation loop can skip over,
    since the next market close is not needed at the end.
  id: totrans-2657
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 防止在可用数据结束时分钟排放崩溃。下一天的计算在分钟排放算法到达可用数据结束时导致错误。当到达可用数据时，不再抛出通用异常，而是抛出一个命名的异常，以便交易模拟循环可以跳过，因为不需要下一个市场收盘。
- en: Fix pandas indexing in trading calendar. This could alternatively be filed under
    Performance. Index using loc instead of the inefficient index-ing of day, then
    time.
  id: totrans-2658
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修正交易日历中的pandas索引。这也可以归档在性能问题下。使用loc索引代替效率低下的按日索引，然后再按时间索引。
- en: Prevent crash in vwap transform due to non-existent member. The WrongDataForTransform
    was referencing a `self.fields` member, which did not exist. Add a self.fields
    member set to `price` and `volume` and use it to iterate over during the check.
  id: totrans-2659
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 防止由于不存在的成员导致的vwap转换崩溃。WrongDataForTransform正在引用一个不存在的`self.fields`成员。添加一个`self.fields`成员并设置为`price`和`volume`，并在检查期间使用它进行迭代。
- en: Fix max drawdown calculation. The input into max drawdown was incorrect, causing
    the bad results. i.e. the `compounded_log_returns` were not values representative
    of the algorithms total return at a given time, though `calculate_max_drawdown`
    was treating the values as if they were. Instead, the `algorithm_period_returns`
    series is now used, which does provide the total return.
  id: totrans-2660
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修正最大回撤计算。输入到最大回撤的数据不正确，导致结果不佳。即`compounded_log_returns`不是代表算法在给定时间的总回报的值，尽管`calculate_max_drawdown`将这些值视为如此。现在使用`algorithm_period_returns`系列，它确实提供了总回报。
- en: Fix cost basis calculation. Cost basis calculation now takes direction of txn
    into account. Closing a long position or covering a short shouldn’t affect the
    cost basis.
  id: totrans-2661
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修正成本基础计算。成本基础计算现在考虑了交易的方向。平仓多头或回补空头不应影响成本基础。
- en: Fix floating point error in `order()`. Where order amounts that were near an
    integer could accidentally be floored or ceilinged (depending on being postive
    or negative) to the wrong integer. e.g. an amount stored internally as -27.99999
    was converted to -27 instead of -28.
  id: totrans-2662
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复`order()`中的浮点错误。在订单数量接近整数时，可能会意外地被舍入或向上取整（取决于正负）到错误的整数。例如，内部存储为-27.99999的数量被转换为-27而不是-28。
- en: Update perf period state when positions are changed by splits. Otherwise, `self._position_amounts`
    will be out of sync with position.amount, etc.
  id: totrans-2663
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当持仓因拆分而变化时，更新绩效周期状态。否则，`self._position_amounts`将与position.amount等不同步。
- en: Fix misalignment of downside series calc when using exact dates. An oddity that
    was exposed while working on making the return series passed to the risk module
    more exact, the series comparison between the returns and mean returns was unbalanced,
    because the mean returns were not masked down to the downside data points; however,
    in most, if not all cases this was papered over by the call to `.valid()` which
    was removed in this change set.
  id: totrans-2664
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修正使用确切日期时下行系列计算的错位。在使传递给风险模块的回报系列更精确的工作中暴露出的一个奇怪现象是，回报和平均回报之间的系列比较是不平衡的，因为平均回报没有被屏蔽到下行数据点；然而，在大多数情况下，如果不是所有情况下，这都被`.valid()`调用所掩盖，这在这次变更集中被移除了。
- en: Check that self.logger exists before using it. `self.logger` is initialized
    as `None` and there is no guarantee that users have set it, so check that it exists
    before trying to pass messages to it.
  id: totrans-2665
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在使用之前检查`self.logger`是否存在。`self.logger`被初始化为`None`，不能保证用户已经设置它，所以在尝试向它传递消息之前检查它是否存在。
- en: Prevent out of sync market closes in performance tracker. In situations where
    the performance tracker has been reset or patched to handle state juggling with
    warming up live data, the `market_close` member of the performance tracker could
    end up out of sync with the current algo time as determined by the performance
    tracker. The symptom was dividends never triggering, because the end of day checks
    would not match the current time. Fix by having the tradesimulation loop be responsible,
    in minute/minute mode, for advancing the market close and passing that value to
    the performance tracker, instead of having the market close advanced by the performance
    tracker as well.
  id: totrans-2666
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 防止绩效跟踪器中的市场收盘不同步。在绩效跟踪器被重置或修补以处理与预热实时数据的状态切换的情况下，绩效跟踪器的`market_close`成员可能会与绩效跟踪器确定的当前算法时间不同步。症状是股息从未触发，因为收盘检查与当前时间不匹配。通过让交易模拟循环负责在每分钟/分钟模式下推进市场收盘，并将该值传递给绩效跟踪器，而不是让绩效跟踪器也推进市场收盘来修复。
- en: 'Fix numerous cumulative and period risk calculations. The calculations that
    are expected to change are:'
  id: totrans-2667
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修正多个累积和周期风险计算。预期会改变的计算包括：
- en: '`cumulative.beta`'
  id: totrans-2668
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`cumulative.beta`'
- en: '`cumulative.alpha`'
  id: totrans-2669
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`cumulative.alpha`'
- en: '`cumulative.information`'
  id: totrans-2670
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`cumulative.information`'
- en: '`cumulative.sharpe`'
  id: totrans-2671
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`cumulative.sharpe`'
- en: '`period.sortino`'
  id: totrans-2672
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`period.sortino`'
- en: How Risk Calculations Are Changing Risk Fixes for Both Period and Cumulative
  id: totrans-2673
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 风险计算如何变化：周期和累积风险修正
- en: Downside Risk
  id: totrans-2674
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 下行风险
- en: Use sample instead of population for standard deviation.
  id: totrans-2675
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 使用样本代替总体来计算标准差。
- en: Add a rounding factor, so that if the two values are close for a given dt, that
    they do not count as a downside value, which would throw off the denominator of
    the standard deviation of the downside diffs.
  id: totrans-2676
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 添加一个舍入因子，以便在给定的时间间隔内，如果两个值接近，它们不会被计为下行值，这会干扰下行差异标准差的分母。
- en: Standard Deviation Type
  id: totrans-2677
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 标准差类型
- en: Across the board the standard deviation has been standardized to using a ‘sample’
    calculation, whereas before cumulative risk was mostly using ‘population’. Using
    `ddof=1` with `np.std` calculates as if the values are a sample.
  id: totrans-2678
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 全面地将标准差计算标准化为使用“样本”计算，而在此之前，累积风险主要使用“总体”。使用`ddof=1`与`np.std`计算，就像值是样本一样。
- en: Cumulative Risk Fixes
  id: totrans-2679
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 累积风险修正
- en: Beta
  id: totrans-2680
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 贝塔
- en: Use the daily algorithm returns and benchmarks instead of annualized mean returns.
  id: totrans-2681
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 使用每日算法回报和基准，而不是年化平均回报。
- en: Volatility
  id: totrans-2682
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 波动率
- en: Use sample instead of population with standard deviation.
  id: totrans-2683
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 使用样本标准差代替总体标准差。
- en: The volatility is an input to other calculations so this change affects Sharpe
    and Information ratio calculations.
  id: totrans-2684
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 波动率是其他计算的输入，因此这个变化影响夏普和信息比率计算。
- en: Information Ratio
  id: totrans-2685
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 信息比率
- en: The benchmark returns input is changed from annualized benchmark returns to
    the annualized mean returns.
  id: totrans-2686
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 基准回报输入从年化基准回报更改为年化平均回报。
- en: Alpha
  id: totrans-2687
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 阿尔法
- en: The benchmark returns input is changed from annualized benchmark returns to
    the annualized mean returns.
  id: totrans-2688
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 基准回报输入从年化基准回报更改为年化平均回报。
- en: Period Risk Fixes
  id: totrans-2689
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 周期风险修正
- en: Sortino
  id: totrans-2690
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: Sortino
- en: Now uses the downside risk of the daily return vs. the mean algorithm returns
    for the minimum acceptable return instead of the treasury return.
  id: totrans-2691
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 现在使用每日回报相对于平均算法回报的下行风险，而不是国债回报作为最低可接受回报。
- en: The above required adding the calculation of the mean algorithm returns for
    period risk.
  id: totrans-2692
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 上述内容需要添加计算周期风险的平均算法返回。
- en: Also, uses `algorithm_period_returns` and `tresaury_period_return` as the cumulative
    Sortino does, instead of using algorithm returns for both inputs into the Sortino
    calculation.
  id: totrans-2693
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 此外，使用`algorithm_period_returns`和`tresaury_period_return`作为累积Sortino的输入，而不是使用算法返回作为Sortino计算的两个输入。
- en: Performance
  id: totrans-2694
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 性能
- en: Removed `alias_dt` transform in favor of property on SIDData. Adding a copy
    of the Event’s dt field as datetime via the `alias_dt` generator, so that the
    API was forgiving and allowed both datetime and dt on a SIDData object, was creating
    noticeable overhead, even on an noop algorithms. Instead of incurring the cost
    of copying the datetime value and assigning it to the Event object on every event
    that is passed through the system, add a property to SIDData which acts as an
    alias `datetime` to `dt`. Eventually support for `data['foo'].datetime` may be
    removed, and could be considered deprecated.
  id: totrans-2695
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 移除了`alias_dt`转换，转而在SIDData上添加属性。通过`alias_dt`生成器将事件的dt字段复制为datetime，以便API宽容并允许SIDData对象上同时存在datetime和dt，这产生了明显的开销，即使在noop算法中也是如此。不再为每个通过系统传递的事件复制datetime值并将其分配给事件对象而产生成本，而是在SIDData上添加一个属性，该属性作为`dt`的别名`datetime`。最终可能会移除对`data['foo'].datetime`的支持，并可能被视为已弃用。
- en: Remove the drop of ‘null return’ from cumulative returns. The check of existence
    of the null return key, and the drop of said return on every single bar was adding
    unneeded CPU time when an algorithm was run with minute emissions. Instead, add
    the 0.0 return with an index of the trading day before the start date. The removal
    of the `null return` was mainly in place so that the period calculation was not
    crashing on a non-date index value; with the index as a date, the period return
    can also approximate volatility (even though the that volatility has high noise-to-signal
    strength because it uses only two values as an input.)
  id: totrans-2696
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从累积返回中移除了“空返回”的丢弃。在每个条形图上检查空返回键的存在并丢弃该返回会增加不必要的CPU时间，当算法以分钟排放运行时。相反，在开始日期之前的交易日索引处添加0.0返回。移除`空返回`主要是为了防止周期计算在非日期索引值上崩溃；由于索引为日期，周期返回也可以近似波动性（尽管该波动性具有高噪声信号强度，因为它仅使用两个值作为输入。）
- en: Maintenance and Refactorings
  id: totrans-2697
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 维护和重构
- en: Allow `sim_params` to provide data frequency for the algorithm. In the case
    that `data_frequency` of the algorithm is None, allow the `sim_params` to provide
    the `data_frequency`.
  id: totrans-2698
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 允许`sim_params`为算法提供数据频率。如果算法的`data_frequency`为None，则允许`sim_params`提供`data_frequency`。
- en: Also, defer to the algorithms data frequency, if provided.
  id: totrans-2699
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 此外，如果提供了算法的数据频率，则推迟到该频率。
- en: Build
  id: totrans-2700
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 构建
- en: Added support for building and releasing via conda For those who prefer building
    with [https://docs.conda.io/en/latest/](https://docs.conda.io/en/latest/) to compiling
    locally with pip. The following should install Zipline on many systems.
  id: totrans-2701
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增加了通过conda进行构建和发布的支持。对于那些更喜欢使用[https://docs.conda.io/en/latest/](https://docs.conda.io/en/latest/)而不是使用pip本地编译的人来说，以下应该可以在许多系统上安装Zipline。
- en: '[PRE82]'
  id: totrans-2702
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE82]'
- en: Contributors
  id: totrans-2703
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 贡献者
- en: 'The following people have contributed to this release, ordered by numbers of
    commit:'
  id: totrans-2704
  prefs: []
  type: TYPE_NORMAL
  zh: 以下人员为本次发布做出了贡献，按提交次数排序：
- en: '[PRE83]'
  id: totrans-2705
  prefs: []
  type: TYPE_PRE
  zh: '[PRE83]'
- en: Highlights
  id: totrans-2706
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 亮点
- en: Major fixes to risk calculations, see Bug Fixes section.
  id: totrans-2707
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对风险计算进行了重大修复，请参阅错误修复部分。
- en: Port of `history()` function, see Enhancements section
  id: totrans-2708
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 移植`history()`函数，请参阅增强功能部分
- en: Start of support for Quantopian algorithm script-syntax, see ENH section.
  id: totrans-2709
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 开始支持Quantopian算法脚本语法，请参阅ENH部分。
- en: conda package manager support, see Build section.
  id: totrans-2710
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: conda包管理器支持，请参阅构建部分。
- en: Enhancements
  id: totrans-2711
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 增强功能
- en: Always process new orders i.e. on bars where `handle_data` isn’t called, but
    there is ‘clock’ data e.g. a consistent benchmark, process orders.
  id: totrans-2712
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 始终处理新订单，即在`handle_data`未被调用的条形图上，但存在“时钟”数据（例如，一致的基准），处理订单。
- en: Empty positions are now filtered from the portfolio container. To help prevent
    algorithms from operating on positions that are not in the existing universe of
    stocks. Formerly, iterating over positions would return positions for stocks which
    had zero shares held. (Where an explicit check in algorithm code for `pos.amount
    != 0` could prevent from using a non-existent position.)
  id: totrans-2713
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 现在从投资组合容器中过滤掉空仓位。这有助于防止算法对不在现有股票范围内的仓位进行操作。以前，遍历仓位会返回持有零股的股票仓位。（通过在算法代码中显式检查`pos.amount
    != 0`可以防止使用不存在的仓位。）
- en: Add trading calendar for BMF&Bovespa.
  id: totrans-2714
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加BMF&Bovespa的交易日历。
- en: Add beginning of algo script support.
  id: totrans-2715
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加算法脚本支持的开始。
- en: 'Starts on the path of parity with the script syntax in Quantopian’s IDE on
    [https://quantopian.com](https://quantopian.com) Example:'
  id: totrans-2716
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 开始与Quantopian的IDE中的脚本语法保持一致的路径（[https://quantopian.com](https://quantopian.com)）示例：
- en: '[PRE84]'
  id: totrans-2717
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE84]'
- en: Add HDF5 and CSV sources.
  id: totrans-2718
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加HDF5和CSV数据源。
- en: Limit `handle_data` to times with market data. To prevent cases where custom
    data types had unaligned timestamps, only call `handle_data` when market data
    passes through. Custom data that comes before market data will still update the
    data bar. But the handling of that data will only be done when there is actionable
    market data.
  id: totrans-2719
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 限制`handle_data`仅在市场数据时间调用。为了避免自定义数据类型的时间戳未对齐的情况，仅在市场数据通过时调用`handle_data`。在市场数据之前到达的自定义数据仍会更新数据条，但只有在有可操作的市场数据时才会处理这些数据。
- en: Extended commission PerShare method to allow a minimum cost per trade.
  id: totrans-2720
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 扩展每股的佣金方法以允许每笔交易的最小成本。
- en: Add symbol api function A `symbol()` lookup feature was added to Quantopian.
    By adding the same API function to zipline we can make copy&pasting of a Zipline
    algo to Quantopian easier.
  id: totrans-2721
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加符号API函数。Quantopian添加了一个`symbol()`查找功能。通过在zipline中添加相同的API函数，我们可以使将Zipline算法复制粘贴到Quantopian变得更加容易。
- en: Add simulated random trade source. Added a new data source that emits events
    with certain user-specified frequency (minute or daily). This allows users to
    backtest and debug an algorithm in minute mode to provide a cleaner path towards
    Quantopian.
  id: totrans-2722
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加模拟随机交易源。添加了一个新的数据源，该数据源以用户指定的特定频率（分钟或每日）发出事件。这允许用户在分钟模式下进行回测和调试算法，为通往Quantopian提供了一条更清晰的途径。
- en: 'Remove dependency on benchmark for trading day calendar. Instead of the benchmarks’
    index, the trading calendar is now used to populate the environment’s trading
    days. Remove `extra_date` field, since unlike the benchmarks list, the trading
    calendar can generate future dates, so dates for current day trading do not need
    to be appended. Motivations:'
  id: totrans-2723
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 去除对基准的依赖以获取交易日历。现在不再使用基准的索引，而是使用交易日历来填充环境的交易日。移除`extra_date`字段，因为与基准列表不同，交易日历可以生成未来日期，因此不需要添加当前交易日的日期。动机：
- en: The source for the open and close/early close calendar and the trading day calendar
    is now the same, which should help prevent potential issues due to misalignment.
  id: totrans-2724
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 开盘和收盘/提前收盘日历以及交易日历的来源现在是相同的，这应该有助于防止由于错位而可能出现的问题。
- en: Allows configurations where the benchmark is provided as a generator based data
    source to need to supply a second benchmark list just to populate dates.
  id: totrans-2725
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 允许配置，其中基准作为基于生成器的数据源提供，无需提供第二个基准列表来填充日期。
- en: Port `history()` API method from Quantopian. Opens the core of the `history()`
    function that was previously only available on the Quantopian platform.
  id: totrans-2726
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从Quantopian移植`history()` API方法。打开了之前仅在Quantopian平台上可用的`history()`函数的核心。
- en: 'The history method is analoguous to the `batch_transform` function/decorator,
    but with a hopefully more precise specification of the frequency and period of
    the previous bar data that is captured. Example usage:'
  id: totrans-2727
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 历史方法类似于`batch_transform`函数/装饰器，但希望对捕获的前一个条形数据的频率和周期有更精确的规范。示例用法：
- en: '[PRE85]'
  id: totrans-2728
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE85]'
- en: N.B. this version of history lacks the backfilling capability that allows the
    return a full DataFrame on the first bar.
  id: totrans-2729
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意：此版本的历史记录缺少回填功能，该功能允许在第一个条形上返回完整的数据框。
- en: Bug Fixes
  id: totrans-2730
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 错误修复
- en: 'Adjust benchmark events to match market hours ([241](https://github.com/stefan-jansen/zipline/issues/241)).
    Previously benchmark events were emitted at 0:00 on the day the benchmark related
    to: in ‘minute’ emission mode this meant that the benchmarks were emitted before
    any intra-day trades were processed.'
  id: totrans-2731
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 调整基准事件以匹配市场时间（[241](https://github.com/stefan-jansen/zipline/issues/241)）。以前基准事件在基准相关日期的0:00发出：在“分钟”发射模式下，这意味着基准在处理任何日内交易之前发出。
- en: Ensure perf stats are generated for all days When running with minutely emissions
    the simulator would report to the user that it simulated ‘n - 1’ days (where n
    is the number of days specified in the simulation params). Now the correct number
    of trading days are reported as being simulated.
  id: totrans-2732
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 确保为所有交易日生成性能统计数据。在以每分钟发射运行时，模拟器会向用户报告它模拟了“n - 1”天（其中n是模拟参数中指定的天数）。现在报告模拟了正确数量的交易日。
- en: Fix repr for cumulative risk metrics. The `__repr__` for RiskMetricsCumulative
    was referring to an older structure of the class, causing an exception when printed.
    Also, now prints the last values in the metrics DataFrame.
  id: totrans-2733
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复累积风险度量的repr。RiskMetricsCumulative的`__repr__`之前引用的是该类的旧结构，导致打印时出现异常。现在还会打印度量数据框中的最后一个值。
- en: Prevent minute emission from crashing at end of available data. The next day
    calculation was causing an error when a minute emission algorithm reached the
    end of available data. Instead of a generic exception when available data is reached,
    raise and catch a named exception so that the tradesimulation loop can skip over,
    since the next market close is not needed at the end.
  id: totrans-2734
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 防止分钟级数据发射在数据可用性结束时崩溃。下一天的计算在分钟级数据发射算法到达数据可用性结束时引发了错误。现在不再是在数据可用性结束时抛出通用异常，而是抛出一个命名的异常并捕获它，以便交易模拟循环可以跳过，因为在结束时不需要下一个市场收盘。
- en: Fix pandas indexing in trading calendar. This could alternatively be filed under
    Performance. Index using loc instead of the inefficient index-ing of day, then
    time.
  id: totrans-2735
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修正交易日历中的pandas索引。这也可以归类为性能问题。使用loc进行索引，而不是效率低下的逐日索引，然后再按时间索引。
- en: Prevent crash in vwap transform due to non-existent member. The WrongDataForTransform
    was referencing a `self.fields` member, which did not exist. Add a self.fields
    member set to `price` and `volume` and use it to iterate over during the check.
  id: totrans-2736
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 防止由于不存在成员导致的vwap转换崩溃。WrongDataForTransform引用了不存在的`self.fields`成员。添加一个`self.fields`成员，设置为`price`和`volume`，并在检查过程中使用它进行迭代。
- en: Fix max drawdown calculation. The input into max drawdown was incorrect, causing
    the bad results. i.e. the `compounded_log_returns` were not values representative
    of the algorithms total return at a given time, though `calculate_max_drawdown`
    was treating the values as if they were. Instead, the `algorithm_period_returns`
    series is now used, which does provide the total return.
  id: totrans-2737
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修正最大回撤计算。输入到最大回撤的值不正确，导致结果不佳。即`compounded_log_returns`并不代表算法在特定时间的总回报，尽管`calculate_max_drawdown`将其视为如此。现在改用`algorithm_period_returns`序列，它确实提供了总回报。
- en: Fix cost basis calculation. Cost basis calculation now takes direction of txn
    into account. Closing a long position or covering a short shouldn’t affect the
    cost basis.
  id: totrans-2738
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修正成本基础计算。成本基础计算现在考虑了交易的方向。关闭多头头寸或平仓空头头寸不应影响成本基础。
- en: Fix floating point error in `order()`. Where order amounts that were near an
    integer could accidentally be floored or ceilinged (depending on being postive
    or negative) to the wrong integer. e.g. an amount stored internally as -27.99999
    was converted to -27 instead of -28.
  id: totrans-2739
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修正`order()`中的浮点错误。当订单金额接近整数时，可能会意外地被向下取整或向上取整（取决于正负）到错误的整数。例如，内部存储为-27.99999的金额被转换为-27而不是-28。
- en: Update perf period state when positions are changed by splits. Otherwise, `self._position_amounts`
    will be out of sync with position.amount, etc.
  id: totrans-2740
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当持仓因拆分而改变时更新性能周期状态。否则，`self._position_amounts`将与position.amount等不同步。
- en: Fix misalignment of downside series calc when using exact dates. An oddity that
    was exposed while working on making the return series passed to the risk module
    more exact, the series comparison between the returns and mean returns was unbalanced,
    because the mean returns were not masked down to the downside data points; however,
    in most, if not all cases this was papered over by the call to `.valid()` which
    was removed in this change set.
  id: totrans-2741
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修正使用精确日期时的下行系列计算错位。在努力使传递给风险模块的回报系列更加精确时暴露出的一个奇怪问题，回报与平均回报之间的系列比较不平衡，因为平均回报没有被屏蔽到下行数据点；然而，在大多数情况下，如果不是所有情况下，这都是通过调用`.valid()`来掩盖的，这在此次更改集中被移除了。
- en: Check that self.logger exists before using it. `self.logger` is initialized
    as `None` and there is no guarantee that users have set it, so check that it exists
    before trying to pass messages to it.
  id: totrans-2742
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在使用self.logger之前检查它是否存在。`self.logger`被初始化为`None`，不能保证用户已经设置它，所以在尝试向它传递消息之前检查它是否存在。
- en: Prevent out of sync market closes in performance tracker. In situations where
    the performance tracker has been reset or patched to handle state juggling with
    warming up live data, the `market_close` member of the performance tracker could
    end up out of sync with the current algo time as determined by the performance
    tracker. The symptom was dividends never triggering, because the end of day checks
    would not match the current time. Fix by having the tradesimulation loop be responsible,
    in minute/minute mode, for advancing the market close and passing that value to
    the performance tracker, instead of having the market close advanced by the performance
    tracker as well.
  id: totrans-2743
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 防止性能跟踪器中的不同步市场关闭。在性能跟踪器被重置或修补以处理与预热实时数据的状态切换的情况下，性能跟踪器的`market_close`成员可能会与性能跟踪器确定的当前算法时间不同步。症状是股息从未触发，因为收盘检查不会与当前时间匹配。通过让交易模拟循环负责在每分钟模式下推进市场关闭，并将该值传递给性能跟踪器来修复，而不是让性能跟踪器也推进市场关闭。
- en: 'Fix numerous cumulative and period risk calculations. The calculations that
    are expected to change are:'
  id: totrans-2744
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复多个累积和期间风险计算。预期会发生变化的计算包括：
- en: '`cumulative.beta`'
  id: totrans-2745
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`cumulative.beta`'
- en: '`cumulative.alpha`'
  id: totrans-2746
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`cumulative.alpha`'
- en: '`cumulative.information`'
  id: totrans-2747
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`cumulative.information`'
- en: '`cumulative.sharpe`'
  id: totrans-2748
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`cumulative.sharpe`'
- en: '`period.sortino`'
  id: totrans-2749
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`period.sortino`'
- en: How Risk Calculations Are Changing Risk Fixes for Both Period and Cumulative
  id: totrans-2750
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 风险计算如何变化，为期间和累积风险修复
- en: Downside Risk
  id: totrans-2751
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 下行风险
- en: Use sample instead of population for standard deviation.
  id: totrans-2752
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 使用样本而非总体来计算标准差。
- en: Add a rounding factor, so that if the two values are close for a given dt, that
    they do not count as a downside value, which would throw off the denominator of
    the standard deviation of the downside diffs.
  id: totrans-2753
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 添加一个四舍五入因子，以便在给定的时间间隔内，如果两个值接近，它们不会被计为下行值，这会影响下行差异标准差的分母。
- en: Standard Deviation Type
  id: totrans-2754
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 标准差类型
- en: Across the board the standard deviation has been standardized to using a ‘sample’
    calculation, whereas before cumulative risk was mostly using ‘population’. Using
    `ddof=1` with `np.std` calculates as if the values are a sample.
  id: totrans-2755
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 全面地将标准差标准化为使用“样本”计算，而之前累积风险主要使用“总体”。使用`ddof=1`与`np.std`计算，就像值是样本一样。
- en: Cumulative Risk Fixes
  id: totrans-2756
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 累积风险修复
- en: Beta
  id: totrans-2757
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 贝塔
- en: Use the daily algorithm returns and benchmarks instead of annualized mean returns.
  id: totrans-2758
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 使用每日算法回报和基准而非年化平均回报。
- en: Volatility
  id: totrans-2759
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 波动性
- en: Use sample instead of population with standard deviation.
  id: totrans-2760
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 使用样本而非总体来计算标准差。
- en: The volatility is an input to other calculations so this change affects Sharpe
    and Information ratio calculations.
  id: totrans-2761
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 波动性是其他计算的输入，因此这一变化影响夏普比率和信息比率计算。
- en: Information Ratio
  id: totrans-2762
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 信息比率
- en: The benchmark returns input is changed from annualized benchmark returns to
    the annualized mean returns.
  id: totrans-2763
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 基准回报输入已从年化基准回报更改为年化平均回报。
- en: Alpha
  id: totrans-2764
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 阿尔法
- en: The benchmark returns input is changed from annualized benchmark returns to
    the annualized mean returns.
  id: totrans-2765
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 基准回报输入已从年化基准回报更改为年化平均回报。
- en: Period Risk Fixes
  id: totrans-2766
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 期间风险修复
- en: Sortino
  id: totrans-2767
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 索提诺比率
- en: Now uses the downside risk of the daily return vs. the mean algorithm returns
    for the minimum acceptable return instead of the treasury return.
  id: totrans-2768
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 现在使用每日回报与平均算法回报的下行风险来计算最低可接受回报，而不是使用国债回报。
- en: The above required adding the calculation of the mean algorithm returns for
    period risk.
  id: totrans-2769
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 上述更改需要添加计算期间风险的平均算法回报。
- en: Also, uses `algorithm_period_returns` and `tresaury_period_return` as the cumulative
    Sortino does, instead of using algorithm returns for both inputs into the Sortino
    calculation.
  id: totrans-2770
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 此外，使用`algorithm_period_returns`和`tresaury_period_return`作为累积索提诺比率，而不是在索提诺计算中使用算法回报作为两个输入。
- en: Performance
  id: totrans-2771
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 性能
- en: Removed `alias_dt` transform in favor of property on SIDData. Adding a copy
    of the Event’s dt field as datetime via the `alias_dt` generator, so that the
    API was forgiving and allowed both datetime and dt on a SIDData object, was creating
    noticeable overhead, even on an noop algorithms. Instead of incurring the cost
    of copying the datetime value and assigning it to the Event object on every event
    that is passed through the system, add a property to SIDData which acts as an
    alias `datetime` to `dt`. Eventually support for `data['foo'].datetime` may be
    removed, and could be considered deprecated.
  id: totrans-2772
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 移除了`alias_dt`转换，转而在SIDData上添加属性。通过`alias_dt`生成器将事件的dt字段复制为datetime，以便API宽容并允许SIDData对象上同时存在datetime和dt，这即使在noop算法中也产生了明显的开销。不再为每个通过系统传递的事件对象复制datetime值并分配给它，而是在SIDData上添加一个属性，该属性作为`dt`的别名`datetime`。最终可能会移除对`data['foo'].datetime`的支持，并可能被视为已弃用。
- en: Remove the drop of ‘null return’ from cumulative returns. The check of existence
    of the null return key, and the drop of said return on every single bar was adding
    unneeded CPU time when an algorithm was run with minute emissions. Instead, add
    the 0.0 return with an index of the trading day before the start date. The removal
    of the `null return` was mainly in place so that the period calculation was not
    crashing on a non-date index value; with the index as a date, the period return
    can also approximate volatility (even though the that volatility has high noise-to-signal
    strength because it uses only two values as an input.)
  id: totrans-2773
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从累积回报中移除了“空回报”的丢弃。在每个单独的bar上检查空回报键的存在并丢弃该回报，在算法运行时增加了不必要的CPU时间。相反，在开始日期之前的交易日索引中添加0.0回报。移除`空回报`主要是为了确保周期计算不会因为非日期索引值而崩溃；由于索引为日期，周期回报也可以近似波动性（尽管该波动性具有高噪声信号强度，因为它仅使用两个值作为输入。）
- en: Maintenance and Refactorings
  id: totrans-2774
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 维护和重构
- en: Allow `sim_params` to provide data frequency for the algorithm. In the case
    that `data_frequency` of the algorithm is None, allow the `sim_params` to provide
    the `data_frequency`.
  id: totrans-2775
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 允许`sim_params`为算法提供数据频率。如果算法的`data_frequency`为None，允许`sim_params`提供`data_frequency`。
- en: Also, defer to the algorithms data frequency, if provided.
  id: totrans-2776
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 此外，如果提供了算法的数据频率，则推迟到该频率。
- en: Build
  id: totrans-2777
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 构建
- en: Added support for building and releasing via conda For those who prefer building
    with [https://docs.conda.io/en/latest/](https://docs.conda.io/en/latest/) to compiling
    locally with pip. The following should install Zipline on many systems.
  id: totrans-2778
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增加了通过conda进行构建和发布的支持。对于那些更喜欢使用[https://docs.conda.io/en/latest/](https://docs.conda.io/en/latest/)而不是使用pip本地编译的人来说。以下应该可以在许多系统上安装Zipline。
- en: '[PRE86]'
  id: totrans-2779
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE86]'
- en: Contributors
  id: totrans-2780
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 贡献者
- en: 'The following people have contributed to this release, ordered by numbers of
    commit:'
  id: totrans-2781
  prefs: []
  type: TYPE_NORMAL
  zh: 以下人员按提交次数顺序为本次发布做出了贡献：
- en: '[PRE87]'
  id: totrans-2782
  prefs: []
  type: TYPE_PRE
  zh: '[PRE87]'
