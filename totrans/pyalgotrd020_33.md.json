["```py\nfrom __future__ import print_function\n\nfrom pyalgotrade import strategy\nfrom pyalgotrade import plotter\nfrom pyalgotrade.tools import quandl\nfrom pyalgotrade.technical import bollinger\nfrom pyalgotrade.stratanalyzer import sharpe\nfrom pyalgotrade import broker as basebroker\n\nclass BBands(strategy.BacktestingStrategy):\n    def __init__(self, feed, instrument, bBandsPeriod):\n        super(BBands, self).__init__(feed)\n        self.__instrument = instrument\n        self.__bbands = bollinger.BollingerBands(feed[instrument].getCloseDataSeries(), bBandsPeriod, 2)\n\n    def getBollingerBands(self):\n        return self.__bbands\n\n    def onOrderUpdated(self, order):\n        if order.isBuy():\n            orderType = \"Buy\"\n        else:\n            orderType = \"Sell\"\n        self.info(\"%s order %d updated - Status: %s\" % (\n            orderType, order.getId(), basebroker.Order.State.toString(order.getState())\n        ))\n\n    def onBars(self, bars):\n        lower = self.__bbands.getLowerBand()[-1]\n        upper = self.__bbands.getUpperBand()[-1]\n        if lower is None:\n            return\n\n        shares = self.getBroker().getShares(self.__instrument)\n        bar = bars[self.__instrument]\n        if shares == 0 and bar.getClose() < lower:\n            sharesToBuy = int(self.getBroker().getCash(False) / bar.getClose())\n            self.info(\"Placing buy market order for %s shares\" % sharesToBuy)\n            self.marketOrder(self.__instrument, sharesToBuy)\n        elif shares > 0 and bar.getClose() > upper:\n            self.info(\"Placing sell market order for %s shares\" % shares)\n            self.marketOrder(self.__instrument, -1*shares)\n\ndef main(plot):\n    instrument = \"yhoo\"\n    bBandsPeriod = 40\n\n    # Download the bars.\n    feed = quandl.build_feed(\"WIKI\", [instrument], 2011, 2012, \".\")\n\n    strat = BBands(feed, instrument, bBandsPeriod)\n    sharpeRatioAnalyzer = sharpe.SharpeRatio()\n    strat.attachAnalyzer(sharpeRatioAnalyzer)\n\n    if plot:\n        plt = plotter.StrategyPlotter(strat, True, True, True)\n        plt.getInstrumentSubplot(instrument).addDataSeries(\"upper\", strat.getBollingerBands().getUpperBand())\n        plt.getInstrumentSubplot(instrument).addDataSeries(\"middle\", strat.getBollingerBands().getMiddleBand())\n        plt.getInstrumentSubplot(instrument).addDataSeries(\"lower\", strat.getBollingerBands().getLowerBand())\n\n    strat.run()\n    print(\"Sharpe ratio: %.2f\" % sharpeRatioAnalyzer.getSharpeRatio(0.05))\n\n    if plot:\n        plt.plot()\n\nif __name__ == \"__main__\":\n    main(True) \n```", "```py\n2011-07-20 00:00:00 strategy [INFO] Placing buy market order for 74183 shares\n2011-07-20 00:00:00 strategy [INFO] Buy order 1 updated - Status: SUBMITTED\n2011-07-21 00:00:00 strategy [INFO] Buy order 1 updated - Status: ACCEPTED\n2011-07-21 00:00:00 broker.backtesting [DEBUG] Not enough cash to fill yhoo order [1] for 74183 share/s\n2011-07-21 00:00:00 strategy [INFO] Buy order 1 updated - Status: CANCELED\n2011-07-21 00:00:00 strategy [INFO] Placing buy market order for 73583 shares\n2011-07-21 00:00:00 strategy [INFO] Buy order 2 updated - Status: SUBMITTED\n2011-07-22 00:00:00 strategy [INFO] Buy order 2 updated - Status: ACCEPTED\n2011-07-22 00:00:00 broker.backtesting [DEBUG] Not enough cash to fill yhoo order [2] for 73583 share/s\n2011-07-22 00:00:00 strategy [INFO] Buy order 2 updated - Status: CANCELED\n2011-07-25 00:00:00 strategy [INFO] Placing buy market order for 73046 shares\n2011-07-25 00:00:00 strategy [INFO] Buy order 3 updated - Status: SUBMITTED\n2011-07-26 00:00:00 strategy [INFO] Buy order 3 updated - Status: ACCEPTED\n2011-07-26 00:00:00 broker.backtesting [DEBUG] Not enough cash to fill yhoo order [3] for 73046 share/s\n2011-07-26 00:00:00 strategy [INFO] Buy order 3 updated - Status: CANCELED\n2011-07-27 00:00:00 strategy [INFO] Placing buy market order for 73610 shares\n2011-07-27 00:00:00 strategy [INFO] Buy order 4 updated - Status: SUBMITTED\n2011-07-28 00:00:00 strategy [INFO] Buy order 4 updated - Status: ACCEPTED\n2011-07-28 00:00:00 broker.backtesting [DEBUG] Not enough cash to fill yhoo order [4] for 73610 share/s\n2011-07-28 00:00:00 strategy [INFO] Buy order 4 updated - Status: CANCELED\n2011-07-28 00:00:00 strategy [INFO] Placing buy market order for 74074 shares\n2011-07-28 00:00:00 strategy [INFO] Buy order 5 updated - Status: SUBMITTED\n2011-07-29 00:00:00 strategy [INFO] Buy order 5 updated - Status: ACCEPTED\n2011-07-29 00:00:00 broker.backtesting [DEBUG] Not enough cash to fill yhoo order [5] for 74074 share/s\n2011-07-29 00:00:00 strategy [INFO] Buy order 5 updated - Status: CANCELED\n2011-07-29 00:00:00 strategy [INFO] Placing buy market order for 76335 shares\n2011-07-29 00:00:00 strategy [INFO] Buy order 6 updated - Status: SUBMITTED\n2011-08-01 00:00:00 strategy [INFO] Buy order 6 updated - Status: ACCEPTED\n2011-08-01 00:00:00 broker.backtesting [DEBUG] Not enough cash to fill yhoo order [6] for 76335 share/s\n2011-08-01 00:00:00 strategy [INFO] Buy order 6 updated - Status: CANCELED\n2011-08-01 00:00:00 strategy [INFO] Placing buy market order for 76335 shares\n2011-08-01 00:00:00 strategy [INFO] Buy order 7 updated - Status: SUBMITTED\n2011-08-02 00:00:00 strategy [INFO] Buy order 7 updated - Status: ACCEPTED\n2011-08-02 00:00:00 strategy [INFO] Buy order 7 updated - Status: FILLED\n2011-09-15 00:00:00 strategy [INFO] Placing sell market order for 76335 shares\n2011-09-15 00:00:00 strategy [INFO] Sell order 8 updated - Status: SUBMITTED\n2011-09-16 00:00:00 strategy [INFO] Sell order 8 updated - Status: ACCEPTED\n2011-09-16 00:00:00 strategy [INFO] Sell order 8 updated - Status: FILLED\n2012-02-17 00:00:00 strategy [INFO] Placing buy market order for 77454 shares\n2012-02-17 00:00:00 strategy [INFO] Buy order 9 updated - Status: SUBMITTED\n2012-02-21 00:00:00 strategy [INFO] Buy order 9 updated - Status: ACCEPTED\n2012-02-21 00:00:00 broker.backtesting [DEBUG] Not enough cash to fill yhoo order [9] for 77454 share/s\n2012-02-21 00:00:00 strategy [INFO] Buy order 9 updated - Status: CANCELED\n2012-02-21 00:00:00 strategy [INFO] Placing buy market order for 78819 shares\n2012-02-21 00:00:00 strategy [INFO] Buy order 10 updated - Status: SUBMITTED\n2012-02-22 00:00:00 strategy [INFO] Buy order 10 updated - Status: ACCEPTED\n2012-02-22 00:00:00 strategy [INFO] Buy order 10 updated - Status: FILLED\n2012-06-29 00:00:00 strategy [INFO] Placing sell market order for 78819 shares\n2012-06-29 00:00:00 strategy [INFO] Sell order 11 updated - Status: SUBMITTED\n2012-07-02 00:00:00 strategy [INFO] Sell order 11 updated - Status: ACCEPTED\n2012-07-02 00:00:00 strategy [INFO] Sell order 11 updated - Status: FILLED\n2012-08-10 00:00:00 strategy [INFO] Placing buy market order for 82565 shares\n2012-08-10 00:00:00 strategy [INFO] Buy order 12 updated - Status: SUBMITTED\n2012-08-13 00:00:00 strategy [INFO] Buy order 12 updated - Status: ACCEPTED\n2012-08-13 00:00:00 strategy [INFO] Buy order 12 updated - Status: FILLED\n2012-10-23 00:00:00 strategy [INFO] Placing sell market order for 82565 shares\n2012-10-23 00:00:00 strategy [INFO] Sell order 13 updated - Status: SUBMITTED\n2012-10-24 00:00:00 strategy [INFO] Sell order 13 updated - Status: ACCEPTED\n2012-10-24 00:00:00 strategy [INFO] Sell order 13 updated - Status: FILLED\nSharpe ratio: 0.71\n\n```"]